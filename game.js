var __extends=(this&&this.__extends)||(function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;})||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return extendStatics(d,b);};return function(d,b){extendStatics(d,b);function __(){this.constructor=d;}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};})();var game;(function(game){var CookiesMng=(function(){function CookiesMng(){}
CookiesMng.hasCookie=function(key){return CookiesMng.cookies.hasOwnProperty(key)&&CookiesMng.cookies[key]!==undefined;};CookiesMng.getCookie=function(key){return CookiesMng.cookies[key];};CookiesMng.saveCookie=function(key,data){CookiesMng.cookies[key]=data;var str="";for(var key in CookiesMng.cookies){document.cookie=CookiesMng.getCookiesStr(key,JSON.stringify(CookiesMng.cookies[key]),10);}
trace("document.cookie == "+document.cookie);};CookiesMng.getCookiesStr=function(name,value,days){if(days===void 0){days=10;}
if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toUTCString();}
else
var expires="";return name+"="+value+expires+";";};CookiesMng.initialize=function(){trace("document.cookie == "+document.cookie);document.cookie=CookiesMng.getCookiesStr('html5livvecasino','');var arr=document.cookie.split(';');var str="";CookiesMng.cookies={};for(var i=0;i<arr.length;i++){var arr2=arr[i].split('=');if(arr2.length!=2)
continue;var isJson=true;try{JSON.parse(arr2[1]);}
catch(e){isJson=false;}
if(isJson)
CookiesMng.cookies[arr2[0].trim()]=JSON.parse(arr2[1].trim());else
CookiesMng.cookies[arr2[0].trim()]=arr2[1].trim();}};CookiesMng.ROULETTE_SAVE_BET='ROULETTE_SAVE_BET';CookiesMng.BET_CONFIRM='BET_CONFIRM';return CookiesMng;}());game.CookiesMng=CookiesMng;})(game||(game={}));game.CookiesMng.initialize();var traceEnable=true;var isDebug;var Howl=eval('Howl');var Howler=eval('Howler');var dpr=1;var WEBRTC_INDEX=0;var DEFAULT_WEBRTC_INDEX=-1;var versionMap;function getVersionedUrl(url){if(!url){throw new Error('getVersionedUrl');}
if(!versionMap||!versionMap.assets)
return url;var key=url.split('?')[0];if(!versionMap.assets[key])
return url;if(url.indexOf('?')<0)
return url+'?v='+versionMap.assets[key].md5;else
return url+'&v='+versionMap.assets[key].md5;}
var orgPIXILoaderAdd=PIXI.loaders.Loader.prototype.add;PIXI.loaders.Loader.prototype.add=function(){var url="";if(arguments.length>=2&&arguments[1]){arguments[1]=getVersionedUrl(arguments[1]);url=arguments[1];}
else{arguments[0]=getVersionedUrl(arguments[0]);url=arguments[0];}
if(url.indexOf('banker_player.json')>0)
trace('banker_player.json ============================= '+core.VUtils.getObjKey(this));return orgPIXILoaderAdd.apply(this,arguments);};function roundFloat(num,d){if(d===void 0){d=1;}
return Math.round(num*10)/10;}
var Hls=eval('Hls');function trace(msg){if(isDebug)
console.log(msg);}
function stackTrace(){trace(new Error().stack);}
function debug(msg){if(debugTf)
debugTf.text=msg;}
var isChrome=!!window['chrome']&&!!window['chrome'].webstore;trace("isChrome: "+isChrome);var TweenMax=eval("TweenMax");var Linear=eval("Linear");var Quint=eval("Quint");var version=eval("version");var gameutils;var netutils;var GameEvent;var VMouseUtils;var debugTf;var TOKEN=null;var SYS_PARAM=null;var DOMAIN_NAME=null;var MAIN_DOMAIN=null;var PROTOCOL=null;var CONFIG_URL=null;var LOGIN_URL="https://m.{DOMAINLINK}/_Secure/Login.aspx";var FUND_TRANSFER_URL="https://fundtransfer.{DOMAINLINK}/minified.aspx?pid=3";var LIVE_CHAT="https://www.{DOMAIN_LINK}/common/livechat.ashx?&lang={LANGUAGE}&platform={PLATFORM}&url={CF1}&id={CF2}&";var MAINTENANCE_URL=null;var HOME_URL=null;var LOBBY_URL=null;var DOMAIN_LINK=null;var OPERATOR_ID=null;var DEFAULT_TABLE_ID=-1;var DEFAULT_TAB=-1;var DEFAULT_VIEW_MODE="";var SHOW_GAME_ADS=false;var GAME_KEY="";var LANG="";var ORG_LANG="";var TEST_SUPER98="";var TEST_GAME_RESULT="";var TEST_GAME_CARDS="";var COMMON_LANG="";var IS_UAT=false;var gameScale;var gameOrigin=new PIXI.Point();var sys;(function(sys){var win=window,nav=win.navigator,doc=document,docEle=doc.documentElement;var ua=nav.userAgent.toLowerCase();sys.OS_IOS="iOS";sys.OS_ANDROID="Android";sys.OS_WINDOWS="Windows";sys.OS_MARMALADE="Marmalade";sys.OS_LINUX="Linux";sys.OS_BADA="Bada";sys.OS_BLACKBERRY="Blackberry";sys.OS_OSX="OS X";sys.OS_WP8="WP8";sys.OS_WINRT="WINRT";sys.OS_UNIX="UNIX";sys.OS_UNKNOWN="Unknown";sys.UNKNOWN=-1;sys.WIN32=0;sys.LINUX=1;sys.MACOS=2;sys.ANDROID=3;sys.IPHONE=4;sys.IPAD=5;sys.BLACKBERRY=6;sys.NACL=7;sys.EMSCRIPTEN=8;sys.TIZEN=9;sys.WINRT=10;sys.WP8=11;sys.MOBILE_BROWSER=100;sys.DESKTOP_BROWSER=101;sys.BROWSER_TYPE_WECHAT="wechat";sys.BROWSER_TYPE_ANDROID="androidbrowser";sys.BROWSER_TYPE_IE="ie";sys.BROWSER_TYPE_QQ="qqbrowser";sys.BROWSER_TYPE_MOBILE_QQ="mqqbrowser";sys.BROWSER_TYPE_UC="ucbrowser";sys.BROWSER_TYPE_360="360browser";sys.BROWSER_TYPE_BAIDU_APP="baiduboxapp";sys.BROWSER_TYPE_BAIDU="baidubrowser";sys.BROWSER_TYPE_MAXTHON="maxthon";sys.BROWSER_TYPE_OPERA="opera";sys.BROWSER_TYPE_OUPENG="oupeng";sys.BROWSER_TYPE_MIUI="miuibrowser";sys.BROWSER_TYPE_FIREFOX="firefox";sys.BROWSER_TYPE_SAFARI="safari";sys.BROWSER_TYPE_CHROME="chrome";sys.BROWSER_TYPE_LIEBAO="liebao";sys.BROWSER_TYPE_QZONE="qzone";sys.BROWSER_TYPE_SOUGOU="sogou";sys.BROWSER_TYPE_UNKNOWN="unknown";(function(){var isAndroid=false,iOS=false,osVersion='',osMainVersion=0;var uaResult=/android (\d+(?:\.\d+)+)/i.exec(ua)||/android (\d+(?:\.\d+)+)/i.exec(nav.platform);if(uaResult){isAndroid=true;osVersion=uaResult[1]||'';osMainVersion=parseInt(osVersion)||0;}
uaResult=/(iPad|iPhone|iPod).*OS ((\d+_?){2,3})/i.exec(ua);if(uaResult){iOS=true;osVersion=uaResult[2]||'';osMainVersion=parseInt(osVersion)||0;}
else if(/(iPhone|iPad|iPod)/.exec(nav.platform)){iOS=true;osVersion='';osMainVersion=0;}
var osName=sys.OS_UNKNOWN;if(nav.appVersion.indexOf("Win")!==-1)
osName=sys.OS_WINDOWS;else if(iOS)
osName=sys.OS_IOS;else if(nav.appVersion.indexOf("Mac")!==-1)
osName=sys.OS_OSX;else if(nav.appVersion.indexOf("X11")!==-1&&nav.appVersion.indexOf("Linux")===-1)
osName=sys.OS_UNIX;else if(isAndroid)
osName=sys.OS_ANDROID;else if(nav.appVersion.indexOf("Linux")!==-1)
osName=sys.OS_LINUX;sys.os=osName;sys.osVersion=osVersion;sys.osMainVersion=osMainVersion;var typeReg1=/micromessenger|mqqbrowser|sogou|qzone|liebao|ucbrowser|360 aphone|360browser|baiduboxapp|baidubrowser|maxthon|mxbrowser|trident|miuibrowser/i;var typeReg2=/qqbrowser|chrome|safari|firefox|opr|oupeng|opera/i;var browserTypes=typeReg1.exec(ua);if(!browserTypes)
browserTypes=typeReg2.exec(ua);var browserType=browserTypes?browserTypes[0]:sys.BROWSER_TYPE_UNKNOWN;if(browserType==='micromessenger')
browserType=sys.BROWSER_TYPE_WECHAT;else if(browserType==="safari"&&(ua.match(/android.*applewebkit/)))
browserType=sys.BROWSER_TYPE_ANDROID;else if(browserType==="trident")
browserType=sys.BROWSER_TYPE_IE;else if(browserType==="360 aphone")
browserType=sys.BROWSER_TYPE_360;else if(browserType==="mxbrowser")
browserType=sys.BROWSER_TYPE_MAXTHON;else if(browserType==="opr")
browserType=sys.BROWSER_TYPE_OPERA;sys.browserType=browserType;})();sys.isMobile=/mobile|android|iphone|ipad/.test(ua);sys.platform=sys.isMobile?sys.MOBILE_BROWSER:sys.DESKTOP_BROWSER;sys.browserVersion="";(function(){var versionReg1=/(micromessenger|qq|mx|maxthon|baidu|sogou)(mobile)?(browser)?\/?([\d.]+)/i;var versionReg2=/(msie |rv:|firefox|chrome|ucbrowser|oupeng|opera|opr|safari|miui)(mobile)?(browser)?\/?([\d.]+)/i;var tmp=ua.match(versionReg1);if(!tmp)
tmp=ua.match(versionReg2);sys.browserVersion=tmp?tmp[4]:"";})();function getParam(url,key){if(url.indexOf("&"+key+"=")!=-1)
return url.split("&"+key+"=")[1].split("&")[0];if(url.indexOf("?"+key+"=")!=-1)
return url.split("?"+key+"=")[1].split("&")[0];return null;}
sys.getParam=getParam;function replaceParam(url,key,value){var param="";if(url.indexOf('?'+key+'=')!=-1)
param='?'+key+'=';else if(url.indexOf('&'+key+'=')!=-1)
param='&'+key+'=';if(param!=""){var arr=url.split(param);var idx=arr[1].indexOf('&');url=arr[0]+param+value+(idx==-1?'':arr[1].substring(idx,arr[1].length));}
else
url+=(url.indexOf('?')==-1?'?':'&')+key+"="+value;return url;}
sys.replaceParam=replaceParam;function updateParams(){DOMAIN_NAME=(location.hostname+"").split("/")[0];PROTOCOL=(location.href+"").split(":")[0];trace("PROTOCOL ========= "+PROTOCOL);trace("DOMAIN_NAME == "+DOMAIN_NAME);var arr=DOMAIN_NAME.split('.');if(arr.length>=3){arr.shift();MAIN_DOMAIN=arr.join('.');}
else
MAIN_DOMAIN=DOMAIN_NAME;IS_UAT=DOMAIN_NAME.indexOf("uat")>=0;var webrtc=getParam(window.location+"",'webrtc');if(webrtc)
DEFAULT_WEBRTC_INDEX=parseInt(webrtc);var configUrl=getParam(window.location+"",'config');if(configUrl)
CONFIG_URL=decodeURIComponent(configUrl);var loginUrl=getParam(window.location+"",'loginURL');if(loginUrl)
LOGIN_URL=decodeURIComponent(loginUrl);var homeUrl=getParam(window.location+"",'homeURL');if(homeUrl)
HOME_URL=decodeURIComponent(homeUrl);var fundUrl=getParam(window.location+"",'fundsURL');if(fundUrl)
FUND_TRANSFER_URL=decodeURIComponent(fundUrl);var domainLink=getParam(window.location+"",'domainlink');if(domainLink)
DOMAIN_LINK=decodeURIComponent(domainLink);else
DOMAIN_LINK=MAIN_DOMAIN;var defaultTableId=getParam(window.location+"",'tb');if(defaultTableId)
DEFAULT_TABLE_ID=parseInt(defaultTableId);var defaultTab=getParam(window.location+"",'tab');if(defaultTab)
DEFAULT_TAB=parseInt(defaultTab);var defaultMode=getParam(window.location+"",'m');if(defaultMode)
DEFAULT_VIEW_MODE=defaultMode;var super98=getParam(window.location+"",'super98');if(super98)
TEST_SUPER98=super98;var result=getParam(window.location+"",'result');if(result)
TEST_GAME_RESULT=result;var cards=getParam(window.location+"",'cards');if(cards)
TEST_GAME_CARDS=cards;var opId=getParam(window.location+"",'op');if(!opId)
opId='w88';OPERATOR_ID=opId;if(OPERATOR_ID.toUpperCase()=='AGGREGATEDFUN')
OPERATOR_ID='JOHNVERA';if(OPERATOR_ID.toLowerCase()=='w88'){var link=document.createElement('link');link.rel='icon';link.type="image/x-icon";link.href="ico/favicon.ico";document.head.appendChild(link);document.title='W88 Live Casino';}
else{document.title='Live Casino';}
var ads=getParam(window.location+"",'ads');if(ads&&opId.toLowerCase()=='w88')
SHOW_GAME_ADS=ads=='1';var sysParam=getParam(window.location+"",'sys');if(!sysParam)
sysParam='CASH';SYS_PARAM=sysParam;var d=getParam(window.location+"",'d');isDebug=d?parseInt(d):0;LIVE_CHAT=LIVE_CHAT.replace('{DOMAIN_LINK}',DOMAIN_LINK);LIVE_CHAT=LIVE_CHAT.replace('{LANGUAGE}',ORG_LANG);LIVE_CHAT=LIVE_CHAT.replace('{PLATFORM}','web');LIVE_CHAT=LIVE_CHAT.replace('{CF1}',PROTOCOL+"://casino."+DOMAIN_NAME);updateUrlsWithDomainLink();}
function updateUrlsWithDomainLink(){if(LOGIN_URL){LOGIN_URL=LOGIN_URL.replace("{DOMAINLINK}",DOMAIN_LINK);if(IS_UAT)
LOGIN_URL=LOGIN_URL.replace('https','http');}
if(HOME_URL){HOME_URL=HOME_URL.replace("{DOMAINLINK}",DOMAIN_LINK);if(IS_UAT)
HOME_URL=HOME_URL.replace('https','http');}
if(LOBBY_URL){LOBBY_URL=LOBBY_URL.replace("{DOMAINLINK}",DOMAIN_LINK);if(IS_UAT)
LOBBY_URL=LOBBY_URL.replace('https','http');}
if(FUND_TRANSFER_URL){FUND_TRANSFER_URL=FUND_TRANSFER_URL.replace("{DOMAINLINK}",DOMAIN_LINK);if(IS_UAT)
FUND_TRANSFER_URL=FUND_TRANSFER_URL.replace('https','http');}}
function updateToken(){TOKEN=null;var v=getParam(window.location+"","s");if(v)
TOKEN=v;v=getParam(window.location+"","token");if(v)
TOKEN=v;}
sys.updateToken=updateToken;function updateLang(){if((window.location+"").indexOf("&lang=")!=-1)
LANG=(window.location+"").split("&lang=")[1].split("&")[0];if((window.location+"").indexOf("?lang=")!=-1)
LANG=(window.location+"").split("?lang=")[1].split("&")[0];if(!LANG&&game.CookiesMng.hasCookie('language'))
LANG=game.CookiesMng.getCookie('language');if(!LANG)
LANG="en-us";if(LANG)
game.CookiesMng.saveCookie('language',LANG);ORG_LANG=LANG;switch(true){case(LANG.indexOf("us")>=0):case(LANG.indexOf("en")>=0):LANG="en";break;case(LANG.indexOf("cn")>=0):case(LANG.indexOf("zh")>=0):case(LANG.indexOf("cs")>=0):LANG="cs";break;case(LANG.indexOf("th")>=0):LANG="th";break;case(LANG.indexOf("vi")>=0):case(LANG.indexOf("vn")>=0):LANG="vn";break;case(LANG.indexOf("kr")>=0):LANG="kr";break;case(LANG.indexOf("km")>=0):case(LANG.indexOf("kh")>=0):LANG="kh";break;case(LANG.indexOf("id")>=0):LANG="id";break;case(LANG.indexOf("ja")>=0):case(LANG.indexOf("jp")>=0):LANG="jp";break;default:LANG="en";}
COMMON_LANG=LANG;}
sys.updateLang=updateLang;function UpdateCookie(){if(TOKEN){var d=new Date();d.setTime(d.getTime()+(1*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie='s='+TOKEN+';domain='+DOMAIN_NAME+';path=/;'+expires;document.cookie='g='+TOKEN+';domain='+DOMAIN_NAME+';path=/;'+expires;}}
sys.UpdateCookie=UpdateCookie;function loadFileAsync(url,callBack){var req=new XMLHttpRequest();req.open("GET",url,true);req.onreadystatechange=function(){if(req.readyState==4){callBack(req.responseText);}};req.send();}
sys.loadFileAsync=loadFileAsync;function sendRequestAsync(url,callBack,errorHdl){if(errorHdl===void 0){errorHdl=null;}
var req=new XMLHttpRequest();req.open("GET",url,true);req.onreadystatechange=function(){if(req.readyState==4){callBack(req.responseText);}};req.onerror=function(){console.log("request error: "+url);if(errorHdl)
errorHdl();};req.send();}
sys.sendRequestAsync=sendRequestAsync;function updateFromConfigFile(jsonStr){var jConfig=JSON.parse(jsonStr);if(jConfig.hasOwnProperty("loginURL")&&jConfig.loginURL.trim()!=""){LOGIN_URL=(jConfig.loginURL.split("?")[0]).replace("[{DOMAINLINK}]",DOMAIN_LINK);}
LOGIN_URL=LOGIN_URL.replace('https','http');if(jConfig.hasOwnProperty("homeURL")&&jConfig.homeURL.trim()!="")
HOME_URL=jConfig.homeURL.replace("[{DOMAINLINK}]",DOMAIN_LINK);if(jConfig.hasOwnProperty("lobbyURL")&&jConfig.lobbyURL.trim()!="")
LOBBY_URL=jConfig.lobbyURL.replace("[{DOMAINLINK}]",DOMAIN_LINK);if(jConfig.hasOwnProperty("fundsURL")&&jConfig.fundsURL.trim()!="")
FUND_TRANSFER_URL=jConfig.fundsURL.replace("[{DOMAINLINK}]",DOMAIN_LINK);if(jConfig.hasOwnProperty("hidelobby")&&jConfig.hidelobby.trim()=="1")
LOBBY_URL="";if((window.location+"").indexOf("hidelobby=1")!=-1)
LOBBY_URL="";updateUrlsWithDomainLink();main();}
function parseXML(str){var xmlDoc;var parser;if(window['DOMParser']){parser=new DOMParser();xmlDoc=parser.parseFromString(str,"text/xml");}
else{xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async=false;xmlDoc.loadXML(str);}
return xmlDoc;}
sys.parseXML=parseXML;function loadConfig(){if(CONFIG_URL!=null&&CONFIG_URL!=""){loadFileAsync(CONFIG_URL,function(responseText){updateFromConfigFile(responseText);});}
else
main();return;}
sys.loadConfig=loadConfig;function sysConfig(){updateLang();updateParams();updateToken();}
sysConfig();})(sys||(sys={}));var core;(function(core){var VBaseEvent=(function(){function VBaseEvent(){this.data=null;this.type="";this.target=null;this.currentTarget=null;this.stopsPropagation=false;this.stopsImmediatePropagation=false;}
VBaseEvent.prototype.setData=function(type,data){this.type=type;this.data=data;return this;};VBaseEvent.prototype.clean=function(){this.data=null;this.type="";this.target=null;this.currentTarget=null;this.stopsPropagation=false;this.stopsImmediatePropagation=false;};return VBaseEvent;}());core.VBaseEvent=VBaseEvent;})(core||(core={}));var core;(function(core){var VEventDispatcher=(function(){function VEventDispatcher(){this.addEventListener=function(type,listener,context){if(this.mEventListeners==null)
this.mEventListeners={};var listeners=this.mEventListeners[type];if(listeners==null){this.mEventListeners[type]=[];listeners=this.mEventListeners[type];}
if(!this.hasEventListener(type,listener,context))
listeners[listeners.length]=core.VObjectPool.get(core.VListenerBinding).setData(listener,context);};this.mEventListeners=null;};VEventDispatcher.prototype.removeEventListener=function(type,listener,context){if(this.mEventListeners){var listenerBindings=this.mEventListeners[type];var numListeners=listenerBindings?listenerBindings.length:0;if(numListeners>0){var index=0;var tempListenerBindings=new Array(numListeners-1);for(var i=0;i<numListeners;++i){var otherListener=listenerBindings[i];if(!otherListener.has(listener,context))
tempListenerBindings[index++]=otherListener;else
core.VObjectPool.release(otherListener,core.VListenerBinding);}
this.mEventListeners[type]=tempListenerBindings;}}};VEventDispatcher.prototype.removeAllEventListeners=function(type){if(type===void 0){type=null;}
if(type&&this.mEventListeners){for(var i=0;i<this.mEventListeners[type].length;++i)
core.VObjectPool.release(this.mEventListeners[type][i],core.VListenerBinding);delete this.mEventListeners[type];}
else{for(var ty in this.mEventListeners){if(this.mEventListeners[ty]){for(var i=0;i<this.mEventListeners[ty].length;++i)
core.VObjectPool.release(this.mEventListeners[ty][i],core.VListenerBinding);delete this.mEventListeners[ty];}}
this.mEventListeners=null;}};;VEventDispatcher.prototype.dispatchEvent=function(event){if((this.mEventListeners==null||!(event.type in this.mEventListeners)))
return;var previousTarget=event.target;event.target=this;this.invokeEvent(event);if(previousTarget)
event.target=previousTarget;};;VEventDispatcher.prototype.invokeEvent=function(event){var listenerBindings=this.mEventListeners?this.mEventListeners[event.type]:null;var numListeners=listenerBindings==null?0:listenerBindings.length;if(numListeners){event.currentTarget=this;for(var i=0;i<numListeners;++i){var binding=listenerBindings[i];var numArgs=binding.listener.length;if(numArgs==0)
binding.listener.call(binding.context);else if(numArgs==1)
binding.listener.call(binding.context,event);if(event.stopsImmediatePropagation)
return true;}
return event.stopsPropagation;}
else{return false;}};;VEventDispatcher.prototype.dispatchEventWith=function(type,data){if(data===void 0){data=null;}
var event=core.VObjectPool.get(core.VBaseEvent);event.type=type;event.data=data;this.dispatchEvent(event);core.VObjectPool.release(event,core.VBaseEvent);};;VEventDispatcher.prototype.hasEventListener=function(type,listener,context){if(!this.mEventListeners)
return false;if(!this.mEventListeners[type])
return false;var listeners=this.mEventListeners[type];for(var i=0;i<listeners.length;i++){if(listeners[i].listener===listener&&listeners[i].context===context)
return true;}
return false;};;return VEventDispatcher;}());core.VEventDispatcher=VEventDispatcher;})(core||(core={}));var core;(function(core){var VJsonUtils=(function(){function VJsonUtils(){}
return VJsonUtils;}());core.VJsonUtils=VJsonUtils;})(core||(core={}));var core;(function(core){var VListenerBinding=(function(){function VListenerBinding(){}
VListenerBinding.prototype.setData=function(listener,context){this.listener=listener;this.context=context;return this;};VListenerBinding.prototype.has=function(listener,context){return this.listener===listener&&this.context===context;};VListenerBinding.prototype.clean=function(){this.listener=null;this.context=null;};return VListenerBinding;}());core.VListenerBinding=VListenerBinding;})(core||(core={}));var core;(function(core){var VObjectPool=(function(){function VObjectPool(){this.MAX_OBJECT=1000;this.pool={};}
VObjectPool.get=function(typeClass){return VObjectPool.instance.get(typeClass);};VObjectPool.release=function(obj,typeClass){return VObjectPool.instance.release(obj,typeClass);};VObjectPool.prototype.get=function(typeClass){if(!this.pool[core.VUtils.getObjKey(typeClass)])
this.pool[core.VUtils.getObjKey(typeClass)]=[];if(this.pool[core.VUtils.getObjKey(typeClass)].length==0){return new typeClass();}
return this.pool[core.VUtils.getObjKey(typeClass)].pop();};VObjectPool.prototype.release=function(obj,typeClass){if(!this.pool[core.VUtils.getObjKey(typeClass)])
this.pool[core.VUtils.getObjKey(typeClass)]=[];if(obj[core.VUtils.getObjKeyName()])
delete obj[core.VUtils.getObjKeyName()];if(!core.VUtils.isNull(obj.clean))
obj.clean();if(this.pool[core.VUtils.getObjKey(typeClass)].length==this.MAX_OBJECT){if(obj.destroy){obj.destroy.length?obj.destroy(true):obj.destroy();}
return false;}
this.pool[core.VUtils.getObjKey(typeClass)].push(obj);return true;};VObjectPool.prototype.clearAll=function(){var obj;for(var type in this.pool){for(var i=0;i<this.pool[type].length;i++){obj=this.pool[type][i];if(obj.clean)
obj.clean();if(obj.destroy)
obj.destroy.length?obj.destroy(true):obj.destroy();}
delete this.pool[type];}
this.pool=null;};VObjectPool.instance=new VObjectPool();return VObjectPool;}());core.VObjectPool=VObjectPool;})(core||(core={}));var core;(function(core){var VUtils=(function(){function VUtils(){}
VUtils.getGCount=function(){VUtils.gcount++;return VUtils.gcount;};VUtils.isNull=function(object){return(object===null||object===undefined);};VUtils.removeElementFromArray=function(arr,e){for(var i=0;i<arr.length;i++){if(arr[i]===e){arr.splice(i,1);return;}}};VUtils.getObjKey=function(obj){if(obj.hasOwnProperty("__vSysObjKey__"))
return obj["__vSysObjKey__"];else{return obj["__vSysObjKey__"]="vSysObjKey_"+Math.random()*2147483647+"_"+new Date().getTime();}};VUtils.getObjKeyName=function(){return"__vSysObjKey__";};VUtils.copy=function(source,des){if(!des){var debug=1;}
for(var attr in source){if(source.hasOwnProperty(attr))
des[attr]=source[attr];}};VUtils.cleanObj=function(obj){for(var i in obj)
delete obj[i];};VUtils.gcount=0;return VUtils;}());core.VUtils=VUtils;})(core||(core={}));var component;(function(component){var VCell=(function(_super){__extends(VCell,_super);function VCell(){var _this=_super.call(this)||this;_this.dis=5;var f0=new PIXI.Graphics();var f1=new PIXI.Graphics();_this.bg=new component.VButton([f0,f1]);_this.addChild(_this.bg);return _this;}
VCell.prototype.initialize=function(w,h,normalColor,activeColor,align,style){if(style===void 0){style=null;}
if(style){var st={};core.VUtils.copy(style,st);style=st;this.tf=component.VComponentUtils.createText("",style);}
else
this.tf=component.VComponentUtils.createNormalText('',12);this.tf.anchor.x=0.5;this.tf.anchor.y=0.5;this.bg.addChild(this.tf);this.viewW=w;this.viewH=h;var f0=this.bg.vframes[0];f0.clear();f0.beginFill(normalColor);f0.drawRect(0,0,w,h);f0.endFill();var f1=this.bg.vframes[1];f1.clear();f1.beginFill(activeColor);f1.drawRect(0,0,w,h);f1.endFill();this.align=align;this.updatePos();return this;};VCell.prototype.setText=function(str){this.tf.scale.x=this.tf['orgScaleX'];this.tf.scale.y=this.tf.scale.x;this.tf.text=str;if(this.tf.width>this.viewW){this.tf.scale.x=this.tf['orgScaleX']*(this.viewW/this.tf.width);this.tf.scale.y=this.tf.scale.x;}
this.updatePos();};VCell.prototype.setAlign=function(align){this.align=align;this.updatePos();};VCell.prototype.updatePos=function(){this.tf.y=this.viewH*0.5;this.tf.anchor.x=this.align=='left'?0:this.align=='right'?1:0.5;this.tf.x=this.align=='left'?this.dis:this.align=='right'?this.viewW-this.dis:this.viewW*0.5;};VCell.prototype.setWidth=function(w){if(w<20)
return;this.bg.setWidth(w);this.updatePos();};VCell.prototype.reset=function(){this.tf.text="";if(this.customIcon){this.removeChild(this.customIcon);this.customIcon.destroy();this.customIcon=null;}};return VCell;}(PIXI.Container));component.VCell=VCell;})(component||(component={}));var component;(function(component){var VColumn=(function(_super){__extends(VColumn,_super);function VColumn(row,itemW,itemH,normalColor,activeColor,align,style){if(align===void 0){align="center";}
if(style===void 0){style=null;}
var _this=_super.call(this)||this;_this.style=style;_this.itemW=itemW;_this.itemH=itemH;_this.align=align;_this.dis=1;_this.posY=0;_this.normalColor=normalColor;_this.activeColor=activeColor;_this.masker=new PIXI.Graphics();_this.masker.beginFill(0x555555);_this.masker.drawRect(0,0,itemW,(itemH+_this.dis)*row);_this.masker.endFill();_this.itemCon=new PIXI.Container();_this.addChild(_this.itemCon);_this.items=[];for(var i=0;i<row;i++){_this.addCell();}
_this.setWidth(itemW);return _this;}
VColumn.prototype.addCell=function(){if(!this.items)
this.items=[];var item=new component.VCell();item.initialize(this.itemW,this.itemH,this.normalColor,this.activeColor,this.align,this.style);this.itemCon.addChild(item);item.y=this.posY;this.items.push(item);this.posY+=this.itemH+this.dis;return item;};VColumn.prototype.setAlign=function(align){this.align=align;for(var i=0;i<this.items.length;i++)
this.items[i].setAlign(align);};VColumn.prototype.updateMask=function(){this.masker.clear();this.masker.beginFill(0x555555);this.masker.drawRect(0,0,this.itemW,(this.itemH+this.dis)*this.items.length);this.masker.endFill();};VColumn.prototype.reset=function(){for(var i=0;i<this.items.length;i++)
this.items[i].reset();};VColumn.prototype.clear=function(){while(this.items.length){var item=this.items.pop();item.reset();item.parent.removeChild(item);}
this.posY=0;};VColumn.prototype.removeCell=function(index){var item=this.items[index];component.VComponentUtils.removeElementFromArray(this.items,item);item.reset();item.parent.removeChild(item);core.VObjectPool.release(item,component.VCell);};VColumn.prototype.setWidth=function(w){this.itemW=w;this.masker.beginFill(0x555555);this.masker.drawRect(0,0,this.itemW,(this.itemH+this.dis)*this.items.length);this.masker.endFill();for(var i=0;i<this.items.length;i++){this.items[i].setWidth(w);}};return VColumn;}(PIXI.Container));component.VColumn=VColumn;})(component||(component={}));var component;(function(component){var VRecord=(function(){function VRecord(items,handler){this.items=items;this.handler=handler;for(var i=0;i<this.items.length;i++){component.VMouseUtils.on(this.items[i],component.VMouseUtils.MOUSE_OVER,this.onOver,this);component.VMouseUtils.on(this.items[i],component.VMouseUtils.MOUSE_OUT,this.onOut,this);component.VMouseUtils.on(this.items[i],component.VMouseUtils.MOUSE_UP,this.onUp,this);this.items[i].tf.interactive=false;}}
VRecord.prototype.removeToolTip=function(toolTip){for(var i=0;i<this.items.length;i++){toolTip.removeToolTip(this.items[i]);}};VRecord.prototype.addToolTip=function(toolTip,msg){for(var i=0;i<this.items.length;i++){toolTip.removeToolTip(this.items[i]);toolTip.addToolTip(this.items[i],msg);}};VRecord.prototype.destructor=function(){for(var i=0;i<this.items.length;i++){component.VMouseUtils.off(this.items[i],component.VMouseUtils.MOUSE_OVER,this.onOver,this);component.VMouseUtils.off(this.items[i],component.VMouseUtils.MOUSE_OUT,this.onOut,this);component.VMouseUtils.off(this.items[i],component.VMouseUtils.MOUSE_UP,this.onUp,this);}
core.VUtils.cleanObj(this);};VRecord.prototype.onOver=function(e){for(var i=0;i<this.items.length;i++){this.items[i].bg.setActive(true);}};VRecord.prototype.onOut=function(e){for(var i=0;i<this.items.length;i++){this.items[i].bg.setActive(false);}};VRecord.prototype.reset=function(){this.info=null;};VRecord.prototype.onUp=function(e){if(this.handler)
this.handler(this);};VRecord.prototype.setData=function(arr){if(arr.length!=this.items.length)
throw new Error("VRecord:: invalid data");for(var i=0;i<arr.length;i++){this.items[i].setText(arr[i]);}};return VRecord;}());component.VRecord=VRecord;})(component||(component={}));var component;(function(component){var VTable=(function(_super){__extends(VTable,_super);function VTable(viewW,itemH,row,titles,sizes,align,titleStyle,style,titleColor,normalColor,activeColor){if(align===void 0){align="center";}
if(titleStyle===void 0){titleStyle=null;}
if(style===void 0){style=null;}
if(titleColor===void 0){titleColor=0x3F3832;}
if(normalColor===void 0){normalColor=0x111111;}
if(activeColor===void 0){activeColor=0x3F3832;}
var _this=_super.call(this)||this;_this.viewW=viewW;_this.titleCon=new PIXI.Container();_this.addChild(_this.titleCon);_this.columnCon=new PIXI.Container();_this.addChild(_this.columnCon);_this.dispatcher=new core.VEventDispatcher();_this.columns=[];_this.records=[];var posX=0;var dis=1;_this.columnCon.y=itemH+dis;var st=style;for(var i=0;i<titles.length;i++){if(style){st={};core.VUtils.copy(style,st);if(st.wordWrap)
st.wordWrapWidth=(viewW*sizes[i]-30)*component.VComponentUtils.TEXT_OPTIMIZE_FACTOR;}
var titleItem=new component.VCell().initialize(viewW*sizes[i],itemH,titleColor,titleColor,align,titleStyle);titleItem.setText(titles[i]);_this.titleCon.addChild(titleItem);titleItem.x=posX;var column=new component.VColumn(row,viewW*sizes[i],itemH,normalColor,activeColor,align,st);_this.columnCon.addChild(column);column.x=posX;posX+=viewW*sizes[i]+dis;_this.columns.push(column);}
var cells;for(var i=0;i<row;i++){cells=[];for(var j=0;j<_this.columns.length;j++)
cells.push(_this.columns[j].items[i]);var record=new component.VRecord(cells,_this.onRecordClickHdl.bind(_this));_this.records.push(record);}
_this.on('removed',_this.onRemovedHdl,_this);return _this;}
VTable.prototype.getMaxRow=function(){return this.records.length;};VTable.prototype.clear=function(){for(var i=0;i<this.columns.length;i++){this.columns[i].clear();}
for(var i=0;i<this.records.length;i++)
this.records[i].destructor();this.records=[];};VTable.prototype.addRecords=function(numOfRecords){var cells;for(var i=0;i<numOfRecords;i++){cells=[];for(var j=0;j<this.columns.length;j++){cells.push(this.columns[j].addCell());}
var record=new component.VRecord(cells,this.onRecordClickHdl.bind(this));this.records.push(record);}
for(var j=0;j<this.columns.length;j++){this.columns[j].updateMask();}};VTable.prototype.getRecord=function(rowInd){return this.records[rowInd];};VTable.prototype.getCell=function(rowInd,colInd){if(colInd>=this.columns.length)
return null;if(rowInd>=this.columns[colInd].items.length)
return null;return this.columns[colInd].items[rowInd];};VTable.prototype.reset=function(){for(var i=0;i<this.columns.length;i++){this.columns[i].reset();}
for(var i=0;i<this.records.length;i++)
this.records[i].reset();};VTable.prototype.onRemovedHdl=function(){trace("VTable::onRemovedHdl");this.off('removed',this.onRemovedHdl,this);this.dispatcher.removeAllEventListeners();for(var i=0;i<this.records.length;i++)
this.records[i].destructor();core.VUtils.cleanObj(this);};VTable.prototype.onRecordClickHdl=function(record){if(!record.info)
return;this.dispatcher.dispatchEventWith(VTable.RECORD_CLICK,record);};VTable.prototype.setData=function(ind,arr){if(ind>=this.records.length)
throw new Error("VTable:: out of records range");this.records[ind].setData(arr);};VTable.RECORD_CLICK="VTable_RECORD_CLICK";return VTable;}(PIXI.Container));component.VTable=VTable;})(component||(component={}));var component;(function(component){var Loading=(function(_super){__extends(Loading,_super);function Loading(bgAlpha){if(bgAlpha===void 0){bgAlpha=1;}
var _this=_super.call(this)||this;_this.bgAlpha=bgAlpha;_this.bg=new PIXI.Graphics();_this.addChild(_this.bg);_this.anim=new PIXI.Container();_this.addChild(_this.anim);var devided=30;var ang=0;var r=30;var total=360/devided;var ra=2;for(var i=0;i<total;i++){var circle=new PIXI.Graphics();_this.anim.addChild(circle);circle.lineStyle(0,0,0);ra+=0.3;if(ra>5)
ra=5;circle.beginFill(0xffffff,0.1*(i));circle.drawCircle(0,0,ra);circle.endFill();circle.x=r*Math.cos(ang*Math.PI/180);circle.y=r*Math.sin(ang*Math.PI/180);ang+=devided;}
_this.tf=component.VComponentUtils.createText('',{fontFamily:"dinbold",fontSize:20,fontStyle:'bold',fill:0xffffff,align:'center'});_this.addChild(_this.tf);_this.tf.anchor.x=0.5;_this.tf.anchor.y=0.5;_this.titleTf=component.VComponentUtils.createText('',{fontFamily:"dinbold",fontSize:12,fontStyle:'bold',fill:0xffffff,align:'center'});_this.addChild(_this.titleTf);_this.titleTf.anchor.x=0.5;_this.titleTf.anchor.y=0.5;return _this;}
Loading.prototype.setSize=function(w,h){this.bg.clear();this.bg.lineStyle(0,0,0);this.bg.beginFill(0x000000,this.bgAlpha);this.bg.drawRect(0,0,w,h);this.bg.endFill();this.tf.x=w*0.5;this.tf.y=h*0.5;this.titleTf.x=w*0.5;this.titleTf.y=h*0.5+50;this.anim.x=w*0.5;this.anim.y=h*0.5;};Loading.prototype.update=function(){this.anim.rotation+=10*Math.PI/180;};Loading.prototype.updatePercent=function(percent){this.tf.text=component.VComponentUtils.getIntInFormat(percent);};Loading.prototype.show=function(hasPercent,title,showBg){if(hasPercent===void 0){hasPercent=true;}
if(title===void 0){title="";}
if(showBg===void 0){showBg=true;}
if(!showBg)
this.bg.alpha=0.1;else
this.bg.alpha=1;this.visible=true;this.tf.text="";this.tf.visible=hasPercent;this.titleTf.text=title;};Loading.prototype.hide=function(){this.visible=false;};return Loading;}(PIXI.Container));component.Loading=Loading;})(component||(component={}));var component;(function(component){var fage_flip;(function(fage_flip){var PageCon=(function(_super){__extends(PageCon,_super);function PageCon(){return _super.call(this)||this;}
PageCon.prototype.initialize=function(w,h,frontTex,backTex,completeHdl,fixedPosition){if(completeHdl===void 0){completeHdl=null;}
if(fixedPosition===void 0){fixedPosition=true;}
this.completeHdl=completeHdl;this.fixedPosition=fixedPosition;this.viewW=w;this.viewH=h;this.con=new PIXI.Container();this.addChild(this.con);this.tweenInfo={};this.startPos=new PIXI.Point();this.front=new PIXI.Container();this.frontImg=new PIXI.Sprite(frontTex);this.front.addChild(this.frontImg);this.frontImg.anchor.x=0;this.frontImg.anchor.y=0;var shadow=new PIXI.Sprite(PIXI.Texture.fromFrame('page-flip-shadow.png'));this.shadow=shadow;shadow.anchor.x=1;shadow.anchor.y=0.5;this.shadow.scale.y=(w+h)/this.shadow.height;this.frontImg.addChild(shadow);this.frontImg.scale.x=w/this.frontImg.width;this.frontImg.scale.y=h/this.frontImg.height;this.frontMask=new PIXI.Graphics();this.frontMask.alpha=0.01;this.front.addChild(this.frontMask);this.back=new PIXI.Container();this.con.addChild(this.back);this.backImg=new PIXI.Sprite(backTex);var corner=new PIXI.Sprite(PIXI.Texture.fromFrame('component-flip-corner.png'));this.corner=corner;this.backImg.addChild(corner);corner.x=this.backImg.width-corner.width;corner.y=this.backImg.height-corner.height;this.backImg.anchor.x=0;this.backImg.anchor.y=0;this.back.addChild(this.backImg);this.backImg.scale.x=w/this.backImg.width;this.backImg.scale.y=h/this.backImg.height;this.backMask=new PIXI.Graphics();this.backMask.alpha=0.01;this.back.addChild(this.backMask);this.con.addChild(this.front);this.front.x=this.viewW*1.2;this.autoFlipMinDis=this.viewW*0.55;var flipAng=10*Math.PI/180;var A=new PIXI.Point(w,h);var B=new PIXI.Point(0,h-w*Math.tan(flipAng));var AB=new PIXI.Point(B.x-A.x,B.y-A.y);var dAB=Math.sqrt(AB.x*AB.x+AB.y*AB.y);this.flipnv1=new PIXI.Point(AB.x/dAB,AB.y/dAB);this.state1Dis=this.viewW*1.1;this.state2Pos=new PIXI.Point(this.viewW+this.flipnv1.x*this.state1Dis,this.viewH+this.flipnv1.y*this.state1Dis);AB=new PIXI.Point(-this.viewW-this.state2Pos.x,this.viewH-this.state2Pos.y);dAB=Math.sqrt(AB.x*AB.x+AB.y*AB.y);this.flipnv2=new PIXI.Point(AB.x/dAB,AB.y/dAB);this.flipMinDis=this.viewW*1.1;this.hand=new PIXI.Sprite(PIXI.Texture.fromFrame('squeeze_hand.png'));this.hand.interactive=false;this.front.addChild(this.hand);this.hand.anchor.x=0.657;this.hand.anchor.y=0.112;this.reset();component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_DOWN,this.onMouseDown,this);this.on('removed',this.onRemovedHdl,this);};PageCon.prototype.setFrontTexture=function(tex){this.frontImg.texture=tex;};PageCon.prototype.setBackTexture=function(tex){this.backImg.texture=tex;};PageCon.prototype.onRemovedHdl=function(){clearTimeout(this.flipTimeoutId);TweenMax.killTweensOf(this.tweenInfo);this.off('removed',this.onRemovedHdl,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_DOWN,this.onMouseDown,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.onMouseMove,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP,this.onMouseUp,this);};PageCon.prototype.lock=function(){this.locked=true;};PageCon.prototype.unlock=function(){this.locked=false;};PageCon.prototype.onMouseDown=function(){if(this.locked)
return;var mp=component.VMouseUtils.mousePos();mp=this.toLocal(mp);if(mp.x<0||mp.x>this.viewW||mp.y<0||mp.y>this.viewH)
return;TweenMax.killTweensOf(this.tweenInfo);this.startPos.x=mp.x;this.startPos.y=mp.y;this.tweenInfo.d=0;component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.onMouseMove,this);component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.onMouseMove,this);component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP,this.onMouseUp,this);};PageCon.prototype.onMouseUp=function(){component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.onMouseMove,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP,this.onMouseUp,this);var mp=component.VMouseUtils.mousePos();mp=this.toLocal(mp);var d=Math.sqrt((mp.x-this.startPos.x)*(mp.x-this.startPos.x)+(mp.y-this.startPos.y)*(mp.y-this.startPos.y));if(d>this.flipMinDis)
this.startAutoFlip(2*this.viewW+1,1*(2*this.viewW-this.tweenInfo.d)/(2*this.viewW));else
this.startAutoFlip(0,0.3,Linear.easeNone);};PageCon.prototype.autoFlip=function(stateDelay,state1Dur,state2Dur){if(state1Dur===void 0){state1Dur=1.5;}
if(state2Dur===void 0){state2Dur=1.5;}
this.lock();component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.onMouseMove,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP,this.onMouseUp,this);this.startAutoFlip(this.autoFlipMinDis,state1Dur);clearTimeout(this.flipTimeoutId);this.flipTimeoutId=setTimeout(function(){this.startAutoFlip(2*this.viewW+1,state2Dur,Quint.easeIn);}.bind(this),stateDelay);};PageCon.prototype.startAutoFlip=function(des,duration,easing){if(easing===void 0){easing=Linear.easeNone;}
TweenMax.killTweensOf(this.tweenInfo);TweenMax.to(this.tweenInfo,duration,{d:des,ease:easing,onUpdate:function(){this.updateFlip(this.tweenInfo.d);}.bind(this),onComplete:function(){this.updateFlip(this.tweenInfo.d);if(this.tweenInfo.d>=2*this.viewW){this.lock();this.isFlipCompleted=true;if(this.completeHdl)
this.completeHdl(this);}}.bind(this)});};PageCon.prototype.onMouseMove=function(){var mp=component.VMouseUtils.mousePos();mp=this.toLocal(mp);var d=Math.sqrt((mp.x-this.startPos.x)*(mp.x-this.startPos.x)+(mp.y-this.startPos.y)*(mp.y-this.startPos.y));if(d>2*this.viewW)
d=2*this.viewW;if(d>this.flipMinDis)
this.onMouseUp();this.tweenInfo.d=d;this.updateFlip(d);};PageCon.prototype.updateFlip=function(d){if(d<this.autoFlipMinDis*0.7){this.hand.alpha=0;}
else if(d<this.autoFlipMinDis*0.9){this.hand.alpha=(d-this.autoFlipMinDis*0.7)/(this.autoFlipMinDis*0.2);}
else{var alp=(this.autoFlipMinDis*1.6-(d-this.autoFlipMinDis*0.9))/(this.autoFlipMinDis*0.3);this.hand.alpha=alp>0?alp:0;}
if(this.hand.alpha>1)
this.hand.alpha=1;var p;var maxDis=this.viewW*0.5;if(d<this.viewW)
this.shadow.width=0.2*d/this.frontImg.scale.x;else
this.shadow.width=0.2*(2*this.viewW-d)/this.frontImg.scale.x;if(d<this.state1Dis){p=new PIXI.Point(this.viewW+this.flipnv1.x*d,this.viewH+this.flipnv1.y*d);}
else{p=new PIXI.Point(this.state2Pos.x+this.flipnv2.x*(d-this.state1Dis),this.state2Pos.y+this.flipnv2.y*(d-this.state1Dis));}
if(this.fixedPosition&&p.x<0){this.con.x=-p.x;}
this.flip(p);};PageCon.prototype.reset=function(){this.con.x=0;this.shadow.scale.x=1;this.isFlipCompleted=false;this.frontImg.mask=null;this.backImg.mask=null;this.front.visible=false;this.tweenInfo.d=0;this.hand.alpha=0;TweenMax.killTweensOf(this.tweenInfo);clearTimeout(this.flipTimeoutId);};PageCon.prototype.flip=function(flipPoint){var p=new PIXI.Point(flipPoint.x,this.viewH-flipPoint.y);if(p.x>this.viewW||p.x<-this.viewW)
return;var dis=Math.sqrt(p.x*p.x+p.y*p.y);if(dis>this.viewW)
return;var rb=new PIXI.Point(this.viewW,0);var v=new PIXI.Point(p.x-rb.x,p.y-rb.y);var h=Math.sqrt(v.x*v.x+v.y*v.y);if(h<5)
return;var beta=Math.asin(v.y/h);var alpha=Math.PI/2-beta;var center=new PIXI.Point((p.x+rb.x)/2,(p.y+rb.y)/2);var A,B;if(Math.abs(alpha-Math.PI/2)<0.001){A=new PIXI.Point(center.x,this.viewH);B=new PIXI.Point(center.x,0);}
else{var a,b;a=Math.tan(alpha);b=center.y-a*center.x;A=new PIXI.Point((this.viewH-b)/a,this.viewH);B=new PIXI.Point(-b/a,0);}
var A1,B1;A1=new PIXI.Point(this.viewW-A.x,0);B1=new PIXI.Point(this.viewW-B.x,this.viewH);if(Math.abs(A1.x-this.viewW)<5){A1.x=this.viewW+3;}
if(Math.abs(B1.x-this.viewW)<5){B1.x=this.viewW+3;}
var poly;var A11;if(A1.x>=0){poly=[new PIXI.Point(0,0),A1,B1,new PIXI.Point(0,this.viewH)];A11=A1;}
else{var h1=-(A1.x/B1.x)*this.viewH/(1-A1.x/B1.x);A11=new PIXI.Point(0,h1);poly=[A11,B1,new PIXI.Point(0,this.viewH)];}
this.shadow.x=(A11.x+B1.x)/2;this.shadow.y=(A11.y+B1.y)/2;this.shadow.rotation=-Math.PI/2+(B1.x-A1.x==0?Math.PI/2:Math.atan(B1.y/(B1.x-A1.x)));this.shadow.x/=this.frontImg.scale.x;this.shadow.y/=this.frontImg.scale.y;this.frontMask.clear();this.frontMask.beginFill(0x0000ff);this.frontMask.drawPolygon(poly);this.frontMask.endFill();var A2,B2;A2=new PIXI.Point(A.x,0);B2=new PIXI.Point(B.x,this.viewH);poly=[A2,B2,new PIXI.Point(0,this.viewH)];if(A2.x>0)
poly.unshift(new PIXI.Point(0,0));this.backMask.clear();this.backMask.beginFill(0x0000ff);this.backMask.drawPolygon(poly);this.backMask.endFill();this.frontImg.mask=this.frontMask;this.backImg.mask=this.backMask;this.frontImg.y=-this.viewH;this.frontMask.y=-this.viewH;this.front.x=flipPoint.x;this.front.y=flipPoint.y;this.front.rotation=Math.PI-2*alpha;this.hand.x=this.frontImg.x;this.hand.y=this.frontImg.y;this.front.visible=true;};return PageCon;}(PIXI.Container));fage_flip.PageCon=PageCon;})(fage_flip=component.fage_flip||(component.fage_flip={}));})(component||(component={}));var component;(function(component){var VPagesManager=(function(_super){__extends(VPagesManager,_super);function VPagesManager(pageNum,viewNum,btnS,hasBegin,hasEnd){if(viewNum===void 0){viewNum=5;}
if(btnS===void 0){btnS=25;}
if(hasBegin===void 0){hasBegin=true;}
if(hasEnd===void 0){hasEnd=true;}
var _this=_super.call(this)||this;var btAlpha=0;_this.orgViewNum=viewNum;_this.viewNum=viewNum;var dis=1;_this.dis=dis;_this.posX=0;_this.startIndex=0;_this.currentIndex=0;_this.btnS=btnS;_this.pageItemArr=[];if(hasBegin){var begin=component.VButton.createSimple(_this.onBegin.bind(_this),"<<",btnS,btnS,0xffffff);begin.setBgAlpha(btAlpha);_this.begin=begin;begin.x=_this.posX;_this.posX+=begin.width+dis;_this.addChild(begin);}
var back=_this.createBackBtn();_this.back=back;back.x=_this.posX;_this.posX+=back.width+dis;_this.addChild(back);var next=_this.createNextBtn();_this.next=next;_this.addChild(next);if(hasEnd){var end=component.VButton.createSimple(_this.onEnd.bind(_this),">>",btnS,btnS,0xffffff);end.setBgAlpha(btAlpha);_this.end=end;_this.addChild(end);}
_this.pageCon=new PIXI.Container();_this.pageCon.x=_this.posX;_this.addChild(_this.pageCon);_this.dispatcher=new core.VEventDispatcher();_this.initPage(pageNum);_this.posX+=_this.pageCon.width+_this.dis;_this.next.x=_this.posX;if(_this.end)
_this.end.x=_this.posX+_this.next.width+_this.dis;_this.on('removed',_this.onRemovedHdl,_this);return _this;}
VPagesManager.prototype.onRemovedHdl=function(){this.off('removed',this.onRemovedHdl,this);};VPagesManager.prototype.createNextBtn=function(){var btn=component.VButton.createSimple(this.onNext.bind(this),">",this.btnS,this.btnS,0xffffff);btn.setBgAlpha(0);return btn;};VPagesManager.prototype.createBackBtn=function(){var btn=component.VButton.createSimple(this.onBack.bind(this),"<",this.btnS,this.btnS,0xffffff);btn.setBgAlpha(0);return btn;};VPagesManager.prototype.createPageItem=function(index){return component.VButton.createSimple(this.onIndexClick.bind(this),index.toString(),this.btnS,this.btnS,0xffffff);};VPagesManager.prototype.setVisibleBtns=function(v){this.next.visible=v;this.back.visible=v;if(this.begin)
this.begin.visible=v;if(this.end)
this.end.visible=v;};VPagesManager.prototype.initPage=function(pageNum){this.viewNum=this.orgViewNum;var pageItemArr=this.pageItemArr;var pageCon=this.pageCon;while(this.pageItemArr.length){pageCon.removeChild(this.pageItemArr.pop()).destroy();}
this.activeItem=null;this.startIndex=0;this.currentIndex=0;this.pageNum=pageNum;if(pageNum==0)
return;this.viewNum=Math.min(this.viewNum,this.pageNum);var px=0;for(var i=0;i<this.viewNum;i++){var btn=this.createPageItem(i+1);btn.x=px;pageCon.addChild(btn);btn.index=i;pageItemArr.push(btn);px+=btn.width+10;}
this.setActive(pageItemArr[0]);if(this.viewNum>1)
if(this.activeItem.tf)
this.activeItem.tf.style.fill=0x7DAA07;this.updateIndex();};VPagesManager.prototype.onNext=function(){if(this.currentIndex==this.startIndex+this.viewNum-1){if(this.currentIndex+1<=this.pageNum-1){this.currentIndex++;this.startIndex++;this.updateIndex();}}
else{this.currentIndex++;this.updateIndex();}};VPagesManager.prototype.setActive=function(item){if(this.activeItem)
this.activeItem.setActive(false);this.activeItem=item;if(!item){var t=1;}
this.activeItem.setActive(true);};VPagesManager.prototype.onBack=function(){if(this.currentIndex==this.startIndex){if(this.currentIndex-1>=0){this.currentIndex--;this.startIndex--;this.updateIndex();}}
else{this.currentIndex--;this.updateIndex();}};VPagesManager.prototype.onBegin=function(){this.currentIndex=0;this.startIndex=0;this.updateIndex();};VPagesManager.prototype.onEnd=function(){this.currentIndex=this.pageNum-1;this.startIndex=this.pageNum-this.viewNum;this.updateIndex();};VPagesManager.prototype.updateIndex=function(){if(this.currentIndex>=this.pageNum)
return;if(this.currentIndex==this.pageNum-1){this.next.visible=false;if(this.end)
this.end.visible=false;}
else{this.next.visible=true;if(this.end)
this.end.visible=true;}
if(this.currentIndex==0){this.back.visible=false;if(this.begin)
this.begin.visible=false;}
else{this.back.visible=true;if(this.begin)
this.begin.visible=true;}
if(this.viewNum>1)
if(this.activeItem.tf)
this.activeItem.tf.style.fill=0x333333;this.setActive(this.pageItemArr[this.currentIndex-this.startIndex]);if(this.viewNum>1)
if(this.activeItem.tf)
this.activeItem.tf.style.fill=0x7DAA07;for(var i=this.startIndex;i<this.startIndex+this.viewNum;i++){var ind=this.pageItemArr[i-this.startIndex];if(ind.tf)
ind.tf.text=(i+1).toString();ind.index=i;}
this.dispatcher.dispatchEventWith(VPagesManager.CHANGE_INDEX,this.currentIndex);};VPagesManager.prototype.onIndexClick=function(target){var ind=target;if(ind.index==this.currentIndex)
return;if(this.viewNum>1)
if(this.activeItem.tf)
this.activeItem.tf.style.fill=0x333333;this.setActive(this.pageItemArr[ind.index-this.startIndex]);if(this.viewNum>1)
if(this.activeItem.tf)
this.activeItem.tf.style.fill=0x7DAA07;this.currentIndex=ind.index;this.dispatcher.dispatchEventWith(VPagesManager.CHANGE_INDEX,ind.index);if(this.currentIndex==this.pageNum-1){this.next.visible=false;if(this.end)
this.end.visible=false;}
else{this.next.visible=true;if(this.end)
this.end.visible=true;}
if(this.currentIndex==0){this.back.visible=false;if(this.begin)
this.begin.visible=false;}
else{this.back.visible=true;if(this.begin)
this.begin.visible=true;}};VPagesManager.CHANGE_INDEX="PagesManager_CHANGE_INDEX";return VPagesManager;}(PIXI.Container));component.VPagesManager=VPagesManager;})(component||(component={}));var component;(function(component){var VHorScroll=(function(_super){__extends(VHorScroll,_super);function VHorScroll(masker,content,scroll,isTween,contentDragged,contentSize,duration,speed){if(scroll===void 0){scroll=null;}
if(isTween===void 0){isTween=true;}
if(contentDragged===void 0){contentDragged=false;}
if(contentSize===void 0){contentSize=-1;}
if(duration===void 0){duration=0.3;}
if(speed===void 0){speed=6;}
var _this=_super.call(this)||this;_this.isScrolled=false;if(!scroll)
contentDragged=true;_this.isTween=isTween;_this.parentCon=content.parent;_this.mousePos=new PIXI.Point();_this.clickedMousePos=new PIXI.Point();_this.direction=-1;_this.content=content;_this.scroll=scroll;_this.duration=duration;_this.speed=speed;_this.masker=masker;_this.content.on('removed',_this.onRemovedHdl,_this);if(scroll&&["leftBtn"]&&scroll["rightBtn"])
_this.isFull=true;if(_this.isFull){_this.leftBtn=scroll["leftBtn"];_this.rightBtn=scroll["rightBtn"];if(!_this.leftBtn||!_this.rightBtn)
throw new Error("this.leftBtn or this.rightBtn is null!");_this.sSize=_this.leftBtn.width-1;}
else{_this.sSize=0;}
if(scroll&&scroll["face"]){_this.face=scroll["face"];_this.track=scroll["track"];_this.face.x=_this.track.x;component.VMouseWheel.getInstance().register(_this.face,_this.mouseWheelHdl.bind(_this));component.VMouseUtils.on(_this.face,component.VMouseUtils.MOUSE_DOWN,_this.faceMouseDownHandler,_this);}
_this.content.x=_this.masker.x;_this.updateScroll(contentSize);component.VMouseWheel.getInstance().register(_this.content,_this.mouseWheelHdl.bind(_this));if(_this.isFull){component.VMouseUtils.on(_this.leftBtn,component.VMouseUtils.MOUSE_DOWN,_this.leftBtnMouseDownHdl,_this);component.VMouseUtils.on(_this.rightBtn,component.VMouseUtils.MOUSE_DOWN,_this.rightBtnMouseDownHdl,_this);}
if(contentDragged){component.VMouseUtils.on(_this.content,component.VMouseUtils.MOUSE_DOWN,_this.contentDownHdl,_this);}
return _this;}
VHorScroll.prototype.resize=function(w,h){TweenMax.killTweensOf(this.content);if(this.scroll&&this.face)
TweenMax.killTweensOf(this.face);this.masker.width=w;this.masker.height=h;this.updateScroll();};VHorScroll.prototype.contentDownHdl=function(){var mp=component.VMouseUtils.mousePos();var p=new PIXI.Point(this.masker.x,this.masker.y);p=this.masker.toGlobal(p);if(!new PIXI.Rectangle(p.x,p.y,p.x+this.masker.width,p.y+this.masker.height).contains(mp.x,mp.y))
return;mp=this.content.parent.toLocal(mp);this.clickedContentPos=this.content.x;this.clickedMousePos.copy(mp);this.mousePos.x=mp.x;this.mousePos.y=mp.y;component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.contentMouseMoveHdl,this);component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP,this.contentUpHdl,this);component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.contentUpHdl,this);};VHorScroll.prototype.contentUpHdl=function(){component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.contentMouseMoveHdl,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP,this.contentUpHdl,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.contentUpHdl,this);};VHorScroll.prototype.contentMouseMoveHdl=function(){var mp=component.VMouseUtils.mousePos();mp=this.content.parent.toLocal(mp);var dx=mp.x-this.clickedMousePos.x;this.moveTo(this.clickedContentPos+dx);this.mousePos.x=mp.x;this.mousePos.y=mp.y;};VHorScroll.prototype.onRemovedHdl=function(){trace("VHorScroll::onRemovedHdl");this.content.off('removed',this.onRemovedHdl,this);if(this.scroll&&this.leftBtn){component.VMouseUtils.off(this.leftBtn,component.VMouseUtils.MOUSE_DOWN,this.leftBtnMouseDownHdl,this);component.VMouseUtils.off(this.leftBtn,component.VMouseUtils.MOUSE_UP,this.leftBtnMouseUpHdl,this);component.VMouseUtils.off(this.leftBtn,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.leftBtnMouseUpHdl,this);component.VMouseUtils.off(this.rightBtn,component.VMouseUtils.MOUSE_DOWN,this.rightBtnMouseDownHdl,this);component.VMouseUtils.off(this.rightBtn,component.VMouseUtils.MOUSE_UP,this.rightBtnMouseUpHdl,this);component.VMouseUtils.off(this.rightBtn,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.rightBtnMouseUpHdl,this);}
if(this.scroll&&this.face){component.VMouseUtils.off(this.face,component.VMouseUtils.MOUSE_DOWN,this.faceMouseDownHandler,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.contentMouseMoveHdl,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.faceMouseMoveHandler,this);TweenMax.killTweensOf(this.face);component.VMouseWheel.getInstance().unregisterEvent(this.face);}
component.VMouseUtils.off(this.content,component.VMouseUtils.MOUSE_DOWN,this.contentDownHdl,this);component.VComponentUtils.dispatcher.removeEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,this.enterFrameHdl,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.contentUpHdl,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP,this.contentUpHdl,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.stageMouseUpHandler,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP,this.stageMouseUpHandler,this);this.removeAllEventListeners();TweenMax.killTweensOf(this.content);component.VMouseWheel.getInstance().unregisterEvent(this.content);core.VUtils.cleanObj(this);};VHorScroll.prototype.leftBtnMouseDownHdl=function(){if(this.direction==-1){component.VComponentUtils.dispatcher.addEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,this.enterFrameHdl,this);component.VMouseUtils.on(this.leftBtn,component.VMouseUtils.MOUSE_UP,this.leftBtnMouseUpHdl,this);component.VMouseUtils.on(this.leftBtn,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.leftBtnMouseUpHdl,this);}
this.direction=0;};VHorScroll.prototype.leftBtnMouseUpHdl=function(){this.direction=-1;component.VComponentUtils.dispatcher.removeEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,this.enterFrameHdl,this);component.VMouseUtils.off(this.leftBtn,component.VMouseUtils.MOUSE_UP,this.leftBtnMouseUpHdl,this);component.VMouseUtils.off(this.leftBtn,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.leftBtnMouseUpHdl,this);};VHorScroll.prototype.rightBtnMouseDownHdl=function(){if(this.direction==-1){component.VComponentUtils.dispatcher.addEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,this.enterFrameHdl,this);component.VMouseUtils.on(this.rightBtn,component.VMouseUtils.MOUSE_UP,this.rightBtnMouseUpHdl,this);component.VMouseUtils.on(this.rightBtn,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.rightBtnMouseUpHdl,this);}
this.direction=1;};VHorScroll.prototype.rightBtnMouseUpHdl=function(){this.direction=-1;component.VComponentUtils.dispatcher.removeEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,this.enterFrameHdl,this);component.VMouseUtils.off(this.rightBtn,component.VMouseUtils.MOUSE_UP,this.rightBtnMouseUpHdl,this);component.VMouseUtils.off(this.rightBtn,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.rightBtnMouseUpHdl,this);};VHorScroll.prototype.faceMouseDownHandler=function(e){component.VComponentUtils.startDrag(this.face,new PIXI.Rectangle(this.track.x,this.track.y,this.track.width-this.face.width,0));component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP,this.stageMouseUpHandler,this);component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.stageMouseUpHandler,this);component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.faceMouseMoveHandler,this);};VHorScroll.prototype.stageMouseUpHandler=function(){component.VComponentUtils.stopDrag(this.face);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP,this.stageMouseUpHandler,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.stageMouseUpHandler,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.faceMouseMoveHandler,this);};VHorScroll.prototype.faceMouseMoveHandler=function(){var contentX=this.masker.x-((this.face.x-this.track.x)/this.sRange)*this.cRange;if(this.isTween)
TweenMax.to(this.content,this.duration,{x:contentX,onUpdate:this.onTweenUpdate.bind(this)});else
this.content.x=contentX;this.dispatchEventWith(VHorScroll.HORSSCROLL_CHANGE_POS,contentX);};VHorScroll.prototype.updateScroll=function(contentSize){if(contentSize===void 0){contentSize=-1;}
if(contentSize==-1)
contentSize=this.content.width;this.cSize=contentSize;if(this.content.x<this.masker.x-(this.cSize-this.masker.width))
this.content.x=this.masker.x-(this.cSize-this.masker.width);if(this.content.x>this.masker.x)
this.content.x=this.masker.x;if(contentSize<=this.masker.width){this.setScrollVisible(false);return;}
else
this.setScrollVisible(true);this.cRange=this.cSize-this.masker.width;if(this.scroll&&this.face){this.sRange=this.track.width-this.face.width;this.face.x=this.track.x+((this.masker.x-this.content.x)/this.cRange)*this.sRange;}};VHorScroll.prototype.setScrollVisible=function(visi){if(this.scroll)
this.scroll.visible=visi;};VHorScroll.prototype.setContentPos=function(pos,duration){if(duration===void 0){duration=0.5;}
var newX=pos;if(newX<this.masker.x-(this.cSize-this.masker.width))
newX=this.masker.x-(this.cSize-this.masker.width);if(newX>this.masker.x)
newX=this.masker.x;if(this.isTween)
TweenMax.to(this.content,duration,{x:newX});else
this.content.x=newX;if(this.face&&this.track){var newFacePos=this.track.x+((this.masker.x-newX)/this.cRange)*this.sRange;if(this.isTween)
TweenMax.to(this.face,duration,{x:newFacePos});else
this.face.x=newFacePos;this.dispatchEventWith(VHorScroll.HORSSCROLL_CHANGE_POS,newX);}};VHorScroll.prototype.enterFrameHdl=function(){if(this.direction==-1)
return;if(this.direction==0){this.moveTo(this.content.x+this.speed,false);}
if(this.direction==1){this.moveTo(this.content.x-this.speed,false);}};VHorScroll.prototype.mouseWheelHdl=function(delta){this.moveScroll(delta*10*this.speed);};VHorScroll.prototype.onTweenUpdate=function(){this.dispatchEventWith(VHorScroll.HORSSCROLL_CHANGE_POS,this.content.x);};VHorScroll.prototype.moveTo=function(newX,isAnim){if(isAnim===void 0){isAnim=true;}
if(newX<this.masker.x-(this.cSize-this.masker.width))
newX=this.masker.x-(this.cSize-this.masker.width);if(newX>this.masker.x)
newX=this.masker.x;if(isAnim)
TweenMax.to(this.content,this.duration,{x:newX,onUpdate:this.onTweenUpdate.bind(this)});else{this.content.x=newX;this.dispatchEventWith(VHorScroll.HORSSCROLL_CHANGE_POS,newX);}
if(this.face){var newFacePos=this.track.x+((this.masker.x-newX)/this.cRange)*this.sRange;if(isAnim)
TweenMax.to(this.face,this.duration,{x:newFacePos});else
this.face.x=newFacePos;}};VHorScroll.prototype.moveScroll=function(dis){var newX=this.content.x+dis;this.moveTo(newX);};VHorScroll.prototype.reset=function(){this.setContentPos(this.masker.x,0);};VHorScroll.HORSSCROLL_CHANGE_POS="HORSSCROLL_CHANGE_POS";return VHorScroll;}(core.VEventDispatcher));component.VHorScroll=VHorScroll;})(component||(component={}));var component;(function(component){var VVerScroll=(function(_super){__extends(VVerScroll,_super);function VVerScroll(masker,content,scroll,contentDragged,contentSize,duration,speed){if(scroll===void 0){scroll=null;}
if(contentDragged===void 0){contentDragged=false;}
if(contentSize===void 0){contentSize=-1;}
if(duration===void 0){duration=0.3;}
if(speed===void 0){speed=6;}
var _this=_super.call(this)||this;_this.isScrolled=false;_this.parentCon=content.parent;_this.mousePos=new PIXI.Point();_this.clickedMousePos=new PIXI.Point();_this.direction=-1;_this.content=content;_this.scroll=scroll;_this.duration=duration;_this.speed=speed;_this.masker=masker;_this.content.on('removed',_this.onRemovedHdl,_this);if(scroll&&scroll["upBtn"]&&scroll["downBtn"])
_this.isFull=true;if(_this.isFull){_this.upBtn=scroll["upBtn"];_this.downBtn=scroll["downBtn"];if(!_this.upBtn||!_this.downBtn)
throw new Error("this.upBtn or this.downBtn is null!");_this.sSize=_this.upBtn.height-1;}
else{_this.sSize=0;}
_this.content.y=_this.masker.y;if(scroll&&scroll["face"]){_this.face=scroll["face"];_this.track=scroll["track"];_this.face.y=_this.track.y;}
_this.updateScroll(contentSize);if(_this.face){component.VMouseWheel.getInstance().register(_this.face,_this.mouseWheelHdl.bind(_this));component.VMouseUtils.on(_this.face,component.VMouseUtils.MOUSE_DOWN,_this.faceMouseDownHandler,_this);}
component.VMouseWheel.getInstance().register(_this.content,_this.mouseWheelHdl.bind(_this));if(_this.isFull){component.VMouseUtils.on(_this.upBtn,component.VMouseUtils.MOUSE_DOWN,_this.upBtnMouseDownHdl,_this);component.VMouseUtils.on(_this.downBtn,component.VMouseUtils.MOUSE_DOWN,_this.downBtnMouseDownHdl,_this);}
if(contentDragged){component.VMouseUtils.on(_this.content,component.VMouseUtils.MOUSE_DOWN,_this.contentDownHdl,_this);}
return _this;}
VVerScroll.prototype.resize=function(w,h){TweenMax.killTweensOf(this.content);if(this.scroll&&this.face)
TweenMax.killTweensOf(this.face);this.masker.width=w;this.masker.height=h;this.updateScroll();};VVerScroll.prototype.contentDownHdl=function(){var mp=component.VMouseUtils.mousePos();mp=this.content.parent.toLocal(mp);this.clickedContentPos=this.content.y;this.clickedMousePos.copy(mp);this.mousePos.x=mp.x;this.mousePos.y=mp.y;component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.contentMouseMoveHdl,this);component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP,this.contentUpHdl,this);component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.contentUpHdl,this);};VVerScroll.prototype.contentUpHdl=function(){component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.contentMouseMoveHdl,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP,this.contentUpHdl,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.contentUpHdl,this);};VVerScroll.prototype.contentMouseMoveHdl=function(){var mp=component.VMouseUtils.mousePos();mp=this.content.parent.toLocal(mp);var dy=mp.y-this.clickedMousePos.y;this.moveTo(this.clickedContentPos+dy);this.mousePos.x=mp.x;this.mousePos.y=mp.y;};VVerScroll.prototype.onRemovedHdl=function(){trace("VVerScroll::onRemovedHdl");this.content.off('removed',this.onRemovedHdl,this);if(this.scroll&&this.upBtn){component.VMouseUtils.off(this.upBtn,component.VMouseUtils.MOUSE_DOWN,this.upBtnMouseDownHdl,this);component.VMouseUtils.off(this.upBtn,component.VMouseUtils.MOUSE_UP,this.upBtnMouseUpHdl,this);component.VMouseUtils.off(this.upBtn,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.upBtnMouseUpHdl,this);component.VMouseUtils.off(this.downBtn,component.VMouseUtils.MOUSE_DOWN,this.downBtnMouseDownHdl,this);component.VMouseUtils.off(this.downBtn,component.VMouseUtils.MOUSE_UP,this.downBtnMouseUpHdl,this);component.VMouseUtils.off(this.downBtn,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.downBtnMouseUpHdl,this);}
if(this.scroll&&this.face){component.VMouseUtils.off(this.face,component.VMouseUtils.MOUSE_DOWN,this.faceMouseDownHandler,this);TweenMax.killTweensOf(this.face);component.VMouseWheel.getInstance().unregisterEvent(this.face);component.VMouseUtils.off(this.face,component.VMouseUtils.MOUSE_DOWN,this.faceMouseDownHandler,this);}
component.VMouseUtils.off(this.content,component.VMouseUtils.MOUSE_DOWN,this.contentDownHdl,this);component.VComponentUtils.dispatcher.removeEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,this.enterFrameHdl,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.contentUpHdl,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP,this.contentUpHdl,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.stageMouseUpHandler,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP,this.stageMouseUpHandler,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.contentMouseMoveHdl,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.faceMouseMoveHandler,this);TweenMax.killTweensOf(this.content);component.VMouseWheel.getInstance().unregisterEvent(this.content);core.VUtils.cleanObj(this);};VVerScroll.prototype.upBtnMouseDownHdl=function(){if(this.direction==-1){component.VComponentUtils.dispatcher.addEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,this.enterFrameHdl,this);component.VMouseUtils.on(this.upBtn,component.VMouseUtils.MOUSE_UP,this.upBtnMouseUpHdl,this);component.VMouseUtils.on(this.upBtn,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.upBtnMouseUpHdl,this);}
this.direction=0;};VVerScroll.prototype.upBtnMouseUpHdl=function(){this.direction=-1;component.VComponentUtils.dispatcher.removeEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,this.enterFrameHdl,this);component.VMouseUtils.off(this.upBtn,component.VMouseUtils.MOUSE_UP,this.upBtnMouseUpHdl,this);component.VMouseUtils.off(this.upBtn,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.upBtnMouseUpHdl,this);};VVerScroll.prototype.downBtnMouseDownHdl=function(){if(this.direction==-1){component.VComponentUtils.dispatcher.addEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,this.enterFrameHdl,this);component.VMouseUtils.on(this.downBtn,component.VMouseUtils.MOUSE_UP,this.downBtnMouseUpHdl,this);component.VMouseUtils.on(this.downBtn,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.downBtnMouseUpHdl,this);}
this.direction=1;};VVerScroll.prototype.downBtnMouseUpHdl=function(){this.direction=-1;component.VComponentUtils.dispatcher.removeEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,this.enterFrameHdl,this);component.VMouseUtils.off(this.downBtn,component.VMouseUtils.MOUSE_UP,this.downBtnMouseUpHdl,this);component.VMouseUtils.off(this.downBtn,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.downBtnMouseUpHdl,this);};VVerScroll.prototype.faceMouseDownHandler=function(e){component.VComponentUtils.startDrag(this.face,new PIXI.Rectangle(this.track.x,this.track.y,0,this.track.height-this.face.height));component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP,this.stageMouseUpHandler,this);component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.stageMouseUpHandler,this);component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.faceMouseMoveHandler,this);};VVerScroll.prototype.stageMouseUpHandler=function(){component.VComponentUtils.stopDrag(this.face);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP,this.stageMouseUpHandler,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.stageMouseUpHandler,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_MOVE,this.faceMouseMoveHandler,this);};VVerScroll.prototype.faceMouseMoveHandler=function(){var contentY=this.masker.y-((this.face.y-this.track.y)/this.sRange)*this.cRange;TweenMax.to(this.content,this.duration,{y:contentY,onUpdate:this.onTweenUpdate.bind(this)});this.dispatchEventWith(VVerScroll.VERSSCROLL_CHANGE_POS,contentY);};VVerScroll.prototype.updateScroll=function(contentSize){if(contentSize===void 0){contentSize=-1;}
if(contentSize==-1)
contentSize=this.content.height+10;this.cSize=contentSize;if(this.content.y<this.masker.y-(this.cSize-this.masker.height))
this.content.y=this.masker.y-(this.cSize-this.masker.height);if(this.content.y>this.masker.y)
this.content.y=this.masker.y;if(contentSize<=this.masker.height){this.setScrollVisible(false);return;}
else
this.setScrollVisible(true);this.cRange=this.cSize-this.masker.height;if(this.scroll&&this.face){this.sRange=this.track.height-this.face.height;this.face.y=this.track.y+((this.masker.y-this.content.y)/this.cRange)*this.sRange;}};VVerScroll.prototype.setScrollVisible=function(visi){if(this.scroll)
this.scroll.visible=visi;};VVerScroll.prototype.setContentPos=function(pos,duration){if(duration===void 0){duration=0.5;}
var newY=pos;if(newY<this.masker.y-(this.cSize-this.masker.height))
newY=this.masker.y-(this.cSize-this.masker.height);if(newY>this.masker.y)
newY=this.masker.y;TweenMax.to(this.content,duration,{y:newY});if(this.face&&this.track){var newFacePos=this.track.y+((this.masker.y-newY)/this.cRange)*this.sRange;TweenMax.to(this.face,duration,{y:newFacePos});this.dispatchEventWith(VVerScroll.VERSSCROLL_CHANGE_POS,newY);}};VVerScroll.prototype.enterFrameHdl=function(){if(this.direction==-1)
return;if(this.direction==0){this.moveTo(this.content.y+this.speed,false);}
if(this.direction==1){this.moveTo(this.content.y-this.speed,false);}};VVerScroll.prototype.mouseWheelHdl=function(delta){if(this.scroll&&this.scroll.visible)
this.moveScroll(delta*10*this.speed);};VVerScroll.prototype.moveScroll=function(dis){var newY=this.content.y+dis;this.moveTo(newY);};VVerScroll.prototype.onTweenUpdate=function(){this.dispatchEventWith(VVerScroll.VERSSCROLL_CHANGE_POS,this.content.y);};VVerScroll.prototype.moveTo=function(newY,isAnim){if(isAnim===void 0){isAnim=true;}
if(newY<this.masker.y-(this.cSize-this.masker.height))
newY=this.masker.y-(this.cSize-this.masker.height);if(newY>this.masker.y)
newY=this.masker.y;if(isAnim)
TweenMax.to(this.content,this.duration,{y:newY,onUpdate:this.onTweenUpdate.bind(this)});else{this.content.y=newY;this.dispatchEventWith(component.VHorScroll.HORSSCROLL_CHANGE_POS,newY);}
if(this.face){var newFacePos=this.track.y+((this.masker.y-newY)/this.cRange)*this.sRange;if(isAnim)
TweenMax.to(this.face,this.duration,{y:newFacePos});else
this.face.y=newFacePos;}};VVerScroll.prototype.reset=function(){this.setContentPos(this.masker.y,0);};VVerScroll.VERSSCROLL_CHANGE_POS="VERSSCROLL_CHANGE_POS";return VVerScroll;}(core.VEventDispatcher));component.VVerScroll=VVerScroll;})(component||(component={}));var component;(function(component){var StatusMessage=(function(_super){__extends(StatusMessage,_super);function StatusMessage(w,h,style,maxQueue,hideHdl){if(maxQueue===void 0){maxQueue=3;}
if(hideHdl===void 0){hideHdl=null;}
var _this=_super.call(this)||this;_this.viewW=w;_this.viewH=h;_this.msgQueue=[];_this.maxQueue=maxQueue;_this.hideHdl=hideHdl;_this.tfCon=new PIXI.Container();_this.addChild(_this.tfCon);var tf=game.GameUtils.createText('',style);_this.tf=tf;_this.tf.style.wordWrap=true;_this.tf.style.wordWrapWidth=w*0.95;_this.tfCon.addChild(tf);if(style.align=='center'){tf.anchor.x=0.5;_this.tfCon.x=w*0.5;}
else
_this.tfCon.x=5;tf.anchor.y=0.5;tf.y=h*0.5;_this.beginFill(0x000000,0.5);_this.drawRect(0,0,w,h);_this.endFill();_this.alpha=0;_this.visible=false;_this.on('removed',_this.onRemovedHdl,_this);return _this;}
StatusMessage.prototype.onRemovedHdl=function(){trace("StatusMessage::onRemovedHdl");this.off('removed',this.onRemovedHdl,this);TweenMax.killTweensOf(this);clearTimeout(this.showStatusTimerId);};StatusMessage.prototype.show=function(msg,autoHide,showImmediately){if(autoHide===void 0){autoHide=true;}
if(showImmediately===void 0){showImmediately=false;}
TweenMax.killTweensOf(this);this.alpha=1;this.visible=true;if(!autoHide){clearTimeout(this.showStatusTimerId);this.setText(msg);return;}
if(showImmediately){this.setText(msg);clearTimeout(this.showStatusTimerId);this.showStatusTimerId=setTimeout(this.onNextStatus.bind(this),2000);}
else{if(this.showStatusTimerId){this.msgQueue.push(msg);if(this.msgQueue.length>this.maxQueue)
this.msgQueue.shift();}
else{this.setText(msg);clearTimeout(this.showStatusTimerId);this.showStatusTimerId=setTimeout(this.onNextStatus.bind(this),2000);}}};StatusMessage.prototype.setText=function(str){this.tfCon.scale.x=1;this.tfCon.scale.y=1;this.tf.text=str;if(this.tfCon.width>this.viewW-8)
this.tfCon.width=this.viewW-8;this.tfCon.scale.y=this.tfCon.scale.x;};StatusMessage.prototype.onHide=function(){this.visible=false;if(this.hideHdl)
this.hideHdl();};StatusMessage.prototype.onNextStatus=function(){if(this.msgQueue.length==0){this.showStatusTimerId=0;TweenMax.to(this,0.5,{alpha:0,onComplete:this.onHide.bind(this)});return;}
var msg=this.msgQueue.shift();trace("onNextStatus "+msg);this.setText(msg);clearTimeout(this.showStatusTimerId);this.showStatusTimerId=setTimeout(this.onNextStatus.bind(this),2000);};return StatusMessage;}(PIXI.Graphics));component.StatusMessage=StatusMessage;})(component||(component={}));var component;(function(component){var VBitmapUtils=(function(){function VBitmapUtils(){if(VBitmapUtils.instance)
throw new Error('singleton error!');this.bitmapDataMap={};this.jsonDataMap={};this.cleaned=false;}
VBitmapUtils.getInstance=function(){if(!VBitmapUtils.instance)
VBitmapUtils.instance=new VBitmapUtils();return VBitmapUtils.instance;};VBitmapUtils.prototype.loadFileAsync=function(url,callBack){var req=new XMLHttpRequest();req.open("GET",url,true);req.onreadystatechange=function(){if(req.readyState==4){callBack(req.responseText);}};req.send();};VBitmapUtils.prototype.getRootUrl=function(url){var arr=url.split('/');arr.pop();return arr.join('/')+'/';};VBitmapUtils.prototype.addImageData=function(url,callBack){var img=new Image();img.src=url;img.onload=function(){if(this.cleaned)
return;img.style.display='none';var canvas=document.createElement('canvas');canvas.width=img.width;canvas.height=img.height;canvas.style.display='none';var ctx=canvas.getContext('2d');ctx.drawImage(img,0,0);this.bitmapDataMap[url]={rotated:false,x:0,y:0,w:img.width,h:img.height,context:ctx};if(callBack)
callBack();}.bind(this);};VBitmapUtils.prototype.clearJsonData=function(url){this.cleaned=true;if(!this.jsonDataMap[url]){trace("VBitmapUtils error: no bitmap found!");return;}
for(var i in this.jsonDataMap[url].frames){if(!this.bitmapDataMap[i])
break;delete this.bitmapDataMap[i].context;delete this.bitmapDataMap[i];}
delete this.jsonDataMap[url];};VBitmapUtils.prototype.addJsonData=function(url,callBack){this.loadFileAsync(url,function(data){var json=JSON.parse(data);this.jsonDataMap[url]=json;var imageUrl=this.getRootUrl(url)+json.meta.image;var img=new Image();img.src=imageUrl;img.onload=function(){img.style.display='none';var canvas=document.createElement('canvas');canvas.width=img.width;canvas.height=img.height;canvas.style.display='none';var ctx=canvas.getContext('2d');ctx.drawImage(img,0,0);var info;for(var i in json.frames){info=json.frames[i];this.bitmapDataMap[i]={rotated:info.rotated,x:info.frame.x,y:info.frame.y,w:(!info.rotated?info.frame.w:info.frame.h),h:(!info.rotated?info.frame.h:info.frame.w),context:ctx};}
if(callBack)
callBack();}.bind(this);}.bind(this));};VBitmapUtils.prototype.getPixelData=function(url,x,y,w,h){if(!this.bitmapDataMap[url]){trace("VBitmapUtils error: no bitmap found!");return null;}
var data=this.bitmapDataMap[url];var nx,ny,nw,nh;if(!data.rotated){nx=data.x+x;ny=data.y+y;nw=w;nh=h;}
else{nx=data.x+data.w-y-h;ny=data.y+x;nw=h;nh=w;}
if(nx<data.x||ny<data.y||nx>data.x+data.w||ny>data.y+data.h)
return null;return data.context.getImageData(nx,ny,nw,nh);};return VBitmapUtils;}());component.VBitmapUtils=VBitmapUtils;})(component||(component={}));var component;(function(component){var VBufferAnim=(function(_super){__extends(VBufferAnim,_super);function VBufferAnim(w,h,segment){if(segment===void 0){segment=5;}
var _this=_super.call(this)||this;_this.w=w;_this.h=h;_this.segment=segment;_this.dirs=[];_this.scales=[];for(var i=0;i<segment;i++)
_this.dirs[i]=-1;for(var i=0;i<segment;i++)
_this.scales[segment-i-1]=1+i*_this.dirs[i]*0.05;var canvas=new PIXI.Graphics();_this.canvas=canvas;_this.addChild(canvas);_this.on('removed',_this.onRemovedHdl,_this);component.VComponentUtils.dispatcher.addEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,_this.update,_this);return _this;}
VBufferAnim.prototype.onRemovedHdl=function(){this.off('removed',this.onRemovedHdl,this);component.VComponentUtils.dispatcher.removeEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,this.update,this);};VBufferAnim.prototype.update=function(){if(!this.canvas||!this.canvas.visible)
return;var w=this.w;var h=this.h;var segment=this.segment;var p=new PIXI.Point(0,0);var dis=w/segment/2;var w2=(w-dis*(segment-1))/segment;this.canvas.clear();this.canvas.beginFill(0xCDCDCD);for(var i=0;i<segment;i++){this.scales[i]+=0.015*this.dirs[i];if(this.scales[i]<0.5||this.scales[i]>1)
this.dirs[i]=-this.dirs[i];this.canvas.drawRect(p.x,(h-h*this.scales[i])*0.5,w2,h*this.scales[i]);p.x+=w2+dis;}
this.canvas.endFill();};return VBufferAnim;}(PIXI.Container));component.VBufferAnim=VBufferAnim;})(component||(component={}));var component;(function(component){var VButton=(function(_super){__extends(VButton,_super);function VButton(arr,handler,lockDelay){if(handler===void 0){handler=null;}
if(lockDelay===void 0){lockDelay=0;}
var _this=_super.call(this)||this;_this.lockDelay=lockDelay;_this.btnStateEnable=true;_this.downPos=new PIXI.Point();if(arr[0]instanceof PIXI.Texture){_this.bg=new PIXI.extras.MovieClip(arr);_this.isMovie=true;}
else{_this.bg=new PIXI.Container();for(var i=0;i<arr.length;i++)
_this.bg.addChild(arr[i]);}
_this.addChild(_this.bg);_this.vframes=arr;_this.handler=handler;_this.showFrame(0);if(handler){_this.buttonMode=true;component.VMouseUtils.on(_this,component.VMouseUtils.MOUSE_OVER,_this.onBtnOver,_this);component.VMouseUtils.on(_this,component.VMouseUtils.MOUSE_OUT,_this.onBtnOut,_this);component.VMouseUtils.on(_this,component.VMouseUtils.MOUSE_DOWN,_this.onBtnDown,_this);component.VMouseUtils.on(_this,component.VMouseUtils.MOUSE_UP,_this.onBtnUp,_this);}
_this.isLocked=false;_this.isEnabled=true;_this.on('removed',_this.onRemovedHdl,_this);return _this;}
VButton.createSimple=function(handler,title,w,h,textColor,c1,c2,radius){if(w===void 0){w=50;}
if(h===void 0){h=25;}
if(textColor===void 0){textColor=0x000000;}
if(c1===void 0){c1=0x555555;}
if(c2===void 0){c2=0x777777;}
if(radius===void 0){radius=5;}
var bg=new PIXI.Graphics();bg.beginFill(c1);bg.drawRoundedRect(0,0,w,h,radius);bg.endFill();var bg1=new PIXI.Graphics();bg1.beginFill(c2);bg1.drawRoundedRect(0,0,w,h,radius);bg1.endFill();var tf=component.VComponentUtils.createNormalText(title,14,textColor);tf.style.fontStyle='bold';tf.anchor.x=0.5;tf.anchor.y=0.5;tf.x=bg.width*0.5;tf.y=bg.height*0.5;var btn=new VButton([bg,bg1],handler);btn.addChild(tf);btn['tf']=tf;return btn;};VButton.prototype.setBgAlpha=function(a){for(var i=0;i<this.vframes.length;i++)
this.vframes[i].alpha=a;};VButton.prototype.setWidth=function(w){for(var i=0;i<this.vframes.length;i++)
this.vframes[i].width=w;};VButton.prototype.getWidth=function(){return this.vframes[0].width;};VButton.prototype.onRemovedHdl=function(){trace("VButton::onRemovedHdl");this.off('removed',this.onRemovedHdl,this);if(this.handler){delete this.handler;component.VMouseUtils.off(this,component.VMouseUtils.MOUSE_OVER,this.onBtnOver,this);component.VMouseUtils.off(this,component.VMouseUtils.MOUSE_OUT,this.onBtnOut,this);component.VMouseUtils.off(this,component.VMouseUtils.MOUSE_DOWN,this.onBtnDown,this);component.VMouseUtils.off(this,component.VMouseUtils.MOUSE_UP,this.onBtnUp,this);}
if(this.lockDelay>0)
clearTimeout(this.lockTimeoutId);core.VUtils.cleanObj(this);};VButton.prototype.showFrame=function(frame){if(this.tf)
this.tf.alpha=frame==0?1:0.7;if(this.isMovie)
this.bg.gotoAndStop(frame);else{for(var i=0;i<this.vframes.length;i++)
this.vframes[i].visible=false;this.vframes[frame].visible=true;}};VButton.prototype.onBtnUp=function(){if(this.isLocked)
return;if(this.lockDelay>0){this.isLocked=true;this.lockTimeoutId=setTimeout(this.onLockTimeout.bind(this),this.lockDelay);}
if(Math.abs(component.VMouseUtils.mousePos().x-this.downPos.x)>=5||Math.abs(component.VMouseUtils.mousePos().y-this.downPos.y)>=5)
return;if(this.btnStateEnable&&!this.isActive)
this.showFrame(1);if(this.handler)
this.handler.length==0?this.handler():this.handler(this);};VButton.prototype.setLockDelay=function(d){this.lockDelay=d;};VButton.prototype.onLockTimeout=function(){this.isLocked=false;};VButton.prototype.onBtnDown=function(){if(!this.isEnabled)
return;this.downPos.copy(component.VMouseUtils.mousePos());if(this.btnStateEnable&&!this.isActive)
this.showFrame(0);};VButton.prototype.onBtnOut=function(){if(!this.isEnabled)
return;if(this.btnStateEnable&&!this.isActive)
this.showFrame(0);};VButton.prototype.onBtnOver=function(){if(!this.isEnabled)
return;if(this.btnStateEnable&&!this.isActive)
this.showFrame(1);};VButton.prototype.lock=function(){this.isLocked=true;};VButton.prototype.unlock=function(){this.isLocked=false;};VButton.prototype.enable=function(){this.buttonMode=true;this.isEnabled=true;};VButton.prototype.dissable=function(){this.buttonMode=false;this.isEnabled=false;};VButton.prototype.setActive=function(active){this.isActive=active;this.showFrame(active?1:0);};return VButton;}(PIXI.Container));component.VButton=VButton;})(component||(component={}));var component;(function(component){var VCalenda=(function(_super){__extends(VCalenda,_super);function VCalenda(iconW,iconH,viewW,viewH,maxW,maxH,date,timezoneOffset,iconUrl,fSize,iconColor){if(date===void 0){date=null;}
if(timezoneOffset===void 0){timezoneOffset=-1;}
if(iconUrl===void 0){iconUrl="";}
if(fSize===void 0){fSize=12;}
if(iconColor===void 0){iconColor=0x000000;}
var _this=_super.call(this)||this;_this.timezoneOffset=timezoneOffset;_this.fSize=fSize;var dis=2;_this.dis=dis;var fColor=0x000000;_this.viewW=viewW;_this.viewH=viewH;_this.maxW=maxW;_this.maxH=maxH;_this.isExpanded=false;var icon=new PIXI.Container();icon.buttonMode=true;_this.icon=icon;_this.addChild(icon);var bg=new PIXI.Graphics();bg.beginFill(iconColor);bg.drawRoundedRect(0,0,iconW,iconH,5);bg.endFill();icon.addChild(bg);if(iconUrl){var ico=new PIXI.Sprite(PIXI.Texture.fromFrame(iconUrl));ico.scale.y=iconH*0.8/ico.height;ico.scale.x=ico.scale.y;ico.anchor.x=0.5;ico.anchor.y=0.5;ico.x=iconW-ico.width*ico.scale.x-6;ico.y=(iconH-ico.height*ico.scale.y)*0.5+3;_this.icon.addChild(ico);}
var tf=component.VComponentUtils.createNormalText('0',fSize,0xffffff);_this.dateTf=tf;icon.addChild(tf);_this.dateTf.x=5;_this.dateTf.y=(iconH-tf.height)*0.5;tf=component.VComponentUtils.createNormalText('0',fSize,fColor);_this.monthTf=tf;tf.anchor.x=0.5;tf.anchor.y=0.5;var container=new PIXI.Container();_this.container=container;container.y=iconH+dis;_this.addChild(container);var monthH=tf.height+10;bg=new PIXI.Graphics();bg.lineStyle(1,iconColor);bg.beginFill(0xEAEAEA);bg.drawRect(0,0,viewW,monthH);bg.endFill();bg.beginFill(0xffffff);bg.drawRect(0,monthH,viewW,viewH-monthH);bg.endFill();container.addChild(bg);container.addChild(tf);_this.monthTf.x=viewW*0.5;_this.monthTf.y=monthH*0.5;_this.initNextBackBtns(tf.height+6);var padding=5;var gridCon=_this.initGrid(viewW-2*padding,viewH-monthH-2*padding);gridCon.x=padding;gridCon.y=monthH+padding;_this.collapse();component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_UP,_this.iconHdl,_this);component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_DOWN,_this.onStageMouse,_this);_this.dispatcher=new core.VEventDispatcher();_this.on('removed',_this.onRemovedHdl,_this);var d=date;if(!d)
d=new Date();if(_this.timezoneOffset<0){_this.timezoneOffset=Math.round(-d.getTimezoneOffset()/60);}
else
d=component.VComponentUtils.getTimezoneDate(d.getTime(),_this.timezoneOffset);_this.setSelectedDate(d);return _this;}
VCalenda.prototype.initGrid=function(w,h){var gridCon=new PIXI.Container();this.container.addChild(gridCon);var col=7;var row=7;var cs=w/col;var rs=h/row;var fColor=0x000000;for(var i=0;i<col;i++){var tf=component.VComponentUtils.createNormalText('0',this.fSize,fColor);tf.anchor.x=0.5;tf.anchor.y=0.5;tf.x=cs*0.5+i*cs;tf.y=rs*0.5-2;tf.text=VCalenda.days[i];gridCon.addChild(tf);}
this.grid=[];for(var i=1;i<row;i++){this.grid[i-1]=[];for(var j=0;j<col;j++){var f0=new PIXI.Graphics();var f1=new PIXI.Graphics();f0.beginFill(0xffffff,1);f0.drawRect(0,0,cs,rs);f0.endFill();f0.x=-cs*0.5;f0.y=-rs*0.5;f1.lineStyle(1,0x54656F);f1.beginFill(0xC6DBEC);f1.drawRect(0,0,cs,rs);f1.endFill();f1.x=-cs*0.5;f1.y=-rs*0.5;var item=new component.VButton([f0,f1],this.onDateItemHdl.bind(this));item.x=cs*0.5+j*cs;item.y=rs*0.5+i*rs;var tf=component.VComponentUtils.createNormalText('0',this.fSize,fColor);tf.anchor.x=0.5;tf.anchor.y=0.5;item.addChild(tf);item['tf']=tf;this.grid[i-1][j]=item;gridCon.addChild(item);}}
return gridCon;};VCalenda.prototype.setSelectedDate=function(d){d=new Date(d.getTime());this.selectedDate=d;this.curDate=new Date(d.getTime());this.setDate(d);this.updateGrid(d);};VCalenda.prototype.setDate=function(d){this.dateTf.text=component.VComponentUtils.getIntInFormat(d.getDate())+'/'+component.VComponentUtils.getIntInFormat(d.getMonth()+1)+'/'+d.getFullYear()+' '+component.VComponentUtils.getIntInFormat(d.getHours())+':'+component.VComponentUtils.getIntInFormat(d.getMinutes())
+'(GMT+'+this.timezoneOffset+')';};VCalenda.prototype.updateGrid=function(d){var startDay=new Date(d.getFullYear(),d.getMonth(),1).getDay();var monthDate=new Date(d.getFullYear(),d.getMonth()+1,0).getDate();var item;var col=7;var row=6;this.monthTf.text=VCalenda.months[d.getMonth()]+"   "+d.getFullYear();for(var i=0;i<col*row;i++){item=this.grid[Math.floor(i/col)][i%col];item.setActive(false);if(i<startDay||i>=startDay+monthDate){item.visible=false;continue;}
item.visible=true;item['date']=(i-startDay+1);item.tf.text=(i-startDay+1).toString();}
if(this.selectedDate&&d.getFullYear()==this.selectedDate.getFullYear()&&d.getMonth()==this.selectedDate.getMonth()){var index=startDay+this.selectedDate.getDate()-1;item=this.grid[Math.floor(index/col)][index%col];item.setActive(true);}};VCalenda.prototype.onDateItemHdl=function(target){var item=target;this.curDate.setDate(item['date']);this.setSelectedDate(this.curDate);this.collapse();};VCalenda.prototype.initNextBackBtns=function(btnS){var f0=new PIXI.Graphics();var f1=new PIXI.Graphics();var d=5;var thick=3;f0.beginFill(0xffffff,0);f0.drawRect(0,0,btnS,btnS);f0.endFill();f0.lineStyle(thick,0x212121);f0.moveTo(d,d);f0.lineTo(btnS-d,btnS*0.5);f0.lineTo(d,btnS-d);f1.beginFill(0xffffff,0);f1.drawRect(0,0,btnS,btnS);f1.endFill();f1.lineStyle(thick,0x555555);f1.moveTo(d,d);f1.lineTo(btnS-d,btnS*0.5);f1.lineTo(d,btnS-d);this.nextBtn=new component.VButton([f0,f1],this.onNextHdl.bind(this));this.nextBtn.x=this.viewW-10-btnS;this.nextBtn.y=2;this.container.addChild(this.nextBtn);f0=new PIXI.Graphics();f1=new PIXI.Graphics();f0.beginFill(0xffffff,0);f0.drawRect(0,0,btnS,btnS);f0.endFill();f0.lineStyle(thick,0x212121);f0.moveTo(btnS-d,d);f0.lineTo(d,btnS*0.5);f0.lineTo(btnS-d,btnS-d);f1.beginFill(0xffffff,0);f1.drawRect(0,0,btnS,btnS);f1.endFill();f1.lineStyle(thick,0x555555);f1.moveTo(btnS-d,d);f1.lineTo(d,btnS*0.5);f1.lineTo(btnS-d,btnS-d);this.backBtn=new component.VButton([f0,f1],this.onBackHdl.bind(this));this.backBtn.x=10;this.backBtn.y=2;this.container.addChild(this.backBtn);};VCalenda.prototype.onNextHdl=function(){this.curDate.setMonth(this.curDate.getMonth()+1);this.updateGrid(this.curDate);};VCalenda.prototype.onBackHdl=function(){this.curDate.setMonth(this.curDate.getMonth()-1);this.updateGrid(this.curDate);};VCalenda.prototype.onChange=function(e){component.VHtmlInput.deepUpdateTf();};VCalenda.prototype.onRemovedHdl=function(){trace("VCalenda::onRemovedHdl");this.off('removed',this.onRemovedHdl,this);this.dispatcher.removeAllEventListeners();component.VMouseUtils.off(this.icon,component.VMouseUtils.MOUSE_UP,this.iconHdl,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_DOWN,this.onStageMouse,this);core.VUtils.cleanObj(this);};VCalenda.prototype.onStageMouse=function(e){if(!this.isExpanded)
return;var mp=component.VMouseUtils.mousePos();mp=this.icon.parent.toLocal(mp);var notHit=(mp.x<this.icon.x||mp.y<this.icon.y||mp.x>this.icon.x+this.icon.width||mp.y>this.icon.y+this.icon.height)&&(mp.x<this.px||mp.y<this.py||mp.x>this.px+this.viewW||mp.y>this.py+this.viewH);if(notHit)
this.collapse();};VCalenda.prototype.iconHdl=function(){this.isExpanded=!this.isExpanded;if(this.isExpanded)
this.expand();else
this.collapse();};VCalenda.prototype.expand=function(){this.setSelectedDate(this.selectedDate);this.isExpanded=true;this.container.visible=true;var icon=this.icon;var dis=this.dis;var m=new PIXI.Point(this.maxW,this.maxH);m=component.VComponentUtils.mainCon.toGlobal(m);m=icon.parent.toLocal(m);var px=icon.x+icon.width>=m.x?icon.x-this.viewW:icon.x;var py=icon.y+icon.height+dis+this.viewH>=m.y?icon.y-dis-this.viewH:icon.y+icon.height+dis;this.px=px;this.py=py;this.container.x=px;this.container.y=py;};VCalenda.prototype.collapse=function(){this.isExpanded=false;this.container.visible=false;};VCalenda.prototype.show=function(){this.visible=true;this.setSelectedDate(this.selectedDate);};VCalenda.prototype.hide=function(){this.visible=false;};VCalenda.months=["January","February","March","April","May","June","July","August","September","October","November","December"];VCalenda.days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return VCalenda;}(PIXI.Container));component.VCalenda=VCalenda;})(component||(component={}));var component;(function(component){var VComboBox=(function(_super){__extends(VComboBox,_super);function VComboBox(icon,content,scroll,viewW,viewH,maxW,maxH,dis,contentDragged,bgColor){if(dis===void 0){dis=5;}
if(contentDragged===void 0){contentDragged=true;}
if(bgColor===void 0){bgColor=0x26231E;}
var _this=_super.call(this)||this;_this.icon=icon;icon.buttonMode=true;_this.content=content;_this.scroll=scroll;_this.viewW=viewW;_this.viewH=viewH;_this.maxW=maxW;_this.maxH=maxH;_this.isExpanded=false;_this.container=new PIXI.Container();icon.parent.addChild(_this.container);var bg=new PIXI.Graphics();bg.beginFill(bgColor);bg.drawRect(0,0,viewW,viewH);bg.endFill();_this.container.addChild(bg);var masker=new PIXI.Graphics();masker.beginFill(0x0000ff);masker.drawRect(0,0,viewW,viewH);masker.endFill();_this.container.addChild(masker);content.mask=masker;var masker2=new PIXI.Graphics();masker2.x=masker.x;masker2.y=masker.y;masker2.beginFill(0x0000ff);masker2.drawRect(0,0,viewW,viewH);masker2.endFill();masker2.alpha=0;_this.masker=masker2;_this.container.addChild(content);if(scroll){scroll.x=viewW-scroll.width-2;_this.container.addChild(scroll);}
_this.collapse();_this.scroller=new component.VVerScroll(masker2,content,scroll,contentDragged);_this.scroller.addEventListener(component.VVerScroll.VERSSCROLL_CHANGE_POS,_this.onChange,_this);component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_UP,_this.iconHdl,_this);component.VMouseUtils.on(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_DOWN,_this.onStageMouse,_this);_this.icon.on('removed',_this.onRemovedHdl,_this);return _this;}
VComboBox.prototype.onChange=function(e){component.VHtmlInput.deepUpdateTf();};VComboBox.prototype.onRemovedHdl=function(){trace("VComboBox::onRemovedHdl");this.icon.off('removed',this.onRemovedHdl,this);component.VMouseUtils.off(this.icon,component.VMouseUtils.MOUSE_UP,this.iconHdl,this);component.VMouseUtils.off(component.VComponentUtils.stage,component.VMouseUtils.MOUSE_DOWN,this.onStageMouse,this);core.VUtils.cleanObj(this);};VComboBox.prototype.onStageMouse=function(e){if(!this.isExpanded)
return;var mp=component.VMouseUtils.mousePos();mp=this.icon.parent.toLocal(mp);var notHit=(mp.x<this.icon.x||mp.y<this.icon.y||mp.x>this.icon.x+this.icon.width||mp.y>this.icon.y+this.icon.height)&&(mp.x<this.px||mp.y<this.py||mp.x>this.px+this.viewW||mp.y>this.py+this.viewH);if(notHit)
this.collapse();};VComboBox.prototype.iconHdl=function(){this.isExpanded=!this.isExpanded;if(this.isExpanded)
this.expand();else
this.collapse();};VComboBox.prototype.expand=function(){this.isExpanded=true;this.container.visible=true;var icon=this.icon;var dis=3;var m=new PIXI.Point(this.maxW,this.maxH);m=component.VComponentUtils.mainCon.toGlobal(m);m=icon.parent.toLocal(m);var px=icon.x+(icon.width-this.viewW)*0.5;var py=icon.y+icon.height+dis+this.viewH>=m.y?icon.y-dis-this.viewH:icon.y+icon.height+dis;this.px=px;this.py=py;this.container.x=px;this.container.y=py;component.VHtmlInput.deepUpdateTf();};VComboBox.prototype.collapse=function(){this.isExpanded=false;this.container.visible=false;component.VHtmlInput.deepUpdateTf();};VComboBox.prototype.show=function(){this.icon.visible=true;this.container.visible=true;};VComboBox.prototype.hide=function(){this.icon.visible=false;this.container.visible=false;};return VComboBox;}(core.VEventDispatcher));component.VComboBox=VComboBox;})(component||(component={}));var component;(function(component){var VComponentUtils=(function(){function VComponentUtils(){}
VComponentUtils.getTimezoneDate=function(time,tz){var d=new Date(time);if(tz<0)
return d;d.setTime(d.getTime()+d.getTimezoneOffset()*60000+tz*3600000);return d;};VComponentUtils.hexToColor=function(hex){var c=hex;var r=c>>16;var g=(c>>8)&255;var b=c&255;return{r:r,g:g,b:b};};VComponentUtils.initialize=function(stage,mainCon,renderer){if(this.isInited)
throw new Error("VComponentUtils double init!");VComponentUtils.isMobile=VComponentUtils.mobile.checkAll();this.isInited=true;VComponentUtils.mainCon=mainCon;VComponentUtils.registeredStartDragArr=new Array();VComponentUtils.startDragRecMap=new Object();VComponentUtils.startDragDisMap=new Object();VComponentUtils.stage=stage;VComponentUtils.renderer=renderer;component.VMouseUtils.on(stage,component.VMouseUtils.MOUSE_MOVE,VComponentUtils.stageMouseMoveHdl,null);VComponentUtils.dispatcher=new core.VEventDispatcher();VComponentUtils.initMouseWheelEvents();VComponentUtils.SIN_MAP=[];VComponentUtils.COS_MAP=[];VComponentUtils.TAN_MAP=[];for(var i=0;i<360;i++){VComponentUtils.SIN_MAP[i]=Math.sin(i*Math.PI/180);VComponentUtils.COS_MAP[i]=Math.cos(i*Math.PI/180);VComponentUtils.TAN_MAP[i]=Math.tan(i*Math.PI/180);}
var body=eval('$(window)');body.keydown(function(e){component.VInputText.onKeyDown(e);VComponentUtils.dispatcher.dispatchEventWith(VComponentUtils.KEY_DOWN_EVENT,e);});body.keyup(function(e){VComponentUtils.dispatcher.dispatchEventWith(VComponentUtils.KEY_UP_EVENT,e);});body.keypress(function(e){component.VInputText.onKeyPress(e);VComponentUtils.dispatcher.dispatchEventWith(VComponentUtils.KEY_PRESS_EVENT,e);});};VComponentUtils.getUTCTime=function(date){var d=new Date(date.getTime());d.setMinutes(d.getMinutes()-d.getTimezoneOffset());return d.getTime();};VComponentUtils.sin=function(ang){while(ang<0)
ang+=360;return VComponentUtils.SIN_MAP[Math.round(ang%360)];};VComponentUtils.cos=function(ang){while(ang<0)
ang+=360;return VComponentUtils.COS_MAP[Math.round(ang%360)];};VComponentUtils.tan=function(ang){while(ang<0)
ang+=360;return VComponentUtils.TAN_MAP[Math.round(ang%360)];};VComponentUtils.initMouseWheelEvents=function(){var element=document;if(element.addEventListener){element.addEventListener("mousewheel",VComponentUtils.domMouseWheelHandler,false);element.addEventListener("DOMMouseScroll",VComponentUtils.domMouseWheelHandler,false);}
else if(element['attachEvent'])
element['attachEvent']("onmousewheel",VComponentUtils.domMouseWheelHandler);};VComponentUtils.domMouseWheelHandler=function(e){var e=e||window.event;e.preventDefault();var delta=Math.max(-1,Math.min(1,(e.wheelDelta||-e.detail)));component.VMouseWheel.getInstance().mouseWheelHdl(delta);e.returnValue=false;};VComponentUtils.update=function(){VComponentUtils.dispatcher.dispatchEventWith(VComponentUtils.GAME_UPDATE_EVENT,null);};VComponentUtils.stageMouseMoveHdl=function(e){var mc;var rec;var x;var y;for(var i=0;i<VComponentUtils.registeredStartDragArr.length;i++){mc=VComponentUtils.registeredStartDragArr[i];rec=VComponentUtils.startDragRecMap[core.VUtils.getObjKey(mc)];var p=new PIXI.Point(e["data"].global.x,e["data"].global.y);p=mc.parent.toLocal(p);x=p.x-VComponentUtils.startDragDisMap[core.VUtils.getObjKey(mc)].x;y=p.y-VComponentUtils.startDragDisMap[core.VUtils.getObjKey(mc)].y;if(rec){if(x<rec.x)
x=rec.x;if(x>rec.x+rec.width)
x=rec.x+rec.width;if(y<rec.y)
y=rec.y;if(y>rec.y+rec.height)
y=rec.y+rec.height;}
mc.x=x;mc.y=y;}};VComponentUtils.startDrag=function(mc,rec){if(VComponentUtils.startDragRecMap[core.VUtils.getObjKey(mc)])
return;VComponentUtils.registeredStartDragArr.push(mc);VComponentUtils.startDragRecMap[core.VUtils.getObjKey(mc)]=rec;var p=component.VMouseUtils.mousePos();p=mc.parent.toLocal(p);p.x=p.x-mc.x;p.y=p.y-mc.y;VComponentUtils.startDragDisMap[core.VUtils.getObjKey(mc)]=p;};VComponentUtils.stopDrag=function(mc){core.VUtils.removeElementFromArray(VComponentUtils.registeredStartDragArr,mc);delete VComponentUtils.startDragRecMap[core.VUtils.getObjKey(mc)];delete VComponentUtils.startDragDisMap[core.VUtils.getObjKey(mc)];};VComponentUtils.findInArr=function(arr,propName,val){for(var i=0;i<arr.length;i++)
if(arr[i][propName]==val)
return arr[i];return null;};VComponentUtils.removeElementFromArray=function(arr,e){for(var i=0;i<arr.length;i++){if(arr[i]===e){arr.splice(i,1);return;}}};VComponentUtils.dissableBtn=function(btn){btn.buttonMode=false;btn.alpha=0.5;btn.interactive=false;};VComponentUtils.enableBtn=function(btn){btn.buttonMode=true;btn.alpha=1;btn.interactive=true;};VComponentUtils.getIntInFormat=function(val,d){if(d===void 0){d=2;}
val=Math.round(val);var str=val.toString();var zero="0000000000000000";return zero.substr(0,d-str.length)+str;};VComponentUtils.getNumInFormat=function(num,d){if(d===void 0){d=2;}
num=Math.round(num*Math.pow(10,d))/Math.pow(10,d);var sign=num<0?"-":"";num=Math.abs(num);var s=num.toString();var arr=s.split('.');var s0=arr[0];var pre="";var count=0;for(var i=s0.length-1;i>0;i--){count++;pre=s0.charAt(i)+pre;if(count==3&&i>0){pre=','+pre;count=0;}}
pre=s0.charAt(0)+pre;if(d==0)
return sign+pre;var zero="0000000000000000";if(arr.length==1)
return sign+pre;var s1=String(arr[1]).substr(0,d);s1+=zero.substr(0,d-s1.length);if(parseInt(s1)>0)
return sign+pre+'.'+s1;else
return sign+pre;};VComponentUtils.deepClean=function(con){if(!(con instanceof PIXI.DisplayObject)){for(var i in con)
delete con[i];return;}
if(con.destructor)
con.destructor();if(con instanceof PIXI.Container){var child;while(con.children&&con.children.length){child=con.getChildAt(0);VComponentUtils.deepClean(child);}}
if(con.parent)
con.parent.removeChild(con);con.destroy();};VComponentUtils.getFont=function(){switch(LANG){case"jp":return"Meiryo";case"kh":return"Nokora";case"th":return"Tahoma";case"cs":return"Microsoft YaHei";case"kr":return"Malgun Gothic";case"vn":return"Arial";case"en":case"id":return"DinMedium";default:return"Arial";}};VComponentUtils.getFontScale=function(){switch(LANG){case"cs":return 0.95;case"jp":return 0.9;case"en":case"id":return 1.05;case"kh":return 1.05;default:return 1;}};VComponentUtils.createText=function(str,style,scaleFactor){if(style===void 0){style=null;}
if(scaleFactor===void 0){scaleFactor=1.4;}
if(!style)
style={fontFamily:"Arial",fontSize:12,fill:0xFAF1E2};style.fontFamily=VComponentUtils.getFont();if(style.fill==0xffffff)
style.fill=0xFAF1E2;if(LANG=='cs'||LANG=='jp'||LANG=='th'||LANG=='kh'||LANG=='kr')
style.breakWords=true;if(!style['adjustedFont']){style.fontSize=Math.round(style.fontSize*scaleFactor*VComponentUtils.getFontScale());style['adjustedFont']=true;}
var tf=new PIXI.Text(str,style,4);if(scaleFactor!=1){tf.scale.x=1/scaleFactor;tf.scale.y=tf.scale.x;}
tf['orgScaleX']=tf.scale.x;tf['orgScaleY']=tf.scale.y;return tf;};VComponentUtils.createNormalText=function(str,fontSize,fill,fontStyle,fontFamily,scaleFactor){if(fontSize===void 0){fontSize=12;}
if(fill===void 0){fill=0xFAF1E2;}
if(fontStyle===void 0){fontStyle='';}
if(fontFamily===void 0){fontFamily="Arial";}
if(scaleFactor===void 0){scaleFactor=1.6;}
var style={fontFamily:fontFamily,fontSize:fontSize,fill:fill,fontStyle:fontStyle};return VComponentUtils.createText(str,style,scaleFactor);};VComponentUtils.getDateStr=function(d,hasGMT){if(hasGMT===void 0){hasGMT=true;}
return VComponentUtils.getIntInFormat(d.getDate())+'/'+VComponentUtils.getIntInFormat(d.getMonth()+1)+'/'+d.getFullYear()+' '+VComponentUtils.getIntInFormat(d.getHours())+':'+VComponentUtils.getIntInFormat(d.getMinutes())
+':'+VComponentUtils.getIntInFormat(d.getSeconds())+(hasGMT?' '+'(GMT+'+(-Math.round(d.getTimezoneOffset()/60))+')':'');};VComponentUtils.alignImg=function(img,w,h,x,y,isFull){if(x===void 0){x=0;}
if(y===void 0){y=0;}
if(isFull===void 0){isFull=false;}
if(isFull){if(w/h<img.width/img.height){img.height=h;img.scale.x=img.scale.y;img.x=x+(w-img.width)*0.5;}
else{img.width=w;img.scale.y=img.scale.x;img.y=y+(h-img.height)*0.5;}
return;}
if(w/h>img.width/img.height){img.height=h;img.scale.x=img.scale.y;img.x=x+(w-img.width)*0.5;}
else{img.width=w;img.scale.y=img.scale.x;img.y=y+(h-img.height)*0.5;}};VComponentUtils.openWindowPopup=function(url,name,w,h,center,left,top){if(center===void 0){center=false;}
if(left===void 0){left=0;}
if(top===void 0){top=0;}
var x=center?(screen.width/2)-(w/2):left;var y=center?(screen.height/2)-(h/2):top;var popup=window.open(url,name,"left="+x+",top="+y+",width="+w+",height="+h);return popup;};VComponentUtils.sort=function(ar,compareFunc){for(var i=(ar.length-1);i>=0;i--){for(var j=1;j<=i;j++){if(compareFunc(ar[j-1],ar[j])){var temp=ar[j-1];ar[j-1]=ar[j];ar[j]=temp;}}}};VComponentUtils.TEXT_OPTIMIZE_FACTOR=1.5;VComponentUtils.GAME_UPDATE_EVENT="VComponentUtils_GAME_UPDATE_EVENT";VComponentUtils.KEY_DOWN_EVENT="VComponentUtils_KEY_DOWN_EVENT";VComponentUtils.KEY_UP_EVENT="VComponentUtils_KEY_UP_EVENT";VComponentUtils.KEY_PRESS_EVENT="VComponentUtils_KEY_PRESS_EVENT";VComponentUtils.mobile={Android:function(){return navigator.userAgent.match(/Android/i)!=null;},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)!=null;},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)!=null;},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)!=null;},Windows:function(){return(navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i))!=null;},checkAll:function(){return(VComponentUtils.mobile.Android()||VComponentUtils.mobile.BlackBerry()||VComponentUtils.mobile.iOS()||VComponentUtils.mobile.Opera()||VComponentUtils.mobile.Windows());}};return VComponentUtils;}());component.VComponentUtils=VComponentUtils;})(component||(component={}));var component;(function(component){var VHBufferAnim=(function(_super){__extends(VHBufferAnim,_super);function VHBufferAnim(w,h,segment){if(segment===void 0){segment=5;}
var _this=_super.call(this)||this;_this.w=w;_this.h=h;_this.segment=segment;_this.dirs=[];_this.scales=[];for(var i=0;i<segment;i++)
_this.dirs[i]=-1;for(var i=0;i<segment;i++)
_this.scales[segment-i-1]=1+i*_this.dirs[i]*0.05;var canvas=document.createElement('canvas');canvas.style.position="absolute";_this.canvas=canvas;_this.on('removed',_this.onRemovedHdl,_this);component.VComponentUtils.dispatcher.addEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,_this.update,_this);return _this;}
VHBufferAnim.prototype.onRemovedHdl=function(){this.off('removed',this.onRemovedHdl,this);this.canvas.parentNode.removeChild(this.canvas);component.VComponentUtils.dispatcher.removeEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,this.update,this);};VHBufferAnim.prototype.update=function(){if(!this.canvas||!this.canvas.getContext||this.canvas.style.display=='none')
return;var w=this.w;var h=this.h;var segment=this.segment;var p=new PIXI.Point(0,0);var dis=w/segment/2;var w2=(w-dis*(segment-1))/segment;var ctx=this.canvas.getContext('2d');ctx.clearRect(0,0,w+1,h+1);ctx.fillStyle="#CDCDCD";for(var i=0;i<segment;i++){this.scales[i]+=0.015*this.dirs[i];if(this.scales[i]<0.5||this.scales[i]>1)
this.dirs[i]=-this.dirs[i];ctx.fillRect(p.x,(h-h*this.scales[i])*0.5,w2,h*this.scales[i]);p.x+=w2+dis;}};return VHBufferAnim;}(PIXI.Container));component.VHBufferAnim=VHBufferAnim;})(component||(component={}));var component;(function(component){var VHtmlDateInput=(function(_super){__extends(VHtmlDateInput,_super);function VHtmlDateInput(input,w,h){if(input===void 0){input=null;}
if(w===void 0){w=0;}
if(h===void 0){h=0;}
var _this=_super.call(this)||this;if(!input){input=document.createElement("input");input.type="date";document.body.appendChild(input);}
input.style.zIndex='12';input.style.position='absolute';_this.input=input;if(w>0)
input.style.width=w+'px';if(h>0)
input.style.height=h+'px';_this.inputW=_this.input.getBoundingClientRect().width;_this.inputH=_this.input.getBoundingClientRect().height;_this.sizeHandlerBinding=_this.sizeHandler.bind(_this);window.addEventListener('resize',_this.sizeHandlerBinding);_this.on('removed',_this.onRemovedHdl,_this);_this.timeoutId=setTimeout(_this.sizeHandlerBinding,100);if(!VHtmlDateInput.tfMap)
VHtmlDateInput.tfMap={};VHtmlDateInput.tfMap[core.VUtils.getObjKey(_this)]=_this;return _this;}
VHtmlDateInput.deepUpdate=function(){if(!VHtmlDateInput.tfMap)
return;for(var i in VHtmlDateInput.tfMap){VHtmlDateInput.tfMap[i].sizeHandler();}};VHtmlDateInput.prototype.onRemovedHdl=function(){trace("VHtmlDateInput::onRemovedHdl");clearTimeout(this.timeoutId);this.input.parentNode.removeChild(this.input);this.off('removed',this.onRemovedHdl,this);window.removeEventListener('resize',this.sizeHandlerBinding);delete VHtmlDateInput.tfMap[core.VUtils.getObjKey(this)];};VHtmlDateInput.prototype.sizeHandler=function(){this.timeoutId=0;var p=new PIXI.Point(this.x,this.y);p=this.parent.toGlobal(p);var scx=1;var pa=this;var visible=true;while(pa){scx*=pa.scale.x;if(!pa.visible)
visible=false;pa=pa.parent;}
this.input.style.display=visible?'':'none';this.input.style.transform='scale('+scx+')';this.input.style.left=p.x-(this.inputW-this.inputW*scx)*0.5+'px';this.input.style.top=p.y-(this.inputH-this.inputH*scx)*0.5+'px';};return VHtmlDateInput;}(PIXI.Container));component.VHtmlDateInput=VHtmlDateInput;})(component||(component={}));var component;(function(component){var VHtmlInput=(function(_super){__extends(VHtmlInput,_super);function VHtmlInput(str,w,h,style,maxChar){if(maxChar===void 0){maxChar=12;}
var _this=_super.call(this)||this;if(style.fill.toString().charAt(0)!='#')
throw new Error("style.fill must be string color format #....");_this.maxChar=maxChar;_this.style=style;_this.inputW=w;_this.inputH=h;_this.inputFSzie=style.fontSize;var input=document.createElement("INPUT");_this.input=input;input.setAttribute("type","text");input.setAttribute("maxlength",maxChar);input.setAttribute("value",str);input.style.zIndex='11';input.style.width=_this.inputW+"px";input.style.height=_this.inputH+"px";input.style.position="absolute";input.style.background="transparent";input.style.border="none";input.style.fontSize=style.fontSize+'px';input.style.color=style.fill;document.body.appendChild(input);_this.sizeHandlerBinding=_this.sizeHandler.bind(_this);window.addEventListener('resize',_this.sizeHandlerBinding);_this.on('removed',_this.onRemovedHdl,_this);_this.timeoutId=setTimeout(_this.sizeHandlerBinding,100);if(!VHtmlInput.tfMap)
VHtmlInput.tfMap={};VHtmlInput.tfMap[core.VUtils.getObjKey(_this)]=_this;return _this;}
VHtmlInput.deepUpdateTf=function(){if(!VHtmlInput.tfMap)
return;for(var i in VHtmlInput.tfMap){VHtmlInput.tfMap[i].sizeHandler();}};VHtmlInput.prototype.clear=function(){};VHtmlInput.prototype.onRemovedHdl=function(){trace("VHtmlInput::onRemovedHdl");clearTimeout(this.timeoutId);this.input.parentNode.removeChild(this.input);this.off('removed',this.onRemovedHdl,this);window.removeEventListener('resize',this.sizeHandlerBinding);delete VHtmlInput.tfMap[core.VUtils.getObjKey(this)];};VHtmlInput.prototype.sizeHandler=function(){this.timeoutId=0;var visible=true;var p=new PIXI.Point(this.x,this.y);p=game.GameUtils.localToGlobal(this.parent,p);p.x=gameOrigin.x+gameScale*p.x,p.y=gameOrigin.y+gameScale*p.y;var sc=1;var pa=this;while(pa){sc*=pa.scale.x;pa=pa.parent;}
pa=this;while(pa){visible=pa.visible;pa=pa.parent;if(!visible)
break;}
this.input.style.display=visible?'':'none';this.input.style.fontSize=this.inputFSzie*gameScale+'px';this.input.style.width=this.inputW*sc*gameScale+'px';this.input.style.height=this.inputH*sc*gameScale+'px';this.input.style.left=p.x+'px';this.input.style.top=p.y+'px';};VHtmlInput.prototype.setVisible=function(visi){this.visible=visi;this.sizeHandler();};VHtmlInput.prototype.setHtmlZindex=function(zIndex){this.input.style.zIndex=zIndex;};return VHtmlInput;}(PIXI.Container));component.VHtmlInput=VHtmlInput;})(component||(component={}));var component;(function(component){var VInputText=(function(_super){__extends(VInputText,_super);function VInputText(str,style,maxChar,scaleFactor){if(maxChar===void 0){maxChar=12;}
if(scaleFactor===void 0){scaleFactor=1.4;}
var _this=_super.call(this)||this;_this.maxChar=maxChar;_this.updateCaretInterval=setInterval(_this.updateCaret.bind(_this),400);var tf=component.VComponentUtils.createText(str,style,scaleFactor);_this.tf=tf;_this.cw=_this.tf.text.length==0?0:_this.tf.width/_this.tf.text.length;_this.addChild(tf);_this.caret=new PIXI.Graphics();_this.caret.lineStyle(1,0x000000);_this.caret.beginFill(0x589DD8);_this.caret.drawRect(0,0,2,tf.height);_this.caret.endFill();_this.addChild(_this.caret);_this.caret.visible=false;_this.on('removed',_this.onRemovedHdl,_this);component.VMouseUtils.on(_this,component.VMouseUtils.MOUSE_DOWN,_this.onMouseDown,_this);_this.keyDownBinding=_this.onKeyDown.bind(_this);return _this;}
VInputText.onKeyPress=function(e){if(VInputText.activeTf)
VInputText.activeTf.onKeyPress(e);};VInputText.onKeyDown=function(e){if(VInputText.activeTf)
VInputText.activeTf.onKeyDown(e);};VInputText.prototype.onRemovedHdl=function(){trace("VInputText::onRemovedHdl");this.off('removed',this.onRemovedHdl,this);clearInterval(this.updateCaretInterval);this.cancelForcus();component.VMouseUtils.off(this,component.VMouseUtils.MOUSE_DOWN,this.onMouseDown,this);};VInputText.prototype.setText=function(str){str=str.substr(0,this.maxChar);this.tf.text=str;this.cw=this.tf.text.length==0?0:this.tf.width/this.tf.text.length;this.cindex=str.length;this.updateCaretPos();};VInputText.prototype.updateCaretPos=function(){this.caret.x=this.cindex*this.cw;};VInputText.prototype.onKeyPress=function(e){var keyCode=e.keyCode;var cw=this.tf.width/this.tf.text.length;var inp=String.fromCharCode(keyCode);if(/[a-zA-Z0-9-_ ]/.test(inp)&&this.tf.text.length<this.maxChar){this.tf.text=this.tf.text.substring(0,this.cindex)+String.fromCharCode(keyCode)+this.tf.text.substring(this.cindex,this.tf.text.length);this.cw=this.tf.text.length==0?0:this.tf.width/this.tf.text.length;this.cindex++;this.updateCaretPos();}};VInputText.prototype.onKeyDown=function(e){var keyCode=e.keyCode;switch(keyCode){case 19:this.cancelForcus();break;case 37:if(this.cindex>0){this.cindex--;this.updateCaretPos();}
break;case 39:if(this.cindex<this.tf.text.length){this.cindex++;this.updateCaretPos();}
break;case 8:if(this.cindex>0){this.cindex--;this.tf.text=this.tf.text.substring(0,this.cindex)+this.tf.text.substring(this.cindex+1,this.tf.text.length);this.updateCaretPos();}
break;case 46:if(this.cindex<this.tf.text.length){this.tf.text=this.tf.text.substring(0,this.cindex)+this.tf.text.substring(this.cindex+1,this.tf.text.length);}
break;}};VInputText.prototype.forcus=function(){this.caret.visible=true;if(this!=component.VInputText.activeTf)
this.cindex=this.tf.text.length;else if(this.tf.text.length==0)
this.caret.x=0;else{var mp=component.VMouseUtils.mousePos();mp=this.toLocal(mp);this.cindex=this.cw>0?Math.ceil(mp.x/this.cw):0;}
this.updateCaretPos();if(component.VInputText.activeTf&&component.VInputText.activeTf!=this)
component.VInputText.activeTf.cancelForcus();component.VInputText.activeTf=this;};VInputText.prototype.cancelForcus=function(){this.caret.visible=false;if(component.VInputText.activeTf==this)
component.VInputText.activeTf=null;};VInputText.prototype.onMouseDown=function(){this.forcus();};VInputText.prototype.updateCaret=function(){if(!this.caret.visible)
return;this.caret.alpha=this.caret.alpha==1?0:1;};VInputText.activeTf=null;return VInputText;}(PIXI.Container));component.VInputText=VInputText;})(component||(component={}));var component;(function(component){var VMessage=(function(_super){__extends(VMessage,_super);function VMessage(){var _this=_super.call(this)||this;_this.bg=new PIXI.Graphics();_this.addChild(_this.bg);_this.messageTf=component.VComponentUtils.createText('',{fontFamily:"dinbold",fontSize:30,fontStyle:'bold',fill:0xffffff,align:'center'});_this.addChild(_this.messageTf);_this.messageTf.anchor.x=0.5;_this.messageTf.anchor.y=0.5;return _this;}
VMessage.prototype.setSize=function(w,h){this.bg.clear();this.bg.lineStyle(0,0,0);this.bg.beginFill(0x000000,0.5);this.bg.drawRect(0,0,w,h);this.bg.endFill();this.messageTf.x=w*0.5;this.messageTf.y=h*0.5;};VMessage.prototype.show=function(msg){if(msg===void 0){msg="";}
this.visible=true;this.messageTf.text=msg;};VMessage.prototype.hide=function(){this.visible=false;};return VMessage;}(PIXI.Container));component.VMessage=VMessage;})(component||(component={}));document.addEventListener("contextmenu",function(e){e.preventDefault();if(component.VMouseUtils.dispatcher)
component.VMouseUtils.dispatcher.dispatchEventWith(component.VMouseUtils.MOUSE_RIGHT_CLICK,new PIXI.Point(e.clientX,e.clientY));},false);var component;(function(component){var VMouseUtils=(function(){function VMouseUtils(){}
VMouseUtils.initialize=function(){VMouseUtils.dispatcher=new core.VEventDispatcher();};VMouseUtils.on=function(target,type,handler,context){switch(type){case VMouseUtils.MOUSE_DOWN:target.interactive=true;target.on('mousedown',handler,context);target.on('touchstart',handler,context);break;case VMouseUtils.MOUSE_UP:target.interactive=true;target.on('mouseup',handler,context);target.on('touchend',handler,context);break;case VMouseUtils.MOUSE_MOVE:target.interactive=true;target.on('mousemove',handler,context);target.on('touchmove',handler,context);break;case VMouseUtils.MOUSE_UP_OUTSIDE:target.interactive=true;target.on('mouseupoutside',handler,context);target.on('touchendoutside',handler,context);break;case VMouseUtils.MOUSE_OVER:if(component.VComponentUtils.isMobile)
return;target.interactive=true;target.on('mouseover',handler,context);break;case VMouseUtils.MOUSE_OUT:target.interactive=true;target.on('mouseout',handler,context);break;case VMouseUtils.MOUSE_RIGHT_CLICK:VMouseUtils.dispatcher.addEventListener(VMouseUtils.MOUSE_RIGHT_CLICK,handler,context);break;}};VMouseUtils.off=function(target,type,handler,context){switch(type){case VMouseUtils.MOUSE_DOWN:target.off('mousedown',handler,context);target.off('touchstart',handler,context);break;case VMouseUtils.MOUSE_UP:target.off('mouseup',handler,context);target.off('touchend',handler,context);break;case VMouseUtils.MOUSE_MOVE:target.off('mousemove',handler,context);target.off('touchmove',handler,context);break;case VMouseUtils.MOUSE_UP_OUTSIDE:target.off('mouseupoutside',handler,context);target.off('touchendoutside',handler,context);break;case VMouseUtils.MOUSE_OVER:target.off('mouseover',handler,context);break;case VMouseUtils.MOUSE_OUT:target.off('mouseout',handler,context);break;case VMouseUtils.MOUSE_RIGHT_CLICK:VMouseUtils.dispatcher.removeEventListener(VMouseUtils.MOUSE_RIGHT_CLICK,handler,context);break;}};VMouseUtils.mousePos=function(){return component.VComponentUtils.renderer["plugins"].interaction.eventData.data.global;};VMouseUtils.MOUSE_RIGHT_CLICK='MouseUtils_MOUSE_RIGHT_CLICK';VMouseUtils.MOUSE_DOWN='MouseUtils_MOUSE_DOWN';VMouseUtils.MOUSE_UP='MouseUtils_MOUSE_UP';VMouseUtils.MOUSE_UP_OUTSIDE='MouseUtils_MOUSE_UP_OUTSIDE';VMouseUtils.MOUSE_MOVE='MouseUtils_MOUSE_MOVE';VMouseUtils.MOUSE_OUT='MouseUtils_MOUSE_OUT';VMouseUtils.MOUSE_OVER='MouseUtils_MOUSE_OVER';return VMouseUtils;}());component.VMouseUtils=VMouseUtils;})(component||(component={}));component.VMouseUtils.initialize();var component;(function(component){var VMouseWheel=(function(){function VMouseWheel(){if(VMouseWheel.instance)
throw new Error("MouseWheel singleton error!");this.targetMap=new Object();this.stage=component.VComponentUtils.stage;}
VMouseWheel.getInstance=function(){if(!VMouseWheel.instance)
VMouseWheel.instance=new VMouseWheel();return VMouseWheel.instance;};VMouseWheel.prototype.unregisterAllEvents=function(){for(var i in this.targetMap){if(this.targetMap.hasOwnProperty(i))
delete this.targetMap[i];this.targetMap[i]=null;}};VMouseWheel.prototype.unregisterEvent=function(target){if(this.targetMap[core.VUtils.getObjKey(target)]){delete this.targetMap[core.VUtils.getObjKey(target)];this.targetMap[core.VUtils.getObjKey(target)]=null;target.off('mousedown',this.targetMouseDownHdl,this);}};VMouseWheel.prototype.register=function(target,wheelHdl){if(this.targetMap[core.VUtils.getObjKey(target)]){trace("MouseWheel - target registered allready!");return;}
this.targetMap[core.VUtils.getObjKey(target)]=wheelHdl;target.interactive=true;target.on('mousedown',this.targetMouseDownHdl,this);};VMouseWheel.prototype.mouseWheelHdl=function(delta){if(this.selectedTarget&&this.targetMap[core.VUtils.getObjKey(this.selectedTarget)])
this.targetMap[core.VUtils.getObjKey(this.selectedTarget)](delta);};VMouseWheel.prototype.targetMouseDownHdl=function(e){this.selectedTarget=e.target;};return VMouseWheel;}());component.VMouseWheel=VMouseWheel;})(component||(component={}));var component;(function(component){var VTabMng=(function(_super){__extends(VTabMng,_super);function VTabMng(){return _super.call(this)||this;}
VTabMng.prototype.onRemovedHdl=function(){trace("VTabMng::onRemovedHdl");this.btns[0].off('removed',this.onRemovedHdl,this);for(var i=0;i<this.btns.length;i++){delete this.btns[i]['vTabMngContentRef'];component.VMouseUtils.off(this.btns[i],component.VMouseUtils.MOUSE_DOWN,this.onBtn,this);}
core.VUtils.cleanObj(this);};VTabMng.prototype.removeBtn=function(btn_index){var btn=typeof(btn_index)=='number'?this.btns[btn_index]:btn_index;component.VMouseUtils.off(btn,component.VMouseUtils.MOUSE_DOWN,this.onBtn,this);component.VComponentUtils.removeElementFromArray(this.btns,btn);};VTabMng.prototype.initialize=function(btns,contents){if(contents===void 0){contents=null;}
this.btns=btns;if(contents)
for(var i=0;i<contents.length;i++)
contents[i].visible=false;for(var i=0;i<btns.length;i++){if(btns[i]instanceof PIXI.extras.MovieClip)
btns[i].gotoAndStop(0);else
btns[i].setActive(false);if(contents)
btns[i]['vTabMngContentRef']=contents[i];component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_DOWN,this.onBtn,this);}
this.setActive(btns[0]);btns[0].on('removed',this.onRemovedHdl,this);};VTabMng.prototype.resetTabs=function(){for(var i=0;i<this.btns.length;i++){component.VMouseUtils.off(this.btns[i],component.VMouseUtils.MOUSE_DOWN,this.onBtn,this);}
this.activeBtn=null;this.btns=[];};VTabMng.prototype.setActiveInd=function(ind){this.setActive(this.btns[ind]);};VTabMng.prototype.setActive=function(btn){if(this.activeBtn){if(this.activeBtn instanceof PIXI.extras.MovieClip)
this.activeBtn.gotoAndStop(0);else
this.activeBtn.setActive(false);if(this.activeBtn['vTabMngContentRef'])
this.activeBtn['vTabMngContentRef'].visible=false;}
this.activeBtn=btn;if(this.activeBtn instanceof PIXI.extras.MovieClip)
this.activeBtn.gotoAndStop(1);else
this.activeBtn.setActive(true);if(this.activeBtn['vTabMngContentRef'])
this.activeBtn['vTabMngContentRef'].visible=true;this.dispatchEventWith(VTabMng.CHANGE,btn);};VTabMng.prototype.onBtn=function(e){if(e.target==this.activeBtn)
return;this.setActive(e.target);};VTabMng.CHANGE="VTabMng_CHANGE";return VTabMng;}(core.VEventDispatcher));component.VTabMng=VTabMng;})(component||(component={}));var component;(function(component){var VToggleButton=(function(_super){__extends(VToggleButton,_super);function VToggleButton(frame0,frame1,handler,isToggleEnable){if(handler===void 0){handler=null;}
if(isToggleEnable===void 0){isToggleEnable=true;}
var _this=_super.call(this)||this;_this.isToggleEnable=isToggleEnable;_this.addChild(frame0);_this.addChild(frame1);frame1.visible=false;_this.arr=[frame0,frame1];_this.handler=handler;_this.currentFrame=0;component.VMouseUtils.on(_this,component.VMouseUtils.MOUSE_UP,_this.onToggle,_this);_this.on('removed',_this.onRemovedHdl,_this);return _this;}
VToggleButton.prototype.onRemovedHdl=function(){trace("VToggleButton::onRemovedHdl");this.off('removed',this.onRemovedHdl,this);component.VMouseUtils.off(this,component.VMouseUtils.MOUSE_UP,this.onToggle,this);core.VUtils.cleanObj(this);};VToggleButton.prototype.onToggle=function(){if(this.isToggleEnable){this.arr[this.currentFrame].visible=false;this.currentFrame=this.currentFrame==0?1:0;this.arr[this.currentFrame].visible=true;}
if(this.handler)
this.handler.length==0?this.handler():this.handler(this);};VToggleButton.prototype.setFrame=function(f){this.arr[this.currentFrame].visible=false;this.currentFrame=f;this.arr[this.currentFrame].visible=true;};return VToggleButton;}(PIXI.Container));component.VToggleButton=VToggleButton;})(component||(component={}));var component;(function(component){var VToolTip=(function(){function VToolTip(){this.hideTimeoutId=0;this.map={};}
VToolTip.prototype.clear=function(){for(var i in this.map){this.removeToolTip(this.map[i].target);}
this.map=null;core.VUtils.cleanObj(this);};VToolTip.prototype.onOverlayMouseMove=function(){if(!this.activeTarget)
return;this.updatePos(this.activeTarget);};VToolTip.prototype.initialize=function(tooltip,rec){this.rec=rec;VToolTip.tooltip=tooltip;if(!VToolTip.con){VToolTip.con=new PIXI.Container();VToolTip.tooltip.addChild(VToolTip.con);}
if(!VToolTip.bg){VToolTip.bg=new PIXI.Graphics();VToolTip.con.addChild(VToolTip.bg);}
if(!VToolTip.tf){VToolTip.tf=game.GameUtils.createText('',{fontFamily:"dinbold",fontSize:15,fontStyle:'bold',fill:0xffffff,align:'left'});VToolTip.tf.x=5;VToolTip.tf.y=5;VToolTip.con.addChild(VToolTip.tf);}};VToolTip.prototype.addToolTip=function(target,msg,px,py,isManualControl){if(px===void 0){px=0;}
if(py===void 0){py=25;}
if(isManualControl===void 0){isManualControl=false;}
if(!isManualControl&&!this.map[core.VUtils.getObjKey(target)]){component.VMouseUtils.on(target,component.VMouseUtils.MOUSE_OVER,this.onTargetOver,this);component.VMouseUtils.on(target,component.VMouseUtils.MOUSE_OUT,this.onTargetOut,this);}
var p=component.VMouseUtils.mousePos();p=target.toLocal(p);this.map[core.VUtils.getObjKey(target)]={msg:msg,px:px,py:py,target:target};if(target.getLocalBounds().contains(p.x,p.y)&&(p.x!=0||p.y!=0)){VToolTip.con.visible=true;this.updatePos(target);this.updateText(target);}
else{VToolTip.con.visible=false;}};VToolTip.prototype.onTargetOver=function(e){if(!this.map[core.VUtils.getObjKey(e.target)])
return;this.activeTarget=e.target;component.VMouseUtils.off(VToolTip.tooltip,component.VMouseUtils.MOUSE_MOVE,this.onOverlayMouseMove,this);component.VMouseUtils.on(VToolTip.tooltip,component.VMouseUtils.MOUSE_MOVE,this.onOverlayMouseMove,this);VToolTip.con.visible=true;game.GlobalVals.onShownPopup(VToolTip.con);clearTimeout(this.hideTimeoutId);this.hideTimeoutId=setTimeout(this.hideTooltip.bind(this),2000);this.updatePos(e.target);this.updateText(e.target);};VToolTip.prototype.hideTooltip=function(){clearTimeout(this.hideTimeoutId);if(this.activeTarget&&!this.map[core.VUtils.getObjKey(this.activeTarget)])
return;if(!VToolTip.con.visible)
return;component.VMouseUtils.off(VToolTip.tooltip,component.VMouseUtils.MOUSE_MOVE,this.onOverlayMouseMove,this);VToolTip.con.visible=false;game.GlobalVals.onHidePopup();this.activeTarget=null;};VToolTip.prototype.onTargetOut=function(e){if(this.activeTarget!=e.target)
return;this.hideTooltip();};VToolTip.prototype.updateText=function(target){if(!this.map[core.VUtils.getObjKey(target)])
return;VToolTip.tf.text=this.map[core.VUtils.getObjKey(target)].msg;VToolTip.bg.clear();VToolTip.bg.beginFill(0x000000,0.85);VToolTip.bg.drawRoundedRect(0,0,VToolTip.tf.width+10,VToolTip.tf.height+10,5);VToolTip.bg.endFill();};VToolTip.prototype.updatePos=function(target){if(!this.map[core.VUtils.getObjKey(target)])
return;var p=component.VMouseUtils.mousePos();p=VToolTip.tooltip.toLocal(p);VToolTip.con.x=p.x+this.map[core.VUtils.getObjKey(target)].px;VToolTip.con.y=p.y+this.map[core.VUtils.getObjKey(target)].py;if(VToolTip.con.x+VToolTip.con.width>this.rec.width)
VToolTip.con.x=this.rec.width-VToolTip.con.width;if(VToolTip.con.y+VToolTip.con.height>this.rec.height)
VToolTip.con.y=p.y-this.map[core.VUtils.getObjKey(target)].py*0.5-VToolTip.con.height;};VToolTip.prototype.removeToolTip=function(target){if(!this.map)
return;if(!core.VUtils.getObjKey(target))
return;if(this.activeTarget==target)
this.activeTarget=null;delete this.map[core.VUtils.getObjKey(target)];VToolTip.con.visible=false;component.VMouseUtils.off(target,component.VMouseUtils.MOUSE_OVER,this.onTargetOver,this);component.VMouseUtils.off(target,component.VMouseUtils.MOUSE_OUT,this.onTargetOut,this);component.VMouseUtils.off(VToolTip.tooltip,component.VMouseUtils.MOUSE_MOVE,this.onOverlayMouseMove,this);};return VToolTip;}());component.VToolTip=VToolTip;})(component||(component={}));var game;(function(game){var GameObject=(function(_super){__extends(GameObject,_super);function GameObject(gameModel){var _this=_super.call(this)||this;_this.gameModel=gameModel;return _this;}
GameObject.prototype.releaseModel=function(){this.gameModel=null;for(var i=0;i<this.children.length;i++)
if(this.children[i]instanceof GameObject)
this.children[i].releaseModel();};GameObject.prototype.destructor=function(){};GameObject.prototype.destroy=function(options){_super.prototype.destroy.call(this);core.VUtils.cleanObj(this);};GameObject.prototype.changeView=function(){for(var i=0;i<this.children.length;i++)
if(this.children[i]instanceof GameObject)
this.children[i].changeView();};return GameObject;}(PIXI.Container));game.GameObject=GameObject;})(game||(game={}));var game;(function(game){var MainObject=(function(_super){__extends(MainObject,_super);function MainObject(main){var _this=_super.call(this,main?main.gameModel:null)||this;_this.main=main;return _this;}
MainObject.prototype.initModel=function(model){this.gameModel=model;return this;};MainObject.prototype.destructor=function(){trace("MainObject::destructor");};MainObject.prototype.destroy=function(options){_super.prototype.destroy.call(this);core.VUtils.cleanObj(this);};return MainObject;}(game.GameObject));game.MainObject=MainObject;})(game||(game={}));var game;(function(game){var BaseTrendIcon=(function(_super){__extends(BaseTrendIcon,_super);function BaseTrendIcon(){var _this=_super.call(this)||this;_this.BIG_SIZE=50;_this.blinkCounter=0;_this.blinkIntervalId=0;_this.size=15;_this.txt=new PIXI.Sprite();_this.addChild(_this.txt);return _this;}
BaseTrendIcon.prototype.setData=function(size,isDummy){if(isDummy===void 0){isDummy=false;}
this.size=size;this.isDummy=isDummy;return this;};BaseTrendIcon.prototype.clean=function(){this.clear();clearInterval(this.blinkIntervalId);this.alpha=1;this.isDummy=false;this.info=null;};BaseTrendIcon.prototype.clear=function(){this.txt.scale.x=1;this.txt.scale.y=1;while(this.txt.children.length){game.TrendIconPool.release(this.txt.getChildAt(0));}
if(this.img){game.TrendIconPool.release(this.img);this.img=null;}
if(this.line){game.TrendIconPool.release(this.line);this.line=null;}
if(this.bPair){game.TrendIconPool.release(this.bPair);this.bPair=null;}
if(this.pPair){game.TrendIconPool.release(this.pPair);this.pPair=null;}};BaseTrendIcon.prototype.draw=function(info){};BaseTrendIcon.prototype.drawTie=function(tieCount){};BaseTrendIcon.prototype.setType=function(type){this.type=type;};BaseTrendIcon.prototype.blink=function(){clearInterval(this.blinkIntervalId);this.blinkCounter=2*10;this.blinkIntervalId=setInterval(this.blinked.bind(this),300);};BaseTrendIcon.prototype.createImg=function(type){if(type==""){this.img=game.TrendIconPool.get('result_circle_0');this.img.visible=false;}
else
this.img=game.TrendIconPool.get(type);this.addChildAt(this.img,0);this.img.height=this.size*0.9;this.img.scale.x=this.img.scale.y;};BaseTrendIcon.prototype.blinked=function(){if(this.blinkCounter%2==0)
this.alpha=1;else
this.alpha=0.5;this.blinkCounter--;if(this.blinkCounter==0){clearInterval(this.blinkIntervalId);this.alpha=1;if(this.isDummy&&this.parent){if(this.parent.parent['onDummyRelease'])
this.parent.parent['onDummyRelease']();}}};return BaseTrendIcon;}(PIXI.Container));game.BaseTrendIcon=BaseTrendIcon;})(game||(game={}));var game;(function(game){var TrendIcon=(function(_super){__extends(TrendIcon,_super);function TrendIcon(){return _super.call(this)||this;}
TrendIcon.prototype.clean=function(){_super.prototype.clean.call(this);this.visible=true;if(this.parent)
this.parent.removeChild(this);};TrendIcon.prototype.clear=function(){_super.prototype.clear.call(this);};TrendIcon.prototype.drawTie=function(tieCount){while(this.txt.children.length){var d=(this.txt.removeChildAt(0));game.TrendIconPool.release(d);}
this.txt.scale.x=1;this.txt.scale.y=1;var tieStr=tieCount.toString();var txtH;for(var i=0;i<tieStr.length;i++){d=game.TrendIconPool.get('num_000'+(parseInt(tieStr.charAt(i))+1));txtH=d.height;d.anchor.x=0.3;d.anchor.y=0.5;d.x=-(tieStr.length-1)*15/2+i*15;this.txt.addChild(d);}
this.txt.scale.y=this.size*0.7/txtH;this.txt.scale.x=this.txt.scale.y;if(!this.line){this.line=game.TrendIconPool.get("tie_line");this.addChild(this.line);this.line.height=this.size;this.line.scale.x=this.line.scale.y;}};TrendIcon.prototype.draw=function(info){this.info=info;var result=info.result;var iconType="";if(result.charAt(game.BetType.BANKER-1)=='1')
iconType="result_circle_0";if(result.charAt(game.BetType.PLAYER-1)=='1')
iconType="result_circle_1";if(result.charAt(game.BetType.TIE-1)=='1')
iconType="";this.clear();this.createImg(iconType);this.drawPair(result);};TrendIcon.prototype.drawPair=function(result){var thickness=this.size/7;var r=this.size*0.5-thickness*0.5;var dis=r*0.7;if(result.charAt(game.BetType.BANKER_PAIR-1)=='1'){this.bPair=game.TrendIconPool.get("result_circle_3");this.addChild(this.bPair);this.bPair.x=-dis;this.bPair.y=-dis;this.bPair.scale.x=this.img.scale.x;this.bPair.scale.y=this.bPair.scale.x;}
if(result.charAt(game.BetType.PLAYER_PAIR-1)=='1'){this.pPair=game.TrendIconPool.get("result_circle_4");this.addChild(this.pPair);this.pPair.x=dis;this.pPair.y=dis;this.pPair.scale.x=this.img.scale.x;this.pPair.scale.y=this.pPair.scale.x;}};return TrendIcon;}(game.BaseTrendIcon));game.TrendIcon=TrendIcon;})(game||(game={}));var game;(function(game){var TrendContainer=(function(_super){__extends(TrendContainer,_super);function TrendContainer(gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem,blank){if(name===void 0){name="";}
if(isHoverIcon===void 0){isHoverIcon=false;}
if(minItem===void 0){minItem=250;}
if(maxItem===void 0){maxItem=300;}
if(blank===void 0){blank=-1;}
var _this=_super.call(this,gameModel)||this;_this.isHoverIcon=isHoverIcon;_this.TrendIconClass=IconClass;_this.batchNodeMap={};_this.downPos=new PIXI.Point();_this.tieCount=0;_this.blank=blank;_this.viewW=width;_this.viewH=height;_this.orgW=width;_this.orgH=height;_this.iconSize=height/maxRow;if(_this.blank==-1)
_this.blank=2*_this.iconSize;_this.maxRow=maxRow;_this.trends=[];_this.p1=new PIXI.Point();_this.p2=new PIXI.Point(0,0);_this.posMap={};_this.content=new PIXI.Container();_this.content.y=1;_this.underlay=new PIXI.Graphics();_this.addChild(_this.underlay);var style={fontFamily:"Arial",fontSize:30,fontStyle:'bold',fill:0xCDCDCD,align:'center'};_this.nameTf=game.GameUtils.createText('',style);_this.nameTf.anchor.x=0.5;_this.nameTf.anchor.y=0.5;_this.nameTf.y=height*0.5;_this.content.addChild(_this.nameTf);_this.nameTf.text=name;_this.bg=new PIXI.Graphics();_this.content.addChild(_this.bg);_this.drawBg();_this.masker=new PIXI.Graphics();_this.masker.beginFill(0x0000ff);_this.masker.drawRect(0,0,width,height);_this.masker.endFill();_this.masker.alpha=0.5;_this.addChild(_this.masker);_this.masker.interactive=false;var maskerCopy=new PIXI.Graphics();maskerCopy.beginFill(0x0000ff);maskerCopy.drawRect(0,0,width,height);maskerCopy.endFill();maskerCopy.alpha=0;_this.addChild(maskerCopy);_this.content.mask=_this.masker;_this.addChild(_this.content);_this.scroller=new component.VHorScroll(maskerCopy,_this.content,null);_this.scroller.addEventListener(component.VHorScroll.HORSSCROLL_CHANGE_POS,_this.onChange,_this);_this.gameModel.dispatcher.addEventListener(game.GameEvent.GAME_UPDATE,_this.update,_this);var frames=[PIXI.Texture.fromFrame("trend-expand01.png"),PIXI.Texture.fromFrame("trend-expand02.png")];_this.expandBtn=new PIXI.extras.MovieClip(frames);_this.expandBtn.gotoAndStop(0);_this.expandBtn.buttonMode=true;_this.expandBtn.x=width-_this.expandBtn.width-5;_this.expandBtn.y=height-_this.expandBtn.height-5;_this.addChild(_this.expandBtn);_this.isChanged=true;component.VMouseUtils.on(_this.expandBtn,component.VMouseUtils.MOUSE_UP,_this.onExpandBtn,_this);return _this;}
TrendContainer.prototype.removeEnterBtn=function(){if(this.enterBtn){this.removeChild(this.enterBtn);this.enterBtn.destroy();this.enterBtn=null;}};TrendContainer.prototype.initEnterBtn=function(tableId){this.removeEnterBtn();this.btnTableId=tableId;var c=game.GameUtils.getStudioColor(game.GameUtils.getStudio(tableId));this.enterBtn=new component.VButton([game.GameUtils.createBg(80,27,c,3,0.7),game.GameUtils.createBg(80,27,c,3,0.7)],this.onEnter.bind(this));var t=game.GameUtils.createNormalText(game.GameText.ENTER.toUpperCase());t.anchor.x=0.5;t.anchor.y=0.5;var tf=new game.FixedSizeText(this.enterBtn.width,t);tf.x=this.enterBtn.width*0.5;tf.y=this.enterBtn.height*0.5;this.enterBtn.addChild(tf);this.addChild(this.enterBtn);this.enterBtn.x=this.viewW-120;this.enterBtn.y=this.viewH-31;};TrendContainer.prototype.onEnter=function(){var btn=game.GlobalVals.main.mainView.tablesView.tableSmallView.getBtn(this.btnTableId);var menu=btn['menu'];if(!menu)
return;if(menu.hasActiveItem()){menu.runActiveItem();return;}
menu.show();var p=new PIXI.Point(this.enterBtn.x-menu.width-2,this.enterBtn.y);p=this.toGlobal(p);p=game.GlobalVals.overlay.toLocal(p);menu.x=p.x;menu.y=p.y;if(menu.y>game.GameSettings.CANVAS_HEIGHT-menu.height)
menu.y=game.GameSettings.CANVAS_HEIGHT-menu.height;};TrendContainer.prototype.setType=function(type){this.type=type;};TrendContainer.prototype.setBgAlpha=function(a){this.underlay.alpha=a;};TrendContainer.prototype.setSmallView=function(rec){this.smallView=rec;this.x=rec.x;this.y=rec.y;this.resize(rec.width,rec.height);this.expandBtn.gotoAndStop(0);};TrendContainer.prototype.setMaxView=function(rec){this.maxView=rec;};TrendContainer.prototype.expand=function(){var rec=this.maxView;this.resize(rec.width,rec.height);this.x=rec.x;this.y=rec.y;this.expandBtn.gotoAndStop(1);};TrendContainer.prototype.collapse=function(){var rec=this.smallView;this.resize(rec.width,rec.height);this.x=rec.x;this.y=rec.y;this.expandBtn.gotoAndStop(0);};TrendContainer.prototype.onExpandBtn=function(e){var btn=e.target;var rec=btn.currentFrame==0?this.maxView:this.smallView;this.resize(rec.width,rec.height);this.x=rec.x;this.y=rec.y;this.gameModel.dispatcher.dispatchEventWith(game.GameEvent.TREND_EXPAND,this);btn.gotoAndStop(btn.currentFrame==0?1:0);};TrendContainer.prototype.destructor=function(){trace("TrendContainer::destructor");this.trends=null;this.gameModel.dispatcher.removeEventListener(game.GameEvent.GAME_UPDATE,this.update,this);this.scroller.removeEventListener(component.VHorScroll.HORSSCROLL_CHANGE_POS,this.onChange,this);component.VMouseUtils.off(this.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);_super.prototype.destructor.call(this);};TrendContainer.prototype.onChange=function(e){this.isChanged=true;};TrendContainer.prototype.showAll=function(){for(var i=0,l=this.trends.length;i<l;i++)
this.trends[i].visible=true;};TrendContainer.prototype.resize=function(width,height){var scale=height/this.content.height;if(this.smallView)
scale=height/this.smallView.height;this.viewW=width;this.viewH=height;if(this.enterBtn){this.enterBtn.x=this.viewW-120;this.enterBtn.y=this.viewH-31;}
this.masker.clear();this.masker.beginFill(0x0000ff);this.masker.drawRect(0,0,width,height);this.masker.endFill();this.showAll();this.content.scale.x=this.content.scale.y=scale;this.underlay.width=width;this.underlay.height=height;this.scroller.resize(width,height);this.expandBtn.x=width-this.expandBtn.width-5;this.expandBtn.y=height-this.expandBtn.height-5;this.drawBg(this.isDark);this.updateScroll();this.isChanged=true;};TrendContainer.prototype.drawBg=function(isDark){if(isDark===void 0){isDark=false;}
this.isDark=isDark;this.nameTf.style=isDark?{fontFamily:"Arial",fontSize:30,fontStyle:'bold',fill:0x464646,align:'center'}:{fontFamily:"Arial",fontSize:30,fontStyle:'bold',fill:0xCDCDCD,align:'center'};var c=isDark?0x333333:0xffffff;this.underlay.lineStyle(0,0,0);this.underlay.clear();this.underlay.beginFill(c);this.underlay.drawRect(0,0,this.orgW,this.orgH);this.underlay.endFill();this.bg.clear();var w=this.orgH*(this.viewW/this.viewH)+2*this.iconSize;this.bg.lineStyle(0,0,0);this.bg.beginFill(c,0.1);this.bg.drawRect(0,0,w,this.orgH);this.bg.endFill();this.bg.lineStyle(1,isDark?0x282828:0xAAAAAA);for(var i=0;i<=this.maxRow;i++){this.bg.moveTo(0,i*this.iconSize);this.bg.lineTo(w,i*this.iconSize);}
for(i=0;i<=w/this.iconSize;i++){this.bg.moveTo(i*this.iconSize,0);this.bg.lineTo(i*this.iconSize,this.orgH);}};TrendContainer.prototype.update=function(){if(this.isChanged){for(var i=0,l=this.trends.length;i<l;i++){if(this.trends[i].x*this.content.scale.x<-this.content.x-this.iconSize*this.content.scale.x||this.trends[i].x*this.content.scale.x>-this.content.x+this.viewW){this.trends[i].visible=false;this.trends[i].interactive=false;}
else{this.trends[i].visible=true;this.trends[i].interactive=true;}}
this.bg.x=(-this.content.x+this.content.x%(this.iconSize*this.content.scale.x))/this.content.scale.x;this.nameTf.x=(-this.content.x+this.viewW*0.5)/this.content.scale.x;this.isChanged=false;}};TrendContainer.prototype.updateTrends=function(values){if(values.length>=this.maxItem){values=values.slice(values.length-1-this.minItem,values.length-1);}
for(var i=0;i<values.length;i++){this.addTrend(values[i]);}
this.updateScroll();};TrendContainer.prototype.isTie=function(item){return item.result.charAt(2)=='1';};TrendContainer.prototype.changeWinner=function(item1,item2){if(item1==null||item2==null)
return true;return item1.result.substr(0,3)!=item2.result.substr(0,3);};TrendContainer.prototype.updateScroll=function(){this.showAll();this.bg.visible=false;this.nameTf.visible=false;var w=this.content.width;this.bg.visible=true;this.nameTf.visible=true;TweenMax.killTweensOf(this.content);this.content.x=-(w-this.viewW+this.blank);this.scroller.updateScroll(w+this.blank);};TrendContainer.prototype.clear=function(){this.onDummyRelease();var icon;while(this.trends.length){icon=this.trends.pop();if(this.isHoverIcon){icon.buttonMode=false;component.VMouseUtils.off(icon,component.VMouseUtils.MOUSE_UP,this.onItemMouseUp,this);component.VMouseUtils.off(icon,component.VMouseUtils.MOUSE_OVER,this.onItemMouseOver,this);component.VMouseUtils.off(icon,component.VMouseUtils.MOUSE_OUT,this.onItemMouseOut,this);component.VMouseUtils.off(icon,component.VMouseUtils.MOUSE_DOWN,this.onItemMouseDown,this);}
this.gameModel.vObjectPool.release(icon,this.TrendIconClass);}
this.p1.x=0;this.p1.y=0;this.p2.x=0;this.p2.y=0;this.bg.x=0;this.scroller.reset();this.tieCount=0;this.nameTf.x=(-this.content.x+this.viewW*0.5)/this.content.scale.x;for(var key in this.posMap)
delete this.posMap[key];this.posMap={};};TrendContainer.prototype.addTrend=function(item,isUpdateScroll,isDummy){if(isUpdateScroll===void 0){isUpdateScroll=false;}
if(isDummy===void 0){isDummy=false;}
this.onDummyRelease();if(isDummy){this.drawTrendItem(item,isUpdateScroll,true);return;}
if(this.isTie(item))
this.tieCount++;else
this.tieCount=0;if(!this.tieCount){this.drawTrendItem(item,isUpdateScroll,false);}
else{var exIcon=this.trends.length?this.trends[this.trends.length-1]:null;if(!exIcon){this.drawTrendItem(item,isUpdateScroll,false);exIcon=this.trends[this.trends.length-1];}
exIcon.drawTie(this.tieCount);}};TrendContainer.prototype.onDummyRelease=function(){if(!this.dummyIcon)
return;this.removeChild(this.dummyIcon);this.gameModel.vObjectPool.release(this.dummyIcon,this.TrendIconClass);this.dummyIcon=null;};TrendContainer.prototype.drawTrendItem=function(item,isUpdateScroll,isDummy){if(isUpdateScroll===void 0){isUpdateScroll=false;}
if(isDummy===void 0){isDummy=false;}
var exItem=this.trends.length==0?null:this.trends[this.trends.length-1].info;var p=new PIXI.Point();var orgP1=this.p1.clone();var orgP2=this.p2.clone();var p1=this.p1;var p2=this.p2;if(!this.changeWinner(exItem,item)){if(p2.y<this.maxRow-1&&!this.posMap[p2.x+'_'+(p2.y+1)]){p2.y++;}
else{p2.x++;}
p.copy(p2);}
else{p.copy(p1);p2.copy(p1);}
if(p.y==0)
p1.x++;if(!isDummy)
this.posMap[p.x+'_'+p.y]=true;var icon=this.gameModel.vObjectPool.get(this.TrendIconClass).setData(this.iconSize,isDummy);icon.setType(this.type);icon.x=this.iconSize*0.5+p.x*this.iconSize;icon.y=this.iconSize*0.5+p.y*this.iconSize;icon['index']=this.trends.length;icon.draw(item);if(this.isHoverIcon&&!isDummy){icon.buttonMode=true;component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_UP,this.onItemMouseUp,this);component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_OVER,this.onItemMouseOver,this);component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_OUT,this.onItemMouseOut,this);component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_DOWN,this.onItemMouseDown,this);}
this.content.addChild(icon);if(!isDummy){this.trends.push(icon);}
if(isUpdateScroll)
this.updateScroll();this.isChanged=true;if(isDummy){this.p1.copy(orgP1);this.p2.copy(orgP2);this.dummyIcon=icon;}
return icon;};TrendContainer.prototype.blinkExIcon=function(){var exIcon=this.trends.length?this.trends[this.trends.length-1]:null;if(exIcon)
exIcon.blink();};TrendContainer.prototype.getNumTrends=function(){return this.trends.length;};TrendContainer.prototype.addTrendBatchNode=function(icon){};TrendContainer.prototype.onItemMouseDown=function(e){this.downPos.copy(component.VMouseUtils.mousePos());};TrendContainer.prototype.onItemMouseOver=function(e){this.gameModel.dispatcher.dispatchEventWith(game.GameEvent.GAME_TREND_INFO,e.target);};TrendContainer.prototype.onItemMouseOut=function(e){this.gameModel.dispatcher.dispatchEventWith(game.GameEvent.GAME_HIDE_TREND_INFO,e.target);};TrendContainer.prototype.onItemMouseUp=function(e){if(Math.abs(component.VMouseUtils.mousePos().x-this.downPos.x)>=5||Math.abs(component.VMouseUtils.mousePos().y-this.downPos.y)>=5)
return;trace("onItemMouseUp");var icon=e.target;};return TrendContainer;}(game.GameObject));game.TrendContainer=TrendContainer;})(game||(game={}));var game;(function(game){var BetHit=(function(_super){__extends(BetHit,_super);function BetHit(){var _this=_super.call(this)||this;_this.isDummy=false;_this.referBetplaces=[];return _this;}
BetHit.prototype.destroy=function(options){core.VUtils.cleanObj(this);_super.prototype.destroy.call(this);};return BetHit;}(PIXI.Sprite));game.BetHit=BetHit;})(game||(game={}));var game;(function(game){var BasePopup=(function(_super){__extends(BasePopup,_super);function BasePopup(main,w,h,bgColor,autoCenter,rounded){if(bgColor===void 0){bgColor=0x25221D;}
if(autoCenter===void 0){autoCenter=false;}
if(rounded===void 0){rounded=10;}
var _this=_super.call(this,main)||this;_this.viewW=w;_this.viewH=h;_this.autoCenter=autoCenter;_this.hasUnderlay=true;var underlay=new PIXI.Graphics();_this.underlay=underlay;underlay.beginFill(0x000000,0.5);underlay.drawRect(0,0,game.GameSettings.CANVAS_WIDTH,game.GameSettings.CANVAS_HEIGHT);underlay.endFill();var bg=new PIXI.Graphics();_this.bg=bg;_this.addChild(bg);var statusBar=new PIXI.Graphics();statusBar.buttonMode=true;_this.statusBar=statusBar;_this.addChild(statusBar);statusBar.beginFill(0x0000ff);statusBar.drawRect(0,0,w,34);statusBar.endFill();statusBar.alpha=0;bg.beginFill(bgColor);bg.drawRoundedRect(0,0,w,h,rounded);bg.endFill();bg.beginFill(0x3F3832);bg.drawRoundedRect(0,0,w,45,rounded);bg.endFill();bg.beginFill(bgColor);bg.drawRect(0,45-12,w,14);bg.endFill();var titleTf=game.GameUtils.createNormalText("",16);titleTf.x=10;titleTf.y=7;_this.titleTf=titleTf;_this.addChild(_this.titleTf);var closeBtn=new component.VButton([PIXI.Texture.fromFrame("close_btn0001.png"),PIXI.Texture.fromFrame("close_btn0002.png")],_this.onClose.bind(_this));game.GameUtils.resizeNodeH(closeBtn,21);_this.closeBtn=closeBtn;_this.addChild(closeBtn);closeBtn.x=_this.bg.width-closeBtn.width-5;closeBtn.y=5;_this.underlay.visible=false;component.VMouseUtils.on(_this.statusBar,component.VMouseUtils.MOUSE_DOWN,_this.onStatusBarDown,_this);component.VMouseUtils.on(game.GlobalVals.stage,component.VMouseUtils.MOUSE_UP,_this.onStageUp,_this);return _this;}
BasePopup.prototype.destructor=function(){component.VMouseUtils.off(this.statusBar,component.VMouseUtils.MOUSE_DOWN,this.onStatusBarDown,this);component.VMouseUtils.off(game.GlobalVals.stage,component.VMouseUtils.MOUSE_UP,this.onStageUp,this);};BasePopup.prototype.onStatusBarDown=function(){var p=new PIXI.Point();p=game.GlobalVals.main.toGlobal(p);p=this.parent.toLocal(p);component.VComponentUtils.startDrag(this,new PIXI.Rectangle(p.x,p.y,game.GameSettings.CANVAS_WIDTH-this.bg.width,game.GameSettings.CANVAS_HEIGHT-this.bg.height));};BasePopup.prototype.onStageUp=function(){component.VComponentUtils.stopDrag(this);};BasePopup.prototype.onClose=function(){this.hide();};BasePopup.prototype.centerPos=function(){var p=new PIXI.Point();p=game.GlobalVals.main.toGlobal(p);p=this.parent.toLocal(p);this.x=p.x+(game.GameSettings.CANVAS_WIDTH-this.bg.width)*0.5;this.y=p.y+(game.GameSettings.CANVAS_HEIGHT-this.bg.height)*0.5;};BasePopup.prototype.show=function(data){if(data===void 0){data=null;}
game.GlobalVals.onShownPopup(this);if(game.GlobalVals.betInput)
game.GlobalVals.betInput.setHtmlZindex('0');this.visible=true;this.underlay.visible=this.hasUnderlay;if(!this.underlay.parent)
this.parent.addChildAt(this.underlay,this.parent.getChildIndex(this));var p=new PIXI.Point();p=this.parent.toGlobal(p);p=game.GlobalVals.main.toLocal(p);this.underlay.x=-p.x;this.underlay.y=-p.y;if(this.autoCenter)
this.centerPos();this.isShowed=true;};BasePopup.prototype.setData=function(data){};BasePopup.prototype.hide=function(){if(game.GlobalVals.betInput)
game.GlobalVals.betInput.setHtmlZindex(game.Htmlzindex.CONTAINER_INDEX);this.visible=false;game.GlobalVals.onHidePopup();this.underlay.visible=false;this.isShowed=false;};BasePopup.OK="OK";BasePopup.CANCEL="CANCEL";return BasePopup;}(game.MainObject));game.BasePopup=BasePopup;})(game||(game={}));var game;(function(game){var BaseBetDetailPopup=(function(_super){__extends(BaseBetDetailPopup,_super);function BaseBetDetailPopup(main,w,h){var _this=_super.call(this,main,w,h,0x595346)||this;var masker=new PIXI.Graphics();masker.beginFill(0x0000ff);masker.drawRect(0,0,633,365);masker.x=12;masker.y=148;_this.addChild(masker);var maskerCopy=new PIXI.Graphics();maskerCopy.beginFill(0x0000ff);maskerCopy.drawRect(0,0,masker.width,masker.height);maskerCopy.x=masker.x;maskerCopy.y=masker.y;maskerCopy.alpha=0;_this.addChild(maskerCopy);var scroll=game.GameUtils.createScroll(5,365);scroll.y=148;scroll.x=maskerCopy.x+maskerCopy.width-20;_this.addChild(scroll);var titles=[game.GameText.BET_TYPE,game.GameText.BET_AMOUNT,game.GameText.PAYOUT];_this.table=new component.VTable(600,24,1,titles,[3/7,2/7,2/7],"center",{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12},{fontFamily:"Arial",fill:0x817C78,fontSize:12});_this.table.x=12;_this.table.y=118;_this.addChild(_this.table);_this.addChild(_this.table.columnCon);_this.table.columnCon.x=masker.x;_this.table.columnCon.y=masker.y;_this.table.columnCon.mask=masker;_this.scroller=new component.VVerScroll(maskerCopy,_this.table.columnCon,scroll,true);return _this;}
BaseBetDetailPopup.prototype.show=function(data){_super.prototype.show.call(this);var bundleId=data.id;this.table.clear();this.titleTf.text=bundleId.toString();switch(data.status){case 1000:case 1001:this.titleTf.text+=' ('+game.GameText.VOIDED+')';break;case 2000:case 2100:this.titleTf.text+=' ('+game.GameText.EDITED+')';break;case 3001:this.titleTf.text+=' ('+game.GameText.rollback+')';break;}
game.GlobalVals.main.loading.show(false,"",false);game.NetUtils.sendWS({"kind":game.GameCMD.BUNDLE_RESULT,"bundleid":bundleId});};BaseBetDetailPopup.prototype.getBetName=function(betType){return betType;};BaseBetDetailPopup.prototype.setData=function(data){var arr=data.content;this.table.addRecords(arr.length);for(var i=0;i<arr.length;i++){var r=arr[i];this.table.setData(i,[this.getBetName(r.type),game.GlobalVals.userInfo.currency+' '+component.VComponentUtils.getNumInFormat(r.betAmount),game.GlobalVals.userInfo.currency+' '+component.VComponentUtils.getNumInFormat(r.returnAmount)]);}
this.scroller.updateScroll();};return BaseBetDetailPopup;}(game.BasePopup));game.BaseBetDetailPopup=BaseBetDetailPopup;})(game||(game={}));var game;(function(game){var MessagePopup=(function(_super){__extends(MessagePopup,_super);function MessagePopup(main,w,h,autoCenter,bgColor){if(autoCenter===void 0){autoCenter=false;}
if(bgColor===void 0){bgColor=0x25221D;}
var _this=_super.call(this,main,w,h,bgColor,autoCenter)||this;var okBtn=component.VButton.createSimple(_this.onOk.bind(_this),game.GameText.OK,100,25);_this.okBtn=okBtn;okBtn.x=w*0.5-okBtn.width*0.5;okBtn.y=h-okBtn.height-10;_this.addChild(okBtn);_this.msgTf=game.GameUtils.createText("",{fontFamily:"Arial",fontSize:14,fill:0xffffff,wordWrap:true,wordWrapWidth:w*game.GameSettings.TEXT_OPTIMIZE_FACTOR-40});_this.msgTf.x=w*0.5;_this.msgTf.y=h*0.5;_this.msgTf.anchor.x=0.5;_this.msgTf.anchor.y=0.5;_this.addChild(_this.msgTf);return _this;}
MessagePopup.prototype.onOk=function(){this.hide();if(this.handler)
this.handler(game.BasePopup.OK);};MessagePopup.prototype.onClose=function(){_super.prototype.onClose.call(this);if(this.handler)
this.handler(game.BasePopup.OK);};MessagePopup.prototype.showMessage=function(msg,handler,title,okBtnText){if(handler===void 0){handler=null;}
if(title===void 0){title="";}
if(okBtnText===void 0){okBtnText=game.GameText.OK;}
this.okBtn.tf.text=okBtnText;this.titleTf.text=title;this.handler=handler;this.msgTf.text=msg;this.show();};return MessagePopup;}(game.BasePopup));game.MessagePopup=MessagePopup;})(game||(game={}));var game;(function(game){var BaseGame=(function(_super){__extends(BaseGame,_super);function BaseGame(){var _this=_super.call(this,new game.GameModel())||this;_this.dealCardDelay=3500;_this.gameModel.game=_this;game.GlobalVals.activeGame=_this;_this.clearTimeoutIds=[];_this.dealTimeoutIds=[];_this.resetGameResultDelay=0;return _this;}
BaseGame.prototype.destructor=function(){trace("BaseGame::destructor");clearTimeout(this.resetGameResultTimeoutId);if(this.gameModel.GAME_ID!=game.GameID.LOBBY)
game.NetUtils.sendWS({"kind":game.GameCMD.EXIT,"table":this.gameModel.TABLE_ID});for(var i=0;i<this.clearTimeoutIds.length;i++)
clearTimeout(this.clearTimeoutIds[i]);for(i=0;i<this.dealTimeoutIds.length;i++)
clearTimeout(this.dealTimeoutIds[i]);_super.prototype.destructor.call(this);};BaseGame.prototype.destroy=function(options){this.gameModel.clear();_super.prototype.destroy.call(this,options);};BaseGame.prototype.initialize=function(tableId,resources){if(!game.GameUtils.checkViewModeAvailable(tableId,game.GlobalVals.viewMode))
game.GlobalVals.viewMode=game.GameSettings.TABLE_INFOS[tableId].viewModes[0];this.committedItems=[];this.gameModel.TABLE_ID=tableId;if(tableId>0)
game.GlobalVals.addLastTable(tableId);if(tableId>0)
this.gameModel.STUDIO=game.GameSettings.TABLE_INFOS[tableId].studio;this.gameModel.initialize(resources);this.userInfo=game.GlobalVals.userInfo;this.startGame();return this;};BaseGame.prototype.update=function(){if(this.gameView)
this.gameView.update();this.gameModel.dispatcher.dispatchEventWith(game.GameEvent.GAME_UPDATE,null);};BaseGame.prototype.startGame=function(){this.gameModel.dispatcher.addEventListener(game.GameEvent.GAME_EVENT,this.onGameEvent,this);this.gameModel.dispatcher.addEventListener(game.GameEvent.CHANGE_LIMIT,this.onChangeLimit,this);this.gameModel.soundMng=new game.SoundMng(this.gameModel);this.addChild(this.gameModel.soundMng);this.initView();};BaseGame.prototype.sizeHandler=function(){if(this.gameView)
this.gameView.sizeHandler();};BaseGame.prototype.initView=function(){};BaseGame.prototype.onAuthSuccess=function(){this.gameView.onAuthSuccess();this.sizeHandler();};BaseGame.prototype.onWSOpenHdl=function(){};BaseGame.prototype.onWSCloseHdl=function(){this.gameView.showStatus(game.GameText.SOCKET_DIS,false);};BaseGame.prototype.onGameEvent=function(e){switch(e.data.type){case game.GameEvent.STATUS_MSG:this.gameView.showStatus(e.data.exdata);break;case game.GameEvent.ERROR_MSG:this.gameView.showStatus(e.data.exdata,true,true);break;case game.GameEvent.MAX_BET_ERROR:var gameName=game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].gameName;this.gameView.showStatus(game.GameText.MAX_BET_ALERT.replace('{0}',"'"+this.gameView.betArea.getBetName(e.data.exdata)+"'").replace('{1}',component.VComponentUtils.getNumInFormat(this.gameModel.getBetMax(e.data.exdata))),true,true);break;case game.GameEvent.MIN_BET_ERROR:var gameName=game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].gameName;this.gameView.showStatus(game.GameText.MIN_BET_ALERT.replace('{0}',"'"+this.gameView.betArea.getBetName(e.data.exdata)+"'").replace('{1}',component.VComponentUtils.getNumInFormat(this.gameModel.getBetMin(e.data.exdata))),true,true);break;case game.GameEvent.BET_CLEAR:this.gameView.clearBets();break;case game.GameEvent.BET_UNDO:this.gameView.undoBet();break;case game.GameEvent.BET_CONFIRM:if(!this.gameView.confirmBet())
break;this.isBetSending=true;break;case game.GameEvent.BET_REBET:this.gameView.rebet();break;case game.GameEvent.BET_CHANGE:this.onBetChange();break;case game.GameEvent.CHANGE_VIEW_MODE:game.GlobalVals.selected7S=false;game.GlobalVals.viewMode=e.data.exdata;this.gameView.betArea.savePendingBet();game.GlobalVals.main.loading.show();setTimeout(game.GlobalVals.refreshGame,0,this);break;case game.GameEvent.CHANGE_VOD_MODE:WEBRTC_INDEX=this.gameModel.vodmodes.indexOf(e.data.exdata);this.gameView.onRefreshVod();break;case game.GameEvent.CHANGE_SEAT:this.onChangeSeat(e.data.exdata);break;case game.GameEvent.CHANGE_ROOM:this.onChangeRoom(e.data.exdata);break;case game.GameEvent.SAVE_BET:this.onSaveBet(e.data.exdata);break;case game.GameEvent.LOAD_BET:this.onLoadBet(e.data.exdata);break;case game.GameEvent.PLAYER_BET_INFO:this.onPlayerBetInfo(e.data.exdata);break;}};BaseGame.prototype.onBetChange=function(){this.gameView.betChange();this.onPlayerBetInfo(this.gameView.betArea.currentBetHit);};BaseGame.prototype.onPlayerBetInfo=function(hit){if(!this.gameView.playerBetInfo)
return;if(!hit){this.onAllPlayerBetInfo();return;}
var playerBet=this.gameView.betArea.playerBetMap[hit.id]?this.gameView.betArea.playerBetMap[hit.id]:null;var betPlace=this.gameView.betArea.getBetPlaceWithType(hit.id);if(playerBet&&playerBet.chipStack.length)
playerBet.showSelector();else if(betPlace&&betPlace.getAmount()>0)
betPlace.showSelector();if((playerBet&&playerBet.chipStack.length)||(betPlace&&betPlace.getAmount()>0))
this.gameView.playerBetInfo.setDetailData(playerBet,betPlace);else
this.onAllPlayerBetInfo();};BaseGame.prototype.onAllPlayerBetInfo=function(){if(this.gameView.playerBetInfo)
this.gameView.playerBetInfo.updateRoomBetInfo();};BaseGame.prototype.onSaveBet=function(info){info.bet=this.gameView.betArea.getCurrentBetting();info.totalBet=this.gameView.betArea.getTotalBet();};BaseGame.prototype.onLoadBet=function(info){this.gameView.betArea.loadBet(info.bet);};BaseGame.prototype.onChangeSeat=function(seatId){this.gameModel.joinningRoom=true;this.gameModel.loading.show();this.gameView.betArea.savePendingBet();this.gameView.betArea.clearBets();game.NetUtils.sendWS({"kind":game.GameCMD.ENTER_ROOM,"table":this.gameModel.TABLE_ID,"room":this.gameModel.ROOM_ID,"seat":seatId});};BaseGame.prototype.onChangeRoom=function(roomId){this.gameModel.joinningRoom=true;this.gameModel.loading.show();this.gameView.betArea.savePendingBet();this.gameView.betArea.cleanTable();game.NetUtils.sendWS({"kind":game.GameCMD.ENTER_ROOM,"table":this.gameModel.TABLE_ID,"room":roomId});};BaseGame.prototype.onChangeLimit=function(e){var data=e.data;var enterReq;if(this.gameView.betArea.liveChipMng)
this.gameView.betArea.liveChipMng.clearChips();if(data.table==this.gameModel.TABLE_ID){enterReq={"kind":"updatelimit","limit":data.limit,"table":data.table};}
else{if(this.gameView.cardControl)
this.gameView.cardControl.clearAllCards();this.gameView.betArea.reset();this.gameView.gameResult.reset();this.gameView.countdown.hide();game.NetUtils.sendWS({"kind":game.GameCMD.EXIT,"table":this.gameModel.TABLE_ID});this.gameModel.TABLE_ID=data.table;enterReq=new game.netdata.EnterRequest().initialize(data.table,data.limit);}
game.NetUtils.sendWS(enterReq);};BaseGame.prototype.onWSMessageHdl=function(e){var data=e.data;switch(data.kind){case game.GameCMD.BALANCE:this.onBalance();break;case game.GameCMD.COMMIT_SUCCEED:this.onCommitSucceedAll(data);break;case game.GameCMD.ROLL_BACK_SUCCEED:this.onRollbackSucceedAll(data);break;case game.GameCMD.COUNT_DOWN:this.onCountDownAll(data);break;case game.GameCMD.NOTICE:this.onNoticeAll(data);break;}
if(data.content&&data.content.table&&data.content.table!=this.gameModel.TABLE_ID)
        return; trace("ws.onmessage: " + data.kind); 
    switch (data.kind) {
        case game.GameCMD.DEALER_CHANGED: this.gameView.showStatus(game.GameText.DEALER_CHANGE); break; case game.GameCMD.DEALER_LEAVE: if (data.content != this.gameModel.TABLE_ID)
            return; this.gameView.showStatus(game.GameText.DEALER_CHANGE); break; case game.GameCMD.NOTICE: this.onNotice(data); break; case game.GameCMD.NEW_SHOE_SUCCEED: this.onNewShoeSucceedAll(data); break; case game.GameCMD.ENTER_FAILED: this.onEnterFailed(data); break; case game.GameCMD.TABLE_LIMIT: this.onTableLimit(data); break; case game.GameCMD.BET_LIMIT: this.onBetLimit(data); break; case game.GameCMD.JOIN_ROOM_SUCCESS: this.onJoinRoomSuccess(data); break; case game.GameCMD.START_BET_SUCCEED: this.onStartBet(data); break; case game.GameCMD.STOP_BET_SUCCEED: this.onStopBet(); break; case game.GameCMD.CARDS: this.initCards(data); break; case game.GameCMD.TICKS: this.onTicks(data); break; case game.GameCMD.DEAL: this.onDeal(data); break; case game.GameCMD.BET_SUCCEED: this.onBetSuccess(data); break; case game.GameCMD.BET_FAIL: this.onBetFail(data); break; case game.GameCMD.CLEAR: this.onClear(data); break; case game.GameCMD.REWARD: this.onReward(data); break; case game.GameCMD.CURRENT_BETS: this.onCurrentBets(data); break; case game.GameCMD.POOL: this.onPool(data); break; case game.GameCMD.LAST_ROUND: this.onLastRound(data); break; case game.GameCMD.POWER_UP: this.onPowerUp(data); break; case game.GameCMD.POWER_UPS: this.onPowerUps(data); break; case game.GameCMD.ROOM_BET_INFO: this.onRoomBetInfo(data); break; case game.GameCMD.ROOM_BET_SUCCEED: this.onRoomBetSucceed(data); break; case game.GameCMD.ROOM_LIST: this.onRoomList(data); break; case game.GameCMD.JOIN_ROOM_FAIL: this.onJoinRoomFail(data); break; case game.GameCMD.HISTORY_100: this.onHistory100(data); break; case game.GameCMD.TIP_SUCCEED: this.onTipSucceed(data); break; case game.GameCMD.OPERATOR_FLAG: this.gameView.initTip(); break; case game.GameCMD.VOID_HAND_SUCCESS: this.gameView.showStatus(game.GameText.GAME_VOIDED); break; case game.GameCMD.PAYOUTS: this.onPayouts(data); break; case game.GameCMD.HISTORY15: this.onHistory15(data); break;
    }};BaseGame.prototype.onBalance=function(){this.gameView.setBalance(game.GlobalVals.userInfo.getBalance());};BaseGame.prototype.onCommitSucceedAll=function(data){var item=new game.netdata.TrendsItem();item.roundid=data.content.roundid;item.shoe=data.content.shoe;item.round=data.content.round;item.result=data.content.result;item.cards=data.content.cards;this.gameView.trendMng.addTrend(data.content.table,item);if(data.content.table!=this.gameModel.TABLE_ID)
return;this.commitData=data;if(TEST_GAME_RESULT)
data.content.result=TEST_GAME_RESULT;if(TEST_GAME_CARDS)
data.content.cards=TEST_GAME_CARDS;if(this.gameView.gameHUD.gameInfoCon.gameDetailCon)
this.gameView.gameHUD.gameInfoCon.gameDetailCon.updateTrends(data.content.table);this.gameView.gameHUD.gameInfoCon.roundTf.text=this.getLastShoe().toString()+' - '+this.getLastRound().toString();this.gameView.gameResult.showResult(data);this.gameView.betArea.showResult(data);};BaseGame.prototype.onRollbackSucceedAll=function(data){this.gameView.trendMng.initTrends();if(data.content.table!=this.gameModel.TABLE_ID)
return;if(data.content.roundid!=this.getLastRoundId())
return;this.gameView.showStatus(game.GameText.GAME_RESULT_UPDATED,true,true);this.commitData=data;if(this.gameView.gameHUD.gameInfoCon.gameDetailCon)
this.gameView.gameHUD.gameInfoCon.gameDetailCon.updateTrends(data.content.table);this.gameView.gameResult.showResult(data);this.gameView.betArea.showResult(data);game.NetUtils.sendWS({kind:game.GameCMD.GET_BALANCE,game:this.gameModel.TABLE_ID});};BaseGame.prototype.onNewShoeSucceedAll=function(data){this.gameView.trendMng.resetShoe(data.content);if(data.content!=this.gameModel.TABLE_ID)
return;this.gameView.gameHUD.gameInfoCon.roundTf.text=this.getLastShoe().toString()+' - '+this.getLastRound().toString();this.gameView.showStatus(game.GameText.NEW_SHOE_SUCCEED);for(var i=0;i<this.dealTimeoutIds.length;i++)
clearTimeout(this.dealTimeoutIds[i]);};BaseGame.prototype.onEnterFailed=function(data){game.GlobalVals.messagePopup.showMessage(game.GameText.enter_table_fail,function(){if(!game.GlobalVals.WAITING_SHOW_LOBBY_RESPONSE){game.GlobalVals.WAITING_SHOW_LOBBY_RESPONSE=true;game.NetUtils.sendWSSimple(game.GameCMD.SHOW_LOBBY);}},game.GameText.NOTICE,game.GameText.OK);};BaseGame.prototype.onCountDownAll=function(data){if(data.content.table!=this.gameModel.TABLE_ID)
return;var time=data.content.tick-1;if(time<4&&time>-1)
this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,true,game.SoundMng.TICK);if(time==5)
this.gameView.showStatus(game.GameText.FINAL_BETS,true,true);this.gameView.countdown.setTime(data.content.tick>0?time:0);if(time<=0)
this.gameView.countdown.hide();if(time==0){this.onBetCountDownComplete();}
if(time>0){if(!this.isBetting){this.isBetting=true;this.gameView.showStatus(game.GameText.START_BET);this.gameView.betControl.show();this.gameView.chipControl.enable();this.gameView.betArea.hideHighlight();this.gameView.betArea.enable();this.gameView.showStatus(game.GameText.START_BET);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.ANOUNCE_PLACE_BETS);this.gameView.gameResult.reset();}}};BaseGame.prototype.onTipSucceed=function(data){this.userInfo.updateBalance(-data.content.value);this.gameView.setBalance(this.userInfo.getBalance()-this.gameView.betArea.getPendingAmount());if(this.gameView.tipCon)
this.gameView.tipCon.onTipSucceed(data);this.gameView.showStatus(game.GameText.TIP_THANKS+": "+game.GlobalVals.userInfo.currency+" "+data.content.value);};BaseGame.prototype.onHistory100=function(data){};BaseGame.prototype.onJoinRoomFail=function(data){this.gameView.showStatus(game.GameText.JOIN_ROOM_ERROR);this.gameModel.loading.hide();game.NetUtils.sendWS({kind:game.GameCMD.ENTER_ROOM,table:this.gameModel.TABLE_ID});};BaseGame.prototype.onRoomList=function(data){if(this.gameView.gameHUD&&this.gameView.gameHUD.settingCon.roomCon)
this.gameView.gameHUD.settingCon.roomCon.setData(data);};BaseGame.prototype.onPowerUps=function(data){if(this.gameView.gameHUD.gameInfoCon.gameDetailCon['bonusUpsDetail'])
this.gameView.gameHUD.gameInfoCon.gameDetailCon['bonusUpsDetail'].addBonusUps(data.content.value);};BaseGame.prototype.onPowerUp=function(data){if(TEST_SUPER98)
data.content.value=parseInt(TEST_SUPER98);this.gameView.diceAnim.play(data.content.value);this.gameView.activeSuperHand(data.content.value==8||data.content.value==9);if(this.gameView.gameHUD.gameInfoCon.gameDetailCon['bonusUpsDetail'])
this.gameView.gameHUD.gameInfoCon.gameDetailCon['bonusUpsDetail'].addBonus(data.content,this.getLastShoe(),this.getLastRound());};BaseGame.prototype.onTicks=function(data){this.gameModel.betDuration=data.content.value;this.gameView.countdown.setTotal(data.content.value);};BaseGame.prototype.onRoomBetInfo=function(data){if(this.gameModel.joinningRoom)
return;if(game.GlobalVals.viewMode!=game.ViewMode.MODE_7S&&game.GlobalVals.viewMode!=game.ViewMode.MODE_7S_3D){this.gameView.betArea.restorePendingBet();return;}
if(this.gameModel.ROOM_ID==0||this.gameModel.SEAT_ID==0)
return;this.gameModel.roomBetInfo=data;this.gameView.betArea.onRoomBetInfo(data);this.onPlayerBetInfo(this.gameView.betArea.currentBetHit);if(this.gameView.seatControl)
this.gameView.seatControl.onRoomBetInfo(data);};BaseGame.prototype.onRoomBetSucceed=function(data){if(this.gameModel.joinningRoom)
return;if(game.GlobalVals.viewMode!=game.ViewMode.MODE_7S&&game.GlobalVals.viewMode!=game.ViewMode.MODE_7S_3D)
return;this.gameView.betArea.onRoomBetSucceed(data);this.gameModel.addBet(data.content.seat,data.content.cats,data.content.amounts);this.onPlayerBetInfo(this.gameView.betArea.currentBetHit);};BaseGame.prototype.onJoinRoomSuccess=function(data){this.gameModel.joinningRoom=false;this.gameView.betArea.changeSeatId(data.content.seat);game.NetUtils.sendWS({"table":this.gameModel.TABLE_ID,"kind":game.GameCMD.ROOM_BET_INFO});this.gameModel.loading.hide();this.enteredRoom=true;this.gameModel.ROOM_ID=data.content.room;this.gameModel.SEAT_ID=data.content.seat;if(this.gameView.gameHUD&&this.gameView.gameHUD.settingCon.roomCon)
this.gameView.gameHUD.settingCon.roomCon.activeRoom(data.content.room);if(this.gameView.seatControl){this.gameView.seatControl.onJoinRoomSuccess(data);}
if(this.currentBetsResponse){this.gameView.betArea.updateBet(this.currentBetsResponse);this.currentBetsResponse=null;this.gameView.gameHUD.gameInfoCon.betInfo.confirmedTf.text=component.VComponentUtils.getNumInFormat(this.gameView.betArea.getConfirmedAmount(),1);}};BaseGame.prototype.onLastRound=function(data){trace("onLastRound ============= "+JSON.stringify(data));this.lastRound=data.content;if(this.gameView.gameHUD){this.gameView.gameHUD.gameInfoCon.roundTf.text=this.getLastShoe().toString()+' - '+this.getLastRound().toString();}
if(data.content.status==game.GameStatus.BETTING)
this.gameView.betArea.enable();if(game.GameUtils.checkSuper98(this.gameModel.TABLE_ID)&&data.content.status>1&&data.content.powerup){this.onPowerUp({content:{value:data.content.powerup}});}};BaseGame.prototype.onPool=function(data){if(this.gameView.betArea.liveChipMng){this.gameView.betArea.liveChipMng.clearChips();for(var i=0;i<data.content.cat.length;i++){this.gameView.betArea.liveChipMng.setAmount(data.content.cat[i],data.content.amount[i]);}
if(this.gameView.betArea.liveChipMng.isVisible)
this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,true,game.SoundMng.STACK_CHIP);}
if(this.gameView.gameHUD.gameInfoCon.gameDetailCon['livePoolDetail'])
this.gameView.gameHUD.gameInfoCon.gameDetailCon['livePoolDetail'].setData(data);};BaseGame.prototype.onCurrentBets=function(data){if(data.content.value.length==0)
return;if(game.GlobalVals.viewMode!=game.ViewMode.MODE_7S)
this.gameView.betArea.updateBet(data);else{if(this.gameModel.ROOM_ID>0){this.gameView.betArea.updateBet(data);this.gameView.gameHUD.gameInfoCon.betInfo.confirmedTf.text=component.VComponentUtils.getNumInFormat(this.gameView.betArea.getConfirmedAmount(),1);}
else
this.currentBetsResponse=data;}
if(this.gameView.seatControl)
this.gameView.seatControl.lock();if(this.gameView.gameHUD&&this.gameView.gameHUD.settingCon.roomCon)
this.gameView.gameHUD.settingCon.roomCon.lock();};BaseGame.prototype.onReward=function(data){this.gameView.gameHUD.gameInfoCon.betInfo.totalWinTf.text=component.VComponentUtils.getNumInFormat(data.content.reward);if(data.content.reward-data.content.bet>0){this.gameView.showStatus(game.GameText.WIN_MSG.replace('{0}',game.GlobalVals.userInfo.currency+' '+component.VComponentUtils.getNumInFormat(data.content.reward)));this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.ANOUNCE_YOU_WIN);}
if(data.content.reward>0){this.userInfo.updateBalance(data.content.reward);this.gameView.setBalance(this.userInfo.getBalance(),true);}};BaseGame.prototype.onBetFail=function(data){console.log(data);switch(data.content.error){case-10011:break;case-10006:this.gameView.showStatus(game.GameText.BET_FAIL+":"+game.GameText.BET_FAIL_EXEEDED_LIMIT);break;case-10002:this.gameView.showStatus(game.GameText.BET_FAIL_LIMIT_UPGRADE);break;default:this.gameView.showStatus(game.GameText.BET_FAIL);}
this.isBetSending=false;if(this.isBetting){this.gameView.betControl.enable();this.gameView.betArea.enable();}
else
this.gameView.betArea.clearBets();};BaseGame.prototype.onTableLimit=function(data){game.GlobalVals.main.loading.hide();if(game.GameUtils.checkSuper98(this.gameModel.TABLE_ID))
game.NetUtils.sendWS({"kind":game.GameCMD.BONUS_UPS,"table":this.gameModel.TABLE_ID});this.gameModel.tableLimitsResponse=data;this.gameModel.LIMIT_ID=data.content.id;this.gameView.gameHUD.gameInfoCon.minMaxTf.text=component.VComponentUtils.getNumInFormat(data.content.min)+' - '+component.VComponentUtils.getNumInFormat(data.content.max);this.gameModel.currentLimits=game.netdata.LimitsResponse.getLimits(game.GlobalVals.limitsResponse,data.content.table,data.content.id);this.gameView.chipControl.initChips(this.gameModel.currentLimits.chips,6);this.gameView.gameHUD.gameInfoCon.gameTitle.setData(data.content.table);this.gameView.onTableLimit();this.gameView.betArea.onTableLimit();this.gameView.trendMng.initTrends();if(this.gameView.gameHUD){if(this.gameView.gameHUD.gameInfoCon.gameDetailCon)
this.gameView.gameHUD.gameInfoCon.gameDetailCon.updateTrends(data.content.table);this.gameView.gameHUD.gameInfoCon.roundTf.text=this.getLastShoe().toString()+' - '+this.getLastRound().toString();}
var roomList=game.GlobalVals.lobbyResponse.content;for(var i=0;i<roomList.length;i++){if(roomList[i].id==this.gameModel.TABLE_ID){this.gameModel.tableSetting=roomList[i];break;}}
if(this.gameModel.tableSetting)
this.gameView.gameHUD.gameInfoCon.dealerTf.text=this.gameModel.tableSetting.dealerName;};BaseGame.prototype.onPayouts=function(data){};BaseGame.prototype.onHistory15=function(data){};BaseGame.prototype.getLastRoundId=function(){if(this.startBetInfo)
return this.startBetInfo.roundid;if(this.lastRound)
return this.lastRound.roundid;};BaseGame.prototype.getLastRound=function(){if(this.startBetInfo)
return this.startBetInfo.round;if(this.lastRound)
return this.lastRound.round?this.lastRound.round:1;var tableId=this.gameModel.TABLE_ID;if(!game.GlobalVals.trendDataMap[tableId]||!game.GlobalVals.trendDataMap[tableId].trendArr)
return 0;if(game.GlobalVals.trendDataMap[tableId].trendArr.length==0)
return 1;return game.GlobalVals.trendDataMap[tableId].trendArr[game.GlobalVals.trendDataMap[tableId].trendArr.length-1].round;};BaseGame.prototype.getLastShoe=function(){var tableId=this.gameModel.TABLE_ID;if(this.startBetInfo)
return this.startBetInfo.shoe;if(this.lastRound)
return this.lastRound.shoe;if(!game.GlobalVals.trendDataMap[tableId]||!game.GlobalVals.trendDataMap[tableId].trendArr)
return 0;if(game.GlobalVals.trendDataMap[tableId].trendArr.length==0)
return 1;return game.GlobalVals.trendDataMap[tableId].trendArr[game.GlobalVals.trendDataMap[tableId].trendArr.length-1].shoe;};BaseGame.prototype.onStartBet=function(data){this.startBetInfo=data.content;if(this.isBetSending)
this.gameView.showStatus(game.GameText.UNKNOW_BET_STATUS,true,true);this.isBetSending=false;this.gameView.betArea.clearBets();this.gameView.betArea.showWin(this.commitData);game.NetUtils.sendWS({kind:game.GameCMD.GET_BALANCE,game:this.gameModel.TABLE_ID});this.isBetting=true;this.gameView.showStatus(game.GameText.START_BET);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.ANOUNCE_PLACE_BETS);this.gameView.betArea.clearBets();this.gameView.betArea.reset();this.gameView.betControl.show();this.gameView.betControl.enable();this.gameView.chipControl.enable();this.gameView.betArea.enable();this.gameView.gameHUD.gameInfoCon.betInfo.reset();if(this.gameView.betArea.liveChipMng)
this.gameView.betArea.liveChipMng.clearChips();if(this.gameView.gameHUD.gameInfoCon.gameDetailCon['livePoolDetail'])
this.gameView.gameHUD.gameInfoCon.gameDetailCon['livePoolDetail'].clearData();this.gameView.gameHUD.gameInfoCon.roundTf.text=data.content.shoe+' - '+data.content.round.toString();if(this.gameView.diceAnim)
this.gameView.diceAnim.visible=false;if(this.gameView.seatControl)
this.gameView.seatControl.unlock();if(this.gameView.gameHUD&&this.gameView.gameHUD.settingCon.roomCon)
this.gameView.gameHUD.settingCon.roomCon.unlock();this.resetGameResultTimeoutId=setTimeout(this.resetGameResult.bind(this),this.resetGameResultDelay);};BaseGame.prototype.resetGameResult=function(){this.gameView.gameResult.reset();if(this.gameView.cardControl)
this.gameView.cardControl.clearAllCards();this.gameView.activeSuperHand(false);};BaseGame.prototype.onStopBet=function(){this.isBetting=false;this.gameView.betControl.hide();this.gameView.chipControl.dissable();this.gameView.betArea.dissable();var amount=this.gameView.betArea.getTotalBet();var confirm=this.gameView.betArea.getTotalConfirmedBet();this.gameView.countdown.hide();if(confirm<amount&&!this.isBetSending){this.gameView.showStatus(game.GameText.BET_CONFIRM_ALERT,true,true);}
if(!this.isBetSending)
this.gameView.betArea.clearBets();if(this.gameView.cardControl)
this.gameView.cardControl.clearAllCards();};BaseGame.prototype.onBetCountDownComplete=function(){this.isBetting=false;this.gameView.betControl.hide();this.gameView.chipControl.dissable();this.gameView.betArea.dissable();this.gameView.showStatus(game.GameText.STOP_BET);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.ANOUNCE_NO_MORE_BETS);};BaseGame.prototype.onBetSuccess=function(data){this.gameView.showStatus(game.GameText.BET_SUCCESS);this.isBetSending=false;if(this.isBetting){this.gameView.betControl.enable();this.gameView.betArea.enable();}
this.userInfo.updateBalance(-data.content.value);this.gameView.setBalance(this.userInfo.getBalance());this.gameView.betArea.confirmBet();this.gameView.gameHUD.gameInfoCon.betInfo.confirmedTf.text=component.VComponentUtils.getNumInFormat(this.gameView.betArea.getConfirmedAmount(),1);this.gameView.gameHUD.gameInfoCon.betInfo.pendingTf.text=component.VComponentUtils.getNumInFormat(this.gameView.betArea.getPendingAmount(),1);if(this.gameView.seatControl)
this.gameView.seatControl.lock();if(this.gameView.gameHUD&&this.gameView.gameHUD.settingCon.roomCon)
this.gameView.gameHUD.settingCon.roomCon.lock();};BaseGame.prototype.onDeal=function(dealRes){var id=setTimeout(function(){component.VComponentUtils.removeElementFromArray(this.dealTimeoutIds,id);if(this.gameView.cardControl)
this.gameView.cardControl.dealCard(dealRes.content.card,dealRes.content.pos-1);}.bind(this),this.dealCardDelay);this.dealTimeoutIds.push(id);};BaseGame.prototype.onClear=function(data){var id=setTimeout(function(){component.VComponentUtils.removeElementFromArray(this.clearTimeoutIds,id);if(this.gameView.cardControl)
this.gameView.cardControl.clearCard(data.content.value-1);}.bind(this),this.dealCardDelay);this.clearTimeoutIds.push(id);};BaseGame.prototype.initCards=function(cardsRes){for(var i=0;i<cardsRes.content.value.length;i++){this.gameView.cardControl.dealCard(cardsRes.content.value[i].card,cardsRes.content.value[i].pos-1,false);}};BaseGame.prototype.onBetLimit=function(data){this.gameModel.betSettings={};for(var i=0;i<data.content.length;i++){this.gameModel.betSettings[data.content[i].code]=data.content[i];}
if(this.gameView.gameHUD.gameInfoCon.gameDetailCon['limitDetail'])
this.gameView.gameHUD.gameInfoCon.gameDetailCon['limitDetail'].setData(data);};BaseGame.prototype.enterGame=function(limitID){trace("enterRoom ============== "+this.gameModel.TABLE_ID+" limitID "+limitID);var iframe=document.getElementById('miniSlot');if(!game.GlobalVals.isIframeLoaded&&(game.GlobalVals.operatorFlagInfo.miniStatus==2||game.GlobalVals.operatorFlagInfo.miniStatus==3)){game.GlobalVals.isIframeLoaded=true;var url=game.GameSettings.CONFIG.miniSlotUrl;if(isDebug==7)
url=!OPERATOR_ID||OPERATOR_ID.toLowerCase()=='w88'?'http://gamelobby.gpiuat.com/mini/?fun=0&view=side&gameid=godoffortune':game.GameSettings.CONFIG.miniSlotUrl;iframe.src=url+'&op='+OPERATOR_ID+'&token='+TOKEN+'&lang='+ORG_LANG;}
this.gameModel.loading.hide();this.onAuthSuccess();this.gameModel.LIMIT_ID=limitID;this.gameView.onEnterGame();if(this.gameView.tipCon)
this.gameView.tipCon.initTips();var enterReq=new game.netdata.EnterRequest().initialize(this.gameModel.TABLE_ID,limitID);game.NetUtils.sendWS(enterReq);};BaseGame.prototype.onNotice=function(data){switch(data.content.value){case"notice_bad_spin":this.gameView.gameHUD.showVodStatus(game.GameText.NOTICE_BAD_SPIN);break;case"notice_cocked_dice":this.gameView.gameHUD.showVodStatus(game.GameText.NOTICE_COCK_DICE);break;}};BaseGame.prototype.onNoticeAll=function(data){if(data.content.table!=this.gameModel.TABLE_ID)
return;switch(data.content.value){case"notice_maintenance":game.GlobalVals.messagePopup.showMessage(game.GameText.NOTICE_MAINTAINANCE);break;}};return BaseGame;}(game.GameObject));game.BaseGame=BaseGame;})(game||(game={}));var game;(function(game){var BaseMain=(function(_super){__extends(BaseMain,_super);function BaseMain(){var _this=_super.call(this)||this;game.GameSettings.initialize();game.GlobalVals.initialize(_this);_this.debug=isDebug==2;_this.ipIndex=0;_this.frameTime=0;_this.frameCount=0;_this.dispatcher=new core.VEventDispatcher();return _this;}
BaseMain.prototype.initialize=function(){var r=window.screen.height/game.GameSettings.CANVAS_HEIGHT;var h=game.GameUtils.getSize("Height")*window.devicePixelRatio+1;var w=game.GameUtils.getSize("Width")*window.devicePixelRatio;dpr=2;if(!component.VComponentUtils.isMobile){this.renderer=new PIXI.CanvasRenderer(game.GameSettings.CANVAS_WIDTH,game.GameSettings.CANVAS_HEIGHT,{transparent:true,backgroundColor:0x1F1F1F,antialias:true,resolution:dpr});}
else{this.renderer=new PIXI.WebGLRenderer(game.GameSettings.CANVAS_WIDTH,game.GameSettings.CANVAS_HEIGHT,{transparent:true,antialias:true,resolution:dpr});}
trace("dpr =========== "+dpr);this.dpr=dpr;document.getElementById("hContainer").style.zIndex=game.Htmlzindex.CONTAINER_INDEX;game.GlobalVals.renderer=this.renderer;this.renderer.view.style.position='absolute';this.renderer.view.style.zIndex=game.Htmlzindex.GAME_INDEX;document.getElementById("mainContainer").appendChild(this.renderer.view);this.stage=new PIXI.Container();game.GlobalVals.stage=this.stage;this.mainCon=new PIXI.Container();game.GlobalVals.mainCon=this.mainCon;this.stage.addChild(this.mainCon);var gameMasker=new PIXI.Graphics();gameMasker.beginFill(0x333333);gameMasker.drawRect(0,0,game.GameSettings.CANVAS_WIDTH,game.GameSettings.CANVAS_HEIGHT);gameMasker.endFill();this.mainCon.addChild(gameMasker);this.mask=gameMasker;this.mainCon.addChild(this);component.VComponentUtils.initialize(this.stage,this.mainCon,this.renderer);if(this.debug){debugTf=game.GameUtils.createText('',{fontFamily:"Arial",fontSize:12,fontStyle:'bold',fill:0xff0000});debugTf.y=10;debugTf.x=200;this.mainCon.addChild(debugTf);}
this.loading=new component.Loading(0.8);this.loading.hide();this.preloader=new game.Preloader();this.loading.setSize(game.GameSettings.CANVAS_WIDTH,game.GameSettings.CANVAS_HEIGHT);this.tipTf=component.VComponentUtils.createText(game.GameText.LOADING_TIP_0);this.tipTf.anchor.x=0.5;this.tipTf.x=game.GameSettings.CANVAS_WIDTH/2;this.tipTf.y=game.GameSettings.CANVAS_HEIGHT*0.9;if(sys.browserType===sys.BROWSER_TYPE_SAFARI)
this.tipTf.visible=false;this.mainCon.addChild(this.tipTf);this.mainCon.addChild(this.loading);this.mainCon.addChild(this.preloader);this.mainCon.scale.x=(1/dpr)*this.renderer.width/game.GameSettings.CANVAS_WIDTH;this.mainCon.scale.y=this.mainCon.scale.x;var div=document.createElement('div');div.style.position='absolute';div.style.zIndex='1000';div.style.border='1px';div.style.background='#000000';this.topCover=div;this.loadMainAssets();this.updateFunc=this.update.bind(this);requestAnimationFrame(this.updateFunc);this.loadCommonAssets();this.sizeHandler();};BaseMain.prototype.loadCommonAssets=function(){};BaseMain.prototype.refreshGame=function(g){};BaseMain.prototype.sizeHandler=function(){window.scrollTo(0,1);var debugStr="";var w,h;var iOS=game.GameUtils.isIOS();h=game.GameUtils.getSize("Height")+1;w=game.GameUtils.getSize("Width");game.GameUtils.isLandscape=w>h?true:false;var canvasW,canvasH;if(w/h>game.GameSettings.CANVAS_WIDTH/game.GameSettings.CANVAS_HEIGHT){canvasH=h;canvasW=h*(game.GameSettings.CANVAS_WIDTH/game.GameSettings.CANVAS_HEIGHT);}
else{canvasW=w;canvasH=w*(game.GameSettings.CANVAS_HEIGHT/game.GameSettings.CANVAS_WIDTH);}
this.renderer.view.style.width=canvasW+'px';this.renderer.view.style.height=canvasH+'px';gameOrigin.x=(w-canvasW)/2;gameOrigin.y=(h-canvasH)/2;if((game.GameSettings.IS_CENTER_GAME)){this.renderer.view.style.top=(h-canvasH)/2+'px';this.renderer.view.style.left=(w-canvasW)/2+'px';this.topCover.style.width=w+'px';this.topCover.style.height=(h-canvasH)/2+'px';}
var mainCon=this.mainCon;var hContainer=document.getElementById('hContainer');var mdpr=1;gameScale=canvasW/game.GameSettings.CANVAS_WIDTH;hContainer.style.left=this.renderer.view.style.left;hContainer.style.top=this.renderer.view.style.top;hContainer.style.transform='scale('+gameScale+','+gameScale+')';hContainer.style.webkitTransform='scale('+gameScale+','+gameScale+')';this.renderer.render(this.stage);};BaseMain.prototype.startUpdateSize=function(){this.sizeHandler();};BaseMain.prototype.loadMainAssets=function(){trace("BaseMain::loadMainAssets");};BaseMain.prototype.loadMainAssetsCompleteHdl=function(loader,sounds){trace("BaseMain::loadMainAssetsCompleteHdl == ");this.resources=loader.resources;var jqWindow=eval('$(window)');jqWindow.resize(this.startUpdateSize.bind(this));jqWindow.ready(this.startUpdateSize.bind(this));this.startUpdateSize();};BaseMain.prototype.initNetwork=function(){if(this.loading)
this.loading.show(false,game.GameText.CONNECTING);if(game.NetUtils.dispatcher){game.NetUtils.dispatcher.removeEventListener(netutils.WEB_SOCKET_OPEN,this.onWSOpenHdl,this);game.NetUtils.dispatcher.removeEventListener(netutils.WEB_SOCKET_CLOSE,this.onWSCloseHdl,this);game.NetUtils.dispatcher.removeEventListener(netutils.WEB_SOCKET_MESSAGE,this.onWSMessageHdl,this);}
game.NetUtils.initialize();game.NetUtils.dispatcher.addEventListener(netutils.WEB_SOCKET_OPEN,this.onWSOpenHdl,this);game.NetUtils.dispatcher.addEventListener(netutils.WEB_SOCKET_CLOSE,this.onWSCloseHdl,this);game.NetUtils.dispatcher.addEventListener(netutils.WEB_SOCKET_MESSAGE,this.onWSMessageHdl,this);};BaseMain.prototype.onWSOpenHdl=function(){};BaseMain.prototype.onWSCloseHdl=function(){this.loading.hide();};BaseMain.prototype.onGameEvent=function(e){};BaseMain.prototype.initView=function(){};BaseMain.prototype.update=function(){requestAnimationFrame(this.updateFunc);component.VComponentUtils.update();this.renderer.render(this.stage);if(this.debug){this.frameCount++;if(this.frameTime==0)
this.frameTime=new Date().getTime();if(new Date().getTime()-this.frameTime>=1000){debug("FPS: "+this.frameCount+" dpr: "+(window.devicePixelRatio||1));this.frameTime=new Date().getTime();this.frameCount=0;}}};BaseMain.prototype.getLimits=function(data){};BaseMain.prototype.onWSMessageHdl=function(e){var data=e.data;switch(data.kind){case game.GameCMD.AUTH_SUCCESS:this.onAuthSuccess(data);break;case game.GameCMD.SHOW_LOBBY:this.banTables(data);this.getLimits(data);if(game.GlobalVals.WAITING_SHOW_LOBBY_RESPONSE){game.GlobalVals.lobbyResponse=data;game.GlobalVals.WAITING_SHOW_LOBBY_RESPONSE=false;game.GlobalVals.backToLobby();}
else{this.onShowLobby(data);netutils.sendWSSimple(game.GameCMD.SERVER_TIME);game.NetUtils.sendWS({kind:game.GameCMD.GET_BALANCE,game:this.gameModel.TABLE_ID});}
break;case game.GameCMD.HISTORY:this.onHistoryAll(data);break;case game.GameCMD.SERVER_TIME:game.GlobalVals.serverTime=data.content;game.GlobalVals.startTime=component.VComponentUtils.getTimezoneDate(new Date().getTime(),game.GameSettings.DISPLAY_TIME_ZONE).getTime();break;case game.GameCMD.BALANCE:game.GlobalVals.userInfo.setBalance(data.content.value);game.GlobalVals.userInfo.currency=data.content.currency;break;case game.GameCMD.LIMITS:game.GlobalVals.limitsResponse=data;break;case game.GameCMD.COMMIT_SUCCEED:this.onCommitSucceedAll(data);break;case game.GameCMD.ROLL_BACK_SUCCEED:this.rollbackSucceedAll(data);break;case game.GameCMD.NEW_SHOE_SUCCEED:this.onNewShoeSucceedAll(data);break;case game.GameCMD.COUNT_DOWN:this.onCountDownAll(data);break;case game.GameCMD.HISTORY_100:this.onHistory100(data);break;case game.GameCMD.START_BET_SUCCEED:this.onStartBetAll(data);break;case game.GameCMD.LAST_ROUND:this.onLastRound(data);break;}};BaseMain.prototype.banTables=function(data){var availableTables={};for(var i=data.content.length-1;i>=0;i--){availableTables[data.content[i].id]=data.content[i].id;}
for(var tableInfo in game.GameSettings.TABLE_INFOS){if(!availableTables[tableInfo]){game.GameSettings.TABLE_INFOS[tableInfo].banned=true;}
else{game.GameSettings.TABLE_INFOS[tableInfo].banned=false;}}};BaseMain.prototype.onShowLobby=function(data){};BaseMain.prototype.onStartBetAll=function(data){var tableId=data.content.table;if(!game.GlobalVals.trendDataMap[tableId])
return;var trendArr=game.GlobalVals.trendDataMap[tableId].trendArr;if(trendArr.length&&trendArr[trendArr.length-1].shoe!=data.content.shoe){this.onWSMessageHdl(new core.VBaseEvent().setData(netutils.WEB_SOCKET_MESSAGE,{kind:game.GameCMD.NEW_SHOE_SUCCEED,content:tableId}));}};BaseMain.prototype.onCommitSucceedAll=function(data){if(game.GameSettings.updateResultFunc[data.content.table])
data.content.result=game.GameSettings.updateResultFunc[data.content.table](data.content.cards);var item=new game.netdata.TrendsItem();item.table=data.content.table;item.roundid=data.content.roundid;item.shoe=data.content.shoe;item.round=data.content.round;item.result=data.content.result;item.cards=data.content.cards;this.addTrend(data.content.table,item);};BaseMain.prototype.rollbackSucceedAll=function(data){if(game.GameSettings.updateResultFunc[data.content.table])
data.content.result=game.GameSettings.updateResultFunc[data.content.table](data.content.cards);var item=new game.netdata.TrendsItem();item.table=data.content.table;item.roundid=data.content.roundid;item.shoe=data.content.shoe;item.round=data.content.round;item.result=data.content.result;item.cards=data.content.cards;if(!game.GlobalVals.trendDataMap[data.content.table])
return;var trendArr=game.GlobalVals.trendDataMap[data.content.table].trendArr;if(trendArr.length)
trendArr[trendArr.length-1]=item;};BaseMain.prototype.onNewShoeSucceedAll=function(data){trace("onNewShoeSucceedAll  ============ "+data.content);this.resetShoe(data.content);};BaseMain.prototype.onHistoryAll=function(data){this.updateTrends(data);};BaseMain.prototype.onCountDownAll=function(data){};BaseMain.prototype.onAuthSuccess=function(data){core.VUtils.copy(data.content,game.GlobalVals.userInfo);this.getIpInfo();game.NetUtils.sendWSSimple(game.GameCMD.SHOW_LOBBY);};BaseMain.prototype.getIpInfo=function(){var _this=this;this.getIpTryCount++;if(this.getIpTryCount>game.GameSettings.CONFIG.ipServers.length+1)
return;if(this.ipIndex>=game.GameSettings.CONFIG.ipServers.length)
this.ipIndex=0;var url=game.GameSettings.CONFIG.ipServers[this.ipIndex];sys.sendRequestAsync(url,function(data){if(!data)
return;var ip='';switch(url){case"https://api.ipinfodb.com/v3/ip-city/":var arr=data.split(';');ip=arr[2]||'';break;case"https://ipapi.co/json/":var obj=JSON.parse(data);if(obj.error){_this.getIpErrorHdl();return;}
ip=obj.ip;break;default:var obj=JSON.parse(data);ip=obj.ip;}
game.NetUtils.sendWS({"kind":"updateip","ip":ip.length<=16?ip:""});game.CookiesMng.saveCookie('ip_server_index',_this.ipIndex);},function(){_this.getIpErrorHdl();});};BaseMain.prototype.getIpErrorHdl=function(){this.ipIndex++;this.getIpInfo();};BaseMain.prototype.resetShoe=function(tableId){if(!game.GlobalVals.trendDataMap||!game.GlobalVals.trendDataMap[tableId])
return;delete game.GlobalVals.trendDataMap[tableId].trendArr;delete game.GlobalVals.trendDataMap[tableId].mainBoard;var trendHis100Arr=null;if(game.GlobalVals.trendDataMap[tableId].trendHis100Arr.length)
trendHis100Arr=game.GlobalVals.trendDataMap[tableId].trendHis100Arr;delete game.GlobalVals.trendDataMap[tableId];game.GlobalVals.trendDataMap[tableId]=new game.TrendData();if(trendHis100Arr)
game.GlobalVals.trendDataMap[tableId].trendHis100Arr=trendHis100Arr;};BaseMain.prototype.onLastRound=function(data){this.lastRound=data.content;};BaseMain.prototype.updateTrends=function(data){var tableId=data.content.table;if(!game.GameSettings.TABLE_INFOS[tableId])
return;var values=data.content.list;if(values.length==0)
return;if(game.GameSettings.historyRevertMap[tableId]){values=values.reverse();}
if(game.GameSettings.updateResultFunc[tableId]){for(var i=0;i<values.length;i++)
values[i].result=game.GameSettings.updateResultFunc[tableId](values[i].cards);}
if(!game.GlobalVals.trendDataMap[tableId])
game.GlobalVals.trendDataMap[tableId]=new game.TrendData();var curShoe=1;if(this.lastRound&&tableId==this.lastRound.table)
curShoe=this.lastRound.shoe;else
curShoe=values[values.length-1].shoe;for(var i=values.length-1;i>=0;i--){if(game.GlobalVals.trendDataMap[tableId].trendHis100Arr.length<game.GameSettings.MAX_HIS_100)
game.GlobalVals.trendDataMap[tableId].trendHis100Arr.unshift(values[i]);var maxTrendIcon=game.GameSettings.TABLE_INFOS[tableId].maxTrendIcon;if(!maxTrendIcon)
maxTrendIcon=1000;if(values[i].shoe==curShoe&&game.GlobalVals.trendDataMap[tableId].trendArr.length<maxTrendIcon)
game.GlobalVals.trendDataMap[tableId].trendArr.unshift(values[i]);}
data.content.list=game.GlobalVals.trendDataMap[tableId].trendArr;};BaseMain.prototype.addTrend=function(tableId,item){if(!game.GameSettings.TABLE_INFOS[tableId])
return;if(!game.GlobalVals.trendDataMap[tableId])
game.GlobalVals.trendDataMap[tableId]=new game.TrendData();if(game.GlobalVals.trendDataMap[tableId].trendHis100Arr.length==game.GameSettings.MAX_HIS_100)
game.GlobalVals.trendDataMap[tableId].trendHis100Arr.shift();var maxTrendIcon=game.GameSettings.TABLE_INFOS[tableId].maxTrendIcon;if(!maxTrendIcon)
maxTrendIcon=1000;if(game.GlobalVals.trendDataMap[tableId].trendArr.length==maxTrendIcon)
game.GlobalVals.trendDataMap[tableId].trendArr.shift();game.GlobalVals.trendDataMap[tableId].trendHis100Arr.push(item);game.GlobalVals.trendDataMap[tableId].trendArr.push(item);};BaseMain.prototype.onHistory100=function(data){var tableId=data.content.table;if(!game.GameSettings.TABLE_INFOS[tableId])
return;game.GlobalVals.trendDataMap[tableId]=new game.TrendData();var values=data.content.value;if(values.length==0)
return;if(game.GameSettings.historyRevertMap[data.content.table]){values=values.reverse();}
if(game.GameSettings.updateResultFunc[data.content.table]){for(var i=0;i<values.length;i++)
values[i].result=game.GameSettings.updateResultFunc[data.content.table](values[i].cards);}
var curShoe=1;if(this.lastRound&&tableId==this.lastRound.table)
curShoe=this.lastRound.shoe;else
curShoe=values[values.length-1].shoe;for(var i=values.length-1;i>=0;i--){if(game.GlobalVals.trendDataMap[tableId].trendHis100Arr.length<game.GameSettings.MAX_HIS_100)
game.GlobalVals.trendDataMap[tableId].trendHis100Arr.unshift(values[i]);var maxTrendIcon=game.GameSettings.TABLE_INFOS[tableId].maxTrendIcon;if(!maxTrendIcon)
maxTrendIcon=1000;if(values[i].shoe==curShoe&&game.GlobalVals.trendDataMap[tableId].trendArr.length<maxTrendIcon)
game.GlobalVals.trendDataMap[tableId].trendArr.unshift(values[i]);}
data.content.value=game.GlobalVals.trendDataMap[tableId].trendArr;};BaseMain.prototype.onActive=function(){};BaseMain.prototype.onDeactive=function(){};return BaseMain;}(PIXI.Container));game.BaseMain=BaseMain;})(game||(game={}));var game;(function(game){var BaseResourceManager=(function(_super){__extends(BaseResourceManager,_super);function BaseResourceManager(main){var _this=_super.call(this,main)||this;_this.dynamicResource={};_this.handlerMap={};game.GlobalVals.resourceMng=_this;_this.assetPercent=70;return _this;}
BaseResourceManager.prototype.getDynamicTexture=function(id,url,handler){if(this.dynamicResource[id]){handler(this.dynamicResource[id].texture);return;}
var loader=new PIXI.loaders.Loader();this.handlerMap[core.VUtils.getObjKey(handler)]=true;loader.on('complete',function(loader,resource){this.dynamicResource[id]=resource[id];if(this.handlerMap[core.VUtils.getObjKey(handler)]){handler(resource[id].texture);}}.bind(this));loader.add(id,url,!game.GameSettings.IS_WEBGL?{crossOrigin:""}:null);loader.load();};BaseResourceManager.prototype.getBatchDynamicTexture=function(ids,urls,handler){var loadedAll=true;for(var i=0;i<ids.length;i++){if(!this.dynamicResource[ids[i]]){loadedAll=false;break;}}
if(loadedAll){handler(this.dynamicResource);return;}
var loader=new PIXI.loaders.Loader();this.handlerMap[core.VUtils.getObjKey(handler)]=true;loader.on('complete',function(loader,resource){for(var i in resource)
this.dynamicResource[i]=resource[i];if(this.handlerMap[core.VUtils.getObjKey(handler)]){handler(this.dynamicResource);}}.bind(this));for(var i=0;i<ids.length;i++){if(!this.dynamicResource[ids[i]]){loader.add(ids[i],urls[i],{crossOrigin:""});break;}}
loader.load();};BaseResourceManager.prototype.releaseHandler=function(handler){delete this.handlerMap[core.VUtils.getObjKey(handler)];};BaseResourceManager.prototype.loadSounds=function(filenames,assetLoader,soundMap,handler,progress){if(filenames.length==0){handler(assetLoader,soundMap);}
var soundTotal=filenames.length;var soundCount=0;function onload(){soundCount++;progress(this.assetPercent+(soundCount/soundTotal)*(100-this.assetPercent));if(soundCount==soundTotal)
handler(assetLoader,soundMap);}
function onloaderror(error){trace('Howler encountered error: '+error);}
for(var i=0;i<filenames.length;i++){if(filenames[i].hasOwnProperty('id')){var obj=filenames[i];obj.volume=1;obj.onload=onload.bind(this);obj.onloaderror=onloaderror;soundMap[obj.id]=new Howl(obj);continue;}
var id=filenames[i].split('/').pop();soundMap[id]=new Howl({src:[filenames[i]+'.ogg',filenames[i]+'.mp3'],loop:false,volume:1,onload:onload.bind(this),onloaderror:onloaderror});}};BaseResourceManager.prototype.releaseAsset=function(loader){var resources=loader.resources;var data;for(var i in resources){data=resources[i];if(data.isJson){for(var j in data.data.frames){PIXI.Texture.removeTextureFromCache(j).destroy(true);}}
else if(data.isImage){PIXI.Texture.removeTextureFromCache(data.url).destroy(true);}}
loader.reset();};return BaseResourceManager;}(game.MainObject));game.BaseResourceManager=BaseResourceManager;})(game||(game={}));var game;(function(game){var BetType=(function(){function BetType(){}
BetType.getResult=function(type,src){if(src===void 0){src='000000000000';}
return src.substring(0,type-1)+'1'+src.substring(type,12);};BetType.BANKER=1;BetType.PLAYER=2;BetType.TIE=3;BetType.BANKER_PAIR=4;BetType.PLAYER_PAIR=5;BetType.BIG=6;BetType.SMALL=7;BetType.BANKER_N8=8;BetType.PLAYER_N8=9;BetType.BANKER_N9=10;BetType.PLAYER_N9=11;BetType.SUPER=12;return BetType;}());game.BetType=BetType;})(game||(game={}));var game;(function(game){var GameStatus=(function(){function GameStatus(){}
GameStatus.BETTING=1;return GameStatus;}());game.GameStatus=GameStatus;})(game||(game={}));var game;(function(game){var GameText=(function(){function GameText(){}
GameText.ADS="Ads";GameText.TRANSACTION_RECORD_TIP="Please click on any transaction record to view its bet detail.";GameText.DIAL="Dial this number to validate video is 'Live'";GameText.MENU="Menu";GameText.FINAL_BETS="Final bets.";GameText.FULLSCREEN="Fullscreen";GameText.EXIT_FULLSCREEN="Exit Fullscreen";GameText.STUDIO_0_NAME="Club W Gold";GameText.STUDIO_1_NAME="Club W Premier";GameText.STUDIO_2_NAME="Club W Grand";GameText.LOAD_GAME_ASSETS="Load Game Assets";GameText.UNKNOW_BET_STATUS="Unknown bet status";GameText.VOIDED="Voided";GameText.GAME_VOIDED="Game Voided";GameText.NEW="new";GameText.NEW_SHOE_SUCCEED="New Shoe will begin shortly";GameText.EDITED="Edited";GameText.WEBRTC_WARNING="IE/Safari does not support live casino streaming. Please use Chrome/Firefox/360/QQ/UC browsers to open live casino game.";GameText.BALANCE_NOT_ENOUGHT="Insufficient balance.";GameText.BET_SUCCESS="Bet successful.";GameText.STOP_BET="No more bets.";GameText.CONNECTING="Connecting...";GameText.WAIT_CARD_DEAL="Please wait for cards to deal.";GameText.BET_CONFIRM_ALERT="Your bets have not been confirmed, please remember to click Confirm on next hand.";GameText.ODD_EVEN_MAX_ROUND_ALERT="Odd/Even is not available after {0} hands of each shoe.";GameText.BIG_SMALL_MAX_ROUND_ALERT="Big/Small is not available after {0} hands of each shoe.";GameText.PAIR_MAX_ROUND_ALERT="'Player Pair' and 'Banker Pair' is not available after {0} hands of each shoe.";GameText.PAIR_FAB_MAX_ROUND_ALERT="'Player Fabulous Pair' and 'Banker Fabulous Pair' is not available after {0} hands of each shoe.";GameText.START_BET="Place your bets.";GameText.WIN_MSG="You win {0}.";GameText.LOGIN_DUPLICATED_ALERT="You have logged in Live Casino system using the same account from another place";GameText.LIVE="LIVE";GameText.NOTICE="Notice";GameText.ENTER="Enter";GameText.ZOOM_WARNING="PRESS CTRL + 0 (zero) TO ENTER THE GAME";GameText.REPLOAD="Reload";GameText.LONG_IDLE_ALERT="You have been disconnected from the game due to long period of without bets.";GameText.LOGIN_FAIL="You haven't logged in or your session is expired, please login again.";GameText.DEALER_CHANGE="Dealer change in progress.";GameText.DEALER_LEAVE="Dealer leave.";GameText.NOTICE_BAD_SPIN="Bad spin, please wait for re-spin.";GameText.NOTICE_MAINTAINANCE="Maintenance in progress.";GameText.NOTICE_COCK_DICE="Cocked dice, please wait for re-shake.";GameText.TIP_THANKS="Thank you for your tip";GameText.TABLE_CODE="Table Code";GameText.GAME_CODE="Game Code";GameText.TABLE="Table";GameText.BET_NO="Bet No.";GameText.NO_DOT="No.";GameText.CODE_DOT="Code.";GameText.DATE="Date";GameText.RESULT="Result";GameText.RESULTS="Results";GameText.TURBO="Turbo";GameText.BACK_TO_LOBBY="Back to lobby";GameText.LOGOUT="Logout";GameText.LOGOUT_SUCCESS="Logout succeed";GameText.STATISTICS="Statistics";GameText.LOADING="Downloading in progress";GameText.GAME_RESULT_UPDATED="Game result updated";GameText.CODE="Code";GameText.MAX_BET_ALERT="Maximum bet on {0} is {1}.";GameText.MIN_BET_ALERT="Minimum bet on {0} is {1}.";GameText.MAX_BET_PER_HAND_ALERT="Total Max per hand";GameText.MIN_BET_PER_HAND_ALERT="Total minimum bet is {0}";GameText.JOIN_ROOM_ERROR="The room is full";GameText.enter_table_fail="";GameText.SIT_HERE="Sit Here";GameText.OK="OK";GameText.VIEW_7S="7S View";GameText.SAVE_BET="Save";GameText.BET_PENDING_TOOLTIP="Pending";GameText.BET_CONFIRM_TOOLTIP="Confirm";GameText.BET_CLEAR_TOOLTIP="Clear";GameText.BET_UNDO_TOOLTIP="Undo";GameText.BET_REBET_TOOLTIP="Rebet";GameText.TREND_CHANGE_TABLE_TOOLTIP="View {0} Route";GameText.TREND_CHANGE_ROAD_TOOLTIP="Change Road";GameText.CHANGE_COLOR="Change Color";GameText.PREDICT="Predict {0}";GameText.SETTINGS="Settings";GameText.PENDING="Pending";GameText.CONFIRMED="Confirmed";GameText.CONFIRM="confirm";GameText.TOTAL_WIN="Total Win";GameText.SOUND="Sound";GameText.BET_FAIL="Bet failed";GameText.BET_FAIL_LIMIT_UPGRADE="Bets rejected due to limits upgrade. Please wait for next hand.";GameText.BET_FAIL_LIMIT_ERROR="Limit error";GameText.BET_FAIL_EXEEDED_LIMIT="Exceeded Table limit";GameText.LINE="Line";GameText.BALANCE="Balance";GameText.REFRESH="Refresh";GameText.LIMITS="Limits";GameText.LIVE_POOL="Live Pool";GameText.CASHIER="Fund Transfer";GameText.HISTORY="History";GameText.LIVE_CHAT="Live Chat";GameText.RULES="Rules";GameText.TIP="Tip";GameText.STATE="State";GameText.BANKER="Banker";GameText.PLAYER="Player";GameText.BIG="Big";GameText.TIE="TIE";GameText.SMALL="Small";GameText.BANKER_PAIR="Banker Pair";GameText.PLAYER_PAIR="Player Pair";GameText.PLAYER_BANKER_PAIR="B.Pair / P.Pair";GameText.BANKER_FABULOUS_PAIR="Banker Fabulous Pair";GameText.PLAYER_FABULOUS_PAIR="Player Fabulous Pair";GameText.BANKER_FABULOUS_4="Banker Fabulous 4";GameText.PLAYER_FABULOUS_4="Player Fabulous 4";GameText.SUITED_ONLY="Suited only (e.g. K 9)";GameText.PAIR_ONLY="Pair only (e.g. K K)";GameText.SUITED_PAIR="Suited Pair (e.g K K)";GameText.PUSH="Push";GameText.BANKER_WINS_TOTAL_4="'Banker' wins on point total 4";GameText.BANKER_WINS_TOTAL_1="'Banker' wins on point total 1";GameText.BANKER_WINS_EXCEPT_4_1="'Banker' wins on any other points except for point total 4 or 1";GameText.PLAYER_WINS_TOTAL_4="'Player' wins on point total 4";GameText.PLAYER_WINS_TOTAL_1="'Player' wins on point total 1";GameText.PLAYER_WINS_EXCEPT_4_1="'Player' wins on any other points except for point total 4 or 1";GameText.SUITED_ONLY_2="'Banker Fabulous Pair' or 'Player Fabulous Pair' (Suited only e.g. K 9)";GameText.PAIR_ONLY_2="'Banker Fabulous Pair' or 'Player Fabulous Pair' (Pair only e.g. K K)";GameText.SUITED_PAIR_2="Banker Fabulous Pair' or 'Player Fabulous Pair' (Suited Pair e.g K K)";GameText.NATURAL="Natural";GameText.BANKER_NATURAL="Banker Natural {0}";GameText.PLAYER_NATURAL="Player Natural {0}";GameText.SOCKET_DIS="Disconnected from server";GameText.failed_auth_error="";GameText.SUPER_6_INFO_2_CARDS="Banker Wins on 6 with 2 cards";GameText.SUPER_6_INFO_3_CARDS="Banker Wins on 6 with 3 cards";GameText.PLAYER_NATURAL_8_9="'Player' wins on Natural 8 or 9";GameText.BANKER_NATURAL_8_9="'Banker' wins on Natural 8 or 9";GameText.TIE_ON_NATUAL_8_9="'Tie' on Natural 8 or 9";GameText.SUPER_HAND_PAYOUT="*Above payout applies only when 'Super hand' activated (virtual dice result is 9 or 8).";GameText.fabulous_pair="";GameText.fabulous4_pair_suited_only="";GameText.fabulous4_pair_only="";GameText.fabulous4_suited_pair="";GameText.DRAGON="DRAGON";GameText.TIGER="TIGER";GameText.DRAGON_ODD="Dragon Odd";GameText.TIGER_ODD="Tiger Odd";GameText.DRAGON_EVEN="Dragon Even";GameText.TIGER_EVEN="Tiger Even";GameText.SUPER_7="Super 7";GameText.DragonTiger_1="Dragon";GameText.DragonTiger_2="Tiger";GameText.DragonTiger_3="Tie";GameText.DragonTiger_4="Dragon Odd";GameText.DragonTiger_5="Tiger Odd";GameText.DragonTiger_6="Dragon Even";GameText.DragonTiger_7="Tiger Even";GameText.Baccarat_1="Banker";GameText.Baccarat_2="Player";GameText.Baccarat_3="Tie";GameText.Baccarat_4="Banker Pair";GameText.Baccarat_5="Player Pair";GameText.Baccarat_6="Big";GameText.Baccarat_7="Small";GameText.Baccarat_8="B.Natural8";GameText.Baccarat_9="P.Natural8";GameText.Baccarat_10="B.Natural9";GameText.Baccarat_11="P.Natural9";GameText.Baccarat_12="Super 6+";GameText.BULL_FIGHT="Bull Fight";GameText.bull_five_calf="";GameText.bull_bomb="";GameText.gold_bull="";GameText.silver_bull="";GameText.red_bull="";GameText.blue_bull="";GameText.bull_bull="";GameText.double_bull="";GameText.super_bull="";GameText.super_bull_2="Super bull";GameText.single_bull="";GameText.no_bull="";GameText.rank_list="";GameText.bull_tip="";GameText.double_bull_tip="";GameText.super_bull_tip="";GameText.bull_rank_1="";GameText.bull_rank_2="";GameText.bull_rank_3="";GameText.bull_rank_4="";GameText.bull_rank_5="";GameText.bull_rank_6="";GameText.bull_rank_7="";GameText.bull_rank_8="";GameText.bull_rank_9="";GameText.bull_rank_10="";GameText.bull_rank_11="";GameText.bull_rank_12="";GameText.bull_rank_13="";GameText.bull_rank_14="";GameText.bull_rank_15="";GameText.Fabulous_1="Banker";GameText.Fabulous_2="Player";GameText.Fabulous_3="Tie";GameText.Fabulous_4="Banker Fabulous Pair";GameText.Fabulous_5="Player Fabulous Pair";GameText.Fabulous_6="Banker Fabulous 4";GameText.Fabulous_7="Player Fabulous 4";GameText.SUPER_HAND="Super Hand";GameText.NORMAL_HAND="Normal Hand";GameText.CHANGE_AVATAR="Change Avatar";GameText.Roulette_D1="1st dozen";GameText.Roulette_D2="2nd dozen";GameText.Roulette_D3="3rd dozen";GameText.Roulette_C2="1 to 18";GameText.Roulette_B2="Even";GameText.Roulette_A2="Black";GameText.Roulette_A1="Red";GameText.Roulette_C1="19 to 36";GameText.Roulette_B1="Odd";GameText.Roulette_E1="1st column";GameText.Roulette_E2="2nd Column";GameText.Roulette_E3="3rd Column";GameText.Roulette_F="Straight";GameText.Roulette_G="Split";GameText.Roulette_J="Corner";GameText.Roulette_H="Street";GameText.Roulette_K="Six Line";GameText.DOZEN_OR_COLUMN="Dozen Or Column";GameText.AUTO_SPLIT="Auto Split";GameText.AUTO_CORNER="Auto Corner";GameText.AUTO_STREET="Auto Street";GameText.WAIT_ROULETE_SPIN="Please wait for roulette ball to spin.";GameText.WAIT_DICE_TO_ROLL="Please wait for dices to roll.";GameText.COMMISSION="Commission";GameText.NO_COMMISSION="No Commission";GameText.BANKER_WIN_ON_6_PAY="Banker wins on 6 pays 0.5:1";GameText.EVEN="Even";GameText.ODD="Odd";GameText.RED="Red";GameText.BLACK="Black";GameText.COLD_NUM="Cold Number";GameText.HOT_NUM="Hot Number";GameText.ZERO="Zero";GameText.START_DATE="Start Date";GameText.END_DATE="End Date";GameText.START="Start";GameText.END="End";GameText.SEARCH="Search";GameText.BET_TYPE="Bet Type";GameText.BET_AMOUNT="Bet Amount";GameText.PAYOUT="Payout";GameText.WIN="Win";GameText.LOSE="Lose";GameText.REPORT="Report";GameText.WIN_LOSE="Win/Lose";GameText.WIN_LOSE_AMOUNT="Win/Lose Amount";GameText.WIN_LOSE_REPORT="Win/Lose Report";GameText.MINI_GAME="Mini Game";GameText.TIPPED_AMOUNT="Tipped amount";GameText.TRIPLE="Triple";GameText.SicBo_A1="Big";GameText.SicBo_A2="Small";GameText.SicBo_A3="Odd";GameText.SicBo_A4="Even";GameText.SicBo_B="Three Dice total {0}";GameText.SicBo_C="";GameText.SicBo_D="Specific Triple";GameText.SicBo_E1="Any Triple";GameText.SicBo_F="";GameText.SicBo_G="Two Dice combination {0}";GameText.SINGLE_DICE="Single Dice";GameText.single_dice_all="";GameText.TWO_DICE_COMBINATION="2 Dice Combination";GameText.BACCARAT="Baccarat";GameText.BACCARAT_FABULOUS="Fabulous 4 Baccarat";GameText.LUCKY_BACCARAT="Lucky Baccarat";GameText.ROULETTE="Roulette";GameText.SICBO="Sic Bo";GameText.DRAGON_TIGER="Dragon Tiger";GameText.ALL="All";GameText.POPULAR="Popular";GameText.OTHER="Other";GameText.SUPER_98="Super 98 (No Commission)";GameText.SUPER_98_HIS="Super 98 History";GameText.SUPER_98_BACCARAT="Super 98 Baccarat";GameText.NO_COMMISSION_BACCARAT="No commission Baccarat";GameText.STANDARD_BACCARAT="Standard Baccarat";GameText.SUPER_HI_LO='Super Hi-Lo';GameText.studio1="";GameText.studio2="";GameText.studio3="";GameText.banker_player="";GameText.BIG_ROAD="BIG ROAD";GameText.PEARL_ROAD="Pearl Road";GameText.BIG_EYE_ROAD="Big Eye Road";GameText.SMALL_ROAD="Small Road";GameText.COCK_ROACH_ROAD="COCKROACH Road";GameText.MIN_PER_BET="Min per bet";GameText.MAX_BET_PER_BET_TYPE="Max bet per bet type";GameText.OR="or";GameText.ALL_TRANSACTIONS="All Transactions";GameText.SUPER_6_PLUS="Super 6+";GameText.HOME="Home";GameText.MY_ACCOUNT="My account";GameText.FUNDS="Funds";GameText.LIVE_CASINO="Live Casino";GameText.CHANGE_LIMIT="Change limit";GameText.REPORTS="Reports";GameText.LOAD_MORE="Load more";GameText.HISTORY_MAX_DAY_ALERT="Exceed maximum search period of {0} days";GameText.LOADING_TIP_0="This game performs best on Chrome browser";GameText.SevenUp_1="Banker";GameText.SevenUp_2="Player";GameText.SevenUp_3="Tie";GameText.SevenUp_4="Super 7";GameText.super7_title="";GameText.super7_any2="";GameText.super7_any3="";GameText.super7_any4="";GameText.super7_any5="";GameText.super7_any6="";GameText.super7_term="";GameText.banker7="";GameText.player7="";GameText.tie7="";GameText.seven_up_tie_with_7="";GameText.seven_up_tie_with_other="";GameText.super_7_tip="";GameText.must_bet_other="";GameText.baccarat_cinematic="";GameText.roulette_cinematic="";GameText.banker_lucky_pairs="";GameText.player_lucky_pairs="";GameText.lucky_6="";GameText.banker_red="";GameText.banker_black="";GameText.player_red="";GameText.player_black="";GameText.banker_wins_on_123="";GameText.banker_wins_on_456="";GameText.banker_wins_on_789="";GameText.player_wins_on_123="";GameText.player_wins_on_456="";GameText.player_wins_on_789="";GameText.tie_on_0123="";GameText.tie_on_456="";GameText.tie_on_789="";GameText.luckybaccarat_pair_diamond_4="";GameText.luckybaccarat_pair_other_4="";GameText.luckybaccarat_pair_diamond="";GameText.luckybaccarat_pair_other="";GameText.lucky_pairs_not_available="";GameText.generic_not_available="";GameText.lucky_super_6_tip="";GameText.lucky_black_tip="";GameText.lucky_pair="";GameText._1st_dozen="";GameText._2nd_dozen="";GameText._3rd_dozen="";GameText._1st_column="";GameText._2nd_column="";GameText._3rd_column="";GameText.squeeze="";GameText.auto_squeeze="";GameText.manual_squeeze="";GameText.squeeze_toggle_tip="";GameText.squeeze_toggle_instruction="";GameText.sevenup="";GameText.super7_not_available="";GameText.rollback="";GameText.do_not_show_again="";GameText.sicbo_tip_0="";GameText.dragon_tiger_half_on_tie="";GameText.dragon_tiger_lose_7="";GameText.seven_up_odd_0="";GameText.seven_up_odd_1="";GameText.banker_wins_on="";GameText.player_wins_on="";GameText.tie_on="";GameText.baccarat_super6="";GameText.superhilo="";GameText.superhilo_7_bet_not_available="";GameText.superhilo_payout="";GameText.superhilo_hi="";GameText.superhilo_lo="";GameText.SEVEN="7";GameText.superthreepicture="";GameText.super3pictures_msg="";GameText.player_pair_plus="";GameText.banker_pair_plus="";GameText.player_3_pictures="";GameText.banker_3_pictures="";GameText.threepictures="";GameText.pair_plus_title="";GameText.pair_plus_straight_flush="";GameText.pair_plus_kind="";GameText.pair_plus_straight="";GameText.pair_plus_flush="";GameText.pair_plus_pair="";GameText.pair_plus_straight_flush_payout="";GameText.pair_plus_kind_payout="";GameText.pair_plus_straight_payout="";GameText.pair_plus_flush_payout="";GameText.pair_plus_pair_payout="";GameText.threepictures_1p="";GameText.threepictures_2p="";GameText.threepictures_3p="";GameText.fan="";GameText.fan1="";GameText.fan2="";GameText.fan3="";GameText.fan4="";GameText.oneNim2="";GameText.oneNim3="";GameText.oneNim4="";GameText.twoNim1="";GameText.twoNim3="";GameText.twoNim4="";GameText.threeNim1="";GameText.threeNim2="";GameText.threeNim4="";GameText.fourNim1="";GameText.fourNim2="";GameText.fourNim3="";GameText.kwok1And2="";GameText.kwok1And4="";GameText.kwok2And3="";GameText.kwok3And4="";GameText.superfantan_total_point="";GameText.bonus98_title="";GameText.nim="";GameText.kwok="";GameText.total="";GameText.fan_bonus_payout="";GameText.T_BANKER="B";GameText.T_PLAYER="P";GameText.T_TIE="T";GameText.T_DRAGON="D";GameText.T_TIGER="T";GameText.T_TRIPLE="T";GameText.T_SMALL="S";GameText.T_BIG="B";GameText.T_RED="R";GameText.T_BLACK="B";GameText.T_ODD="O";GameText.T_EVEN="E";GameText.T_HI="H";GameText.T_LO="L";GameText.UC_VIDEO_ALERT="Sorry, live video is not supported on this browser. Try playing on Chrome browser or you may choose to continue to play without live video.";return GameText;}());game.GameText=GameText;})(game||(game={}));var game;(function(game){var TrendData=(function(){function TrendData(){this.mainExVal=0;this.mainBoard=[];this.trendArr=[];this.trendHis100Arr=[];}
return TrendData;}());game.TrendData=TrendData;})(game||(game={}));var game;(function(game){var UserInfo=(function(){function UserInfo(){this.nickname='';this.currency='';this.balance=0;}
UserInfo.prototype.updateBalance=function(delta){this.balance+=delta;};UserInfo.prototype.getBalance=function(){return this.balance;};UserInfo.prototype.setBalance=function(val){this.balance=val;};return UserInfo;}());game.UserInfo=UserInfo;})(game||(game={}));var game;(function(game){var VodMode=(function(){function VodMode(){}
VodMode.C1='C1';VodMode.C2='C2';return VodMode;}());game.VodMode=VodMode;})(game||(game={}));var game;(function(game){var GameCMD=(function(){function GameCMD(){}
GameCMD.AUTH="auth";GameCMD.AUTH_SUCCESS="authplayersucceed";GameCMD.OPERATOR_FLAG="operatorflag";GameCMD.BALANCE="balance";GameCMD.SERVER_TIME="servertime";GameCMD.SHOW_LOBBY="showlobby";GameCMD.GET_BALANCE="getbalance";GameCMD.MINI_BET_STATS="minibetstats";GameCMD.LIVE_BET_STATS="livebetstats";GameCMD.USER_BET_STATS="userbetstats";GameCMD.BUNDLE_RESULT="bundleresult";GameCMD.LIMITS="limits";GameCMD.ROLL_BACK_SUCCEED="rollbacksucceed";GameCMD.SQUEEZE_ROLL_BACK_SUCCEED="squeezerollbacksucceed";GameCMD.ENTER="enter";GameCMD.ENTER_FAILED="entertablefailed";GameCMD.JOIN_ROOM_FAIL="joinroomfailed";GameCMD.ENTER_ROOM="enterroom";GameCMD.ROOM_LIST="roomlist";GameCMD.TABLE_LIMIT="tablelimit";GameCMD.TRENDS="trends";GameCMD.HISTORY="history";GameCMD.LAST_ROUND="lastround";GameCMD.CARDS="cards";GameCMD.TICKS="ticks";GameCMD.DEALER="ticks";GameCMD.BET_LIMIT="betlimit";GameCMD.CURRENT_BETS="currentbets";GameCMD.ROOM_BET_INFO="roombetinfo";GameCMD.JOIN_ROOM_SUCCESS="joinroomsuccess";GameCMD.BONUS_UPS="bonusups";GameCMD.POWER_UP="powerup";GameCMD.POWER_UPS="powerups";GameCMD.START_BET_SUCCEED="startbetsucceed";GameCMD.COUNT_DOWN="countdown";GameCMD.STOP_BET_SUCCEED="stopbetsucceed";GameCMD.POOL="pool";GameCMD.DEAL="deal";GameCMD.BET="vbet";GameCMD.BET_SUCCEED="betsucceed";GameCMD.BET_FAIL="betfail";GameCMD.CLEAR="clear";GameCMD.COMMIT_SUCCEED="commitsucceed";GameCMD.REWARD="reward";GameCMD.NEW_SHOE_SUCCEED="newshoesucceed";GameCMD.HISTORY_100="history100";GameCMD.DEALER_CHANGED="dealerchanged";GameCMD.DEALER_LEAVE="dealerleave";GameCMD.NOTICE="notice";GameCMD.ACTION_DOWN="actiondown";GameCMD.LOGIN_DUPLICATED="loginduplicated";GameCMD.EXIT="exit";GameCMD.ROOM_BET_SUCCEED="roombetsucceed";GameCMD.UPDATE_AVATAR="updateavatar";GameCMD.UPDATE_AVATAR_SUCCEED="updateAvatarSucceed";GameCMD.BET_HISTORY="bethistory";GameCMD.TIP="tip";GameCMD.TIP_SUCCEED="tipsucceed";GameCMD.TIP_FAIL="tipfail";GameCMD.VOID_HAND_SUCCESS="voidhandsucceed";GameCMD.BULL_RESULT="niuniuresult";GameCMD.PAYOUTS="payouts";GameCMD.HISTORY15="history15";return GameCMD;}());game.GameCMD=GameCMD;})(game||(game={}));var game;(function(game){var GameEvent=(function(){function GameEvent(){}
GameEvent.GAME_UPDATE="GameEvent_GAME_UPDATE";GameEvent.GAME_TREND_INFO="GameEvent_GAME_TREND_INFO";GameEvent.GAME_HIDE_TREND_INFO="GameEvent_GAME_HIDE_TREND_INFO";GameEvent.TOGGLE_LIVE_POOL="GameEvent_TOGGLE_LIVE_POOL";GameEvent.CHANGE_LIMIT="GameEvent_CHANGE_LIMIT";GameEvent.TREND_EXPAND="GameEvent_TREND_EXPAND";GameEvent.GAME_EVENT="GameEvent_GAME_EVENT";GameEvent.BET_CONFIRM="GameEvent_BET_CONFIRM";GameEvent.BET_CLEAR="GameEvent_BET_CLEAR";GameEvent.BET_UNDO="GameEvent_BET_UNDO";GameEvent.BET_REBET="GameEvent_BET_REBET";GameEvent.BET_CHANGE="GameEvent_BET_CHANGE";GameEvent.CHIP_CHANGE="GameEvent_CHIP_CHANGE";GameEvent.MAX_BET_ERROR="GameEvent_MAX_BET_ERROR";GameEvent.MIN_BET_ERROR="GameEvent_MIN_BET_ERROR";GameEvent.CHANGE_VIEW_MODE="GameEvent_CHANGE_VIEW_MODE";GameEvent.CHANGE_VOD_MODE="GameEvent_CHANGE_VOD_MODE";GameEvent.CHANGE_SEAT="GameEvent_CHANGE_SEAT";GameEvent.CHANGE_ROOM="GameEvent_CHANGE_ROOM";GameEvent.LOAD_BET="GameEvent_LOAD_BET";GameEvent.SAVE_BET="GameEvent_SAVE_BET";GameEvent.PLAYER_BET_INFO="GameEvent_PLAYER_BET_INFO";GameEvent.STATUS_MSG="GameEvent_STATUS_MSG";GameEvent.ERROR_MSG="GameEvent_ERROR_MSG";return GameEvent;}());game.GameEvent=GameEvent;})(game||(game={}));GameEvent=game.GameEvent;var game;(function(game){var GameID=(function(){function GameID(){}
GameID.BACCARAT=1;GameID.SEVEN_UP=5;GameID.DRAGON_TIGER=2;GameID.FABULOUS=12;GameID.LUCKY_BACCARAT=501;GameID.BULL_FIGHT=15;GameID.SUPER_HI_LO=14;GameID.SUPER_3PICTURES=11;GameID.SUPER_FANTAN=13;GameID.SQUEEZE_BACCARAT=21;GameID.SQUEEZE_BACCARAT_NONCOMMISSION=401;GameID.BACCARAT_NONCOMMISSION=301;GameID.BACCARAT_SUPER98=101;GameID.ROULETTE=4;GameID.SICBO=3;GameID.LOBBY=999;GameID.BACCARAT_CINEMATIC=8801;GameID.ROULETTE_CINEMATIC=8802;return GameID;}());game.GameID=GameID;})(game||(game={}));var game;(function(game){var GameModel=(function(){function GameModel(){this.GAME_WIDTH=1280;this.GAME_HEIGHT=768;this.VOD_WIDTH=512;this.VOD_HEIGHT=310;this.VOD_X=385;this.VOD_Y=3;this.TABLE_ID=0;this.STUDIO=0;this.LIMIT_ID=0;this.ROOM_ID=0;this.SEAT_ID=0;this.GAME_ID=0;this.NOCOMMISSION=true;}
GameModel.prototype.initialize=function(resources){this.resources=resources;this.vodmodes=[game.VodMode.C1,game.VodMode.C2];this.sounds=resources["soundMap"];this.dispatcher=new core.VEventDispatcher();this.vObjectPool=new core.VObjectPool();this.toolTip=new component.VToolTip();this.toolTip.initialize(game.GlobalVals.toolTipCon,new PIXI.Rectangle(0,0,game.GameSettings.CANVAS_WIDTH-50,game.GameSettings.CANVAS_HEIGHT));};GameModel.prototype.notify=function(type,exdata){if(exdata===void 0){exdata=null;}
this.dispatcher.dispatchEventWith(game.GameEvent.GAME_EVENT,{type:type,exdata:exdata});};GameModel.prototype.clear=function(){this.vObjectPool.clearAll();this.toolTip.clear();this.dispatcher.removeAllEventListeners();core.VUtils.cleanObj(this);};GameModel.prototype.getBetMax=function(betType){return this.betSettings[this.betLimitIdMap[betType]].max;};GameModel.prototype.getBetMin=function(betType){return this.betSettings[this.betLimitIdMap[betType]].min;};GameModel.prototype.getAvatarId=function(seat){var data=this.roomBetInfo;for(var i=0;i<data.content.avatars.length;i++){if(data.content.avatars[i][0]==seat)
return data.content.avatars[i][1];}
return null;};GameModel.prototype.getNickname=function(seat){var data=this.roomBetInfo;for(var i=0;i<data.content.nicknames.length;i++){if(data.content.nicknames[i][0]==seat)
return data.content.nicknames[i][1];}
return null;};GameModel.prototype.getTotalBetAmount=function(seat){if(seat==this.SEAT_ID)
return this.gameView.betArea.getTotalBet();var data=this.roomBetInfo;for(var i=0;i<data.content.seats.length;i++){var total=0;if(data.content.seats[i]==seat){for(var j=0;j<data.content.amounts[i].length;j++)
total+=data.content.amounts[i][j];return total;}}
return 0;};GameModel.prototype.addBet=function(seat,cats,amounts){var data=this.roomBetInfo;var orgCats;var orgAmounts;var pos=-1;for(var i=0;i<data.content.seats.length;i++)
if(data.content.seats[i]==seat){orgCats=data.content.cats[i];orgAmounts=data.content.amounts[i];pos=i;break;}
if(pos<0){data.content.seats.push(seat);pos=data.content.seats.length-1;if(!data.content.cats[pos])
data.content.cats[pos]=[];if(!data.content.amounts[pos])
data.content.amounts[pos]=[];}
data.content.cats[pos]=cats.slice();data.content.amounts[pos]=amounts.slice();};return GameModel;}());game.GameModel=GameModel;})(game||(game={}));var game;(function(game){var TableConfigs=(function(){function TableConfigs(obj){core.VUtils.copy(obj,this);}
return TableConfigs;}());game.TableConfigs=TableConfigs;var GameSettings=(function(){function GameSettings(){}
GameSettings.initialize=function(){GameSettings.APP[game.ViewMode.MODE_2D]='h5_2d';GameSettings.APP[game.ViewMode.MODE_3D]='h5_3d';GameSettings.APP[game.ViewMode.MODE_7S]='h5_7s';if(component.VComponentUtils.mobile.checkAll()){GameSettings.IS_WEBGL=true;}
switch(LANG){case'cs':GameSettings.TEXT_OPTIMIZE_FACTOR=1.0;break;default:GameSettings.TEXT_OPTIMIZE_FACTOR=1.0;}
trace("GameSettings.TEXT_OPTIMIZE_FACTOR "+GameSettings.TEXT_OPTIMIZE_FACTOR);};GameSettings.checkViewModeAvailable=function(gameId,viewMode){var gameInfo=null;for(var i in GameSettings.CONFIG.gameInfos){if(GameSettings.CONFIG.gameInfos[i].gameId==gameId){gameInfo=GameSettings.CONFIG.gameInfos[i];break;}}
if(!gameInfo)
return false;for(var j=0;j<gameInfo.viewModes.length;j++){if(gameInfo.viewModes[j]==viewMode)
return true;}
return false;};GameSettings.setConfig=function(conf){if(OPERATOR_ID.toLowerCase()!='w88'){game.GameText.STUDIO_0_NAME=game.GameText.studio1;game.GameText.STUDIO_1_NAME=game.GameText.studio2;game.GameText.STUDIO_2_NAME=game.GameText.studio3;}
GameSettings.CONFIG=conf;game.GameSettings.CONFIG.miniSlotUrl=game.GameUtils.replaceParams(game.GameSettings.CONFIG.miniSlotUrl);var miniSlotDomain=DOMAIN_NAME.replace('casino.','gamelobby.');if(DOMAIN_NAME=='localhost'||DOMAIN_NAME=='casino.w88uat.com'){game.GameSettings.CONFIG.miniSlotUrl=game.GameSettings.CONFIG.miniSlotUrl.replace('{MINISLOT_DOMAIN}','gamelobby.gpiuat.com');}
else{game.GameSettings.CONFIG.miniSlotUrl=game.GameSettings.CONFIG.miniSlotUrl.replace('{MINISLOT_DOMAIN}',miniSlotDomain);}
trace("game.GameSettings.CONFIG.miniSlotUrl "+game.GameSettings.CONFIG.miniSlotUrl);GameSettings.WS_URL=GameSettings.CONFIG.wsUrls[game.GlobalVals.wssTryIndex];GameSettings.LIVE_PHONE={};var phones=conf.phones.split(',');for(var j=0;j<phones.length;j++){var arr=phones[j].trim().split('=');GameSettings.LIVE_PHONE[arr[0]]=arr[1];}
GameSettings.TABLE_INFOS=conf.tableInfos;GameSettings.SOUND_ENABLE=conf.soundEnable;for(var i in GameSettings.TABLE_INFOS){GameSettings.TABLE_INFOS[i].banned=false;var gameId=GameSettings.TABLE_INFOS[i].gameId;var tableId=GameSettings.TABLE_INFOS[i].id;for(var key in conf.gameInfos[gameId]){if(!GameSettings.TABLE_INFOS[tableId][key])
GameSettings.TABLE_INFOS[tableId][key]=conf.gameInfos[gameId][key];}
GameSettings.TABLE_INFOS[i].hint=GameSettings.TABLE_INFOS[i].hint.replace("Baccarat - iSqueeze",game.GameText.BACCARAT+' - '+game.GameText.squeeze);GameSettings.TABLE_INFOS[i].hint=GameSettings.TABLE_INFOS[i].hint.replace("Baccarat Cinematic",game.GameText.baccarat_cinematic);GameSettings.TABLE_INFOS[i].hint=GameSettings.TABLE_INFOS[i].hint.replace("Roulette Cinematic",game.GameText.roulette_cinematic);GameSettings.TABLE_INFOS[i].hint=GameSettings.TABLE_INFOS[i].hint.replace("7 Up Baccarat",game.GameText.sevenup);GameSettings.TABLE_INFOS[i].hint=GameSettings.TABLE_INFOS[i].hint.replace("Baccarat",game.GameText.BACCARAT);GameSettings.TABLE_INFOS[i].hint=GameSettings.TABLE_INFOS[i].hint.replace(GameSettings.TABLE_INFOS[i].gameName,game.GameText.map[GameSettings.TABLE_INFOS[i].gameName.toLowerCase()]);game.GameText.map["baccarat - isqueeze"]=game.GameText.BACCARAT+' - '+game.GameText.squeeze;GameSettings.TABLE_INFOS[i].gameName=game.GameText.map[GameSettings.TABLE_INFOS[i].gameName.toLowerCase()];if(conf.gameInfos[gameId].updateResultFunc)
GameSettings.updateResultFunc[tableId]=eval(conf.gameInfos[gameId].updateResultFunc);else
GameSettings.updateResultFunc[tableId]=false;GameSettings.historyRevertMap[tableId]=conf.gameInfos[gameId].revertTrend;}
for(var j=0;j<game.GameSettings.CONFIG.tableSmallView.length;j++){var group=game.GameSettings.CONFIG.tableSmallView[j];if(group.hint&&game.GameText.map[group.gameName.toLowerCase()])
group.hint=group.hint.replace(group.gameName,game.GameText.map[group.gameName.toLowerCase()]);if(group.gameName&&game.GameText.map[group.gameName.toLowerCase()])
group.gameName=game.GameText.map[group.gameName.toLowerCase()];}
game.GameSettings.CONFIG.apkUrl=game.GameUtils.replaceParams(game.GameSettings.CONFIG.apkUrl);game.GameSettings.CONFIG.iosUrl=game.GameUtils.replaceParams(game.GameSettings.CONFIG.iosUrl);game.GameSettings.CONFIG.hlsUrl=game.GameUtils.replaceParams(game.GameSettings.CONFIG.hlsUrl);for(var i in conf.gameInfos){if(game.GameText.map[conf.gameInfos[i].gameName.toLowerCase()])
conf.gameInfos[i].gameName=game.GameText.map[conf.gameInfos[i].gameName.toLowerCase()];}
for(var k in conf){if(k.indexOf('banners')==0){var banners=conf[k];for(var j=0;j<banners.length;j++){if(banners[j].url)
banners[j].url=game.GameUtils.replaceParams(banners[j].url);if(banners[j].link)
banners[j].link=game.GameUtils.replaceParams(banners[j].link);}}}};GameSettings.DISPLAY_TIME_ZONE=8;GameSettings.IS_WEBGL=false;GameSettings.USE_WEBRTC=true;GameSettings.CANVAS_WIDTH=1280;GameSettings.CANVAS_HEIGHT=768;GameSettings.OPTIMIZE_FACTOR=1.5;GameSettings.TABLE_SMALL_VIEW_WIDTH=50;GameSettings.ODD_EVEN_MAX_ROUND=60;GameSettings.BIG_SMALL_MAX_ROUND=40;GameSettings.PAIR_MAX_ROUND=70;GameSettings.LUCKY_6_MAX_ROUND=40;GameSettings.SUPER_7_MAX_ROUND=40;GameSettings.LUCKY_COMMON_MAX_ROUND=40;GameSettings.LUCKY_PAIR_MAX_ROUND=60;GameSettings.HIS_QUERY_MAX_DURATION=7;GameSettings.DEFAULT_AVATAR="12";GameSettings.WS_URL="";GameSettings.IS_CENTER_GAME=true;GameSettings.DEBUG_SCREEN_RECT=false;GameSettings.STUDIO=0;GameSettings.TABLE_INFOS={};GameSettings.updateResultFunc={};GameSettings.MAX_HIS_100=100;GameSettings.historyRevertMap={};GameSettings.APP={};return GameSettings;}());game.GameSettings=GameSettings;})(game||(game={}));var game;(function(game){var GameUtils=(function(){function GameUtils(){}
GameUtils.getAllTableIds=function(){var ids=[];for(var i=0;i<game.GameSettings.CONFIG.studioLobbyOrder.length;i++){ids=ids.concat(game.GameSettings.CONFIG.studio[game.GameSettings.CONFIG.studioLobbyOrder[i]].tableIds);}
return ids;};GameUtils.replaceParams=function(url){url=url.replace("{PROTOCOL}",PROTOCOL);url=url.replace("{LANGUAGE}",ORG_LANG);url=url.replace("{LANG}",LANG);url=url.replace("{MAIN_DOMAIN}",MAIN_DOMAIN);url=url.replace("{DOMAIN_LINK}",DOMAIN_LINK);url=url.replace("{OPERATOR}",OPERATOR_ID);url=url.replace("{APK}",game.GameSettings.CONFIG.apkUrl);url=url.replace("{IOS}",game.GameSettings.CONFIG.iosUrl);return url;};GameUtils.getStudioColorName=function(studio){switch(studio){case 0:return'blue';case 1:return'green';case 2:return'lightblue';}
return'green';};GameUtils.getStudioColor=function(studio){return game.StyleMng['STUDIO_'+studio+'_COLOR'];};GameUtils.getStudioHighLightColor=function(studio){return game.StyleMng.getStudioHighLightColor(studio);};GameUtils.getCommonStudioTextColor=function(studio){if(studio==0)
return 0xFCC235;if(studio==1)
return 0x0DCA67;if(studio==2)
return 0x6B9BFE;};GameUtils.getGroupedTableIds=function(tableId){var activeGroup=null;for(var j=0;j<game.GameSettings.CONFIG.tableSmallView.length;j++){var group=game.GameSettings.CONFIG.tableSmallView[j];for(var k=0;k<group.tables.length;k++){if(group.tables[k]==tableId){activeGroup=group;break;}}}
if(activeGroup)
return activeGroup.tables.slice();return[tableId];};GameUtils.getBetLimit=function(data,limitCode){for(var i=0;i<data.content.length;i++){if(data.content[i].code==limitCode)
return data.content[i];}};GameUtils.getTableGroup=function(tableId){for(var j=0;j<game.GameSettings.CONFIG.tableSmallView.length;j++){var group=game.GameSettings.CONFIG.tableSmallView[j];for(var k=0;k<group.tables.length;k++){if(group.tables[k]==tableId){return group;}}}
return null;};GameUtils.checkSameGroup=function(tableId1,tableId2){if(!GameUtils.getTableGroup(tableId1)||!GameUtils.getTableGroup(tableId2))
return false;if(GameUtils.getTableGroup(tableId1)==GameUtils.getTableGroup(tableId2))
return true;return false;};GameUtils.checkViewModeAvailable=function(table,viewMode){if(!game.GameSettings.TABLE_INFOS[table])
return false;for(var i=0;i<game.GameSettings.TABLE_INFOS[table].viewModes.length;i++){if(viewMode==game.GameSettings.TABLE_INFOS[table].viewModes[i]){return true;}}
return false;};GameUtils.parseTrendText=function(data){var lines=data.split('\r\n');var cells;for(var i=0;i<lines.length;i++){cells=lines[i].split("=");game.GameText[cells[0]]=cells[1];}};GameUtils.parseText=function(data){while(data.indexOf("@'")>=0)
data=data.replace("@'","'");var map={};var index=['cs','vn','kr','th','kh','en','jp','id'].indexOf(LANG)+1;var lines=data.split(';');var cells;for(var i=1;i<lines.length;i++){cells=lines[i].split("___");map[cells[6].toLowerCase()]=cells[index].replace('(cd)','');map[cells[6].toLowerCase()]=map[cells[6].toLowerCase()].replace('(_2)','');map[cells[0]]=map[cells[6].toLowerCase()];}
for(var j in game.GameText){if(j.indexOf('T_')==0)
continue;if(game.GameText[j]==''){if(!map[j])
trace("Missing: "+j+"      : "+game.GameText[j]);else
game.GameText[j]=map[j];}
else{if(!map[game.GameText[j].toLowerCase()]){trace("Missing: "+j+"      : "+game.GameText[j]);map[game.GameText[j].toLowerCase()]=game.GameText[j];}
else
game.GameText[j]=map[game.GameText[j].toLowerCase()];}}
game.GameText.map=map;};GameUtils.getTableForGame=function(gameIds){var ids=GameUtils.getAllTableIds();var rids=[];var gameMap={};for(var k=0;k<gameIds.length;k++){gameMap[gameIds[k]]=true;}
for(var i=0;i<ids.length;i++){if(gameMap[game.GameSettings.TABLE_INFOS[ids[i]].gameId])
rids.push(ids[i]);}
return rids;};GameUtils.getColor=function(tableId){return GameUtils.getStudioColorName(game.GameSettings.TABLE_INFOS[tableId].studio);};GameUtils.getStudio=function(tableId){return game.GameSettings.TABLE_INFOS[tableId].studio;};GameUtils.checkCommision=function(tableId){return game.GameSettings.TABLE_INFOS[tableId].commission===undefined||game.GameSettings.TABLE_INFOS[tableId].commission===true;};GameUtils.checkSuper98=function(tableId){return game.GameSettings.TABLE_INFOS[tableId].super98;};GameUtils.getGameName=function(tableId){var gameName=game.GameSettings.TABLE_INFOS[tableId].gameName;switch(game.GameSettings.TABLE_INFOS[tableId].gameId){case game.GameID.BACCARAT:case game.GameID.BACCARAT_NONCOMMISSION:case game.GameID.BACCARAT_SUPER98:case game.GameID.SQUEEZE_BACCARAT:case game.GameID.SQUEEZE_BACCARAT_NONCOMMISSION:case game.GameID.BACCARAT_CINEMATIC:if(GameUtils.checkSuper98(tableId))
gameName=game.GameText.SUPER_98;else if(GameUtils.checkCommision(tableId))
gameName+=' ('+game.GameText.COMMISSION+')';else
gameName+=' ('+game.GameText.NO_COMMISSION+')';break;}
return gameName;};GameUtils.getGameNameByGameId=function(gameId){var gameName=game.GameSettings.CONFIG.gameInfos[gameId].gameName;switch(gameId){case game.GameID.BACCARAT:gameName+=' ('+game.GameText.COMMISSION+')';break;case game.GameID.BACCARAT_NONCOMMISSION:gameName+=' ('+game.GameText.NO_COMMISSION+')';break;case game.GameID.BACCARAT_SUPER98:gameName=game.GameText.SUPER_98;break;}
return gameName;};GameUtils.getIOSWindowHeight=function(){var zoomLevel=document.documentElement.clientWidth/window.innerWidth;return window.innerHeight*zoomLevel;};GameUtils.isIOS=function(){var iDevices=['iPad Simulator','iPhone Simulator','iPod Simulator','iPad','iPhone','iPod'];while(iDevices.length){if(navigator.platform===iDevices.pop())
return true;}
return false;};GameUtils.isTablet=function(){var szRet=navigator.userAgent.toLowerCase();if((szRet.indexOf("ipad")!==-1)){return true;}
else if(szRet.indexOf("android")>-1&&(szRet.indexOf("mobile")===-1)){return true;}
else{return false;}};GameUtils.isIphone=function(){var szRet=navigator.userAgent.toLowerCase();if((szRet.indexOf("iphone")!==-1)){return true;}
else{return false;}};GameUtils.getSize=function(Name){var size;var name=Name.toLowerCase();var document=window.document;var documentElement=document.documentElement;if(window["inner"+Name]===undefined){size=documentElement["client"+Name];}
else{size=window["inner"+Name];}
return size;};GameUtils.createText=function(str,style,scaleFactor){if(scaleFactor===void 0){scaleFactor=game.GameSettings.TEXT_OPTIMIZE_FACTOR;}
style.fontFamily=component.VComponentUtils.getFont();if(!style['adjustedFont']){style.fontSize=Math.round(style.fontSize*scaleFactor*component.VComponentUtils.getFontScale());style['adjustedFont']=true;}
if(LANG=='cs'||LANG=='jp'||LANG=='th'||LANG=='kh'||LANG=='kr')
style.breakWords=true;var tf=new PIXI.Text(str,style,1);if(tf.style.fill==0xffffff)
tf.style.fill=GameUtils.TEXT_COLOR;if(scaleFactor!=1){tf.scale.x=1/scaleFactor;tf.scale.y=tf.scale.x;}
tf['orgScaleX']=tf.scale.x;tf['orgScaleY']=tf.scale.y;return tf;};GameUtils.createNormalText=function(str,fontSize,fill,fontStyle,fontFamily,scaleFactor){if(fontSize===void 0){fontSize=12;}
if(fill===void 0){fill=game.GameUtils.TEXT_COLOR;}
if(fontStyle===void 0){fontStyle='';}
if(fontFamily===void 0){fontFamily="Arial";}
if(scaleFactor===void 0){scaleFactor=game.GameSettings.TEXT_OPTIMIZE_FACTOR;}
var style={fontFamily:fontFamily,fontSize:fontSize,fill:fill,fontStyle:fontStyle};return GameUtils.createText(str,style,scaleFactor);};GameUtils.changeTextStyle=function(tf,style,scaleFactor){if(scaleFactor===void 0){scaleFactor=game.GameSettings.TEXT_OPTIMIZE_FACTOR;}
if(!style['adjustedFont']){style.fontSize=Math.round(style.fontSize*scaleFactor);style['adjustedFont']=true;}
tf.style=style;};GameUtils.getTime=function(){return game.GlobalVals.serverTime+new Date().getTime()-game.GlobalVals.startTime;};GameUtils.getServerTime=function(clientTime){if(clientTime===void 0){clientTime=0;}
if(clientTime==0)
clientTime=new Date().getTime();return game.GlobalVals.serverTime+clientTime-game.GlobalVals.startTime;};GameUtils.getClientTime=function(serverTime){return game.GlobalVals.startTime+serverTime-game.GlobalVals.serverTime;};GameUtils.createScroll=function(sDis,viewH){if(sDis===void 0){sDis=2;}
if(viewH===void 0){viewH=110;}
var scroll=new PIXI.Container();var sDis=2;var up=new PIXI.Sprite(PIXI.Texture.fromFrame('info_panel_sroll_up.png'));scroll.addChild(up);scroll['upBtn']=up;up.y=sDis;var down=new PIXI.Sprite(PIXI.Texture.fromFrame('info_panel_sroll_down.png'));scroll.addChild(down);scroll['downBtn']=down;down.y=viewH-down.height-2*sDis;var track=new PIXI.Sprite(PIXI.Texture.fromFrame('info_panel_sroll_track.png'));scroll.addChild(track);scroll['track']=track;track.height=viewH-5*sDis-2*up.height;track.y=up.height+2*sDis;var face=new PIXI.Sprite(PIXI.Texture.fromFrame('info_panel_sroll_face.png'));scroll.addChild(face);face.height=viewH*0.3;scroll['face']=face;return scroll;};GameUtils.createBg=function(w,h,color,rounded,alpha,border){if(color===void 0){color=0x222222;}
if(rounded===void 0){rounded=0;}
if(alpha===void 0){alpha=1;}
if(border===void 0){border=-1;}
var bg=new PIXI.Graphics();bg.beginFill(color,alpha);if(border>0)
bg.lineStyle(1,border);if(rounded==0)
bg.drawRect(0,0,w,h);else
bg.drawRoundedRect(0,0,w,h,rounded);bg.endFill();return bg;};GameUtils.localToGlobal=function(node,p){while(node){p.x=node.x+p.x*node.scale.x;p.y=node.y+p.y*node.scale.y;node=node.parent;}
return p;};GameUtils.resizeNodeH=function(node,h){node.scale.y=h/node.height;node.scale.x=node.scale.y;};GameUtils.sortData=function(arr,propName,order){arr.sort(function(a,b){return a[propName]<b[propName]?-1:a[propName]>b[propName]?1:0;});if(order=='DESC')
arr.reverse();return arr;};GameUtils.TEXT_COLOR=0xFAF1E2;GameUtils.STUDIO_0_COLOR=0x1B607F;GameUtils.STUDIO_1_COLOR=0x17592B;GameUtils.screenRect=new PIXI.Rectangle(0,0,0,0);return GameUtils;}());game.GameUtils=GameUtils;})(game||(game={}));gameutils=game.GameUtils;var game;(function(game){var GlobalVals=(function(){function GlobalVals(){}
GlobalVals.initialize=function(main){GlobalVals.main=main;GlobalVals.viewMode=DEFAULT_VIEW_MODE?DEFAULT_VIEW_MODE:game.ViewMode.MODE_2D;GlobalVals.rebetInfo={};GlobalVals.saveData={};GlobalVals.popupMap={};if(game.CookiesMng.hasCookie('lastTables'))
GlobalVals.lastTables=game.CookiesMng.getCookie('lastTables');else
GlobalVals.lastTables=[];};GlobalVals.addLastTable=function(tableId){trace("GlobalVals.lastTables "+GlobalVals.lastTables);for(var i=0;i<GlobalVals.lastTables.length;i++){if(game.GameSettings.TABLE_INFOS[tableId].tableName==GlobalVals.lastTables[i].title&&game.GameSettings.TABLE_INFOS[tableId].studio==game.GameSettings.TABLE_INFOS[GlobalVals.lastTables[i].data].studio){GlobalVals.lastTables[i]={title:game.GameSettings.TABLE_INFOS[tableId].tableName,data:tableId};game.CookiesMng.saveCookie('lastTables',GlobalVals.lastTables);return;}}
GlobalVals.lastTables.unshift({title:game.GameSettings.TABLE_INFOS[tableId].tableName,data:tableId});if(GlobalVals.lastTables.length>3)
GlobalVals.lastTables.pop();game.CookiesMng.saveCookie('lastTables',GlobalVals.lastTables);};GlobalVals.getTableSetting=function(table){for(var i=0;i<GlobalVals.lobbyResponse.content.length;i++)
if(GlobalVals.lobbyResponse.content[i].id==table)
return GlobalVals.lobbyResponse.content[i];return null;};GlobalVals.backToLobby=function(){GlobalVals.main.dispatcher.dispatchEventWith(game.GameEvent.CHANGE_LIMIT,{table:0,limit:0});};GlobalVals.getVideoElement=function(){if(GlobalVals.video){GlobalVals.releaseVideoElement(GlobalVals.video);}
var vod=document.createElement('video');vod.style.position='absolute';vod.style.zIndex=game.Htmlzindex.VIDEO_INDEX;vod.autoplay='autoplay';vod.controls='';if(!component.VComponentUtils.isMobile)
vod.removeAttribute("controls");vod.width=1;vod.height=1;document.getElementById("mainContainer").appendChild(vod);GlobalVals.video=vod;return vod;};GlobalVals.getAdsVideoElement=function(){if(document.getElementById("lobbyVodBanner"))
return document.getElementById("lobbyVodBanner");var vod=document.createElement('video');vod.id="lobbyVodBanner";vod.style.position='absolute';vod.style.zIndex=game.Htmlzindex.VIDEO_INDEX;vod.autoplay='autoplay';vod.controls='';if(!component.VComponentUtils.isMobile)
vod.removeAttribute("controls");vod.width=1;vod.height=1;document.getElementById("mainContainer").appendChild(vod);return vod;};GlobalVals.releaseVideoElement=function(vod){vod.parentNode.removeChild(vod);vod.width=1;vod.height=1;GlobalVals.video=null;};GlobalVals.render=function(){GlobalVals.renderer.render(GlobalVals.stage);};GlobalVals.refreshGame=function(g){GlobalVals.main.refreshGame(g);};GlobalVals.showHistory=function(tableId){GlobalVals.historyPanel.show();GlobalVals.historyPanel.activeGame();};GlobalVals.onShownPopup=function(popup){GlobalVals.popupMap[core.VUtils.getObjKey(popup)]=popup;popup.on('removed',function(){delete GlobalVals.popupMap[core.VUtils.getObjKey(this)];},popup);if(GlobalVals.defaultAdsPage)
GlobalVals.defaultAdsPage.visible=false;document.getElementById('miniSlot').style.zIndex='0';};GlobalVals.onHidePopup=function(){var viewMode=game.GlobalVals.viewMode;if(viewMode==game.ViewMode.MODE_7S||viewMode==game.ViewMode.MODE_7S_3D){return;}
for(var i in GlobalVals.popupMap){if(GlobalVals.popupMap[i].visible)
return;}
document.getElementById('miniSlot').style.zIndex='2';};GlobalVals.userInfo=new game.UserInfo();GlobalVals.trendDataMap={};GlobalVals.isLocal=window.location.toString().indexOf('localhost')>=0;GlobalVals.isIframeLoaded=false;GlobalVals.selected7S=false;GlobalVals.wssTryIndex=0;GlobalVals.WAITING_SHOW_LOBBY_RESPONSE=false;return GlobalVals;}());game.GlobalVals=GlobalVals;})(game||(game={}));var game;(function(game){var Htmlzindex=(function(){function Htmlzindex(){}
Htmlzindex.GAME_INDEX='10';Htmlzindex.VIDEO_INDEX='0';Htmlzindex.CONTAINER_INDEX='12';Htmlzindex.MAX_INDEX='100';Htmlzindex.VOD_MAX_INDEX='101';return Htmlzindex;}());game.Htmlzindex=Htmlzindex;})(game||(game={}));var game;(function(game){var layoutdata;(function(layoutdata){var LiveChipLayout=(function(){function LiveChipLayout(){}
return LiveChipLayout;}());layoutdata.LiveChipLayout=LiveChipLayout;})(layoutdata=game.layoutdata||(game.layoutdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var AuthData=(function(){function AuthData(){this.kind=game.GameCMD.AUTH;this.platform="web h5";}
AuthData.prototype.initialize=function(token,operator,psys){if(psys===void 0){psys="";}
this.token=token;this.operator=operator;this['sys']=psys;this.client=sys.browserType+' '+sys.browserVersion+'|'+sys.os+' '+sys.osVersion+'|'+version+' '+game.GlobalVals.viewMode;return this;};return AuthData;}());netdata.AuthData=AuthData;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var AuthPlayerSuccessedContentData=(function(){function AuthPlayerSuccessedContentData(){}
return AuthPlayerSuccessedContentData;}());netdata.AuthPlayerSuccessedContentData=AuthPlayerSuccessedContentData;var AuthPlayerSuccessedData=(function(){function AuthPlayerSuccessedData(){this.kind=game.GameCMD.AUTH_SUCCESS;}
return AuthPlayerSuccessedData;}());netdata.AuthPlayerSuccessedData=AuthPlayerSuccessedData;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var BetLimitItem=(function(){function BetLimitItem(){}
return BetLimitItem;}());netdata.BetLimitItem=BetLimitItem;var BetLimitResponse=(function(){function BetLimitResponse(){this.kind=game.GameCMD.BET_LIMIT;}
return BetLimitResponse;}());netdata.BetLimitResponse=BetLimitResponse;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var BetRequest=(function(){function BetRequest(table,cat,amount,time,from,round){this.kind=game.GameCMD.BET;this.table=table;this.cat=cat;this.amount=amount;this.time=time;this.from=from;this.round=round;}
return BetRequest;}());netdata.BetRequest=BetRequest;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var BetSucceedContent=(function(){function BetSucceedContent(){}
return BetSucceedContent;}());netdata.BetSucceedContent=BetSucceedContent;var BetSucceedResponse=(function(){function BetSucceedResponse(){this.kind=game.GameCMD.BET_SUCCEED;}
return BetSucceedResponse;}());netdata.BetSucceedResponse=BetSucceedResponse;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var CardsItem=(function(){function CardsItem(){}
return CardsItem;}());netdata.CardsItem=CardsItem;var CardsContent=(function(){function CardsContent(){}
return CardsContent;}());netdata.CardsContent=CardsContent;var CardsResponse=(function(){function CardsResponse(){this.kind=game.GameCMD.CARDS;}
return CardsResponse;}());netdata.CardsResponse=CardsResponse;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var CommitSucceedContent=(function(){function CommitSucceedContent(){}
return CommitSucceedContent;}());netdata.CommitSucceedContent=CommitSucceedContent;var CommitSucceedResponse=(function(){function CommitSucceedResponse(){this.kind=game.GameCMD.COMMIT_SUCCEED;}
return CommitSucceedResponse;}());netdata.CommitSucceedResponse=CommitSucceedResponse;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var CurrentBetItem=(function(){function CurrentBetItem(){}
return CurrentBetItem;}());netdata.CurrentBetItem=CurrentBetItem;var CurrentBetContent=(function(){function CurrentBetContent(){}
return CurrentBetContent;}());netdata.CurrentBetContent=CurrentBetContent;var CurrentBetsResponse=(function(){function CurrentBetsResponse(){this.kind=game.GameCMD.CURRENT_BETS;}
return CurrentBetsResponse;}());netdata.CurrentBetsResponse=CurrentBetsResponse;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var DealContent=(function(){function DealContent(){}
return DealContent;}());netdata.DealContent=DealContent;var DealResponse=(function(){function DealResponse(){this.kind=game.GameCMD.DEAL;}
return DealResponse;}());netdata.DealResponse=DealResponse;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var EnterRequest=(function(){function EnterRequest(){this.kind=game.GameCMD.ENTER;}
EnterRequest.prototype.initialize=function(table,limit){this.table=table;this.limit=limit;return this;};return EnterRequest;}());netdata.EnterRequest=EnterRequest;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var TrendsItem=(function(){function TrendsItem(){}
TrendsItem.prototype.setData=function(result,cards){if(cards===void 0){cards=null;}
this.result=result;this.cards=cards;return this;};return TrendsItem;}());netdata.TrendsItem=TrendsItem;var HistoryContent=(function(){function HistoryContent(){}
return HistoryContent;}());netdata.HistoryContent=HistoryContent;var HistoryResponse=(function(){function HistoryResponse(){this.kind=game.GameCMD.TRENDS;}
return HistoryResponse;}());netdata.HistoryResponse=HistoryResponse;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var JoinRoomSuccessContent=(function(){function JoinRoomSuccessContent(){}
return JoinRoomSuccessContent;}());netdata.JoinRoomSuccessContent=JoinRoomSuccessContent;var JoinRoomSuccessResponse=(function(){function JoinRoomSuccessResponse(){this.kind=game.GameCMD.JOIN_ROOM_SUCCESS;}
return JoinRoomSuccessResponse;}());netdata.JoinRoomSuccessResponse=JoinRoomSuccessResponse;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var LimitsRequest=(function(){function LimitsRequest(tables){this.kind=game.GameCMD.LIMITS;this.tables=tables;}
return LimitsRequest;}());netdata.LimitsRequest=LimitsRequest;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var limits;(function(limits){var Limits=(function(){function Limits(){}
return Limits;}());limits.Limits=Limits;var LimitsContent=(function(){function LimitsContent(){}
return LimitsContent;}());limits.LimitsContent=LimitsContent;})(limits=netdata.limits||(netdata.limits={}));var LimitsResponse=(function(){function LimitsResponse(){this.kind=game.GameCMD.LIMITS;}
LimitsResponse.getLimitContent=function(data,tableId){for(var i=0;i<data.content.length;i++){if(data.content[i].table==tableId)
return data.content[i];}
return null;};LimitsResponse.getLimits=function(data,tableId,limitId){for(var i=0;i<data.content.length;i++){if(data.content[i].table==tableId){for(var j=0;j<data.content[i].limits.length;j++)
if(data.content[i].limits[j].id==limitId)
return data.content[i].limits[j];return null;}}
return null;};return LimitsResponse;}());netdata.LimitsResponse=LimitsResponse;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var PoolContent=(function(){function PoolContent(){}
return PoolContent;}());netdata.PoolContent=PoolContent;var PoolResponse=(function(){function PoolResponse(){this.kind=game.GameCMD.POOL;}
return PoolResponse;}());netdata.PoolResponse=PoolResponse;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var RewardContent=(function(){function RewardContent(){}
return RewardContent;}());netdata.RewardContent=RewardContent;var RewardResponse=(function(){function RewardResponse(){this.kind=game.GameCMD.TABLE_LIMIT;}
return RewardResponse;}());netdata.RewardResponse=RewardResponse;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var RoomBetInfodContent=(function(){function RoomBetInfodContent(){}
return RoomBetInfodContent;}());netdata.RoomBetInfodContent=RoomBetInfodContent;var RoomBetInfodResponse=(function(){function RoomBetInfodResponse(){this.kind=game.GameCMD.ROOM_BET_INFO;}
return RoomBetInfodResponse;}());netdata.RoomBetInfodResponse=RoomBetInfodResponse;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var TableSetting=(function(){function TableSetting(){}
return TableSetting;}());netdata.TableSetting=TableSetting;var LobbyContent=(function(){function LobbyContent(){}
return LobbyContent;}());netdata.LobbyContent=LobbyContent;var ShowLobbyResponse=(function(){function ShowLobbyResponse(){this.kind=game.GameCMD.SHOW_LOBBY;}
ShowLobbyResponse.getDisplayStatus=function(data,table){for(var i=0;i<data.content.length;i++)
if(data.content[i].id==table)
return data.content[i].displayStatus;return 1;};return ShowLobbyResponse;}());netdata.ShowLobbyResponse=ShowLobbyResponse;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var TableLimitContent=(function(){function TableLimitContent(){}
return TableLimitContent;}());netdata.TableLimitContent=TableLimitContent;var TableLimitResponse=(function(){function TableLimitResponse(){this.kind=game.GameCMD.TABLE_LIMIT;}
return TableLimitResponse;}());netdata.TableLimitResponse=TableLimitResponse;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var netdata;(function(netdata){var TrendsContent=(function(){function TrendsContent(){}
return TrendsContent;}());netdata.TrendsContent=TrendsContent;var TrendsResponse=(function(){function TrendsResponse(){this.kind=game.GameCMD.TRENDS;}
return TrendsResponse;}());netdata.TrendsResponse=TrendsResponse;})(netdata=game.netdata||(game.netdata={}));})(game||(game={}));var game;(function(game){var NetUtils=(function(){function NetUtils(){}
NetUtils.initialize=function(){NetUtils.dispatcher=new core.VEventDispatcher();NetUtils.isDebugReady=false;NetUtils.joinRoomSuccess=false;NetUtils.msgQueue=[];NetUtils.msgInd=0;NetUtils.intervalId=0;NetUtils.initWebSocket();};NetUtils.initWebSocket=function(){if("WebSocket"in window){var ws=new WebSocket(game.GameSettings.WS_URL);NetUtils.webSocket=ws;ws.onopen=function(){NetUtils.dispatcher.dispatchEventWith(NetUtils.WEB_SOCKET_OPEN);NetUtils.sendWS({"kind":"ping"});};ws.onmessage=NetUtils.onMessage;ws.onclose=function(){NetUtils.dispatcher.dispatchEventWith(NetUtils.WEB_SOCKET_CLOSE);};}
if(NetUtils.isDebugLocal){var body=eval('$(window)');body.keydown(function(e){switch(e.keyCode){case 19:if(NetUtils.intervalId==0){if(NetUtils.isDebugReady)
NetUtils.startLocalDebug();}
else{clearInterval(NetUtils.intervalId);NetUtils.intervalId=0;}
break;}});}};NetUtils.closeConnection=function(){NetUtils.webSocket.close();};NetUtils.onMessage=function(evt){var obj=JSON.parse(evt.data);switch(obj.kind){case"authplayerfail":game.GlobalVals.messagePopup.showMessage(game.GameText.LOGIN_FAIL,function(){},game.GameText.NOTICE,game.GameText.OK);NetUtils.webSocket.close();break;case"pong":NetUtils.doAuthenticateGameServer();break;case game.GameCMD.AUTH_SUCCESS:break;case game.GameCMD.JOIN_ROOM_SUCCESS:NetUtils.joinRoomSuccess=true;break;}
if(!NetUtils.isDebugReady)
NetUtils.dispatcher.dispatchEventWith(NetUtils.WEB_SOCKET_MESSAGE,obj);if(NetUtils.isDebugLocal&&!NetUtils.isDebugReady&&obj.content&&obj.content.table&&obj.content.table==101){if(NetUtils.startRecord){if(obj.kind==game.GameCMD.START_BET_SUCCEED){NetUtils.isDebugReady=true;NetUtils.startLocalDebug();}
if(obj.kind==game.GameCMD.COMMIT_SUCCEED&&obj.content&&obj.content.table&&obj.content.table>100)
obj.content.table-=100;NetUtils.msgQueue.push(obj);}
if(!NetUtils.startRecord&&(obj.kind==game.GameCMD.START_BET_SUCCEED||(NetUtils.joinRoomSuccess&&obj.kind==game.GameCMD.COUNT_DOWN&&obj.content.tick>0))){NetUtils.startRecord=true;NetUtils.msgQueue.push({kind:game.GameCMD.START_BET_SUCCEED,content:{round:999}});trace("NetUtils::startRecord ---");}}};NetUtils.startLocalDebug=function(){trace("NetUtils::startLocalDebug ---");NetUtils.isDebugReady=true;NetUtils.intervalId=setInterval(NetUtils.sendDebugMsg,100);};NetUtils.sendDebugMsg=function(){var data=NetUtils.msgQueue[NetUtils.msgInd];switch(data.kind){case game.GameCMD.DEAL:data.content.card='SCDH'.charAt(Math.round(Math.random()*3))+'A23456789TJQK'.charAt(Math.round(Math.random()*12));break;case game.GameCMD.COMMIT_SUCCEED:data.content.result=game.BetType.getResult(4+Math.round(Math.random()*(12-4)),game.BetType.getResult(1+Math.round(Math.random())));break;}
NetUtils.dispatcher.dispatchEventWith(NetUtils.WEB_SOCKET_MESSAGE,NetUtils.msgQueue[NetUtils.msgInd]);NetUtils.msgInd++;if(NetUtils.msgInd==NetUtils.msgQueue.length)
NetUtils.msgInd=0;};NetUtils.doAuthenticateGameServer=function(){if(TOKEN!=null&&TOKEN!=""){var data=new game.netdata.AuthData().initialize(TOKEN,OPERATOR_ID,SYS_PARAM);NetUtils.sendWS(data);}
else{NetUtils.closeConnection();game.GlobalVals.messagePopup.showMessage(game.GameText.LOGIN_FAIL,function(){},game.GameText.NOTICE,game.GameText.OK);}};NetUtils.showLogin=function(){trace("NetUtils::showLogin ===============");if(LOGIN_URL==""||LOGIN_URL==null||(window.location+"").indexOf("fromLogin=true")!=-1){return;}
var href=decodeURIComponent(window.location.href);var callbackUrl=href;callbackUrl+=(window.location+"").indexOf("?")==-1?"?fromLogin=true":"&fromLogin=true";var url=LOGIN_URL+"?url="+encodeURIComponent(callbackUrl);trace("login url"+url);window.location.href=url;};NetUtils.sendWS=function(data){var msg=JSON.stringify(data);trace("sendWS >> "+msg);NetUtils.webSocket.send(msg);};NetUtils.sendWSSimple=function(kind){trace("sendWSSimple >> "+kind);NetUtils.webSocket.send('{"kind":"'+kind+'"}');};NetUtils.WEB_SOCKET_OPEN="NetUtils.WEB_SOCKET_OPEN";NetUtils.WEB_SOCKET_MESSAGE="NetUtils.WEB_SOCKET_MESSAGE";NetUtils.WEB_SOCKET_CLOSE="NetUtils.WEB_SOCKET_CLOSE";return NetUtils;}());game.NetUtils=NetUtils;})(game||(game={}));netutils=game.NetUtils;var game;(function(game){var SharedTextureMng=(function(){function SharedTextureMng(){this.textureMap={};}
SharedTextureMng.prototype.destroy=function(){for(var i in this.textureMap){this.textureMap[i].destroy();delete this.textureMap[i];}
delete this.textureMap;};SharedTextureMng.prototype.addTexture=function(id,source,w,h){if(this.textureMap[id]){component.VComponentUtils.deepClean(source);return;}
var sharedTexture=new game.VSharedTexture(source,w,h);this.textureMap[id]=sharedTexture;};SharedTextureMng.prototype.getTexture=function(id){return this.textureMap[id].renderTexture;};SharedTextureMng.prototype.setScale=function(sx,sy){for(var i in this.textureMap){this.textureMap[i].setScale(sx,sy);}};return SharedTextureMng;}());game.SharedTextureMng=SharedTextureMng;})(game||(game={}));var game;(function(game){var StyleMng=(function(){function StyleMng(){}
StyleMng.getStudioHighLightColor=function(studio){if(studio==0)
return 0xEDC629;if(studio==1)
return 0x24893E;if(studio==2)
return 0x1b7abd;};StyleMng.getStudioColor=function(studio){return StyleMng['STUDIO_'+studio+'_COLOR'];};StyleMng.MIN_BTN_SIZE=40;StyleMng.CHIP_SIZE=37;StyleMng.SETTING_BTN_SIZE=32;StyleMng.INFO_TAB_BTN_SIZE=28;StyleMng.NORMAL_SIZE=15;StyleMng.CIRCLE_SEGMENTS=15;StyleMng.LANDSCAPE_VOD_HEIGHT_R=0.8;StyleMng.BALANCE_TF_WIDTH=122;StyleMng.TEXT_COLOR=0xFAF1E2;StyleMng.STUDIO_0_COLOR=0x9B800D;StyleMng.STUDIO_1_COLOR=0x17592B;StyleMng.STUDIO_2_COLOR=0x2D72FD;StyleMng.BLUE=0x2B91C2;StyleMng.RED=0xBD2726;StyleMng.GREEN=0x00CC00;StyleMng.BLACK=0x000000;StyleMng.GREY=0x333333;StyleMng.NUMBER_FONT='Arial';StyleMng.BTN_SIZE_RATIO=1/7;return StyleMng;}());game.StyleMng=StyleMng;})(game||(game={}));var game;(function(game){var UITest=(function(_super){__extends(UITest,_super);function UITest(main){var _this=_super.call(this,main)||this;_this.mainCon=main.mainCon;return _this;}
UITest.prototype.testScroll=function(){var imgCon=new PIXI.Sprite();this.mainCon.addChild(imgCon);var content=new PIXI.Sprite(this.main.resources['content'].texture);var scroll=new PIXI.Sprite();var track=new PIXI.Sprite(this.main.resources['scroll_track'].texture);var face=new PIXI.Sprite(this.main.resources['scroll_face'].texture);var up=new PIXI.Sprite(this.main.resources['scroll_up'].texture);var down=new PIXI.Sprite(this.main.resources['scroll_down'].texture);var masker=new PIXI.Graphics();masker.beginFill(0xFF3300);masker.drawRect(0,0,600,400);masker.endFill();masker.x=3;masker.y=3;imgCon.addChild(masker);var maskerCopy=new PIXI.Graphics();core.VUtils.copy(masker,maskerCopy);track.height=maskerCopy.height-2*up.height;up.y=masker.y;scroll.x=masker.x+maskerCopy.width+2;track.y=up.y+up.height;down.y=track.y+track.height;imgCon.addChild(content);imgCon.addChild(scroll);scroll.addChild(track);scroll.addChild(face);scroll.addChild(up);scroll.addChild(down);scroll["face"]=face;scroll["track"]=track;scroll["upBtn"]=up;scroll["downBtn"]=down;content.mask=masker;var hScroll=new PIXI.Sprite();var hTrack=new PIXI.Sprite(this.main.resources['scroll_htrack'].texture);var hFace=new PIXI.Sprite(this.main.resources['scroll_hface'].texture);var left=new PIXI.Sprite(this.main.resources['scroll_left'].texture);var right=new PIXI.Sprite(this.main.resources['scroll_right'].texture);left.x=masker.x;hTrack.width=maskerCopy.width-2*right.width;hTrack.x=left.x+left.width;right.x=hTrack.x+hTrack.width;imgCon.addChild(hScroll);hScroll.addChild(hTrack);hScroll.addChild(hFace);hScroll.addChild(left);hScroll.addChild(right);hScroll["face"]=hFace;hScroll["track"]=hTrack;hScroll["leftBtn"]=left;hScroll["rightBtn"]=right;hScroll.y=maskerCopy.x+maskerCopy.height;var vCcoller=new component.VHorScroll(maskerCopy,content,null,true);};return UITest;}(game.MainObject));game.UITest=UITest;})(game||(game={}));var game;(function(game){var AdsCon=(function(_super){__extends(AdsCon,_super);function AdsCon(gameModel,viewW,viewH,duration){if(duration===void 0){duration=10000;}
var _this=_super.call(this,gameModel)||this;var masker=new PIXI.Graphics();masker.beginFill(0x1F1F1F);masker.drawRect(0,0,viewW,viewH);masker.endFill();_this.addChild(masker);_this.mask=masker;_this.masker=masker;_this.masker.visible=false;_this.duration=duration;_this.viewW=viewW;_this.viewH=viewH;_this.index=0;_this.pageMap={};_this.pages=[];_this.onGetTextureBinding=_this.onGetDynamicTexture.bind(_this);_this.container=new PIXI.Container();_this.addChild(_this.container);var bg=new PIXI.Graphics();bg.beginFill(0x1F1F1F);bg.drawRect(0,0,viewW,viewH);bg.endFill();_this.container.addChild(bg);_this.bg=bg;_this.container.y=-_this.viewH;return _this;}
AdsCon.prototype.destructor=function(){clearInterval(this.timerId);game.GlobalVals.resourceMng.releaseHandler(this.onGetTextureBinding);for(var i=0;i<this.pages.length;i++){TweenMax.killTweensOf(this.pages[i]);if(this.pages[i]['tf'])
TweenMax.killTweensOf(this.pages[i]['tf']);}
TweenMax.killTweensOf(this.container);_super.prototype.destructor.call(this);};AdsCon.prototype.initialize=function(){this.inited=true;var imgs=game.GameSettings.CONFIG.adsImgs;for(var i=0;i<imgs.length;i++){var page=new PIXI.Container();this.container.addChild(page);this.pages.push(page);if(i>0)
page.visible=false;var img=new PIXI.Sprite();page.addChild(img);page['img']=img;var tf=component.VComponentUtils.createText(game.GameText.map[game.GameSettings.CONFIG.adsTexts[i].toLowerCase()],{fontFamily:"Arial",fontSize:14,fill:0xffffff});tf.anchor.x=0.5;tf.x=0.5;page.addChild(tf);tf.x=this.viewW*0.5;tf.y=10;page['tf']=tf;this.pageMap["../common_bin/assets/adverts/"+imgs[i]]=page;game.GlobalVals.resourceMng.getDynamicTexture(imgs[i],"../common_bin/assets/adverts/"+imgs[i],this.onGetTextureBinding);}
this.timerId=setInterval(this.onNext.bind(this),this.duration);};AdsCon.prototype.onNext=function(){if(this.pages.length==0)
return;if(this.pages.length==1){this.pages[0].visible=true;return;}
if(this.index==this.pages.length)
this.index=0;var p1=this.pages[this.index];var p2=this.pages[this.index+1<this.pages.length?this.index+1:0];p1.visible=true;p2.visible=true;p1.x=0;p2.x=this.viewW;TweenMax.to(p1,1,{x:-this.viewW});TweenMax.to(p2,1,{x:0});if(p2['tf']){p2['tf'].x=this.viewW;TweenMax.to(p2['tf'],1,{x:this.viewW*0.5});}
this.index++;};AdsCon.prototype.onGetDynamicTexture=function(t){var key=t.baseTexture.imageUrl.split('?')[0];var page=this.pageMap[key];page['img'].texture=t;component.VComponentUtils.alignImg(page['img'],this.viewW,this.viewH,0,0,true);};AdsCon.prototype.show=function(anim){if(anim===void 0){anim=true;}
if(!this.inited)
this.initialize();this.visible=true;game.GlobalVals.onShownPopup(this);this.masker.visible=true;TweenMax.killTweensOf(this.container);TweenMax.to(this.container,anim?0.3:0,{y:0});};AdsCon.prototype.hide=function(){TweenMax.killTweensOf(this.container);TweenMax.to(this.container,0.3,{y:-this.viewH,onComplete:function(){this.visible=false;game.GlobalVals.onHidePopup();this.masker.visible=false;}.bind(this)});};return AdsCon;}(game.GameObject));game.AdsCon=AdsCon;})(game||(game={}));var game;(function(game){var AvatarContainer=(function(_super){__extends(AvatarContainer,_super);function AvatarContainer(gameModel,viewW,viewH){if(viewW===void 0){viewW=600;}
if(viewH===void 0){viewH=170;}
var _this=_super.call(this,gameModel)||this;_this.inited=false;_this.viewW=viewW;_this.viewH=viewH;_this.icons=[];_this.hide();return _this;}
AvatarContainer.prototype.destructor=function(){trace("AvatarContainer::destructor");component.VMouseUtils.off(game.GlobalVals.stage,component.VMouseUtils.MOUSE_DOWN,this.onStageMouse,this);_super.prototype.destructor.call(this);};AvatarContainer.prototype.onStageMouse=function(e){if(!this.visible)
return;var mp=component.VMouseUtils.mousePos();mp=this.toLocal(mp);if(!new PIXI.Rectangle(0,0,this.viewW,this.viewH).contains(mp.x,mp.y))
this.hide();};AvatarContainer.prototype.initialize=function(){this.inited=true;var avatars=game.GameSettings.CONFIG.avatars;var dis=10;var btnHeight=25;var leftMargin=10;var bg=new PIXI.Graphics();bg.beginFill(0x000000,0.8);bg.drawRoundedRect(0,0,this.viewW,this.viewH,5);bg.endFill();this.bg=bg;this.addChild(bg);var scroll=new PIXI.Container();this.scroll=scroll;scroll["leftBtn"]=new PIXI.Sprite();scroll["rightBtn"]=new PIXI.Sprite();scroll["track"]=new PIXI.Sprite();scroll["face"]=new PIXI.Sprite();var masker=new PIXI.Graphics();var iconSize=this.viewH-3*dis-btnHeight;masker.beginFill(0x0000ff,0.5);masker.drawRect(0,0,this.viewW-2*leftMargin,iconSize+2);masker.endFill();this.addChild(masker);this.masker=masker;masker.x=leftMargin;masker.y=dis;var maskerCopy=new PIXI.Graphics();maskerCopy.beginFill(0x0000ff);maskerCopy.x=masker.x;maskerCopy.y=masker.y;maskerCopy.drawRect(0,0,this.viewW-2*leftMargin,iconSize+2);maskerCopy.endFill();maskerCopy.alpha=0;this.addChild(maskerCopy);var content=new PIXI.Container();content.y=maskerCopy.y+1;this.addChild(content);this.content=content;for(var i=0;i<avatars.length;i++){var icon=new game.AvatarIcon(this.gameModel).initialize(iconSize,avatars[i].id);content.addChild(icon);icon.x=i*(maskerCopy.height+dis);this.icons.push(icon);component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_UP,this.onIconUp,this);}
if(this.icons.length)
this.activeIcon=this.icons[0];if(this.activeIcon)
this.activeIcon.active();this.addChild(scroll);this.content.mask=masker;this.scroller=new component.VHorScroll(maskerCopy,this.content,scroll,true,true);var okBtn=component.VButton.createSimple(this.onOk.bind(this),game.GameText.OK,50,btnHeight);this.addChild(okBtn);okBtn.x=(this.viewW-okBtn.width)*0.5;okBtn.y=this.viewH-dis-okBtn.height;var closeBtn=new component.VButton([PIXI.Texture.fromFrame("close_btn0001.png"),PIXI.Texture.fromFrame("close_btn0002.png")],this.onClose.bind(this));this.addChild(closeBtn);closeBtn.x=this.viewW-closeBtn.width;game.GameUtils.resizeNodeH(closeBtn,21);component.VMouseUtils.on(game.GlobalVals.stage,component.VMouseUtils.MOUSE_DOWN,this.onStageMouse,this);};AvatarContainer.prototype.onClose=function(){this.hide();};AvatarContainer.prototype.onOk=function(){if(this.activeIcon)
game.NetUtils.sendWS({"kind":game.GameCMD.UPDATE_AVATAR,"id":this.activeIcon.id});this.hide();};AvatarContainer.prototype.onIconUp=function(e){var icon=e.target;if(this.activeIcon)
this.activeIcon.deactive();this.activeIcon=icon;this.activeIcon.active();};AvatarContainer.prototype.show=function(){if(!this.inited)
this.initialize();this.visible=true;};AvatarContainer.prototype.hide=function(){this.visible=false;};return AvatarContainer;}(game.GameObject));game.AvatarContainer=AvatarContainer;})(game||(game={}));var game;(function(game){var AvatarIcon=(function(_super){__extends(AvatarIcon,_super);function AvatarIcon(gameModel){var _this=_super.call(this,gameModel)||this;_this.loadAvatarCompleteBinding=_this.loadAvatarComplete.bind(_this);return _this;}
AvatarIcon.prototype.destructor=function(){game.GlobalVals.resourceMng.releaseHandler(this.loadAvatarCompleteBinding);_super.prototype.destructor.call(this);};AvatarIcon.prototype.initialize=function(iconSize,id,studio){if(id===void 0){id='';}
if(studio===void 0){studio=-1;}
this.id=id;this.iconSize=iconSize;var bg=new PIXI.Graphics();this.bg=bg;this.addChild(bg);bg.beginFill(game.GameUtils.getStudioColor(studio),0.7);bg.drawRect(0,0,iconSize,iconSize);bg.endFill();bg=new PIXI.Graphics();this.selectBg=bg;this.addChild(bg);bg.lineStyle(2,0xFFCC00);bg.drawRect(0,0,iconSize,iconSize);bg.endFill();this.selectBg.visible=false;var avatar=new PIXI.Sprite();this.addChild(avatar);this.avatar=avatar;if(component.VComponentUtils.findInArr(game.GameSettings.CONFIG.avatars,"id",id)){var fileUrl=component.VComponentUtils.findInArr(game.GameSettings.CONFIG.avatars,"id",id).file;game.GlobalVals.resourceMng.getDynamicTexture('avatar_'+id,"../common_bin/assets/avatars/"+fileUrl,this.loadAvatarCompleteBinding);}
return this;};AvatarIcon.prototype.loadImage=function(url){url=url.replace("http:",PROTOCOL+':');game.GlobalVals.resourceMng.getDynamicTexture(url,url,this.loadAvatarCompleteBinding);};AvatarIcon.prototype.setID=function(id){if(!id)
id=game.GameSettings.DEFAULT_AVATAR;this.id=id;var info=component.VComponentUtils.findInArr(game.GameSettings.CONFIG.avatars,"id",id);if(info){var fileUrl=info.file;game.GlobalVals.resourceMng.getDynamicTexture('avatar_'+id,"../common_bin/assets/avatars/"+fileUrl,this.loadAvatarCompleteBinding);}};AvatarIcon.prototype.active=function(){this.selectBg.visible=true;};AvatarIcon.prototype.deactive=function(){this.selectBg.visible=false;};AvatarIcon.prototype.loadAvatarComplete=function(t){this.avatar.texture=t;if(this.avatar.width>this.avatar.height){this.avatar.width=this.iconSize;this.avatar.scale.y=this.avatar.scale.x;this.avatar.y=(this.iconSize-this.avatar.height)*0.5;}
else{this.avatar.height=this.iconSize;this.avatar.scale.x=this.avatar.scale.y;this.avatar.x=(this.iconSize-this.avatar.width)*0.5;}};return AvatarIcon;}(game.GameObject));game.AvatarIcon=AvatarIcon;})(game||(game={}));var game;(function(game){var BetAction=(function(){function BetAction(){}
BetAction.prototype.setData=function(betType,act,amt){this.betType=betType;this.action=act;this.amount=amt;return this;};BetAction.prototype.clean=function(){this.betType=null;this.action=0;};BetAction.ADD=1;BetAction.REMOVE=2;return BetAction;}());game.BetAction=BetAction;var BetInfo=(function(){function BetInfo(){}
BetInfo.prototype.setData=function(betType,amt){this.betType=betType;this.amount=amt;return this;};BetInfo.prototype.clean=function(){this.betType=null;this.amount=0;};return BetInfo;}());game.BetInfo=BetInfo;var BaseBetArea=(function(_super){__extends(BaseBetArea,_super);function BaseBetArea(gameModel,betInput){var _this=_super.call(this,gameModel)||this;_this.betInput=betInput;_this.initSettings();_this.betMap={};_this.hitArr=new Array();_this.actions=new Array();_this.betPlaceArr=new Array();_this.savedBets=new Array();_this.mouseE={target:null};_this.collectWinPos=new PIXI.Point();_this.seatId=0;_this.initialize();return _this;}
BaseBetArea.prototype.destructor=function(){trace("BaseBetArea::destructor");component.VMouseUtils.off(this.betCon,component.VMouseUtils.MOUSE_UP,this.onBetConMouseUp,this);component.VMouseUtils.off(this.betCon,component.VMouseUtils.MOUSE_MOVE,this.onBetConMouseMove,this);component.VMouseUtils.off(this.betCon,component.VMouseUtils.MOUSE_RIGHT_CLICK,this.onRightClick,this);this.betInput.input.removeEventListener('keyup',this.betInputKeyUpHdlBind);component.VBitmapUtils.getInstance().clearJsonData(this.jsonUrl);if(this.winCon.children)
for(var i=0;i<this.winCon.children.length;i++)
TweenMax.killTweensOf(this.winCon.children[i]);if(this.liveChipMng)
this.liveChipMng.destroy();_super.prototype.destructor.call(this);};BaseBetArea.prototype.initSettings=function(){};BaseBetArea.prototype.initJson=function(){};BaseBetArea.prototype.updateJson=function(jsonUrl){this.jsonUrl=jsonUrl;component.VBitmapUtils.getInstance().clearJsonData(this.jsonUrl);component.VBitmapUtils.getInstance().addJsonData(this.jsonUrl,this.onAddJsonComplete.bind(this));};BaseBetArea.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}
this.liveChipMng=new game.LiveChipMng(this.gameModel,this.chipCon);this.liveChipMng.initView(settings);};BaseBetArea.prototype.initBetCon=function(settings){if(settings===void 0){settings=null;}
for(var i=0;i<settings.length;i++){var area=new game.BetHit();this.hitArr.push(area);this.betCon.addChild(area);this.betMap[settings[i].id]=area;}
this.updateBetConSettings(settings);};BaseBetArea.prototype.getBetPlace=function(id,seatId){if(seatId===void 0){seatId=0;}
if(seatId<=0)
seatId=this.seatId;var obj=this.betPlaceMap[id];if(!(obj instanceof Array))
return obj;return obj[seatId>4?seatId-2:seatId-1];};BaseBetArea.prototype.getBetPlaceWithType=function(betType,seatId){if(seatId===void 0){seatId=0;}
if(seatId==0)
seatId=this.seatId;var obj=this.betPlaceMap['A'+betType]?this.betPlaceMap['A'+betType]:this.betPlaceMap['A'+betType+"_"+seatId];if(!obj)
return null;if(!(obj instanceof Array)){if(obj.seatId>0)
return seatId==obj.seatId?obj:null;else
return seatId==this.seatId?obj:null;}
return obj[seatId>4?seatId-2:seatId-1];};BaseBetArea.prototype.changeSeatId=function(id){this.seatId=id;};BaseBetArea.prototype.getBetTypeFromId=function(id){var str=id.split("_")[0];return str.substr(1,str.length-1);};BaseBetArea.prototype.updateBetConSettings=function(settings){for(var i=0;i<settings.length;i++){var name=settings[i].id;var area=this.betMap[name];area["setting"]=settings[i];area["id"]=settings[i].id;area["betType"]=this.getBetTypeFromId(settings[i].id);area["seatId"]=0;area["isDummy"]=settings[i].isDummy;area["url"]=settings[i].url;area.texture=PIXI.Texture.fromFrame(settings[i].url);area.x=settings[i].x;area.y=settings[i].y;if(area["highlight"]){area["highlight"].id=area["id"];area["highlight"].x=area.x;area["highlight"].y=area.y;area["highlight"].texture=area.texture;}
if(area["winHL"]){area["winHL"].id=area["id"];area["winHL"].x=area.x;area["winHL"].y=area.y;area["winHL"].texture=PIXI.Texture.fromFrame(settings[i].url.replace('.','_hl.'));}
var betPlace=this.getBetPlace(area['id']);if(betPlace){betPlace.x=area.x+area.width*0.5;betPlace.y=area.y+area.height*0.5-2;}}};BaseBetArea.prototype.updateBet=function(data,isForceUpdate){if(isForceUpdate===void 0){isForceUpdate=false;}
if((game.GlobalVals.viewMode==game.ViewMode.MODE_7S||game.GlobalVals.viewMode==game.ViewMode.MODE_7S_3D)&&!isForceUpdate&&this.seatId<=0)
return;var item;var betPlace;for(var i=0;i<data.content.value.length;i++){item=data.content.value[i];betPlace=this.getBetPlaceWithType(item.type);betPlace.setAmount(item.betAmount);betPlace.confirm();}};BaseBetArea.prototype.initialize=function(){if(game.GlobalVals.rebetInfo[this.gameModel.TABLE_ID])
this.savedBets=game.GlobalVals.rebetInfo[this.gameModel.TABLE_ID];if(this.betInput){this.betInput.input.onkeypress=function(e){var charCode=e.charCode;if(charCode>31&&(charCode<48||charCode>57)){return false;}
return true;};this.betInputKeyUpHdlBind=this.betInputKeyUpHdl.bind(this);this.betInput.input.addEventListener('keyup',this.betInputKeyUpHdlBind);}
this.betCon=new PIXI.Container();this.highlightCon=new PIXI.Container();this.addChild(this.highlightCon);var betAreaText=new PIXI.Sprite();this.addChild(betAreaText);this.betAreaText=betAreaText;this.chipCon=new PIXI.Container();this.betPlaceMap={};this.initBetCon();this.initLiveChip();this.initHighLight();this.initChipCon();this.betCon.buttonMode=true;this.addChild(this.chipCon);this.addChild(this.betCon);this.winCon=new PIXI.Container();this.addChild(this.winCon);component.VMouseUtils.on(this.betCon,component.VMouseUtils.MOUSE_UP,this.onBetConMouseUp,this);component.VMouseUtils.on(this.betCon,component.VMouseUtils.MOUSE_MOVE,this.onBetConMouseMove,this);component.VMouseUtils.on(this.betCon,component.VMouseUtils.MOUSE_RIGHT_CLICK,this.onRightClick,this);this.initJson();this.gameModel.dispatcher.addEventListener(game.GameEvent.TOGGLE_LIVE_POOL,function(e){if(this.liveChipMng)
this.liveChipMng.setVisible(e.data);},this);this.gameModel.dispatcher.addEventListener(game.GameEvent.GAME_EVENT,this.onGameEvent,this);this.hoverChips=new game.BetPlace(this.gameModel,false,false);this.hoverChips.checkConfirm=false;if(!component.VComponentUtils.isMobile)
this.gameModel.overlay.addChild(this.hoverChips);this.hoverChips.scale.x=0.8;this.hoverChips.scale.y=0.8;this.hoverChips.visible=false;};BaseBetArea.prototype.initHighLight=function(){var hit;var hl;var winHL;var url;for(var i=0;i<this.hitArr.length;i++){hit=this.hitArr[i];hl=new PIXI.Sprite(hit.texture);core.VUtils.copy(hit,hl);this.highlightCon.addChild(hl);hit.alpha=0;hl.visible=false;hit["highlight"]=hl;url=hit['url'].replace('.','_hl.');winHL=new PIXI.Sprite(PIXI.Texture.fromFrame(url));this.highlightCon.addChild(winHL);winHL.visible=false;winHL.x=hit.x;winHL.y=hit.y;hit["winHL"]=winHL;}};BaseBetArea.prototype.onTableLimit=function(){this.updateText();};BaseBetArea.prototype.updateText=function(){};BaseBetArea.prototype.betInputKeyUpHdl=function(e){if(!this.betInput)
return;var value=this.betInput.input.value.trim()==''?0:parseInt(this.betInput.input.value);if(value==this.exAmount)
return;this.exAmount=value;if(this.exAmount==0)
this.exAmount=this.chipVal;this.hoverChips.setAmount(this.exAmount);};BaseBetArea.prototype.onGameEvent=function(e){switch(e.data.type){case game.GameEvent.CHIP_CHANGE:this.chipVal=e.data.exdata;this.hoverChips.setAmount(e.data.exdata);this.betInput.input.value="";this.betInput.input.blur();break;}};BaseBetArea.prototype.onAddJsonComplete=function(){};BaseBetArea.prototype.onOverHit=function(hit){this.mouseE.target=hit;this.gameModel.toolTip.onTargetOver(this.mouseE);};BaseBetArea.prototype.onOutHit=function(hit){this.mouseE.target=hit;this.gameModel.toolTip.onTargetOut(this.mouseE);};BaseBetArea.prototype.setHighlight=function(hit,visi){if(!hit.highlight.length)
hit.highlight.visible=visi;else
for(var j=0;j<hit.highlight.length;j++)
hit.highlight[j].visible=visi;};BaseBetArea.prototype.checkHit=function(type){var ms=component.VMouseUtils.mousePos();var p;var item;var isHit;for(var i=0;i<this.hitArr.length;i++){item=this.hitArr[i];p=item.toLocal(ms);var pixData=component.VBitmapUtils.getInstance().getPixelData(item["url"],p.x,p.y,1,1);if(!pixData)
continue;if(type!=0&&this.currentBetHit){this.setHighlight(this.currentBetHit,false);}
if(pixData.data[3]>0){isHit=true;switch(type){case 0:this.onBetClick(item);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,true,game.SoundMng.STACK_CHIP);break;case 1:if(this.betCon.interactive){if(item['seatId']<=0||item['seatId']==this.seatId){this.setHighlight(item,true);}
if(this.hoverChips)
this.hoverChips.visible=true;if(this.currentBetHit!=item){if(this.currentBetHit){this.onOutHit(this.currentBetHit);}
this.onOverHit(item);}
this.currentBetHit=item;}
break;case 3:this.onBetRightClick(item);break;}
break;}}
if(type==1&&!isHit){if(this.currentBetHit){this.setHighlight(this.currentBetHit,false);this.onOutHit(this.currentBetHit);this.currentBetHit=null;}
if(this.hoverChips)
this.hoverChips.visible=false;}
return isHit;};BaseBetArea.prototype.onRightClick=function(e){this.checkHit(3);};BaseBetArea.prototype.onBetConMouseMove=function(e){var p=component.VMouseUtils.mousePos();p=this.gameModel.overlay.toLocal(p);this.checkHit(1);if(this.hoverChips){if(this.hoverChips.visible){this.hoverChips.x=p.x+30;this.hoverChips.y=p.y+20;}}};BaseBetArea.prototype.onBetConMouseUp=function(e){this.checkHit(0);};BaseBetArea.prototype.initChipCon=function(){this.hitArr.sort(function(a,b){return a.y>=b.y?(a.y==b.y?0:1):-1;});var hit;var betPlace;for(var i=0;i<this.hitArr.length;i++){hit=this.hitArr[i];var setting=hit["setting"];if(setting.isDummy)
continue;if(setting.arr){this.betPlaceMap[hit['id']]=[];for(var j=0;j<setting.arr.length;j++){betPlace=new game.BetPlace(this.gameModel);betPlace.x=setting.arr[j].x;betPlace.y=setting.arr[j].y;betPlace.seatId=j>=3?j+2:j+1;betPlace.betHit=hit;this.betPlaceMap[hit['id']].push(betPlace);this.chipCon.addChild(betPlace);this.betPlaceArr.push(betPlace);}}
else{betPlace=new game.BetPlace(this.gameModel);betPlace.x=setting.betplaceX?setting.betplaceX:hit.x+hit.width*0.5;betPlace.y=setting.betplaceY?setting.betplaceY:hit.y+hit.height*0.5-2;betPlace.betHit=hit;this.betPlaceMap[hit['id']]=betPlace;this.chipCon.addChild(betPlace);this.betPlaceArr.push(betPlace);}}};BaseBetArea.prototype.updateDummyBetPlaces=function(){for(var i=0;i<this.hitArr.length;i++){var hit=this.hitArr[i];var setting=hit["setting"];if(setting.isDummy){hit.referBetplaces=[];for(var j=0;j<setting.referBetplaces.length;j++)
hit.referBetplaces.push(this.getBetPlace(setting.referBetplaces[j]));}}};BaseBetArea.prototype.checkBetValid=function(){for(var i=0;i<this.hitArr.length;i++){if(this.hitArr[i].isDummy)
continue;var betPlace=this.getBetPlace(this.hitArr[i].id);if(betPlace.seatId>0&&betPlace.seatId!=this.seatId)
continue;if(roundFloat(betPlace.getAmount())>this.getBetMax(betPlace.betHit.betType)){this.gameModel.notify(game.GameEvent.MAX_BET_ERROR,betPlace.betHit.betType);return false;}}
return true;};BaseBetArea.prototype.getBetMax=function(betType){return this.gameModel.getBetMax(betType);};BaseBetArea.prototype.getBetMin=function(betType){return this.gameModel.getBetMin(betType);};BaseBetArea.prototype.onBetClick=function(hit){var betPlace;var val=this.hoverChips.getAmount();var acts=[];if(!hit.isDummy&&game.GlobalVals.userInfo.getBalance()<this.getPendingAmount()+val){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.BALANCE_NOT_ENOUGHT);return;}
var map={};for(var i=0;i<hit.referBetplaces.length;i++){betPlace=hit.referBetplaces[i];if(!map[betPlace.betHit.id])
map[betPlace.betHit.id]=1;else{map[betPlace.betHit.id]++;}
if(roundFloat(betPlace.getAmount()+val*map[betPlace.betHit.id])>this.getBetMax(betPlace.betHit.betType)){this.gameModel.notify(game.GameEvent.MAX_BET_ERROR,betPlace.betHit.betType);return;}}
if(game.GlobalVals.userInfo.getBalance()<this.getPendingAmount()+hit.referBetplaces.length*val+(hit.isDummy?0:val)){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.BALANCE_NOT_ENOUGHT);return;}
if(!hit.isDummy){var id=hit['id'];betPlace=this.getBetPlace(id);if(roundFloat(betPlace.getAmount()+val)>this.getBetMax(hit.betType)){this.gameModel.notify(game.GameEvent.MAX_BET_ERROR,betPlace.betHit.betType);return;}
var amt=betPlace.addChip(val);if(amt>0){var action=this.gameModel.vObjectPool.get(BetAction).setData(hit.betType,BetAction.ADD,amt);acts.push(action);this.updateBetToolTip(hit);}}
for(var i=0;i<hit.referBetplaces.length;i++){betPlace=hit.referBetplaces[i];var amt=betPlace.addChip(val);if(amt>0){var action=this.gameModel.vObjectPool.get(BetAction).setData(betPlace.betHit.betType,BetAction.ADD,amt);acts.push(action);this.updateBetToolTip(betPlace.betHit);}}
if(acts.length)
this.actions.push(acts);this.gameModel.notify(game.GameEvent.BET_CHANGE);};BaseBetArea.prototype.savePendingBet=function(){game.GlobalVals.saveData['pendingBet_'+this.gameModel.TABLE_ID]=this.getCurrentBetting(true);};BaseBetArea.prototype.clearPendingBet=function(){game.GlobalVals.saveData['pendingBet_'+this.gameModel.TABLE_ID]=[];};BaseBetArea.prototype.restorePendingBet=function(){if(!game.GlobalVals.saveData['pendingBet_'+this.gameModel.TABLE_ID]||game.GlobalVals.saveData['pendingBet_'+this.gameModel.TABLE_ID].length==0)
return;this.clearBets();this.loadBet(game.GlobalVals.saveData['pendingBet_'+this.gameModel.TABLE_ID]);game.GlobalVals.saveData['pendingBet_'+this.gameModel.TABLE_ID]=[];};BaseBetArea.prototype.getCurrentBetting=function(pending){if(pending===void 0){pending=false;}
var arr=[];var betplace;var info;var amt;for(var i=0;i<this.betPlaceArr.length;i++){betplace=this.betPlaceArr[i];amt=pending?betplace.getAmount()-betplace.getConfirmedAmount():betplace.getAmount();if(betplace.seatId>0&&betplace.seatId!=this.seatId)
continue;if(amt==0)
continue;info=new BetInfo().setData(betplace.betHit.betType,amt);arr.push(info);}
return arr;};BaseBetArea.prototype.loadBet=function(arr){if(!arr)
return;if(arr.length==0)
return;if(!this.betCon.interactive)
return;var betplace;var info;var val=0;for(var i=0;i<arr.length;i++)
val+=arr[i].amount;if(game.GlobalVals.userInfo.getBalance()<this.getPendingAmount()+val){this.gameModel.notify(game.GameEvent.STATUS_MSG,game.GameText.BALANCE_NOT_ENOUGHT);return;}
for(var i=0;i<arr.length;i++){var info=arr[i];betplace=this.getBetPlaceWithType(info.betType);if(!betplace){var t=1;}
if(betplace.seatId>0&&betplace.seatId!=this.seatId)
continue;if(roundFloat(betplace.getAmount())+info.amount>this.getBetMax(info.betType)){this.gameModel.notify(game.GameEvent.MAX_BET_ERROR,betplace.betHit.betType);return;}}
var acts=[];for(var i=0;i<arr.length;i++){info=arr[i];betplace=this.getBetPlaceWithType(info.betType);betplace.addChip(info.amount);this.updateBetToolTip(betplace.betHit);var act=this.gameModel.vObjectPool.get(BetAction).setData(info.betType,BetAction.ADD,info.amount);acts.push(act);}
if(acts.length)
this.actions.push(acts);this.gameModel.notify(game.GameEvent.BET_CHANGE);};BaseBetArea.prototype.onRoomBetSucceed=function(data){trace(JSON.stringify(data));var betPlace;for(var i=0;i<data.content.cats.length;i++){betPlace=this.getBetPlaceWithType(data.content.cats[i],data.content.seat);if(!betPlace)
continue;betPlace.setAmount(data.content.amounts[i]);betPlace.confirm();}};BaseBetArea.prototype.onRoomBetInfo=function(data){trace(JSON.stringify(data));var betplace;for(var i=0;i<this.hitArr.length;i++){this.gameModel.toolTip.removeToolTip(this.hitArr[i]);}
var seatId;var betType;var betPlace;for(var i=0;i<data.content.seats.length;i++){seatId=data.content.seats[i];if(seatId==this.seatId)
continue;var cats=data.content.cats[i];for(var j=0;j<cats.length;j++){betType=cats[j];betPlace=this.getBetPlaceWithType(betType,seatId);if(!betPlace)
continue;betPlace.setConfirmAmount(data.content.amounts[i][j]);}}
this.restorePendingBet();};BaseBetArea.prototype.updateBetToolTip=function(hit){var betPlace;betPlace=this.getBetPlace(hit['id']);var addVal=roundFloat(betPlace.getAmount()-betPlace.getConfirmedAmount());var str="";if(addVal>0)
str+=game.GameText.BET_PENDING_TOOLTIP+':'+game.GlobalVals.userInfo.currency+" "+component.VComponentUtils.getNumInFormat(addVal)+" ";if(betPlace.getConfirmedAmount()>0)
str+=game.GameText.CONFIRMED+":"+game.GlobalVals.userInfo.currency+" "+component.VComponentUtils.getNumInFormat(betPlace.getConfirmedAmount());if(str.length){this.gameModel.toolTip.addToolTip(hit,str,0,38,true);this.mouseE.target=hit;this.gameModel.toolTip.onTargetOver(this.mouseE);}
else
this.gameModel.toolTip.removeToolTip(hit);};BaseBetArea.prototype.onBetRightClick=function(hit){if(hit.isDummy)
return;var val=this.hoverChips.getAmount();var betPlace=this.getBetPlace(hit['id']);if(betPlace.seatId>0&&betPlace.seatId!=this.seatId)
return;var amt=betPlace.removeChip(val);if(amt>0){var action=this.gameModel.vObjectPool.get(BetAction).setData(hit.betType,BetAction.REMOVE,amt);this.actions.push(action);}
this.gameModel.notify(game.GameEvent.BET_CHANGE);this.updateBetToolTip(hit);};BaseBetArea.prototype.confirmBet=function(){game.GlobalVals.saveData['pendingBet_'+this.gameModel.TABLE_ID]=[];this.resetAction();while(this.savedBets.length)
this.gameModel.vObjectPool.release(this.savedBets.pop(),BetInfo);var info;var betplace;for(var i=0;i<this.betPlaceArr.length;i++){betplace=this.betPlaceArr[i];if(betplace.seatId>0&&betplace.seatId!=this.seatId)
continue;this.gameModel.toolTip.removeToolTip(betplace.betHit);if(betplace.getAmount()==0)
continue;info=this.gameModel.vObjectPool.get(BetInfo).setData(betplace.betHit.betType,betplace.getAmount());this.savedBets.push(info);betplace.confirm();this.updateBetToolTip(betplace.betHit);}
game.GlobalVals.rebetInfo[this.gameModel.TABLE_ID]=this.savedBets;};BaseBetArea.prototype.hideHighlight=function(){for(var i=0;i<this.hitArr.length;i++){this.gameModel.toolTip.removeToolTip(this.hitArr[i]);if(this.hitArr[i]['winHL'])
this.hitArr[i]['winHL'].visible=false;if(this.hitArr[i]['highlight'])
this.hitArr[i]['highlight'].visible=false;}
if(this.currentBetHit){this.setHighlight(this.currentBetHit,false);this.onOutHit(this.currentBetHit);this.currentBetHit=null;}};BaseBetArea.prototype.reset=function(){game.GlobalVals.saveData['pendingBet_'+this.gameModel.TABLE_ID]=[];var betplace;for(var i=0;i<this.betPlaceArr.length;i++){betplace=this.betPlaceArr[i];betplace.reset();}
for(var i=0;i<this.hitArr.length;i++){this.gameModel.toolTip.removeToolTip(this.hitArr[i]);if(this.hitArr[i]['winHL'])
this.hitArr[i]['winHL'].visible=false;if(this.hitArr[i]['highlight'])
this.hitArr[i]['highlight'].visible=false;}
this.clearBets(true);};BaseBetArea.prototype.rebet=function(){var val=0;for(var i=0;i<this.savedBets.length;i++)
val+=this.savedBets[i].amount;if(game.GlobalVals.userInfo.getBalance()<this.getPendingAmount()+val){this.gameModel.notify(game.GameEvent.STATUS_MSG,game.GameText.BALANCE_NOT_ENOUGHT);return;}
var betplace;for(var i=0;i<this.savedBets.length;i++){var info=this.savedBets[i];betplace=this.getBetPlaceWithType(info.betType);if(betplace.seatId>0&&betplace.seatId!=this.seatId)
continue;if(roundFloat(betplace.getAmount())+info.amount>this.getBetMax(info.betType)){this.gameModel.notify(game.GameEvent.MAX_BET_ERROR,betplace.betHit.betType);return;}}
var acts=[];for(var i=0;i<this.savedBets.length;i++){var info=this.savedBets[i];betplace=this.getBetPlaceWithType(info.betType);if(betplace.seatId>0&&betplace.seatId!=this.seatId)
continue;betplace.addChip(info.amount);this.updateBetToolTip(betplace.betHit);var act=this.gameModel.vObjectPool.get(BetAction).setData(info.betType,BetAction.ADD,info.amount);acts.push(act);}
if(acts.length)
this.actions.push(acts);this.gameModel.notify(game.GameEvent.BET_CHANGE);};BaseBetArea.prototype.resetAction=function(){while(this.actions.length){if(this.actions[this.actions.length-1]instanceof Array){var arr=this.actions.pop();while(arr.length)
this.gameModel.vObjectPool.release(arr.pop(),BetAction);}
else
this.gameModel.vObjectPool.release(this.actions.pop(),BetAction);}};BaseBetArea.prototype.clearBets=function(isClearAll){if(isClearAll===void 0){isClearAll=false;}
var betplace;this.resetAction();for(var i=0;i<this.betPlaceArr.length;i++){betplace=this.betPlaceArr[i];if(!isClearAll&&betplace.seatId>0&&betplace.seatId!=this.seatId)
continue;betplace.setAmount(betplace.getConfirmedAmount());}
for(var i=0;i<this.hitArr.length;i++){this.gameModel.toolTip.removeToolTip(this.hitArr[i]);}
this.gameModel.notify(game.GameEvent.BET_CHANGE);};BaseBetArea.prototype.getTotalBet=function(){var amount=0;for(var i=0,l=this.betPlaceArr.length;i<l;i++){if(this.betPlaceArr[i].seatId>0&&this.betPlaceArr[i].seatId!=this.seatId)
continue;amount+=this.betPlaceArr[i].getAmount();}
return amount;};BaseBetArea.prototype.getTotalConfirmedBet=function(){var amount=0;for(var i=0,l=this.betPlaceArr.length;i<l;i++){if(this.betPlaceArr[i].seatId>0&&this.betPlaceArr[i].seatId!=this.seatId)
continue;amount+=this.betPlaceArr[i].getConfirmedAmount();}
return amount;};BaseBetArea.prototype.performAction=function(act){var betPlace=this.getBetPlaceWithType(act.betType);switch(act.action){case BetAction.ADD:betPlace.removeChip(act.amount);break;case BetAction.REMOVE:betPlace.addChip(act.amount);break;}
this.updateBetToolTip(betPlace.betHit);};BaseBetArea.prototype.undoBet=function(){if(this.actions.length==0){return;}
var acts=this.actions.pop();var act;if(acts instanceof Array){for(var i=0;i<acts.length;i++){act=acts[i];this.performAction(act);this.gameModel.vObjectPool.release(act,BetAction);}}
else{act=acts;this.performAction(act);this.gameModel.vObjectPool.release(act,BetAction);}
this.gameModel.notify(game.GameEvent.BET_CHANGE);};BaseBetArea.prototype.dissable=function(){if(this.currentBetHit){this.setHighlight(this.currentBetHit,false);this.onOutHit(this.currentBetHit);this.currentBetHit=null;}
this.betInput.setVisible(false);this.betCon.interactive=false;if(this.hoverChips)
this.hoverChips.visible=false;};BaseBetArea.prototype.enable=function(){this.betInput.setVisible(true);this.betCon.interactive=true;if(this.hoverChips&&this.checkHit(2)){this.hoverChips.visible=true;this.onBetConMouseMove(null);}};BaseBetArea.prototype.getCats=function(){var arr=[];for(var i=0,l=this.betPlaceArr.length;i<l;i++){if(this.betPlaceArr[i].seatId>0&&this.betPlaceArr[i].seatId!=this.seatId)
continue;var betType=this.betPlaceArr[i].betHit.betType;if(this.betPlaceArr[i].getAmount()-this.betPlaceArr[i].getConfirmedAmount()>0)
arr.push(betType);}
return arr;};BaseBetArea.prototype.getAmounts=function(){var arr=[];var val=0;for(var i=0,l=this.betPlaceArr.length;i<l;i++){if(this.betPlaceArr[i].seatId>0&&this.betPlaceArr[i].seatId!=this.seatId)
continue;var betType=this.betPlaceArr[i].betHit.betType;val=this.betPlaceArr[i].getAmount()-this.betPlaceArr[i].getConfirmedAmount();if(val==0||val===undefined)
continue;arr.push(val);}
return arr;};BaseBetArea.prototype.getPendingAmount=function(){var val=0;for(var i=0,l=this.betPlaceArr.length;i<l;i++){if(this.betPlaceArr[i].seatId>0&&this.betPlaceArr[i].seatId!=this.seatId)
continue;val+=this.betPlaceArr[i].getAmount()-this.betPlaceArr[i].getConfirmedAmount();}
return val;};BaseBetArea.prototype.getConfirmedAmount=function(){var val=0;for(var i=0,l=this.betPlaceArr.length;i<l;i++){if(this.betPlaceArr[i].seatId>0&&this.betPlaceArr[i].seatId!=this.seatId)
continue;val+=this.betPlaceArr[i].getConfirmedAmount();}
return val;};BaseBetArea.prototype.cleanTable=function(){for(var i=0;i<this.betPlaceArr.length;i++){var betplace=this.betPlaceArr[i];betplace.reset();}
this.clearBets(true);};BaseBetArea.prototype.showResult=function(data){this.hideHighlight();var results=data.content.result;var hit;for(var i=0;i<this.hitArr.length;i++){hit=this.hitArr[i];if(results.charAt(hit.betType-1)=='0')
continue;hit['winHL'].visible=true;}};BaseBetArea.prototype.playChipCollectAnim=function(betPlace,isFadeout){if(isFadeout===void 0){isFadeout=false;}
var chips;var chipStack;chips=betPlace.cloneChips();chipStack=new PIXI.Container();for(var j=0;j<chips.length;j++)
chipStack.addChild(chips[j]);chipStack.x=betPlace.x;chipStack.y=betPlace.y;this.winCon.addChild(chipStack);if(!isFadeout)
TweenMax.to(chipStack,1,{x:this.collectWinPos.x,y:this.collectWinPos.y,onComplete:this.onTweenComplete.bind(this,chipStack)});else
TweenMax.to(chipStack,1,{alpha:0,onComplete:this.onTweenComplete.bind(this,chipStack)});};BaseBetArea.prototype.showWin=function(data){var winArr=[];var fadeArr=[];var betPlace;for(var i=0;i<this.betPlaceArr.length;i++){betPlace=this.betPlaceArr[i];if(betPlace.seatId>0&&betPlace.seatId!=this.seatId){fadeArr.push(betPlace);continue;}
if(betPlace.getAmount()>0&&betPlace.betHit.winHL.visible){winArr.push(betPlace);}
else
fadeArr.push(betPlace);}
for(var i=0;i<winArr.length;i++){this.playChipCollectAnim(winArr[i]);}
for(var i=0;i<fadeArr.length;i++){this.playChipCollectAnim(fadeArr[i],true);}
this.cleanTable();};BaseBetArea.prototype.onTweenComplete=function(chipStack){trace("onTweenComplete "+chipStack);this.winCon.removeChild(chipStack);while(chipStack.children.length)
this.gameModel.chipControl.releaseChip(chipStack.removeChildAt(0));};BaseBetArea.prototype.getBetName=function(betType){return game.GameText["Baccarat_"+betType];};BaseBetArea.prototype.showWinHLBettype=function(bettype){for(var i=0;i<this.hitArr.length;i++)
if(this.hitArr[i].betType==bettype)
this.hitArr[i]['winHL'].visible=true;};return BaseBetArea;}(game.GameObject));game.BaseBetArea=BaseBetArea;})(game||(game={}));var game;(function(game){var CardConfig=(function(){function CardConfig(){}
CardConfig.prototype.clone=function(){var cf=new CardConfig();cf.x=this.x;cf.y=this.y;if(cf.backVertices)
cf.backVertices=this.backVertices.slide();if(cf.backUvs)
cf.backUvs=this.backUvs.slide();if(cf.vertices)
cf.vertices=this.vertices.slide();if(cf.uvs)
cf.uvs=this.uvs.slide();return cf;};return CardConfig;}());game.CardConfig=CardConfig;var BaseCardControl=(function(_super){__extends(BaseCardControl,_super);function BaseCardControl(gameModel){var _this=_super.call(this,gameModel)||this;_this.dummySprite=new PIXI.Sprite(_this.gameModel.resources['dummy_texture'].texture);_this.addChild(_this.dummySprite);_this.dummySprite.width=1;_this.dummySprite.height=1;_this.dummySprite.y=-10000;_this.animatingMap=[false,false,false,false,false,false];_this.initialize();return _this;}
BaseCardControl.prototype.destructor=function(){trace("BaseCardControl::destructor");this.clearAllCards();_super.prototype.destructor.call(this);};BaseCardControl.prototype.initialize=function(){};BaseCardControl.prototype.dealCard=function(cardId,cardPos,animated,isDealCardBack,duration){if(animated===void 0){animated=true;}
if(isDealCardBack===void 0){isDealCardBack=false;}
if(duration===void 0){duration=0.3;}
var orgCardId=cardId;if(isDealCardBack)
cardId='CB';this.clearCard(cardPos);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,true,game.SoundMng.CARD_SWIPE);var cardConfig=this.cardConfigs[cardPos];var mesh=new PIXI.mesh.Mesh(this.gameModel.resources[cardId].texture,cardConfig.vertices,cardConfig.uvs,[0,1,2,0,2,3],PIXI.DRAW_MODES.TRIANGLES);var card=new PIXI.Container();var b=mesh.getLocalBounds();mesh.x=-(b.x+b.width/2);mesh.y=-(b.y+b.height/2);if(!game.GameSettings.IS_WEBGL){var backMesh=new PIXI.mesh.Mesh(this.gameModel.resources[cardId].texture,cardConfig.vertices,cardConfig.uvs,[0,1,3,3,1,2],PIXI.DRAW_MODES.TRIANGLES);card.addChild(backMesh);backMesh.x=mesh.x;backMesh.y=mesh.y;}
card.addChild(mesh);card['mesh']=mesh;var px,py;px=cardConfig.x-mesh.x;py=cardConfig.y-mesh.y;if(animated){if(cardPos%2==0)
card.x=px+10;else
card.x=px-10;card.y=py-50;this.animatingMap[cardPos]=true;TweenMax.to(card,duration,{x:px,y:py,onComplete:function(){this.animatingMap[cardPos]=false;}.bind(this)});}
else{card.x=px;card.y=py;}
this.addChild(card);this.cards[cardPos]=card;card['cardId']=cardId;card['orgCardId']=orgCardId;return card;};BaseCardControl.prototype.isAnimating=function(){for(var i=0;i<this.animatingMap.length;i++)
if(this.animatingMap[i])
return true;return false;};BaseCardControl.prototype.getTotalCard=function(){var count=0;for(var carPos=0;carPos<this.cards.length;carPos++){if(this.cards[carPos])
count++;}
return count;};BaseCardControl.prototype.clearCard=function(carPos){if(this.cards[carPos]){TweenMax.killTweensOf(this.cards[carPos]);component.VComponentUtils.deepClean(this.cards[carPos]);this.animatingMap[carPos]=false;delete this.cards[carPos];}};BaseCardControl.prototype.clearAllCards=function(){for(var carPos=0;carPos<this.cards.length;carPos++){if(!this.cards[carPos])
continue;TweenMax.killTweensOf(this.cards[carPos]);component.VComponentUtils.deepClean(this.cards[carPos]);this.animatingMap[carPos]=false;this.cards[carPos]=null;}};return BaseCardControl;}(game.GameObject));game.BaseCardControl=BaseCardControl;})(game||(game={}));var game;(function(game){var BaseChipControl=(function(_super){__extends(BaseChipControl,_super);function BaseChipControl(gameModel){var _this=_super.call(this,gameModel)||this;_this.masker=new PIXI.Graphics();_this.addChild(_this.masker);_this.chipCon=new PIXI.Container();_this.addChild(_this.chipCon);_this.minChip=0;_this.maxChip=0;_this.enableb=true;_this.chipInd=0;_this.liveChips=[];_this.chips=[];_this.fullChips=[];_this.chipPool={};var arr=["chip10cents","chip50cents","chip1","chip5","chip10","chip25","chip50","chip100","chip500","chip1000","chip5000","chip10000","chip50000","chip100000","chip500000","chip1000000","chip5000000","chip10000000","chip50000000","chip100000000"];_this.imgIds=[];_this.liveImgIds=[];for(var i=0;i<arr.length;i++){_this.imgIds.push(arr[i]+".png");_this.liveImgIds.push("pool_"+arr[i]+".png");}
_this.chipVals=[];var str;for(var i=0;i<arr.length;i++){str=arr[i].substr(4,arr[i].length-4);if(str=='50cents')
_this.chipVals.push(0.5);else if(str=='10cents')
_this.chipVals.push(0.1);else
_this.chipVals.push(parseInt(str));}
for(var i=0;i<_this.chipVals.length;i++){var chip=_this.getChip(_this.chipVals[i]);_this.fullChips.push(chip);}
for(var i=3;i<_this.chipVals.length;i++){var chip=_this.getChip(_this.chipVals[i],game.Chip.LIVE);_this.liveChips.push(chip);for(var j=0;j<50;j++){chip=new game.Chip(_this.gameModel,_this.chipVals[i],PIXI.Texture.fromFrame(_this.liveImgIds[i]),game.Chip.LIVE);_this.releaseChip(chip);}}
if(_this.imgIds.length!=_this.chipVals.length)
throw new Error("this.imgIds must has same lenght with this.chipVals!!!");_this.playerImgIds=[];for(var i=1;i<=8;i++){if(i==4)
continue;_this.playerImgIds.push('player_chip'+i+'.png');chip=new game.Chip(_this.gameModel,i,PIXI.Texture.fromFrame('player_chip'+i+'.png'),game.Chip.PLAYER);_this.releaseChip(chip);}
_this.initChipPos();_this.chipCon.mask=_this.masker;_this.leftArrow=new PIXI.Sprite(_this.gameModel.resources['left_arrow'].texture);_this.leftArrow.buttonMode=true;_this.addChild(_this.leftArrow);_this.leftArrow.anchor.x=0.5;_this.leftArrow.anchor.y=0.5;component.VMouseUtils.on(_this.leftArrow,component.VMouseUtils.MOUSE_DOWN,_this.onLeftUp,_this);_this.rightArrow=new PIXI.Sprite(_this.gameModel.resources['right_arrow'].texture);_this.addChild(_this.rightArrow);_this.rightArrow.buttonMode=true;_this.rightArrow.anchor.x=0.5;_this.rightArrow.anchor.y=0.5;component.VMouseUtils.on(_this.rightArrow,component.VMouseUtils.MOUSE_DOWN,_this.onRightUp,_this);return _this;}
BaseChipControl.prototype.initChipPos=function(){this.chipsPos=[new PIXI.Point(-52.35,1.85),new PIXI.Point(0.05,0.65),new PIXI.Point(51.05,-1.55),new PIXI.Point(102.15,-5.2),new PIXI.Point(154.85,-10.95),new PIXI.Point(207.4,-19.4),new PIXI.Point(257.55,-28.45),new PIXI.Point(305.95,-38.85)];};BaseChipControl.prototype.updateChipPos=function(chipsPos){var chip;for(var i=0;i<chipsPos.length;i++)
this.chipsPos[i].copy(chipsPos[i]);for(var i=0;i<this.chips.length;i++){chip=this.chips[i];TweenMax.killTweensOf(chip);if(i<this.chipInd){chip.x=this.chipsPos[0].x;chip.y=this.chipsPos[0].y;}
else if(i>=this.chipInd+this.shownRange){chip.x=this.chipsPos[this.shownRange+1].x;chip.y=this.chipsPos[this.shownRange+1].y;}
else{chip.x=this.chipsPos[i-this.chipInd+1].x;chip.y=this.chipsPos[i-this.chipInd+1].y;}}};BaseChipControl.prototype.destructor=function(){trace("ChipControl::destructor");for(var i in this.chipPool){for(var j=0;j<this.chipPool[i].length;j++)
component.VComponentUtils.deepClean(this.chipPool[i][j]);delete this.chipPool[i];}
for(var j=0;j<this.chips.length;j++)
TweenMax.killTweensOf(this.chips[j]);component.VMouseUtils.off(this.leftArrow,component.VMouseUtils.MOUSE_DOWN,this.onLeftUp,this);component.VMouseUtils.off(this.rightArrow,component.VMouseUtils.MOUSE_DOWN,this.onRightUp,this);_super.prototype.destructor.call(this);};BaseChipControl.prototype.getMinChip=function(){return this.minChip;};BaseChipControl.prototype.getMaxChip=function(){return this.maxChip;};BaseChipControl.prototype.enable=function(){this.enableb=true;this.chipCon.alpha=1;for(var i=0;i<this.chips.length;i++)
this.chips[i].interactive=true;};BaseChipControl.prototype.dissable=function(){this.enableb=false;this.chipCon.alpha=0.5;for(var i=0;i<this.chips.length;i++)
this.chips[i].interactive=false;};BaseChipControl.prototype.onLeftUp=function(e){if(this.chipInd==0)
return;var ind=this.chipInd-1;var posIndex=1;for(var i=ind;i<=ind+this.shownRange;i++){TweenMax.to(this.chips[i],0.3,{x:this.chipsPos[posIndex].x,y:this.chipsPos[posIndex].y});posIndex++;}
this.chipInd--;this.checkBtnEnable();};BaseChipControl.prototype.onRightUp=function(e){if(this.chips.length-this.shownRange==this.chipInd)
return;var ind=this.chipInd;var posIndex=0;for(var i=ind;i<=ind+this.shownRange;i++){TweenMax.to(this.chips[i],0.3,{x:this.chipsPos[posIndex].x,y:this.chipsPos[posIndex].y});posIndex++;}
this.chipInd++;this.checkBtnEnable();};BaseChipControl.prototype.getChip=function(val,type){if(type===void 0){type=game.Chip.NORMAL;}
if(type==game.Chip.LIVE)
return this.getLiveChip(val);if(type==game.Chip.PLAYER)
return this.getPlayerChip(val);if(!this.chipPool[val])
this.chipPool[val]=new Array();if(this.chipPool[val].length){var chip=this.chipPool[val].pop();chip.width=game.StyleMng.CHIP_SIZE;chip.scale.y=chip.scale.x;return chip;}
else{var ind=this.chipVals.indexOf(val);if(ind<0)
return null;var chip=new game.Chip(this.gameModel,val,PIXI.Texture.fromFrame(this.imgIds[ind]));chip.interactive=false;chip.width=game.StyleMng.CHIP_SIZE;chip.scale.y=chip.scale.x;return chip;}};BaseChipControl.prototype.getLiveChip=function(val){var chip;if(!this.chipPool["live"+val])
this.chipPool["live"+val]=new Array();if(this.chipPool["live"+val].length){chip=this.chipPool["live"+val].pop();chip.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;chip.scale.y=chip.scale.x;return chip;}
else{var ind=this.chipVals.indexOf(val);if(ind<0)
return null;chip=new game.Chip(this.gameModel,val,PIXI.Texture.fromFrame(this.liveImgIds[ind]),game.Chip.LIVE);chip.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;chip.scale.y=chip.scale.x;chip.interactive=false;return chip;}};BaseChipControl.prototype.getPlayerChip=function(val){var chip;if(!this.chipPool["player"+val])
this.chipPool["player"+val]=new Array();if(this.chipPool["player"+val].length){chip=this.chipPool["player"+val].pop();chip.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;chip.scale.y=chip.scale.x;return chip;}
else{var ind=val<4?val-1:val-2;if(ind<0)
return null;chip=new game.Chip(this.gameModel,val,PIXI.Texture.fromFrame(this.playerImgIds[ind]),game.Chip.PLAYER);chip.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;chip.scale.y=chip.scale.x;chip.interactive=false;return chip;}};BaseChipControl.prototype.releaseChip=function(chip){chip.interactive=false;chip.buttonMode=false;chip.shadow.visible=false;chip.setAlpha(1);chip.x=0;chip.y=0;chip.scale.x=1;chip.scale.y=1;chip.visible=true;chip.selector.visible=false;var key=chip.type==game.Chip.LIVE?"live"+chip.getVal():chip.type==game.Chip.PLAYER?"player"+chip.getVal():chip.getVal().toString();if(chip.parent)
chip.parent.removeChild(chip);if(!this.chipPool[key])
this.chipPool[key]=new Array();this.chipPool[key].push(chip);component.VMouseUtils.off(chip,component.VMouseUtils.MOUSE_DOWN,this.onChipUp,this);this.chipCon.removeChild(chip);};BaseChipControl.prototype.initChips=function(schips,shownRange){this.clean();this.shownRange=shownRange;var chip;this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[shownRange].x+40;this.rightArrow.y=this.chipsPos[shownRange].y-7;this.rightArrow.rotation=-10*Math.PI/180;for(var i=0;i<schips.length;i++){chip=this.getChip(schips[i]);chip.buttonMode=true;this.chips.push(chip);if(this.chips.length<this.chipsPos.length){chip.x=this.chipsPos[this.chips.length].x;chip.y=this.chipsPos[this.chips.length].y;}
else{chip.x=this.chipsPos[this.chipsPos.length-1].x;chip.y=this.chipsPos[this.chipsPos.length-1].y;}
chip.shadow.visible=true;component.VMouseUtils.on(chip,component.VMouseUtils.MOUSE_DOWN,this.onChipUp,this);this.chipCon.addChild(chip);}
this.drawMasker();this.checkBtnEnable();this.setActiveChip(this.chips[0]);if(this.enableb)
this.enable();else
this.dissable();};BaseChipControl.prototype.drawMasker=function(){var bound=this.getLocalBounds();this.masker.clear();this.masker.beginFill(0xAAAAAA);this.masker.drawRect(this.leftArrow.x+this.leftArrow.width*0.5+5,bound.y,this.rightArrow.x-this.leftArrow.x-this.rightArrow.width-10,bound.height+5);this.masker.endFill();this.chipCon.mask=this.masker;};BaseChipControl.prototype.setActiveChip=function(chip){if(this.selectedChip)
this.selectedChip.deactive();this.selectedChip=chip;if(this.selectedChip)
this.selectedChip.active();this.gameModel.notify(game.GameEvent.CHIP_CHANGE,this.selectedChip.getVal());};BaseChipControl.prototype.checkBtnEnable=function(){if(this.chipInd==0)
component.VComponentUtils.dissableBtn(this.leftArrow);else
component.VComponentUtils.enableBtn(this.leftArrow);if(this.chips.length-this.shownRange<=this.chipInd)
component.VComponentUtils.dissableBtn(this.rightArrow);else
component.VComponentUtils.enableBtn(this.rightArrow);};BaseChipControl.prototype.onChipUp=function(e){this.setActiveChip(e.target);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,true,game.SoundMng.CHANGE_CHIP);};BaseChipControl.prototype.getSelectedChipVal=function(){if(!this.selectedChip)
return 0;return this.selectedChip.getVal();};BaseChipControl.prototype.clean=function(){for(var i=0;i<this.chips.length;i++){this.releaseChip(this.chips[i]);}
this.chips=[];};return BaseChipControl;}(game.GameObject));game.BaseChipControl=BaseChipControl;})(game||(game={}));var game;(function(game){var BaseGameHUD=(function(_super){__extends(BaseGameHUD,_super);function BaseGameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.initView();return _this;}
BaseGameHUD.prototype.destructor=function(){_super.prototype.destructor.call(this);};BaseGameHUD.prototype.initView=function(){this.initStatusMsgs();};BaseGameHUD.prototype.initStatusMsgs=function(){var statusMsg=new component.StatusMessage(this.gameModel.VOD_WIDTH,32,{fontFamily:"Arial",fontSize:14,fontStyle:'',fill:0xffffff,align:'center'},3);statusMsg.x=this.gameModel.VOD_X;statusMsg.y=315;this.addChild(statusMsg);this.statusMsg=statusMsg;var vodStatusMsg=new component.StatusMessage(this.gameModel.VOD_WIDTH,40,{fontFamily:"Arial",fontSize:20,fontStyle:'',fill:0xffffff,align:'center'},3,function(){this.isShowedVod=false;}.bind(this));vodStatusMsg.x=this.gameModel.VOD_X;vodStatusMsg.y=this.gameModel.VOD_HEIGHT*0.5;this.addChild(vodStatusMsg);this.vodStatusMsg=vodStatusMsg;};BaseGameHUD.prototype.setBalance=function(balance,currency,animated){if(animated===void 0){animated=false;}
this.settingCon.setBalance(balance,currency,animated);};BaseGameHUD.prototype.showStatus=function(msg,autoHide,showImmediately){if(autoHide===void 0){autoHide=true;}
if(showImmediately===void 0){showImmediately=false;}
this.statusMsg.show(msg,autoHide,showImmediately);};BaseGameHUD.prototype.showVodStatus=function(msg,autoHide,showImmediately){if(autoHide===void 0){autoHide=true;}
if(showImmediately===void 0){showImmediately=false;}
this.vodStatusMsg.show(msg,autoHide,showImmediately);};return BaseGameHUD;}(game.GameObject));game.BaseGameHUD=BaseGameHUD;})(game||(game={}));var game;(function(game){var BaseGameInfoCon=(function(_super){__extends(BaseGameInfoCon,_super);function BaseGameInfoCon(gameModel){var _this=_super.call(this,gameModel)||this;_this.initView();return _this;}
BaseGameInfoCon.prototype.initView=function(){this.gameTitle=new game.GameTitleCon(this.gameModel);this.addChild(this.gameTitle);this.baseInfoCon=new PIXI.Container();this.addChild(this.baseInfoCon);var bg=new PIXI.Sprite(PIXI.Texture.fromFrame('info_detail_bg.png'));game.GameUtils.resizeNodeH(bg,241);this.baseInfoCon.addChild(bg);this.baseInfoCon.y=35;var c=game.GameUtils.getCommonStudioTextColor(this.gameModel.STUDIO);var style={fontFamily:"Arial",fontSize:12,fill:c,align:'left'};this.nickNameTf=game.GameUtils.createText('',style);this.nickNameTf.x=32;this.nickNameTf.y=43-35;this.baseInfoCon.addChild(this.nickNameTf);this.roundTf=game.GameUtils.createText('',style);this.roundTf.x=this.nickNameTf.x;this.roundTf.y=67-35;this.baseInfoCon.addChild(this.roundTf);this.dealerTf=game.GameUtils.createText('',style);this.dealerTf.x=207;this.dealerTf.y=this.nickNameTf.y;this.baseInfoCon.addChild(this.dealerTf);this.minMaxTf=game.GameUtils.createText('',style);this.minMaxTf.x=this.dealerTf.x;this.minMaxTf.y=this.roundTf.y;this.baseInfoCon.addChild(this.minMaxTf);this.betInfo=new game.BetInfoCon();this.betInfo.y=279;this.addChild(this.betInfo);this.initGameDetailCon();var contextBtn=new component.VButton([PIXI.Texture.fromFrame('info_panel_context_btn.png'),PIXI.Texture.fromFrame('info_panel_context_btn.png')],this.onContextBtn.bind(this));game.GameUtils.resizeNodeH(contextBtn,10);contextBtn.buttonMode=true;contextBtn.x=358;contextBtn.y=70;this.addChild(contextBtn);this.contextBtn=contextBtn;var roundIcon=new PIXI.Sprite(PIXI.Texture.fromFrame('info_round_icon.png'));roundIcon.x=266;roundIcon.y=14;this.addChild(roundIcon);this.roundIcon=roundIcon;var expandBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_expand_icon_1.png'),PIXI.Texture.fromFrame('info_pane_expand_icon_2.png')],this.onBtnExpand.bind(this));var conllapseBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_collapse_icon_1.png'),PIXI.Texture.fromFrame('info_pane_collapse_icon_2.png')],this.onBtnCollapse.bind(this));var resizeBtn=new component.VToggleButton(expandBtn,conllapseBtn);this.addChild(resizeBtn);this.resizeBtn=resizeBtn;resizeBtn.x=354+7;resizeBtn.y=12;this.expand();};BaseGameInfoCon.prototype.initGameDetailCon=function(){this.gameDetailCon=new game.GameDetailCon(this.gameModel);this.addChild(this.gameDetailCon);this.gameDetailCon.y=90;};BaseGameInfoCon.prototype.onBtnExpand=function(){this.roundTf.x=32;this.roundTf.y=67-35;this.roundIcon.visible=false;this.gameDetailCon.visible=true;this.baseInfoCon.visible=true;this.betInfo.y=279;this.contextBtn.x=358;this.contextBtn.y=70;};BaseGameInfoCon.prototype.onBtnCollapse=function(){this.roundTf.x=291;this.roundTf.y=10;this.roundIcon.visible=true;this.gameDetailCon.visible=false;this.baseInfoCon.visible=false;this.betInfo.y=35;this.contextBtn.x=358;this.contextBtn.y=45;};BaseGameInfoCon.prototype.expand=function(){this.onBtnExpand();this.resizeBtn.setFrame(1);};BaseGameInfoCon.prototype.collapse=function(){this.onBtnCollapse();this.resizeBtn.setFrame(0);};BaseGameInfoCon.prototype.onContextBtn=function(){var limitContextMenu=game.GlobalVals.main.mainView.tablesView.tableSmallView.getBtn(this.gameModel.TABLE_ID).menu;limitContextMenu.y=this.contextBtn.y;limitContextMenu.x=this.contextBtn.x-2-limitContextMenu.itemW;limitContextMenu.show();};return BaseGameInfoCon;}(game.GameObject));game.BaseGameInfoCon=BaseGameInfoCon;})(game||(game={}));var game;(function(game){var BaseGameResult=(function(_super){__extends(BaseGameResult,_super);function BaseGameResult(gameModel,bName,pName){if(bName===void 0){bName='banker';}
if(pName===void 0){pName='player';}
var _this=_super.call(this,gameModel)||this;_this.bName=bName;_this.pName=pName;_this.initialize();return _this;}
BaseGameResult.prototype.initBgs=function(){var arr=[PIXI.Texture.fromFrame(this.bName+'0001.png'),PIXI.Texture.fromFrame(this.bName+'0002.png')];this.banker=new PIXI.extras.MovieClip(arr);this.banker.x=784;this.banker.y=320;this.banker.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;this.banker.scale.y=this.banker.scale.x;this.addChild(this.banker);arr=[PIXI.Texture.fromFrame(this.pName+'0001.png'),PIXI.Texture.fromFrame(this.pName+'0002.png')];this.player=new PIXI.extras.MovieClip(arr);this.player.x=400;this.player.y=this.banker.y;this.player.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;this.player.scale.y=this.banker.scale.x;this.addChild(this.player);};BaseGameResult.prototype.initialize=function(){this.initBgs();this.player.visible=false;this.banker.visible=false;this.bankerCardVal=new PIXI.Container();var bg=new PIXI.Sprite(this.gameModel.resources['card_val_bg'].texture);this.bankerCardVal.addChild(bg);this.addChild(this.bankerCardVal);var tf=game.GameUtils.createText('0',{fontFamily:"dinbold",fontSize:40,fontStyle:'bold',fill:0xD70300,align:'center'});tf.anchor.x=0.5;tf.anchor.y=0.5;tf.x=bg.width*0.5;tf.y=bg.height*0.5;this.bankerCardVal.x=920;this.bankerCardVal.y=324;this.bankerCardVal.addChild(tf);this.bankerCardVal['tf']=tf;this.playerCardVal=new PIXI.Container();bg=new PIXI.Sprite(this.gameModel.resources['card_val_bg'].texture);this.playerCardVal.addChild(bg);this.addChild(this.playerCardVal);tf=game.GameUtils.createText('0',{fontFamily:"dinbold",fontSize:40,fontStyle:'bold',fill:0x2A8FBD,align:'center'});tf.anchor.x=0.5;tf.anchor.y=0.5;tf.x=bg.width*0.5;tf.y=bg.height*0.5;this.playerCardVal.x=306;this.playerCardVal.y=324;this.playerCardVal.addChild(tf);this.playerCardVal['tf']=tf;this.result1Tf=game.GameUtils.createText('',{fontFamily:"dinbold",fontSize:45,fontStyle:'bold',fill:0xffffff,stroke:0x222222,align:'center',strokeThickness:4});this.result1Tf.x=this.gameModel.GAME_WIDTH*0.5;this.result1Tf.y=360;this.result1Tf.anchor.x=0.5;this.result1Tf.anchor.y=0.5;this.result2Tf=game.GameUtils.createText('',{fontFamily:"dinbold",fontSize:30,fontStyle:'bold',fill:0xffffff,stroke:0x222222,align:'center',strokeThickness:4});this.result2Tf.x=this.gameModel.GAME_WIDTH*0.5;this.result2Tf.y=380+35;this.result2Tf.anchor.x=0.5;this.result2Tf.anchor.y=0.5;this.addChild(this.result1Tf);this.addChild(this.result2Tf);this.reset();};BaseGameResult.prototype.setBankerCard=function(val){if(this.bankerCardVal)
this.bankerCardVal['tf'].text=val.toString();};BaseGameResult.prototype.setPlayerCard=function(val){if(this.playerCardVal)
this.playerCardVal['tf'].text=val.toString();};BaseGameResult.prototype.showResult=function(data){this.reset();var results=data.content.result;var cards=data.content.cards;if(results.charAt(game.BetType.BANKER-1)=='1')
this.banker.gotoAndStop(1);if(results.charAt(game.BetType.PLAYER-1)=='1')
this.player.gotoAndStop(1);var arr=cards.split('#');var bVal;var pVal;pVal=this.getCardVal(arr[0]);this.setPlayerCard(pVal);bVal=this.getCardVal(arr[1]);this.setBankerCard(bVal);if(results.charAt(game.BetType.BANKER-1)=='1')
this.result1Tf.text=game.GameText.BANKER;else if(results.charAt(game.BetType.PLAYER-1)=='1')
this.result1Tf.text=game.GameText.PLAYER;else if(results.charAt(game.BetType.TIE-1)=='1')
this.result1Tf.text=game.GameText.TIE;if(results.charAt(game.BetType.BIG-1)=='1')
this.result2Tf.text=game.GameText.BIG;else if(results.charAt(game.BetType.SMALL-1)=='1')
this.result2Tf.text=game.GameText.SMALL;if(results.charAt(game.BetType.BANKER-1)=='1'){this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.BANKER_WIN_ON);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_point"+bVal);}
else if(results.charAt(game.BetType.PLAYER-1)=='1'){this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.PLAYER_WIN_ON);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_point"+pVal);}
else{this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.TIE_ON);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_point"+bVal);}
if(results.charAt(game.BetType.BANKER_PAIR-1)=='1')
this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.BANKER_PAIRS);if(results.charAt(game.BetType.PLAYER_PAIR-1)=='1')
this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.PLAYER_PAIRS);if(results.charAt(game.BetType.BANKER_N8-1)=='1'||results.charAt(game.BetType.BANKER_N9-1)=='1')
this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.BANKER_NATURAL);if(results.charAt(game.BetType.PLAYER_N8-1)=='1'||results.charAt(game.BetType.PLAYER_N9-1)=='1')
this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.PLAYER_NATURAL);};BaseGameResult.prototype.getCardVal=function(cards){if(!cards)
return 0;var card;var val=0;for(var i=0;i<cards.length/2;i++){card=cards[i*2+1];if(card=='B')
val+=0;else
val+='TJQK'.indexOf(card)>=0?0:(card=='A'?1:parseInt(card));}
val=val%10;return val;};BaseGameResult.prototype.reset=function(){if(this.banker)
this.banker.gotoAndStop(0);if(this.player)
this.player.gotoAndStop(0);if(this.result1Tf)
this.result1Tf.text="";if(this.result2Tf)
this.result2Tf.text="";this.setBankerCard(0);this.setPlayerCard(0);};return BaseGameResult;}(game.GameObject));game.BaseGameResult=BaseGameResult;})(game||(game={}));var game;(function(game){var BaseGameView=(function(_super){__extends(BaseGameView,_super);function BaseGameView(gameModel){var _this=_super.call(this,gameModel)||this;_this.tipIcons=[];_this.initialize();_this.isVodStarted=false;_this.dotCount=0;_this.initMiniTool();return _this;}
BaseGameView.prototype.destructor=function(){this.destroyVod();this.removeChild(this.betInput);game.GlobalVals.betInput=null;if(this.refreshBtn){component.VMouseUtils.off(this.refreshBtn,component.VMouseUtils.MOUSE_UP,this.onRefreshVod,this);}
for(var i=0;i<this.tipIcons.length;i++){var icon=this.tipIcons[i];if(!component.VComponentUtils.isMobile)
component.VMouseUtils.off(icon,component.VMouseUtils.MOUSE_OVER,this.onShowTiInfo,this);else
component.VMouseUtils.off(icon,component.VMouseUtils.MOUSE_UP,this.onShowTiInfo,this);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.off(icon,component.VMouseUtils.MOUSE_OUT,this.onHideTipInfo,this);else
component.VMouseUtils.off(icon,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.onHideTipInfo,this);}
clearTimeout(this.showRefreshBtnId);_super.prototype.destructor.call(this);};BaseGameView.prototype.initialize=function(){this.gameModel.gameView=this;this.initBg();if(DEFAULT_WEBRTC_INDEX<0)
WEBRTC_INDEX=Math.random()>0.5?0:1;else
WEBRTC_INDEX=DEFAULT_WEBRTC_INDEX;this.overlay=new PIXI.Container();this.gameModel.overlay=this.overlay;this.addChild(this.overlay);this.initViewModeControl();var loading=new component.Loading(0.1);this.overlay.addChild(loading);loading.setSize(this.gameModel.GAME_WIDTH,this.gameModel.GAME_HEIGHT);this.gameModel.loading=loading;this.stage=game.GlobalVals.stage;this.mainCon=game.GlobalVals.mainCon;this.betInput=new component.VHtmlInput('',53,28,{fontFamily:"Arial",fontSize:23,fill:'#ffffff'},4);game.GlobalVals.betInput=this.betInput;this.addChild(this.betInput);if(this.gameModel.TABLE_ID>0)
this.createTableNameCon(game.GlobalVals.lastTables);this.initVod();};BaseGameView.prototype.initViewModeControl=function(){this.viewModeControl=new game.ViewModeControl(this.gameModel);this.viewModeControl.initialize(game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].viewModes);this.viewModeControl.setPos(390,4);this.addChild(this.viewModeControl);this.viewModeControl.activeItemWithData(game.GlobalVals.viewMode);this.vodModeControl=new game.ViewModeControl(this.gameModel,game.GameEvent.CHANGE_VOD_MODE);var cmodes=this.gameModel.vodmodes;this.vodModeControl.initialize(cmodes);this.vodModeControl.setPos(390+45,4);this.addChild(this.vodModeControl);this.vodModeControl.activeItemWithData(cmodes[WEBRTC_INDEX]);};BaseGameView.prototype.createTableNameCon=function(infos){this.tableNameCon=new PIXI.Container();this.addChild(this.tableNameCon);var onTableChange=function(target){if(target.data==this.gameModel.TABLE_ID)
return;var btn=game.GlobalVals.main.mainView.tablesView.tableSmallView.getBtn(target.data);var menu=btn['menu'];if(!menu)
return;if(menu.hasActiveItem()){menu.runActiveItem();return;}
else
menu.show();var p=new PIXI.Point(target.x-menu.width-2,target.y);p=this.tableNameCon.toGlobal(p);p=game.GlobalVals.overlay.toLocal(p);menu.x=p.x;menu.y=p.y;if(menu.y>game.GameSettings.CANVAS_HEIGHT-menu.height)
menu.y=game.GameSettings.CANVAS_HEIGHT-menu.height;}.bind(this);var cw=0;var btnW=27;var btnH=btnW*0.7;for(var i=0;i<infos.length;i++){var f0=new PIXI.Graphics();var f1=new PIXI.Graphics();f0.lineStyle(2,game.StyleMng.getStudioColor(game.GameUtils.getStudio(infos[i].data)),1.0);f0.drawRoundedRect(0,0,btnW,btnH,btnH*0.2);f1.lineStyle(2,game.StyleMng.getStudioHighLightColor(game.GameUtils.getStudio(infos[i].data)),1.0);f1.beginFill(game.StyleMng.getStudioHighLightColor(game.GameUtils.getStudio(infos[i].data)),0.7);f1.drawRoundedRect(0,0,btnW,btnH,btnH*0.2);f1.endFill();var tf=component.VComponentUtils.createNormalText(game.GameSettings.TABLE_INFOS[infos[i].data].tableName,btnH*0.7,game.StyleMng.TEXT_COLOR);tf.style.fontStyle='bold';tf.anchor.x=0.5;tf.anchor.y=0.5;tf.x=btnW*0.5;tf.y=btnH*0.5;var item=new component.VButton([f0,f1],onTableChange);item.data=infos[i].data;item.x=i*btnW*1.2;cw+=btnW*1.2;item.addChild(tf);item['tf']=tf;this.tableNameCon.addChild(item);if(infos[i].data==this.gameModel.TABLE_ID){item.setActive(true);}
else
item.setActive(false);}
this.tableNameCon.x=this.gameModel.VOD_X+this.gameModel.VOD_WIDTH-this.tableNameCon.width-5;this.tableNameCon.y=this.gameModel.VOD_Y+5;};BaseGameView.prototype.initBg=function(){this.bg=new PIXI.Sprite(this.gameModel.resources['table_bg_'+game.GameUtils.getColor(this.gameModel.TABLE_ID)].texture);this.addChild(this.bg);};BaseGameView.prototype.initTip=function(){if(this.tipCon)
return;var tipCon=new game.TipCon(this.gameModel);this.tipCon=tipCon;tipCon.x=1115;tipCon.y=412;if(!game.GlobalVals.operatorFlagInfo||game.GlobalVals.operatorFlagInfo.tipStatus==0)
return;this.gameModel.overlay.addChildAt(tipCon,0);};BaseGameView.prototype.initCountDown=function(){this.vodBorder=new PIXI.Graphics();this.addChild(this.vodBorder);this.initTip();this.countdown=new game.CountDown(2,0xE0C955);this.addChild(this.countdown);this.countdown.hide();};BaseGameView.prototype.initMiniTool=function(){this.miniTool=new game.MiniTool(this.gameModel);this.miniTool.x=900;this.addChild(this.miniTool);this.setChildIndex(this.overlay,this.children.length-1);};BaseGameView.prototype.onTableLimit=function(){if(this.gameHUD.gameInfoCon.gameDetailCon['onTableLimit'])
this.gameHUD.gameInfoCon.gameDetailCon['onTableLimit']();};BaseGameView.prototype.failToLoadVod=function(){if(this.refreshBtn)
this.refreshBtn.visible=true;if(this.hLoading)
this.hLoading.visible=false;};BaseGameView.prototype.initVod=function(){clearTimeout(this.showRefreshBtnId);this.showRefreshBtnId=setTimeout(this.failToLoadVod.bind(this),20000);this.vodCanvas=document.getElementById('vodCanvas');this.sizeHandler();var w=40,h=25;var loading=new component.VBufferAnim(w,h,6);this.addChild(loading);this.hLoading=loading;this.hLoading.width=w+1;this.hLoading.height=h+1;this.hLoading.x=this.gameModel.VOD_X+(this.gameModel.VOD_WIDTH-w)*0.5;this.hLoading.y=this.gameModel.VOD_Y+(this.gameModel.VOD_HEIGHT-h)*0.5;this.test=document.getElementById('test');var refreshBtn=new PIXI.Sprite(game.GlobalVals.resourceMng.commonLoader.resources['refreshBtn'].texture);refreshBtn.alpha=0.8;refreshBtn.scale.x=50/refreshBtn.width;refreshBtn.scale.y=refreshBtn.scale.x;refreshBtn.x=this.gameModel.VOD_X+this.gameModel.VOD_WIDTH-55;refreshBtn.y=this.gameModel.VOD_Y+30;component.VMouseUtils.on(refreshBtn,component.VMouseUtils.MOUSE_UP,this.onRefreshVod,this);this.refreshBtn=refreshBtn;this.refreshBtn.buttonMode=true;this.addChild(this.refreshBtn);this.gameModel.toolTip.addToolTip(this.refreshBtn,game.GameText.REFRESH);this.onVodLoadMetaDataBinding=this.onVodLoadMetaData.bind(this);this.createVod();};BaseGameView.prototype.createVod=function(){if(this.video)
this.destroyVod();this.video=game.GlobalVals.getVideoElement();this.video.addEventListener('loadedmetadata',this.onVodLoadMetaDataBinding);if(!game.GameSettings.USE_WEBRTC){game.GlobalVals.messagePopup.showMessage(game.GameText.WEBRTC_WARNING,null,game.GameText.NOTICE);if(Hls.isSupported()&&!component.VComponentUtils.isMobile){if(this.vodCanvas){this.vodContext=this.vodCanvas.getContext('2d');this.vodCanvas.style.position='absolute';}
var hls=new Hls();this.hls=hls;hls.attachMedia(this.video);this.onVodManifestPassedBinding=this.onVodManifestPassed.bind(this);hls.on(Hls.Events.MANIFEST_PARSED,this.onVodManifestPassedBinding);hls.on(Hls.Events.ERROR,function(event,data){if(data.fatal){switch(data.type){case Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover");case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover");default:hls.destroy();break;}}});hls.loadSource("http://54.254.172.189:1935/_H5Test/live_8/playlist.m3u8");}}
else{if(!this.webRTCMng)
this.webRTCMng=new game.WebRTCMng();this.webRTCMng.initialize(this.video);this.webRTCMng.startWs(game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].webRTCAppName,game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].webRTCStreamName);}};BaseGameView.prototype.onRefreshVod=function(){if(!this.webRTCMng)
return;this.hLoading.visible=true;this.refreshBtn.visible=false;clearTimeout(this.showRefreshBtnId);this.showRefreshBtnId=setTimeout(function(){this.refreshBtn.visible=true;}.bind(this),5000);this.createVod();};BaseGameView.prototype.destroyVod=function(){if(this.webRTCMng)
this.webRTCMng.stopPlay();clearTimeout(this.moveVodToBackTimeout);if(this.hls){this.hls.off(Hls.Events.MANIFEST_PARSED,this.onVodManifestPassedBinding);this.hls.destroy();this.hls=null;}
if(this.video){this.video.removeEventListener('loadedmetadata',this.onVodLoadMetaDataBinding);game.GlobalVals.releaseVideoElement(this.video);this.video=null;}};BaseGameView.prototype.onVodManifestPassed=function(){trace("MANIFEST_PARSED --");this.video.play();};BaseGameView.prototype.onVodLoadMetaData=function(){if(this.video){clearTimeout(this.moveVodToBackTimeout);this.moveVodToBackTimeout=setTimeout(function(){this.video.style.zIndex=game.Htmlzindex.VIDEO_INDEX;}.bind(this),1000);}
this.vodInited=true;if(this.hLoading)
this.hLoading.visible=false;this.updateVodView();};BaseGameView.prototype.processVodLoadMediaData=function(){this.sizeHandler();};BaseGameView.prototype.updateVodView=function(){this.processVodLoadMediaData();};BaseGameView.prototype.sizeHandler=function(){if(this.vodBorder){this.vodBorder.clear();this.vodBorder.lineStyle(2,0x2F2F2F);this.vodBorder.drawRect(this.gameModel.VOD_X,this.gameModel.VOD_Y,this.gameModel.VOD_WIDTH,this.gameModel.VOD_HEIGHT);}
if(this.viewModeControl)
this.viewModeControl.sizeHandler();if(this.vodModeControl)
this.vodModeControl.sizeHandler();this.updateVodSize();};BaseGameView.prototype.updateVodSize=function(){if(!this.video||!this.vodInited||!this.video.videoHeight)
return;var sc=gameScale;var vx=gameOrigin.x+gameScale*this.gameModel.VOD_X;var vy=gameOrigin.y+gameScale*this.gameModel.VOD_Y;var vw=gameScale*this.gameModel.VOD_WIDTH;var vh=gameScale*this.gameModel.VOD_HEIGHT;var pframe=game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID]?game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].pframe:null;if(!pframe)
pframe={x:0,y:0,w:1,h:1};if(!pframe.h)
pframe.h=pframe.w;var vframe={x:this.video.videoWidth*pframe.x,y:this.video.videoHeight*pframe.y,w:this.video.videoWidth*pframe.w,h:this.video.videoHeight*pframe.h};var sx=vw/vframe.w;var sy=vh/vframe.h;this.video.width=this.video.videoWidth;this.video.height=this.video.videoHeight;this.video.style.width=this.video.videoWidth*sx+'px';this.video.style.height=this.video.videoHeight*sy+'px';this.video.style.objectFit="fill";this.video.style.left=(vx-vframe.x*sx)+'px';this.video.style.top=(vy-vframe.y*sy)+'px';vframe.x*=sx;vframe.w*=sx;vframe.y*=sy;vframe.h*=sy;this.video.style.clipPath='url("#vodPolygon")';document.getElementById("vodPoints").setAttribute('points',vframe.x+' '+vframe.y+','
+(vframe.x+vframe.w)+' '+vframe.y+','
+(vframe.x+vframe.w)+' '+(vframe.y+vframe.h)+','
+vframe.x+' '+(vframe.y+vframe.h));this.video.style.webkitClipPath=vframe.x+'px '+vframe.y+'px,'
+(vframe.x+vframe.w)+'px '+vframe.y+'px,'
+(vframe.x+vframe.w)+'px '+(vframe.y+vframe.h)+'px,'
+vframe.x+'px '+(vframe.y+vframe.h)+'px';};BaseGameView.prototype.update=function(){if(this.vodCanvas){this.vodContext.drawImage(this.video,0,0);}
this.gameModel.loading.update();};BaseGameView.prototype.setBalance=function(value,animated){if(animated===void 0){animated=false;}
this.gameHUD.setBalance(value,game.GlobalVals.userInfo.currency,animated);};BaseGameView.prototype.showStatus=function(msg,autoHide,showImmediately){if(autoHide===void 0){autoHide=true;}
if(showImmediately===void 0){showImmediately=false;}
this.gameHUD.showStatus(msg,autoHide,showImmediately);};BaseGameView.prototype.clearBets=function(){this.betArea.clearBets();this.setBalance(game.GlobalVals.userInfo.getBalance()-this.betArea.getPendingAmount());};BaseGameView.prototype.undoBet=function(){this.betArea.undoBet();this.setBalance(game.GlobalVals.userInfo.getBalance()-this.betArea.getPendingAmount());};BaseGameView.prototype.confirmBet=function(){if(!this.betArea.checkBetValid())
return false;var cats=this.betArea.getCats();var amounts=this.betArea.getAmounts();if(cats.length&&amounts.length){this.betControl.dissable();this.betArea.dissable();var betReq=new game.netdata.BetRequest(this.gameModel.TABLE_ID,cats,amounts,new Date().getTime().toString(),game.GameSettings.APP[game.GlobalVals.viewMode],this.gameModel.game.getLastRoundId());game.NetUtils.sendWS(betReq);this.setBalance(game.GlobalVals.userInfo.getBalance()-this.betArea.getPendingAmount());return true;}
return false;};BaseGameView.prototype.rebet=function(){this.betArea.rebet();this.setBalance(game.GlobalVals.userInfo.getBalance()-this.betArea.getPendingAmount());};BaseGameView.prototype.betChange=function(){this.setBalance(game.GlobalVals.userInfo.getBalance()-this.betArea.getPendingAmount());this.gameHUD.gameInfoCon.betInfo.pendingTf.text=component.VComponentUtils.getNumInFormat(this.betArea.getPendingAmount());};BaseGameView.prototype.onAuthSuccess=function(){this.setBalance(game.GlobalVals.userInfo.getBalance());this.gameHUD.gameInfoCon.nickNameTf.text=game.GlobalVals.userInfo.nickname;};BaseGameView.prototype.activeSuperHand=function(isSupper){};BaseGameView.prototype.onEnterGame=function(){this.trendMng.onEnterGame();};BaseGameView.prototype.registerTip=function(px,py,pw,ph,popup,showPos){if(showPos===void 0){showPos=null;}
var icon=new PIXI.Graphics();icon.beginFill(0xff0000,0);icon.drawRect(0,0,pw,ph);icon.x=px;icon.y=py;this.addChild(icon);icon.buttonMode=true;icon['popup']=popup;icon['showPos']=showPos;this.gameModel.overlay.addChild(popup);popup.hide();this.tipIcons.push(icon);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_OVER,this.onShowTiInfo,this);else
component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_UP,this.onShowTiInfo,this);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_OUT,this.onHideTipInfo,this);else
component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.onHideTipInfo,this);};BaseGameView.prototype.onShowTiInfo=function(e){var icon=e.target;var popup=icon['popup'];popup.show();if(icon['showPos']){popup.x=icon['showPos'].x;popup.y=icon['showPos'].y;}
else{popup.x=icon.x-popup.width/2;if(popup.x>game.GameSettings.CANVAS_WIDTH-popup.width-game.GameSettings.TABLE_SMALL_VIEW_WIDTH-20)
popup.x=game.GameSettings.CANVAS_WIDTH-popup.width-game.GameSettings.TABLE_SMALL_VIEW_WIDTH-20;if(popup.x<0)
popup.x=0;popup.y=icon.y-popup.height-10;if(popup.y<0)
popup.y=0;}};BaseGameView.prototype.onHideTipInfo=function(e){var icon=e.target;var popup=icon['popup'];popup.hide();};return BaseGameView;}(game.GameObject));game.BaseGameView=BaseGameView;})(game||(game={}));var game;(function(game){var BaseGameViewGroup1=(function(_super){__extends(BaseGameViewGroup1,_super);function BaseGameViewGroup1(gameModel){return _super.call(this,gameModel)||this;}
BaseGameViewGroup1.prototype.initTrends=function(){this.trendMngs=[];this.trendMap={};var trendMap=this.trendMap;if(game.GlobalVals.viewMode==game.ViewMode.MODE_2D||game.GlobalVals.viewMode==game.ViewMode.MODE_3D){trendMap[game.GameID.BACCARAT_CINEMATIC]=['bacTrendMng',baccarat.TrendMng];trendMap[game.GameID.BACCARAT]=['bacTrendMng',baccarat.TrendMng];trendMap[game.GameID.BACCARAT_NONCOMMISSION]=['bacTrendMng',baccarat.TrendMng];trendMap[game.GameID.BACCARAT_SUPER98]=['bacTrendMng',baccarat.TrendMng];trendMap[game.GameID.SQUEEZE_BACCARAT]=['bacTrendMng',baccarat.TrendMng];trendMap[game.GameID.SEVEN_UP]=['sevenTrendMng',seven_up.TrendMng];trendMap[game.GameID.SQUEEZE_BACCARAT_NONCOMMISSION]=['bacTrendMng',baccarat.TrendMng];trendMap[game.GameID.LUCKY_BACCARAT]=['luckTrendMng',lucky_baccarat.TrendMng];trendMap[game.GameID.DRAGON_TIGER]=['draTrendMng',dragon_tiger.TrendMng];trendMap[game.GameID.FABULOUS]=['fabTrendMng',fabulous.TrendMng];trendMap[game.GameID.SUPER_HI_LO]=['hiloTrendMng',super_hi_lo.TrendMng];trendMap[game.GameID.SUPER_3PICTURES]=['s3pTrendMng',super_3pictures.TrendMng];}
else{trendMap[game.GameID.BACCARAT_CINEMATIC]=['bacTrendMng',baccarat_7s.TrendMng];trendMap[game.GameID.BACCARAT]=['bacTrendMng',baccarat_7s.TrendMng];trendMap[game.GameID.BACCARAT_NONCOMMISSION]=['bacTrendMng',baccarat_7s.TrendMng];trendMap[game.GameID.BACCARAT_SUPER98]=['bacTrendMng',baccarat_7s.TrendMng];trendMap[game.GameID.SQUEEZE_BACCARAT]=['bacTrendMng',baccarat_7s.TrendMng];trendMap[game.GameID.SQUEEZE_BACCARAT_NONCOMMISSION]=['bacTrendMng',baccarat_7s.TrendMng];trendMap[game.GameID.SEVEN_UP]=['sevenTrendMng',seven_up_7s.TrendMng];trendMap[game.GameID.DRAGON_TIGER]=['draTrendMng',dragon_tiger_7s.TrendMng];trendMap[game.GameID.FABULOUS]=['fabTrendMng',fabulous_7s.TrendMng];}
switch(game.GlobalVals.viewMode){case game.ViewMode.MODE_2D:for(var i in trendMap){if(game.GameSettings.checkViewModeAvailable(parseInt(i),game.ViewMode.MODE_2D)&&!this[trendMap[i][0]]){this[trendMap[i][0]]=new trendMap[i][1](this.gameModel);this.addChild(this[trendMap[i][0]]);this.trendMngs.push(this[trendMap[i][0]]);}}
break;case game.ViewMode.MODE_3D:for(var i in trendMap){if(game.GameSettings.checkViewModeAvailable(parseInt(i),game.ViewMode.MODE_3D)&&!this[trendMap[i][0]]){this[trendMap[i][0]]=new trendMap[i][1](this.gameModel);this.addChild(this[trendMap[i][0]]);this.trendMngs.push(this[trendMap[i][0]]);}}
break;case game.ViewMode.MODE_7S:for(var i in trendMap){if(game.GameSettings.checkViewModeAvailable(parseInt(i),game.ViewMode.MODE_7S)&&!this[trendMap[i][0]]){this[trendMap[i][0]]=new trendMap[i][1](this.gameModel);this.addChild(this[trendMap[i][0]]);this.trendMngs.push(this[trendMap[i][0]]);}}
break;}
this.hideAll();this.trendMng=this[trendMap[this.gameModel.GAME_ID][0]];this.trendMng.setTrendsVisible(true);};BaseGameViewGroup1.prototype.onTableBtn=function(e){var btn=e.target;var trend;var activeGameId=game.GameSettings.TABLE_INFOS[btn['info'].id].gameId;if(!this.trendMap[activeGameId])
return;trend=this[this.trendMap[activeGameId][0]];if(!trend)
return;if(game.GameUtils.checkSameGroup(btn['info'].id,this.gameModel.TABLE_ID)||btn['info'].id==this.gameModel.TABLE_ID)
trend.normalTrend.removeEnterBtn();else
trend.normalTrend.initEnterBtn(btn['info'].id);this.hideAll();if(this.trendMng&&this.trendMng!=trend)
this.trendMng.reset();this.trendMng=trend;this.trendMng.setTrendsVisible(true);this.trendMng['superOnTableBtn']({target:this.trendMng.getTableBtnWithId(btn['info'].id)});};BaseGameViewGroup1.prototype.hideAll=function(){for(var i=0;i<this.trendMngs.length;i++)
this.trendMngs[i].setTrendsVisible(false);};BaseGameViewGroup1.prototype.onChangeColor=function(e){for(var i=0;i<this.trendMngs.length;i++){var trendMng=this.trendMngs[i];if(trendMng==e.target.parent)
continue;trendMng.onChangeColorBtn(null);}};BaseGameViewGroup1.prototype.onEnterGame=function(){for(var i=0;i<this.trendMngs.length;i++){var trendMng=this.trendMngs[i];if(!trendMng)
continue;if(game.GlobalVals.viewMode==game.ViewMode.MODE_7S&&this.gameHUD.gameInfoCon.gameDetailCon['trendDetail'])
this.gameHUD.gameInfoCon.gameDetailCon['trendDetail'].addTrends(trendMng);trendMng.onEnterGame();component.VMouseUtils.on(trendMng.changeColorBtn,component.VMouseUtils.MOUSE_UP,this.onChangeColor,this);for(var j=0;j<trendMng.tableBtns.length;j++)
component.VMouseUtils.on(trendMng.tableBtns[j],component.VMouseUtils.MOUSE_DOWN,this.onTableBtn,this);}};return BaseGameViewGroup1;}(game.BaseGameView));game.BaseGameViewGroup1=BaseGameViewGroup1;})(game||(game={}));var game;(function(game){var BaseSeatControl=(function(_super){__extends(BaseSeatControl,_super);function BaseSeatControl(gameModel){var _this=_super.call(this,gameModel)||this;_this.onArCompleteBinding=_this.onArComplete.bind(_this);_this.initialize();return _this;}
BaseSeatControl.prototype.destructor=function(){TweenMax.killTweensOf(this.ar);for(var i=0;i<this.seats.length;i++){var seat=this.seats[i];component.VMouseUtils.off(seat.bg,component.VMouseUtils.MOUSE_OVER,this.onSeatOver,this);component.VMouseUtils.off(seat.bg,component.VMouseUtils.MOUSE_OUT,this.onSeatOut,this);component.VMouseUtils.off(seat.bg,component.VMouseUtils.MOUSE_UP,this.onSeatUp,this);}
_super.prototype.destructor.call(this);};BaseSeatControl.prototype.lock=function(){this.lockSeat=true;for(var i=0;i<this.seats.length;i++)
this.seats[i].bg.buttonMode=false;};BaseSeatControl.prototype.unlock=function(){this.lockSeat=false;for(var i=0;i<this.seats.length;i++)
this.seats[i].bg.buttonMode=true;};BaseSeatControl.prototype.onJoinRoomSuccess=function(data){var seat;for(var i=0;i<this.seats.length;i++){seat=this.seats[i];seat.setCurrentUser(false);}
this.getSeat(this.gameModel.SEAT_ID).setCurrentUser(true);};BaseSeatControl.prototype.clear=function(){var seat;for(var i=0;i<this.seats.length;i++){seat=this.seats[i];seat.leaveSeat();}};BaseSeatControl.prototype.onRoomBetInfo=function(data){this.clear();var seat;var seatId;for(var i=0;i<data.content.nicknames.length;i++){seatId=data.content.nicknames[i][0];seat=this.getSeat(seatId);seat.enterSeat(data.content.nicknames[i][1],data.content.avatars[i][1],data.content.winlose[i][1][0],data.content.winlose[i][1][1],this.gameModel.SEAT_ID==seatId);}};BaseSeatControl.prototype.initialize=function(playerInfoW,playerInfoH){if(playerInfoW===void 0){playerInfoW=120;}
if(playerInfoH===void 0){playerInfoH=40;}
this.seats=[];var seat;for(var i=1;i<=8;i++){if(i==4)
continue;seat=new game.SeatCon(this.gameModel).initialize(i,playerInfoW,playerInfoH);component.VMouseUtils.on(seat.bg,component.VMouseUtils.MOUSE_OVER,this.onSeatOver,this);component.VMouseUtils.on(seat.bg,component.VMouseUtils.MOUSE_OUT,this.onSeatOut,this);component.VMouseUtils.on(seat.bg,component.VMouseUtils.MOUSE_UP,this.onSeatUp,this);component.VMouseUtils.on(seat.playerCon,component.VMouseUtils.MOUSE_UP,this.onPlayerConUp,this);this.addChild(seat);this.seats.push(seat);}
this.arrow=new PIXI.Container();this.addChild(this.arrow);var ar=new PIXI.Sprite(PIXI.Texture.fromFrame("seat_arrow.png"));ar.anchor.x=0.5;ar.anchor.y=1;this.arrow.addChild(ar);this.ar=ar;var avatarContainer=new game.AvatarContainer(this.gameModel);this.avatarContainer=avatarContainer;this.gameModel.overlay.addChildAt(avatarContainer,0);avatarContainer.x=(this.gameModel.GAME_WIDTH-avatarContainer.viewW)*0.5;avatarContainer.y=518;};BaseSeatControl.prototype.onArComplete=function(){this.ar.y=-40;TweenMax.to(this.ar,1,{y:0,onComplete:this.onArCompleteBinding});};BaseSeatControl.prototype.onSeatOver=function(e){if(this.lockSeat)
return;var seat=e.target.parent;if(seat.status!=0)
return;this.arrow.visible=true;this.arrow.x=seat.x+seat.bg.width*0.5;this.arrow.y=seat.y-5;TweenMax.killTweensOf(this.ar);this.ar.y=-40;TweenMax.to(this.ar,1,{y:0,onComplete:this.onArCompleteBinding});};BaseSeatControl.prototype.onSeatOut=function(e){var seat=e.target.parent;this.arrow.visible=false;};BaseSeatControl.prototype.onSeatUp=function(e){var seat=e.target.parent;if(this.lockSeat||seat.status!=0)
return;this.lockSeat=true;setTimeout(function(){this.lockSeat=false;}.bind(this),500);this.gameModel.notify(game.GameEvent.CHANGE_SEAT,seat.getSeatId());};BaseSeatControl.prototype.updateView=function(settings){var seats=this.seats;for(var i=0;i<seats.length;i++){seats[i].x=settings[i].x;seats[i].y=settings[i].y;}};BaseSeatControl.prototype.onPlayerConUp=function(e){var seat=e.target.parent;if(!seat.isCurrentUser)
return;this.avatarContainer.show();};BaseSeatControl.prototype.getSeat=function(seatId){return this.seats[seatId>4?seatId-2:seatId-1];};BaseSeatControl.prototype.enterSeat=function(seatId,username,avatarId,win,lose){var seat=this.getSeat(seatId);seat.enterSeat(username,avatarId,win,lose,this.gameModel.SEAT_ID==seatId);};BaseSeatControl.prototype.leaveSeat=function(seatId){var seat=this.seats[seatId>4?seatId-2:seatId-1];seat.leaveSeat();};return BaseSeatControl;}(game.GameObject));game.BaseSeatControl=BaseSeatControl;})(game||(game={}));var game;(function(game){var BaseTrendMng=(function(_super){__extends(BaseTrendMng,_super);function BaseTrendMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.redraw=0;_this.pearlViewInd=0;_this.pearlViewlBtns=[];_this.activeTableId=0;_this.pearlViewlTypes=[game.TrendType.NORMAL,game.TrendType.BIG_SMALL,game.TrendType.NATURAL];_this.tableBtnMap={};_this.trendDataMap=game.GlobalVals.trendDataMap;_this.isDark=false;_this.initView();_this.gameModel.dispatcher.addEventListener(game.GameEvent.GAME_UPDATE,_this.update,_this);return _this;}
BaseTrendMng.prototype.destructor=function(){this.gameModel.dispatcher.removeEventListener(game.GameEvent.GAME_UPDATE,this.update,this);component.VMouseUtils.off(this.predict.player,component.VMouseUtils.MOUSE_DOWN,this.onPredict,this);component.VMouseUtils.off(this.predict.banker,component.VMouseUtils.MOUSE_DOWN,this.onPredict,this);component.VMouseUtils.off(this.normalTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.off(this.bigEyeTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.off(this.smallTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.off(this.cockRoachTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.off(this.changeColorBtn,component.VMouseUtils.MOUSE_DOWN,this.onChangeColorBtn,this);if(this.trendTypeBtnCon)
for(var i=0;i<this.trendTypeBtnCon.children.length;i++){component.VMouseUtils.off(this.trendTypeBtnCon.getChildAt(i),component.VMouseUtils.MOUSE_DOWN,this.onTrendTypeBtn,this);}
component.VMouseUtils.off(this.pearViewBtn,component.VMouseUtils.MOUSE_DOWN,this.onPearViewBtn,this);_super.prototype.destructor.call(this);};BaseTrendMng.prototype.update=function(){if(this.redraw==1){this.redraw=0;this.doInitTrends();}
if(this.redraw>0)
this.redraw--;};BaseTrendMng.prototype.initNormmalContainer=function(){this.normalTrend=new game.TrendContainer(this.gameModel,game.TrendIcon,765,92,6,game.GameText.BIG_ROAD,true);};BaseTrendMng.prototype.initPearlRoad=function(){this.pearlRoadTrend=new game.PearlRoad(this.gameModel,game.PearlRoadIcon,300,92,6,game.GameText.PEARL_ROAD.toUpperCase(),true);};BaseTrendMng.prototype.initBigEyeTrend=function(){this.bigEyeTrend=new game.TrendRoad(this.gameModel,game.BigEyeIcon,285,46,6,game.GameText.BIG_EYE_ROAD.toUpperCase());};BaseTrendMng.prototype.initSmallTrend=function(){this.smallTrend=new game.TrendRoad(this.gameModel,game.SmallRoadIcon,285,46,6,game.GameText.SMALL_ROAD.toUpperCase());};BaseTrendMng.prototype.initCockRoachTrend=function(){this.cockRoachTrend=new game.TrendRoad(this.gameModel,game.CockRoachIcon,285,46,6,game.GameText.COCK_ROACH_ROAD.toUpperCase());};BaseTrendMng.prototype.initIconCount=function(){this.iconCount=new game.IconCount(this.gameModel);};BaseTrendMng.prototype.initPredict=function(){this.predict=new game.Predict(this.gameModel);};BaseTrendMng.prototype.initTrendInfoPanel=function(){this.trendInfoPanel=new game.TrendInfoPanel(this.gameModel);};BaseTrendMng.prototype.setTrendsVisible=function(visi){this.visible=visi;this.normalTrend.visible=visi;this.bigEyeTrend.visible=visi;this.smallTrend.visible=visi;this.cockRoachTrend.visible=visi;this.pearlRoadTrend.visible=visi;};BaseTrendMng.prototype.initView=function(){this.bg=new PIXI.Graphics();this.bg.beginFill(0x26231E);this.bg.drawRect(0,0,this.gameModel.GAME_WIDTH,151);this.bg.endFill();this.bg.y=617;this.addChild(this.bg);var maxView=new PIXI.Rectangle(366,622,859,140);this.initNormmalContainer();this.normalTrend.x=maxView.x;this.normalTrend.y=maxView.y;this.addChild(this.normalTrend);this.initBigEyeTrend();this.bigEyeTrend.x=maxView.x;this.bigEyeTrend.y=716;this.addChild(this.bigEyeTrend);this.initSmallTrend();this.smallTrend.x=653;this.smallTrend.y=this.bigEyeTrend.y;this.addChild(this.smallTrend);this.tableBtnCon=new PIXI.Container();this.tableBtnCon.x=344;this.tableBtnCon.y=622;this.addChild(this.tableBtnCon);this.initCockRoachTrend();this.cockRoachTrend.x=940;this.cockRoachTrend.y=this.bigEyeTrend.y;this.addChild(this.cockRoachTrend);this.initPearlRoad();this.pearlRoadTrend.x=25;this.pearlRoadTrend.y=maxView.y;this.addChild(this.pearlRoadTrend);for(var i=0;i<305;i++){this.gameModel.vObjectPool.release(new game.SmallRoadIcon(),game.SmallRoadIcon);this.gameModel.vObjectPool.release(new game.CockRoachIcon(),game.CockRoachIcon);this.gameModel.vObjectPool.release(new game.PearlRoadIcon(),game.PearlRoadIcon);}
for(var i=0;i<605;i++){this.gameModel.vObjectPool.release(new game.TrendIcon(),game.TrendIcon);}
this.initIconCount();this.iconCount.x=25+8;this.iconCount.y=735+8;this.addChild(this.iconCount);this.initPredict();this.predict.x=1133;this.predict.y=maxView.y;this.addChild(this.predict);this.predictBankerObj=new game.netdata.TrendsItem().setData('100000000000');this.predictPlayerObj=new game.netdata.TrendsItem().setData('010000000000');component.VMouseUtils.on(this.predict.player,component.VMouseUtils.MOUSE_DOWN,this.onPredict,this);component.VMouseUtils.on(this.predict.banker,component.VMouseUtils.MOUSE_DOWN,this.onPredict,this);this.maxTrendIndex=this.children.length-1;this.initPearViewBtns();if(this.pearlViewlTypes.length<=1){this.pearViewBtn.visible=false;this.pearViewBtn.buttonMode=false;}
this.initChangeColorBtn();this.initSelectTrendBtns();this.initTrendInfoPanel();this.trendInfoPanel.hide();this.gameModel.overlay.addChild(this.trendInfoPanel);this.gameModel.dispatcher.addEventListener(game.GameEvent.GAME_TREND_INFO,this.onTrendInfo,this);this.gameModel.dispatcher.addEventListener(game.GameEvent.GAME_HIDE_TREND_INFO,this.onHideTrendInfo,this);component.VMouseUtils.on(this.normalTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.on(this.bigEyeTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.on(this.smallTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.on(this.cockRoachTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);};BaseTrendMng.prototype.initSelectTrendBtns=function(trendTypes,txts){if(trendTypes===void 0){trendTypes=null;}
if(txts===void 0){txts=null;}
if(!trendTypes)
return;this.trendTypeBtnCon=new PIXI.Container();this.addChild(this.trendTypeBtnCon);var btn;for(var i=0;i<trendTypes.length;i++){btn=new PIXI.Container();btn.y=i*15;var bg=new PIXI.Graphics();bg.alpha=0;bg.beginFill(0x333333);bg.drawRect(0,0,22,15);btn['bg']=bg;btn.addChild(btn['bg']);btn['type']=trendTypes[i];btn['tf']=game.GameUtils.createText(txts[i],{fontFamily:"Arial",fontSize:10,fontStyle:'bold',fill:0x777777,align:'center'});if(i==0){this.activeTrendBtn=btn;btn['tf'].style.fill=0xffffff;}
btn['tf'].x=2;btn['tf'].y=2;btn.addChild(btn['tf']);btn.y=17*i;this.trendTypeBtnCon.addChild(btn);btn.buttonMode=true;component.VMouseUtils.on(btn,component.VMouseUtils.MOUSE_DOWN,this.onTrendTypeBtn,this);}};BaseTrendMng.prototype.onEnterGame=function(){this.initTableBtns();};BaseTrendMng.prototype.onTrendTypeBtn=function(e){if(this.activeTrendBtn)
this.activeTrendBtn['tf'].style.fill=0x777777;this.activeTrendBtn=e.target;this.activeTrendBtn['tf'].style.fill=0xffffff;this.normalTrend.clear();this.normalTrend.setType(this.activeTrendBtn.type);this.normalTrend.updateTrends(this.trendDataMap[this.activeTableId].trendArr);};BaseTrendMng.prototype.initPearViewBtns=function(){var pearViewBtn=new PIXI.Graphics();pearViewBtn.beginFill(0xBBB2A3,0);pearViewBtn.drawRect(0,0,20,20);pearViewBtn.endFill();pearViewBtn.x=4;pearViewBtn.y=623;pearViewBtn.buttonMode=true;this.addChild(pearViewBtn);this.pearViewBtn=pearViewBtn;var btn;for(var i=0;i<this.pearlViewlTypes.length;i++){btn=new PIXI.Graphics();this.drawPearViewBtn(btn,false);this.pearlViewlBtns.push(btn);pearViewBtn.addChild(btn);}
this.gameModel.toolTip.addToolTip(pearViewBtn,game.GameText.TREND_CHANGE_ROAD_TOOLTIP);this.drawPearViewBtn(this.pearlViewlBtns[0],true);if(this.pearlViewlBtns[1])
this.pearlViewlBtns[1].x=10;if(this.pearlViewlBtns[2])
this.pearlViewlBtns[2].y=10;component.VMouseUtils.on(pearViewBtn,component.VMouseUtils.MOUSE_DOWN,this.onPearViewBtn,this);};BaseTrendMng.prototype.initChangeColorBtn=function(){var size=12;var changeColorBtn=new PIXI.Graphics();this.changeColorBtn=changeColorBtn;changeColorBtn.lineStyle(1,0x555555);changeColorBtn.beginFill(0xBBB2A3);changeColorBtn.drawRect(0,0,size,size);changeColorBtn.endFill();changeColorBtn.moveTo(0,size*0.5);changeColorBtn.lineTo(size,size*0.5);changeColorBtn.moveTo(size*0.5,0);changeColorBtn.lineTo(size*0.5,size);this.changeColorBtn.x=7;this.changeColorBtn.y=749;changeColorBtn.buttonMode=true;this.gameModel.toolTip.addToolTip(changeColorBtn,game.GameText.CHANGE_COLOR);this.addChild(changeColorBtn);component.VMouseUtils.on(changeColorBtn,component.VMouseUtils.MOUSE_DOWN,this.onChangeColorBtn,this);};BaseTrendMng.prototype.onPredict=function(e){var item=e.target==this.predict.banker?this.predictBankerObj:this.predictPlayerObj;this.addTrendGame(this.activeTableId,item,true);};BaseTrendMng.prototype.onChangeColorBtn=function(e){this.isDark=!this.isDark;this.normalTrend.drawBg(this.isDark);this.smallTrend.drawBg(this.isDark);this.bigEyeTrend.drawBg(this.isDark);this.cockRoachTrend.drawBg(this.isDark);this.pearlRoadTrend.drawBg(this.isDark);};BaseTrendMng.prototype.initTableBtns=function(){if(this.tableBtns&&this.tableBtns.length)
throw new Error("Dupplicate init trend table btns!");this.tableConfigs=[];this.tableBtns=[];var studio;var tableIds;tableIds=game.GameUtils.getTableForGame([game.GameID.FABULOUS,game.GameID.BACCARAT,game.GameID.BACCARAT_NONCOMMISSION,game.GameID.BACCARAT_SUPER98,game.GameID.BACCARAT_CINEMATIC,game.GameID.DRAGON_TIGER,game.GameID.SUPER_HI_LO,game.GameID.SUPER_3PICTURES,game.GameID.SUPER_FANTAN]);tableIds=game.GameUtils.getTableForGame([game.GameID.SQUEEZE_BACCARAT,game.GameID.SEVEN_UP,game.GameID.SQUEEZE_BACCARAT_NONCOMMISSION,game.GameID.LUCKY_BACCARAT]).concat(tableIds);var ids=[];var pushedMap={};for(var i=0;i<tableIds.length;i++){if(game.netdata.ShowLobbyResponse.getDisplayStatus(game.GlobalVals.lobbyResponse,tableIds[i])!=1)
continue;if(!game.netdata.LimitsResponse.getLimitContent(game.GlobalVals.limitsResponse,tableIds[i]).limits.length)
continue;var activeGroup=game.GameUtils.getTableGroup(tableIds[i]);if(activeGroup){if(pushedMap[core.VUtils.getObjKey(activeGroup)])
continue;pushedMap[core.VUtils.getObjKey(activeGroup)]=true;}
ids.push(tableIds[i]);}
var maxBtns=20;var arr=[];var studioOrder=game.GameSettings.CONFIG.studioLobbyOrder;for(var i=0;i<studioOrder.length;i++)
arr[studioOrder[i]]=[];var maxlen=0;for(i=0;i<ids.length;i++){var studio=game.GameSettings.TABLE_INFOS[ids[i]].studio;arr[studio].push(ids[i]);if(maxlen<arr[studio].length)
maxlen=arr[studio].length;}
var activeStudio=game.GameUtils.getStudio(this.gameModel.TABLE_ID);var ids2=arr[activeStudio];for(i=0;i<studioOrder.length;i++){studio=studioOrder[i];if(studio==activeStudio)
continue;ids2=ids2.concat(arr[studio]);}
ids=ids2.slice(0,maxBtns);for(i=0;i<ids.length;i++)
this.tableConfigs.push(ids[i]?game.GameSettings.TABLE_INFOS[ids[i]]:null);var btn;var row=maxBtns/2;for(var i=0;i<this.tableConfigs.length;i++){if(!this.tableConfigs[i])
continue;btn=new PIXI.Container();btn['info']=this.tableConfigs[i];btn.x=Math.floor(i/row)*19;btn.y=Math.floor(i%row)*15;if(game.GameUtils.checkSameGroup(this.gameModel.TABLE_ID,this.tableConfigs[i].id))
this.activeTableBtn=btn;else if(this.gameModel.TABLE_ID==this.tableConfigs[i].id)
this.activeTableBtn=btn;btn['bg']=new PIXI.Graphics();btn.addChild(btn['bg']);btn['tf']=game.GameUtils.createText('',{fontFamily:"Arial",fontSize:9,fontStyle:'bold',fill:0xffffff,align:'center'});btn['tf'].anchor.x=0.5;btn['tf'].anchor.y=0.5;btn['tf'].text=this.tableConfigs[i].tableName;btn.addChild(btn['tf']);this.drawTableBtn(btn,false);this.tableBtnCon.addChild(btn);btn.buttonMode=true;this.tableBtnMap[this.tableConfigs[i].id]=btn;this.gameModel.toolTip.addToolTip(btn,game.GameText.TREND_CHANGE_TABLE_TOOLTIP.replace('{0}',this.tableConfigs[i].hint));component.VMouseUtils.on(btn,component.VMouseUtils.MOUSE_DOWN,this.onTableBtn,this);btn['tf'].interactive=false;this.tableBtns.push(btn);}
this.setActiveTableId(this.activeTableBtn['info'].id);this.drawTableBtn(this.activeTableBtn,true);};BaseTrendMng.prototype.setActiveTableId=function(id){this.activeTableId=id;};BaseTrendMng.prototype.getTableBtnWithId=function(tableId){for(var i=0;i<this.tableBtns.length;i++){if(this.tableBtns[i]['info'].id==tableId)
return this.tableBtns[i];}
return null;};BaseTrendMng.prototype.onTableBtn=function(e){var btn=e.target;if(this.activeTableBtn==btn)
return;this.setActiveTableBtn(btn);this.setActiveTableId(this.activeTableBtn['info'].id);this.initTrends();};BaseTrendMng.prototype.setActiveTableBtn=function(btn){if(this.activeTableBtn)
this.drawTableBtn(this.activeTableBtn,false);this.activeTableBtn=btn;this.drawTableBtn(this.activeTableBtn,true);};BaseTrendMng.prototype.reset=function(){if(this.activeTableBtn)
this.drawTableBtn(this.activeTableBtn,false);this.activeTableBtn=null;this.clear();};BaseTrendMng.prototype.clear=function(){this.normalTrend.clear();this.smallTrend.clear();this.bigEyeTrend.clear();this.cockRoachTrend.clear();this.pearlRoadTrend.clear();this.iconCount.clear();};BaseTrendMng.prototype.getActiveTrendArray=function(){return this.trendDataMap[this.activeTableId].trendArr;};BaseTrendMng.prototype.getActiveMainBoard=function(){return this.trendDataMap[this.activeTableId].mainBoard;};BaseTrendMng.prototype.drawTableBtn=function(btn,active){var c=game.GameUtils.getStudioColor(game.GameUtils.getStudio(btn['info'].id));btn['bg'].clear();if(active)
btn['bg'].lineStyle(1,0xffffff);btn['bg'].beginFill(c);btn['bg'].drawRect(0,0,17,14);btn['bg'].endFill();btn['tf'].x=btn['bg'].width*0.5;btn['tf'].y=btn['bg'].height*0.5;};BaseTrendMng.prototype.drawPearViewBtn=function(btn,active){var c=active?0xffffff:0xBBB2A3;btn.clear();btn.beginFill(c);btn.drawRect(0,0,7,7);btn.endFill();};BaseTrendMng.prototype.onPearViewBtn=function(){this.drawPearViewBtn(this.pearlViewlBtns[this.pearlViewInd],false);this.pearlViewInd++;if(this.pearlViewInd==this.pearlViewlTypes.length)
this.pearlViewInd=0;this.pearlRoadTrend.setType(this.pearlViewlTypes[this.pearlViewInd]);this.pearlRoadTrend.clear();this.pearlRoadTrend.updateTrends(this.getActiveTrendArray());this.drawPearViewBtn(this.pearlViewlBtns[this.pearlViewInd],true);};BaseTrendMng.prototype.onExpandBtn=function(e){var trendCon=e.target.parent;this.setChildIndex(trendCon,this.maxTrendIndex);};BaseTrendMng.prototype.onTrendInfo=function(e){if(!this.visible)
return;this.trendInfoPanel.trendIcon=e.data;this.trendInfoPanel.show(e.data);};BaseTrendMng.prototype.onHideTrendInfo=function(e){if(this.trendInfoPanel.trendIcon==e.data)
this.trendInfoPanel.hide();};BaseTrendMng.prototype.initTrends=function(){this.clear();this.redraw=2;};BaseTrendMng.prototype.getBigBoardName=function(){return game.GameText.BIG_ROAD;};BaseTrendMng.prototype.doInitTrends=function(){if(this.activeTableId){this.normalTrend.nameTf.text=this.getBigBoardName();for(var i in this.trendDataMap){this.updateTrends(parseInt(i),this.trendDataMap[i].trendArr);}}
else
this.updateTrends(this.gameModel.TABLE_ID,this.trendDataMap[this.gameModel.TABLE_ID].trendArr);this.updatePredict();};BaseTrendMng.prototype.addTrend=function(tableId,item){if(tableId!=this.activeTableId)
return;if(game.GameSettings.TABLE_INFOS[tableId].maxTrendIcon){this.initTrends();}
else{this.addTrendGame(tableId,item);this.updatePredict();}};BaseTrendMng.prototype.updateTrends=function(tableId,values){if(tableId!=this.activeTableId)
return;if(!this.trendDataMap[tableId])
this.trendDataMap[tableId]=new game.TrendData();this.updateTrendsGame(tableId,values);};BaseTrendMng.prototype.addTrendGame=function(tableId,item,isDummy){if(isDummy===void 0){isDummy=false;}
this.addMainBoardItemGame(tableId,item,isDummy);this.normalTrend.addTrend(item,true,isDummy);this.pearlRoadTrend.addTrend(item,true,isDummy);this.bigEyeTrend.updateScroll();this.smallTrend.updateScroll();this.cockRoachTrend.updateScroll();if(item.result.charAt(game.BetType.TIE-1)!='1')
this.blinkIcons(isDummy);if(!isDummy){this.iconCount.addTrend(item,true);}};BaseTrendMng.prototype.blinkIcons=function(isDummy){if(isDummy){if(this.normalTrend.dummyIcon)
this.normalTrend.dummyIcon.blink();if(this.pearlRoadTrend.dummyIcon)
this.pearlRoadTrend.dummyIcon.blink();if(this.bigEyeTrend.dummyIcon)
this.bigEyeTrend.dummyIcon.blink();if(this.smallTrend.dummyIcon)
this.smallTrend.dummyIcon.blink();if(this.cockRoachTrend.dummyIcon)
this.cockRoachTrend.dummyIcon.blink();}
else{this.normalTrend.blinkExIcon();this.pearlRoadTrend.blinkExIcon();this.bigEyeTrend.blinkExIcon();this.smallTrend.blinkExIcon();this.cockRoachTrend.blinkExIcon();}};BaseTrendMng.prototype.updatePredict=function(){if(!this.activeTableId)
return;var arr=[this.predictBankerObj,this.predictPlayerObj];var arr1=[this.predict.banker,this.predict.player];for(var i=0;i<arr.length;i++){var bigExIcon,smallExIcon,cockExIcon;this.addMainBoardItemGame(this.activeTableId,arr[i],true);if(this.bigEyeTrend.dummyIcon){arr1[i]['icon2'].draw(this.bigEyeTrend.dummyIcon.info);this.bigEyeTrend.onDummyRelease();this.predict.setTrendIcon('icon2',true);}
if(this.smallTrend.dummyIcon){arr1[i]['icon3'].draw(this.smallTrend.dummyIcon.info);this.smallTrend.onDummyRelease();this.predict.setTrendIcon('icon3',true);}
if(this.cockRoachTrend.dummyIcon){arr1[i]['icon4'].draw(this.cockRoachTrend.dummyIcon.info);this.cockRoachTrend.onDummyRelease();this.predict.setTrendIcon('icon4',true);}}};BaseTrendMng.prototype.updateTrendsGame=function(tableId,values){delete this.trendDataMap[tableId].mainBoard;this.trendDataMap[tableId].mainBoard=[];this.trendDataMap[tableId].mainExVal=0;for(var i=0;i<values.length;i++){this.addMainBoardItemGame(tableId,values[i]);}
this.iconCount.updateTrends(values);this.normalTrend.updateTrends(values);this.pearlRoadTrend.updateTrends(values);this.bigEyeTrend.updateScroll();this.smallTrend.updateScroll();this.cockRoachTrend.updateScroll();};BaseTrendMng.prototype.resetShoe=function(tableId){if(tableId!=this.activeTableId)
return;this.clear();for(var i=2;i<=4;i++){this.predict.setTrendIcon('icon'+i,false);}};BaseTrendMng.prototype.isTie=function(item){return item.result.charAt(game.BetType.TIE-1)=='1';};BaseTrendMng.prototype.getWin=function(item){var v=0;if(item.result.charAt(game.BetType.BANKER-1)=='1')
v=1;else if(item.result.charAt(game.BetType.PLAYER-1)=='1')
v=2;return v;};BaseTrendMng.prototype.addMainBoardItemGame=function(tableId,item,isDummy){if(isDummy===void 0){isDummy=false;}
if(!this.trendDataMap[tableId])
this.trendDataMap[tableId]=new game.TrendData();if(!this.trendDataMap[tableId].mainBoard)
this.trendDataMap[tableId].mainBoard=[];var mainBoard=this.trendDataMap[tableId].mainBoard;if(this.isTie(item)&&mainBoard.length)
return;var v=this.getWin(item);if(v==0&&mainBoard.length)
return;var mainExVal=this.trendDataMap[tableId].mainExVal;if(!isDummy){if(mainExVal==0){mainBoard[0]=[];mainBoard[0][0]=v;this.trendDataMap[tableId].mainExVal=v;return;}
if(v==mainExVal){mainBoard[mainBoard.length-1].push(v);}
else{if(mainBoard.length==0||mainBoard[mainBoard.length-1].length)
mainBoard.push([]);mainBoard[mainBoard.length-1].push(v);}
this.trendDataMap[tableId].mainExVal=v;}
if(tableId!=this.activeTableId)
return;var c;var r;if(!isDummy){c=mainBoard.length-1;r=mainBoard[mainBoard.length-1].length-1;}
else{if(v==mainExVal){c=mainBoard.length-1;r=mainBoard[mainBoard.length-1].length;}
else{c=mainBoard.length;r=0;}}
this.drawTrendRoadIcon(r,c,isDummy);};BaseTrendMng.prototype.drawTrendRoadIcon=function(r,c,isDummy){if(isDummy===void 0){isDummy=false;}
var mainBoard=this.trendDataMap[this.activeTableId].mainBoard;var red="100";var blue="010";var result="";if(c>1||(c==1&&r>0)){if(r==0)
result=mainBoard[c-1].length==mainBoard[c-2].length?red:blue;else{result=r==mainBoard[c-1].length?blue:red;}
this.bigEyeTrend.addTrend(new game.netdata.TrendsItem().setData(result),false,isDummy);this.predict.setTrendIcon('icon2',true);}
if(c>2||(c==2&&r>0)){if(r==0)
result=mainBoard[c-1].length==mainBoard[c-3].length?red:blue;else{result=r==mainBoard[c-2].length?blue:red;}
this.smallTrend.addTrend(new game.netdata.TrendsItem().setData(result),false,isDummy);this.predict.setTrendIcon('icon3',true);}
if(c>3||(c==3&&r>0)){if(r==0)
result=mainBoard[c-1].length==mainBoard[c-4].length?red:blue;else{result=r==mainBoard[c-3].length?blue:red;}
this.cockRoachTrend.addTrend(new game.netdata.TrendsItem().setData(result),false,isDummy);this.predict.setTrendIcon('icon4',true);}};BaseTrendMng.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:var maxView=new PIXI.Rectangle(366,622,859,140);this.normalTrend.setSmallView(new PIXI.Rectangle(maxView.x,maxView.y,765,92));this.normalTrend.setMaxView(maxView);this.bigEyeTrend.setSmallView(new PIXI.Rectangle(maxView.x,716,285,46));this.bigEyeTrend.setMaxView(maxView);this.smallTrend.setSmallView(new PIXI.Rectangle(653,this.bigEyeTrend.y,285,46));this.smallTrend.setMaxView(maxView);this.cockRoachTrend.setSmallView(new PIXI.Rectangle(940,this.bigEyeTrend.y,285,46));this.cockRoachTrend.setMaxView(maxView);this.pearlRoadTrend.setSmallView(new PIXI.Rectangle(25,maxView.y,300,92));this.pearlRoadTrend.setMaxView(maxView);this.pearViewBtn.x=4;this.pearViewBtn.y=623;this.iconCount.x=25+8;this.iconCount.y=735+8;this.predict.x=1133;this.predict.y=maxView.y;this.predict.banker.x=0;this.predict.banker.y=0;this.predict.player.x=0;this.predict.player.y=47;this.bg.clear();this.bg.lineStyle(1,0x26231E);this.bg.beginFill(0x26231E);this.bg.drawRect(0,0,this.gameModel.GAME_WIDTH,151);this.bg.endFill();this.bg.y=617;this.tableBtnCon.x=328;this.tableBtnCon.y=622;this.iconCount.scale.x=1;this.iconCount.scale.y=this.iconCount.scale.x;break;case game.ViewMode.MODE_3D:break;}};BaseTrendMng.prototype.updateSmallView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:var maxView=new PIXI.Rectangle(277,670,949,94);this.normalTrend.setSmallView(new PIXI.Rectangle(maxView.x,maxView.y,495,95));this.normalTrend.setMaxView(maxView);this.bigEyeTrend.setSmallView(new PIXI.Rectangle(775,maxView.y,224,46));this.bigEyeTrend.setMaxView(maxView);this.smallTrend.setSmallView(new PIXI.Rectangle(775,719,224,46));this.smallTrend.setMaxView(maxView);this.cockRoachTrend.setSmallView(new PIXI.Rectangle(1002,maxView.y,224,46));this.cockRoachTrend.setMaxView(maxView);this.pearlRoadTrend.setSmallView(new PIXI.Rectangle(25,maxView.y,211,64));this.pearlRoadTrend.setMaxView(maxView);this.pearViewBtn.x=4;this.pearViewBtn.y=maxView.y;this.predict.x=1002;this.predict.y=this.smallTrend.y;this.predict.resizeBtns(109,46);this.predict.banker.x=0;this.predict.banker.y=0;this.predict.player.x=224-109;this.predict.player.y=0;this.bg.clear();this.bg.lineStyle(1,0x26231E);this.bg.beginFill(0x26231E);this.bg.drawRect(0,0,this.gameModel.GAME_WIDTH,100);this.bg.endFill();this.bg.y=667;this.tableBtnCon.x=239;this.tableBtnCon.y=670;this.pearViewBtn.y=maxView.y;this.changeColorBtn.x=7;this.changeColorBtn.y=749;this.iconCount.scale.x=0.92;this.iconCount.scale.y=this.iconCount.scale.x;this.iconCount.x=32;this.iconCount.y=745;break;case game.ViewMode.MODE_3D:break;}};return BaseTrendMng;}(game.GameObject));game.BaseTrendMng=BaseTrendMng;})(game||(game={}));var game;(function(game){var BetControl=(function(_super){__extends(BetControl,_super);function BetControl(gameModel){var _this=_super.call(this,gameModel)||this;var dis=2;var posX=0;var editBg=new PIXI.Sprite(PIXI.Texture.fromFrame("bet-edit-bg.png"));editBg.x=posX;_this.addChild(editBg);posX+=editBg.width+dis;_this.clearBtn=new component.VButton([PIXI.Texture.fromFrame("bet_cancel0001.png"),PIXI.Texture.fromFrame("bet_cancel0002.png")],_this.onBtnUp.bind(_this));_this.confirmBtn=new component.VButton([PIXI.Texture.fromFrame("bet_confirm0001.png"),PIXI.Texture.fromFrame("bet_confirm0002.png")],_this.onBtnUp.bind(_this));var tf=component.VComponentUtils.createNormalText(game.GameText.CONFIRM.toUpperCase(),20,game.GameUtils.TEXT_COLOR);tf.style.fontStyle='bold';tf.anchor.x=0.5;tf.anchor.y=0.5;tf.x=_this.confirmBtn.width*0.63;tf.y=_this.confirmBtn.height*0.5;if(tf.width>_this.confirmBtn.width*0.6)
tf.scale.x*=_this.confirmBtn.width*0.6/tf.width;tf.scale.y=tf.scale.x;_this.confirmBtn.addChild(tf);_this.rebetBtn=new component.VButton([PIXI.Texture.fromFrame("btn_rebet0001.png"),PIXI.Texture.fromFrame("btn_rebet0002.png")],_this.onBtnUp.bind(_this));_this.undoBtn=new component.VButton([PIXI.Texture.fromFrame("bet_undo0001.png"),PIXI.Texture.fromFrame("bet_undo0002.png")],_this.onBtnUp.bind(_this));_this.btns=[_this.clearBtn,_this.undoBtn,_this.rebetBtn,_this.confirmBtn];var btn;for(var i=0;i<_this.btns.length;i++){btn=_this.btns[i];btn.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;btn.scale.y=btn.scale.x;btn.buttonMode=true;btn.x=posX;_this.addChild(btn);posX+=btn.width+dis;_this.gameModel.toolTip.addToolTip(_this.clearBtn,game.GameText.BET_CLEAR_TOOLTIP);_this.gameModel.toolTip.addToolTip(_this.confirmBtn,game.GameText.BET_CONFIRM_TOOLTIP);_this.gameModel.toolTip.addToolTip(_this.rebetBtn,game.GameText.BET_REBET_TOOLTIP);_this.gameModel.toolTip.addToolTip(_this.undoBtn,game.GameText.BET_UNDO_TOOLTIP);}
component.VComponentUtils.dispatcher.addEventListener(component.VComponentUtils.KEY_DOWN_EVENT,_this.onKeyDown,_this);return _this;}
BetControl.prototype.onKeyDown=function(e){if(this.isLock)
return;this.isLock=true;var keyCode=e.data.keyCode;switch(keyCode){case 32:setTimeout(function(){this.isLock=false;}.bind(this),2000);this.gameModel.notify(game.GameEvent.BET_CONFIRM);break;}};BetControl.prototype.destructor=function(){this.gameModel.toolTip.removeToolTip(this.clearBtn);this.gameModel.toolTip.removeToolTip(this.confirmBtn);this.gameModel.toolTip.removeToolTip(this.rebetBtn);this.gameModel.toolTip.removeToolTip(this.undoBtn);component.VComponentUtils.dispatcher.removeEventListener(component.VComponentUtils.KEY_DOWN_EVENT,this.onKeyDown,this);_super.prototype.destructor.call(this);};BetControl.prototype.hide=function(){this.visible=false;};BetControl.prototype.show=function(){this.visible=true;};BetControl.prototype.dissable=function(){for(var i=0;i<this.btns.length;i++){this.btns[i].interactive=false;this.btns[i].alpha=0.5;}};BetControl.prototype.enable=function(){for(var i=0;i<this.btns.length;i++){this.btns[i].interactive=true;this.btns[i].alpha=1;}};BetControl.prototype.onBtnUp=function(btn){var type;switch(btn){case this.confirmBtn:type=game.GameEvent.BET_CONFIRM;break;case this.clearBtn:type=game.GameEvent.BET_CLEAR;break;case this.undoBtn:type=game.GameEvent.BET_UNDO;break;case this.rebetBtn:type=game.GameEvent.BET_REBET;break;}
this.gameModel.notify(type);};return BetControl;}(game.GameObject));game.BetControl=BetControl;})(game||(game={}));var game;(function(game){var BetPlace=(function(_super){__extends(BetPlace,_super);function BetPlace(gameModel,isLive,hasShadow){if(isLive===void 0){isLive=false;}
if(hasShadow===void 0){hasShadow=true;}
var _this=_super.call(this,gameModel)||this;_this.hasShadow=hasShadow;_this.amount=0;_this.isLive=isLive;_this.confirmedAmt=0;_this.checkConfirm=true;_this.seatId=0;_this.chipStack=new Array();_this.betHit=null;return _this;}
BetPlace.prototype.showSelector=function(){if(this.chipStack.length)
this.chipStack[0].selector.visible=true;};BetPlace.prototype.hideSelector=function(){if(this.chipStack.length)
this.chipStack[0].selector.visible=false;};BetPlace.prototype.confirm=function(){this.confirmedAmt=this.amount;for(var i=0;i<this.chipStack.length;i++)
this.chipStack[i].setAlpha(1);};BetPlace.prototype.reset=function(){this.confirmedAmt=0;this.updateChips();};BetPlace.prototype.getConfirmedAmount=function(){return this.confirmedAmt;};BetPlace.prototype.getAmount=function(){return this.amount;};BetPlace.prototype.setAmount=function(amt){this.amount=amt;this.updateChips();};BetPlace.prototype.setConfirmAmount=function(amt){var pendingAmt=this.amount-this.confirmedAmt;this.confirmedAmt=amt;this.amount=this.confirmedAmt+pendingAmt;this.updateChips();};BetPlace.prototype.getPendingAmount=function(){return this.amount-this.confirmedAmt;};BetPlace.prototype.cloneChips=function(){var arr=[];var chip;for(var i=0;i<this.chipStack.length;i++){chip=this.gameModel.chipControl.getChip(this.chipStack[i].getVal(),this.isLive?game.Chip.LIVE:game.Chip.NORMAL);chip.x=this.chipStack[i].x;chip.y=this.chipStack[i].y;arr.push(chip);}
return arr;};BetPlace.prototype.hideShadow=function(){if(this.chipStack&&this.chipStack.length)
this.chipStack[0].shadow.visible=false;};BetPlace.prototype.showShadow=function(){if(this.chipStack&&this.chipStack.length)
this.chipStack[0].shadow.visible=true;};BetPlace.prototype.updateChips=function(){this.clearChips(false);var chips;if(this.isLive){chips=this.gameModel.chipControl.liveChips;this.changeChipRecurvive(chips.length-1,this.amount,chips);}
else{chips=this.gameModel.chipControl.chips;var r=this.changeChipRecurvive(chips.length-1,this.amount,chips);if(!r){chips=this.gameModel.chipControl.fullChips;var ind=0;for(var i=0;i<chips.length;i++){if(chips[i].getVal()==this.gameModel.chipControl.chips[this.gameModel.chipControl.chips.length-1].getVal()){ind=i;break;}}
this.changeChipRecurvive(ind,this.amount,chips);}}
var posY=0;var chip;var amt=0;var l=this.chipStack.length;if(this.isLive&&l>10)
l=10;for(var i=0;i<l;i++){chip=this.chipStack[i];this.addChild(chip);if(i==0&&this.hasShadow)
chip.shadow.visible=true;chip.y=posY;posY-=5;amt+=chip.getVal();amt=roundFloat(amt);if(this.checkConfirm){if(amt<=this.confirmedAmt)
chip.setAlpha(1);else
chip.setAlpha(0.6);}}};BetPlace.prototype.changeChipRecurvive=function(ind,amt,chips){if(amt==0)
return true;var chip;while(ind>=0){if(amt>=chips[ind].getVal()){var chipVal=chips[ind].getVal();var count=Math.floor(amt/chipVal);if(this.changeChipRecurvive(ind,roundFloat(amt%chipVal),chips)){for(var i=0;i<count;i++){chip=this.gameModel.chipControl.getChip(chipVal,this.isLive?game.Chip.LIVE:game.Chip.NORMAL);this.chipStack.unshift(chip);}
return true;}}
ind--;}
return false;};BetPlace.prototype.addChip=function(val){val=Math.floor(val*10)/10;if(val==0)
return 0;this.amount+=val;this.amount=roundFloat(this.amount);this.updateChips();return val;};BetPlace.prototype.removeChip=function(val){if(val==0)
return 0;var n=roundFloat(this.amount-val);if(n<this.confirmedAmt)
n=this.confirmedAmt;var r=roundFloat(this.amount-n);this.amount=n;this.updateChips();return r;};BetPlace.prototype.clearChips=function(resetAmount){if(resetAmount===void 0){resetAmount=true;}
if(resetAmount)
this.amount=0;while(this.chipStack.length){var chip=this.chipStack.pop();this.removeChild(chip);this.gameModel.chipControl.releaseChip(chip);}};return BetPlace;}(game.GameObject));game.BetPlace=BetPlace;})(game||(game={}));var game;(function(game){var Chip=(function(_super){__extends(Chip,_super);function Chip(gameModel,val,textute,type){if(type===void 0){type=0;}
var _this=_super.call(this,gameModel)||this;_this.val=val;_this.type=type;var shadow=new PIXI.Sprite(_this.gameModel.resources['chip_shahow'].texture);shadow.anchor.x=0.5;shadow.anchor.y=0.5;shadow.x=0;shadow.y=8;_this.shadow=shadow;_this.addChild(shadow);_this.shadow.visible=false;_this.selector=new PIXI.Sprite(_this.gameModel.resources['chip_selector'].texture);_this.addChild(_this.selector);_this.selector.anchor.x=0.5;_this.selector.anchor.y=0.5;_this.selector.visible=false;_this.con=new PIXI.Container();_this.addChild(_this.con);_this.bg=new PIXI.Sprite(textute);_this.bg.pivot.x=_this.bg.width/2;_this.bg.pivot.y=_this.bg.height/2;_this.con.addChild(_this.bg);shadow.width=_this.bg.width;shadow.scale.y=shadow.scale.x;_this.selector.width=_this.bg.width*1.2;_this.selector.scale.y=_this.selector.scale.x;_this.selector.x=1;_this.selector.y=1;var str='';if(_this.type==Chip.NORMAL){if(val==0.1)
str='';else if(val==0.5)
str='';else if(val>=1000000)
str=Math.round(val/1000000)+'M';else if(val>=1000)
str=Math.round(val/1000)+'K';else
str=val.toString();var style={fontFamily:"Arial",fontSize:Math.round(14*game.GameSettings.OPTIMIZE_FACTOR),fontStyle:'bold',fill:0x000000,align:'center'};_this.txt=game.GameUtils.createText(str,style,1.2);_this.txt.anchor.x=0.5;_this.txt.anchor.y=0.5;_this.txt.x=0;_this.txt.y=-2;if(_this.txt.width>_this.bg.width*0.7){_this.txt.width=_this.bg.width*0.7;_this.txt.scale.y=_this.txt.scale.x;}
_this.con.addChild(_this.txt);}
return _this;}
Chip.prototype.setAlpha=function(alpha){this.bg.alpha=alpha;};Chip.prototype.onChipOut=function(e){};Chip.prototype.onChipOver=function(e){};Chip.prototype.active=function(){this.selector.visible=true;};Chip.prototype.deactive=function(){this.selector.visible=false;};Chip.prototype.getVal=function(){return this.val;};Chip.NORMAL=0;Chip.LIVE=1;Chip.PLAYER=2;return Chip;}(game.GameObject));game.Chip=Chip;})(game||(game={}));var game;(function(game){var CountDown=(function(_super){__extends(CountDown,_super);function CountDown(maxChar,color){if(maxChar===void 0){maxChar=2;}
if(color===void 0){color=0x555555;}
var _this=_super.call(this)||this;_this.step=10;_this.maxChar=maxChar;var bg=new PIXI.Graphics();_this.addChild(bg);bg.lineStyle(0,0,0);bg.beginFill(0x000000);bg.drawCircle(0,0,37);bg.endFill();_this.bg=bg;if(!game.GameSettings.IS_WEBGL){_this.radius=bg.width*0.5*0.8;_this.backCircle=new PIXI.Graphics();_this.addChild(_this.backCircle);_this.backCircle.lineStyle(8,0x222222);_this.backCircle.drawCircle(0,0,_this.radius);_this.frontCircle=new PIXI.Graphics();_this.addChild(_this.frontCircle);_this.frontCircle.lineStyle(8,color);_this.frontCircle.drawCircle(0,0,_this.radius);_this.circle=new PIXI.Graphics();_this.addChild(_this.circle);}
_this.tf=game.GameUtils.createText('0',{fontFamily:"dinbold",fontSize:28,fontStyle:'bold',fill:0xffffff,align:'center'});_this.tf.anchor.x=0.5;_this.tf.anchor.y=0.5;_this.addChild(_this.tf);return _this;}
CountDown.prototype.setTotal=function(t){this.total=t;};CountDown.prototype.getTotal=function(){return this.total;};CountDown.prototype.setTime=function(n,isShown){if(isShown===void 0){isShown=true;}
if(isShown)
this.show();this.tf.text=n.toString();if(game.GameSettings.IS_WEBGL)
return;this.circle.clear();this.circle.lineStyle(1,0x444444);this.circle.beginFill(0x444444);var p1=new PIXI.Point();var p2=new PIXI.Point();var r=this.radius*1.2;var per=n/this.total;if(per>1)
per=1;for(var i=0,l=per*360/this.step;i<l;i++){p1.x=r*component.VComponentUtils.cos(270-i*this.step);p1.y=r*component.VComponentUtils.sin(270-i*this.step);p2.x=r*component.VComponentUtils.cos(270-(i+1)*this.step);p2.y=r*component.VComponentUtils.sin(270-(i+1)*this.step);this.circle.moveTo(0,0);this.circle.lineTo(p1.x,p1.y);this.circle.lineTo(p2.x,p2.y);}
this.circle.endFill();this.frontCircle.mask=this.circle;};CountDown.prototype.startCountDown=function(duration,onCompleteCallback){if(onCompleteCallback===void 0){onCompleteCallback=null;}
this.onCompleteCallback=onCompleteCallback;this.duration=duration;this.total=duration;this.tf.text=this.duration.toString();clearInterval(this.timerId);this.timerId=setInterval(this.onTimer.bind(this),1000);this.show();};CountDown.prototype.stopCountDown=function(){clearInterval(this.timerId);this.timerId=0;this.onCompleteCallback=null;this.hide();};CountDown.prototype.show=function(){this.visible=true;};CountDown.prototype.hide=function(){this.visible=false;};CountDown.prototype.onTimer=function(){this.duration--;this.setTime(this.duration);if(this.duration<=0){clearInterval(this.timerId);this.timerId=0;if(this.onCompleteCallback)
this.onCompleteCallback();this.onCompleteCallback=null;this.hide();}};return CountDown;}(PIXI.Container));game.CountDown=CountDown;})(game||(game={}));var game;(function(game){var DiceAnim=(function(_super){__extends(DiceAnim,_super);function DiceAnim(gameMode){return _super.call(this,gameMode)||this;}
DiceAnim.prototype.destructor=function(){this.anim.onComplete=null;_super.prototype.destructor.call(this);};DiceAnim.prototype.initialize=function(imageIds,dice1Index){if(this.anim)
this.anim.destroy();var frames=[];for(var i=0;i<=dice1Index;i++){frames.push(this.gameModel.resources[imageIds[i]].texture);}
this.anim=new PIXI.extras.MovieClip(frames);this.anim.animationSpeed=0.3;this.anim.loop=false;this.anim.onComplete=this.onAnimComplete.bind(this);this.addChild(this.anim);this.anim.stop();if(this.result)
this.result.destroy();frames=[];for(var i=dice1Index;i<imageIds.length;i++){frames.push(this.gameModel.resources[imageIds[i]].texture);}
this.result=new PIXI.extras.MovieClip(frames);this.addChild(this.result);this.result.stop();};DiceAnim.prototype.play=function(dice){this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,true,game.SoundMng.DICE_ROLLING);this.anim.visible=true;this.result.visible=false;this.activeDice=dice;this.anim.gotoAndPlay(0);this.visible=true;};DiceAnim.prototype.onAnimComplete=function(){this.anim.visible=false;this.result.visible=true;this.result.gotoAndStop(this.activeDice-1);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,true,"sfx_num"+this.activeDice);};return DiceAnim;}(game.GameObject));game.DiceAnim=DiceAnim;})(game||(game={}));var game;(function(game){var MultiDicesAnim=(function(_super){__extends(MultiDicesAnim,_super);function MultiDicesAnim(gameMode,diceName,tFrame,animationSpeed){if(diceName===void 0){diceName="dice_3d_";}
if(tFrame===void 0){tFrame=11;}
if(animationSpeed===void 0){animationSpeed=0.3;}
var _this=_super.call(this,gameMode)||this;if(!MultiDicesAnim.poolMap)
MultiDicesAnim.poolMap={};_this.diceName=diceName;_this.tFrame=tFrame;_this.animationSpeed=animationSpeed;_this.dices=[];var bg=new PIXI.Graphics();_this.addChild(bg);bg.beginFill(0xff0000,0);bg.drawRect(0,0,1,1);return _this;}
MultiDicesAnim.prototype.getDice=function(num){if(!MultiDicesAnim.poolMap[num])
MultiDicesAnim.poolMap[num]=[];if(MultiDicesAnim.poolMap[num].length)
return MultiDicesAnim.poolMap[num].pop();var frames=[];for(var i=1;i<=this.tFrame;i++){frames.push(PIXI.Texture.fromFrame(this.diceName+num+"_"+component.VComponentUtils.getIntInFormat(i,4)+".png"));}
var dice=new PIXI.extras.MovieClip(frames);dice.stop();dice.animationSpeed=this.animationSpeed;dice.loop=false;dice["diceNum"]=num;return dice;};MultiDicesAnim.prototype.releaseDice=function(dice){this.removeChild(dice);if(!MultiDicesAnim.poolMap[dice["diceNum"]])
MultiDicesAnim.poolMap[dice["diceNum"]]=[];MultiDicesAnim.poolMap[dice["diceNum"]].push(dice);};MultiDicesAnim.prototype.showDices=function(str){while(this.dices.length)
this.releaseDice(this.dices.pop());var posX=0;for(var i=0;i<str.length;i++){var dice=this.getDice(parseInt(str.charAt(i)));dice.x=posX;dice.y=-20+Math.random()*40;posX+=dice.width+Math.random()*20;dice.gotoAndPlay(0);this.addChild(dice);this.dices.push(dice);}};return MultiDicesAnim;}(game.GameObject));game.MultiDicesAnim=MultiDicesAnim;})(game||(game={}));var game;(function(game){var FixedSizeText=(function(_super){__extends(FixedSizeText,_super);function FixedSizeText(w,tf){var _this=_super.call(this)||this;_this.tf=tf;_this.viewW=w;_this.setText(tf.text);_this.addChild(tf);return _this;}
FixedSizeText.prototype.setText=function(str){this.scale.x=1;this.scale.y=1;this.tf.text=str;if(this.tf.width>this.viewW-8)
this.scale.x=(this.viewW-8)/this.tf.width;this.scale.y=this.scale.x;};return FixedSizeText;}(PIXI.Container));game.FixedSizeText=FixedSizeText;})(game||(game={}));var game;(function(game){var BaseGameDetail=(function(_super){__extends(BaseGameDetail,_super);function BaseGameDetail(gameModel,viewW,viewH){var _this=_super.call(this,gameModel)||this;_this.viewW=viewW;_this.viewH=viewH;_this.initView();return _this;}
BaseGameDetail.prototype.initView=function(){var masker=new PIXI.Graphics();masker.beginFill(0x0000ff);masker.alpha=0;masker.drawRect(0,0,this.viewW-20,this.viewH);masker.endFill();this.addChild(masker);this.masker=masker;var bg=new PIXI.Graphics();bg.beginFill(0xFFF5E9);bg.drawRect(-1,0,this.viewW,this.viewH+50);bg.endFill();this.bg=bg;this.addChild(bg);var scroll=new PIXI.Container();this.scroll=scroll;this.sDis=2;var sDis=this.sDis;var up=new PIXI.Sprite(PIXI.Texture.fromFrame('info_panel_sroll_up.png'));scroll.addChild(up);scroll['upBtn']=up;var down=new PIXI.Sprite(PIXI.Texture.fromFrame('info_panel_sroll_down.png'));scroll.addChild(down);scroll['downBtn']=down;down.y=this.viewH-down.height;var track=new PIXI.Sprite(PIXI.Texture.fromFrame('info_panel_sroll_track.png'));scroll.addChild(track);scroll['track']=track;track.height=this.viewH-2*sDis-2*up.height;track.y=up.height+sDis;var face=new PIXI.Sprite(PIXI.Texture.fromFrame('info_panel_sroll_face.png'));scroll.addChild(face);face.height=this.viewH*0.3;scroll['face']=face;scroll.x=this.viewW-track.width-7;this.bg.mask=masker;var maskerCopy=new PIXI.Graphics();maskerCopy.beginFill(0x0000ff);maskerCopy.drawRect(0,0,scroll.x-5,this.viewH);maskerCopy.endFill();maskerCopy.alpha=0;this.addChild(maskerCopy);this.initContent();this.addChild(scroll);this.content.mask=masker;this.scroller=new component.VVerScroll(maskerCopy,this.content,scroll,true,this.content.height+20);};BaseGameDetail.prototype.resize=function(width,height){this.viewW=width;this.viewH=height;this.masker.clear();this.masker.beginFill(0x0000ff);this.masker.drawRect(0,0,width-20,height);this.masker.endFill();var scroll=this.scroll;scroll['downBtn'].y=this.viewH-scroll['downBtn'].height;scroll['track'].height=this.viewH-2*this.sDis-2*scroll['upBtn'].height;scroll['track'].y=scroll['upBtn'].height+this.sDis;scroll['face'].height=this.viewH*0.3;this.scroller.resize(width,height);};BaseGameDetail.prototype.initContent=function(){};return BaseGameDetail;}(game.GameObject));game.BaseGameDetail=BaseGameDetail;})(game||(game={}));var game;(function(game){var BetInfoCon=(function(_super){__extends(BetInfoCon,_super);function BetInfoCon(){var _this=_super.call(this)||this;_this.initView();return _this;}
BetInfoCon.prototype.initView=function(){var bg=new PIXI.Sprite(PIXI.Texture.fromFrame('info_bet_info_bg.png'));this.addChild(bg);var texts=[game.GameText.PENDING,game.GameText.CONFIRMED,game.GameText.TOTAL_WIN];var tfs=[];var posXs=[70,190,312];var posY=8;var style={fontFamily:"Arial",fontSize:12,fill:0xffffff,align:'center'};var tf;for(var i=0;i<posXs.length;i++){tf=game.GameUtils.createText('',i!=0?style:{fontFamily:"Arial",fontSize:12,fill:0xEDD446,align:'center'});tf.anchor.x=0.5;tf.anchor.y=0.5;tf.x=posXs[i];tf.y=posY;tf.text=texts[i]+":";this.addChild(tf);}
posY+=17;for(var i=0;i<posXs.length;i++){tf=game.GameUtils.createText('0',style);tf.anchor.x=0.5;tf.anchor.y=0.5;tf.x=posXs[i];tf.y=posY;this.addChild(tf);tfs[i]=tf;}
this.pendingTf=tfs[0];this.confirmedTf=tfs[1];this.totalWinTf=tfs[2];};BetInfoCon.prototype.reset=function(){this.pendingTf.text='0';this.confirmedTf.text='0';this.totalWinTf.text='0';};return BetInfoCon;}(PIXI.Container));game.BetInfoCon=BetInfoCon;})(game||(game={}));var game;(function(game){var BonusUpsDetail=(function(_super){__extends(BonusUpsDetail,_super);function BonusUpsDetail(gameModel,viewW,viewH){var _this=_super.call(this,gameModel,viewW,viewH)||this;_this.items=[];_this.itemHeight=25;return _this;}
BonusUpsDetail.prototype.destructor=function(){trace("TrendContainer::destroy");this.items=null;this.scroller.removeEventListener(component.VVerScroll.VERSSCROLL_CHANGE_POS,this.onScrollChange,this);_super.prototype.destructor.call(this);};BonusUpsDetail.prototype.initView=function(){_super.prototype.initView.call(this);this.scroller.addEventListener(component.VVerScroll.VERSSCROLL_CHANGE_POS,this.onScrollChange,this);};BonusUpsDetail.prototype.onScrollChange=function(e){if(e===void 0){e=null;}
for(var i=0,l=this.items.length;i<l;i++){if(this.items[i].y*this.content.scale.y<-this.content.y-this.itemHeight*this.content.scale.y||this.items[i].y*this.content.scale.y>-this.content.y+this.viewH){this.items[i].visible=false;this.items[i].interactive=false;}
else{this.items[i].visible=true;this.items[i].interactive=true;}}};BonusUpsDetail.prototype.showAllItems=function(){for(var i=0,l=this.items.length;i<l;i++)
this.items[i].visible=true;};BonusUpsDetail.prototype.initContent=function(){this.style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var content=new PIXI.Container();this.addChild(content);this.content=content;};BonusUpsDetail.prototype.reset=function(){for(var i=0;i<this.items.length;i++){component.VComponentUtils.deepClean(this.content.removeChild(this.items[i]));}
this.items=[];this.scroller.updateScroll();};BonusUpsDetail.prototype.resize=function(width,height){this.showAllItems();_super.prototype.resize.call(this,width,height);this.onScrollChange();};BonusUpsDetail.prototype.addBonusUps=function(datas){this.reset();for(var i=0;i<datas.length;i++){this.addBonus({table:this.gameModel.TABLE_ID,value:datas[i].luckyNumber},datas[i].shoe,datas[i].round,false);}
this.updateItemsPos();this.scroller.updateScroll(this.items.length*this.itemHeight+20);};BonusUpsDetail.prototype.updateItemsPos=function(){var dis=14;var starDis=5;var item;for(var i=0;i<this.items.length;i++){item=this.items[i];item.y=starDis+(this.items.length-1-i)*this.itemHeight;}
this.onScrollChange();};BonusUpsDetail.prototype.addBonus=function(data,shoe,round,updateScroll){if(updateScroll===void 0){updateScroll=true;}
if(this.items.length>0){var lastItem=this.items[this.items.length-1];if(lastItem['roundTf'].text===shoe+'-'+round)
return;}
var posX=12;var posY=5;var item=new PIXI.Container();this.content.addChild(item);var bg=new PIXI.Graphics();bg.clear();bg.beginFill(0x0000ff,0);bg.drawRect(0,0,this.viewW,this.itemHeight);bg.endFill();bg.lineStyle(1,0xcdcdcd);bg.moveTo(10,this.itemHeight);bg.lineTo(this.viewW,this.itemHeight);item.addChild(bg);var roundTf=game.GameUtils.createText("",this.style);roundTf.x=posX;roundTf.y=posY;roundTf.text=shoe+'-'+round;item['roundTf']=roundTf;item.addChild(roundTf);var nameTf=game.GameUtils.createText("",data.value==8||data.value==9?{fontFamily:"Arial",fontSize:12,fill:0xC3723A,align:'left'}:this.style);nameTf.x=this.viewW-30;nameTf.anchor.x=1;nameTf.y=posY;nameTf.text=data.value==8||data.value==9?game.GameText.SUPER_HAND:game.GameText.NORMAL_HAND;item.addChild(nameTf);var icon=new PIXI.Sprite(PIXI.Texture.fromFrame('colordice_'+data.value+'.png'));icon.anchor.x=0.5;icon.anchor.y=0.5;icon.x=this.viewW*0.5;icon.y=12;icon.scale.x=22/icon.width;icon.scale.y=icon.scale.x;item.addChild(icon);item.x=0;var h=nameTf.height;this.items.push(item);if(updateScroll){this.updateItemsPos();this.scroller.updateScroll(this.items.length*this.itemHeight+20);}};return BonusUpsDetail;}(game.BaseGameDetail));game.BonusUpsDetail=BonusUpsDetail;})(game||(game={}));var game;(function(game){var GameDetailCon=(function(_super){__extends(GameDetailCon,_super);function GameDetailCon(gameModel){var _this=_super.call(this,gameModel)||this;_this.initView();return _this;}
GameDetailCon.prototype.destructor=function(){_super.prototype.destructor.call(this);};GameDetailCon.prototype.initView=function(){this.viewW=379;this.viewH=157;this.contentY=27;var w=this.viewW;var h=this.viewH;var contentY=this.contentY;var limitBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('limit_icon0001.png'),PIXI.Texture.fromFrame('limit_icon0002.png')]);var livePoolBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('livepool_icon0001.png'),PIXI.Texture.fromFrame('livepool_icon0002.png')]);var bonusBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('bonus98_icon0001.png'),PIXI.Texture.fromFrame('bonus98_icon0002.png')]);game.GameUtils.resizeNodeH(limitBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(livePoolBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(bonusBtn,game.StyleMng.INFO_TAB_BTN_SIZE);this.gameModel.toolTip.addToolTip(limitBtn,game.GameText.LIMITS);this.gameModel.toolTip.addToolTip(livePoolBtn,game.GameText.LIVE_POOL);this.gameModel.toolTip.addToolTip(bonusBtn,game.GameText.SUPER_98_HIS);var btns=[limitBtn,livePoolBtn,bonusBtn];if(game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].gameId!=game.GameID.BACCARAT_SUPER98)
btns.pop();this.btns=btns;for(var i=0;i<btns.length;i++){this.addChild(btns[i]);btns[i].buttonMode=true;btns[i].gotoAndStop(1);btns[i].x=(btns[i].width+1)*i;}
this.initLimitDetail();this.initLivePoolDetail();this.bonusUpsDetail=new game.BonusUpsDetail(this.gameModel,w,h);var contents=[this.limitDetail,this.livePoolDetail,this.bonusUpsDetail];if(game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].gameId!=game.GameID.BACCARAT_SUPER98)
contents.pop();for(var i=0;i<contents.length;i++){this.addChild(contents[i]);contents[i].y=contentY;}
var tabMng=new component.VTabMng();tabMng.initialize(btns,contents);this.tabMng=tabMng;var expandBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_expand0001.png'),PIXI.Texture.fromFrame('info_pane_expand0002.png')],this.onExpand.bind(this));expandBtn.x=this.viewW-expandBtn.width;var conllapseBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_collapse0001.png'),PIXI.Texture.fromFrame('info_pane_collapse0002.png')],this.onCollapse.bind(this));conllapseBtn.x=this.viewW-conllapseBtn.width;var resizeBtn=new component.VToggleButton(expandBtn,conllapseBtn);this.addChild(resizeBtn);resizeBtn.y=this.contentY+this.viewH-resizeBtn.height;this.resizeBtn=resizeBtn;};GameDetailCon.prototype.initLimitDetail=function(){this.limitDetail=new game.LimitDetail(this.gameModel,this.viewW,this.viewH);};GameDetailCon.prototype.initLivePoolDetail=function(){this.livePoolDetail=new game.LivePoolDetail(this.gameModel,this.viewW,this.viewH);};GameDetailCon.prototype.onExpand=function(){var addedSize=40;this.limitDetail.resize(this.viewW,this.viewH+addedSize);this.livePoolDetail.resize(this.viewW,this.viewH+addedSize);if(this.bonusUpsDetail)
this.bonusUpsDetail.resize(this.viewW,this.viewH+addedSize);this.resizeBtn.y=this.contentY+this.viewH-this.resizeBtn.height+addedSize;};GameDetailCon.prototype.onCollapse=function(){this.limitDetail.resize(this.viewW,this.viewH);this.livePoolDetail.resize(this.viewW,this.viewH);if(this.bonusUpsDetail)
this.bonusUpsDetail.resize(this.viewW,this.viewH);this.resizeBtn.y=this.contentY+this.viewH-this.resizeBtn.height;};GameDetailCon.prototype.updateTrends=function(table){};return GameDetailCon;}(game.GameObject));game.GameDetailCon=GameDetailCon;})(game||(game={}));var game;(function(game){var GameTitleCon=(function(_super){__extends(GameTitleCon,_super);function GameTitleCon(gameModel){var _this=_super.call(this,gameModel)||this;_this.initialize();_this.easingFactor=0.9;_this.easingFactor2=0.9;component.VComponentUtils.dispatcher.addEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,_this.update,_this);return _this;}
GameTitleCon.prototype.destructor=function(){_super.prototype.destructor.call(this);component.VComponentUtils.dispatcher.removeEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,this.update,this);};GameTitleCon.prototype.initialize=function(){var bg=new PIXI.Sprite(PIXI.Texture.fromFrame('info_title_bg.png'));this.bg=bg;this.addChild(bg);var posY=3;var style={fontFamily:"Arial",fontSize:20,fill:0xffffff};this.tableNameTf=game.GameUtils.createText('',style);this.tableNameTf.y=posY+5;this.addChild(this.tableNameTf);this.icon=new PIXI.Sprite();this.icon.y=18;this.icon.anchor.y=0.5;this.addChild(this.icon);this.gameNameTf=game.GameUtils.createText('',style);this.gameNameTf.y=posY+5;this.addChild(this.gameNameTf);};GameTitleCon.prototype.update=function(){if(this.turbo){if(this.turbo['f1'].alpha<0.1){this.easingFactor=1.1;this.turbo['f1'].alpha=0.1;}
if(this.turbo['f1'].alpha>3){this.easingFactor=0.9;this.turbo['f1'].alpha=3;}
this.turbo['f1'].alpha*=this.easingFactor;}};GameTitleCon.prototype.setData=function(tableId){var tableConfigs=game.GameSettings.TABLE_INFOS[tableId];this.icon.texture=PIXI.Texture.fromFrame(tableConfigs.icon);this.icon.scale.y=25/this.icon.height;this.icon.scale.x=this.icon.scale.y;this.tableNameTf.text=tableConfigs.tableName;this.gameNameTf.text=game.GameUtils.getGameName(tableId);var posX=5;var dis=5;this.tableNameTf.x=posX;this.icon.anchor.x=0;this.icon.x=this.tableNameTf.x+this.tableNameTf.width+dis;this.gameNameTf.x=this.icon.x+this.icon.width+dis+4;if(game.GameSettings.TABLE_INFOS[tableId].turbo){var turbo=new PIXI.Container();var f0=new PIXI.Sprite(PIXI.Texture.fromFrame("turbo_icon_0.png"));var f1=new PIXI.Sprite(PIXI.Texture.fromFrame("turbo_icon_1.png"));turbo['f1']=f1;turbo.addChild(f0);turbo.addChild(f1);this.addChild(turbo);turbo.x=330;turbo.y=3;turbo.width=34;turbo.scale.y=turbo.scale.x;this.turbo=turbo;}
if(this.scale.x==1&&this.width>380){this.scale.x=380/this.width;this.scale.y=this.scale.x;}};GameTitleCon.prototype.createNewIcon=function(){var newIcon=new PIXI.Container();this.newIcon=newIcon;this.addChild(newIcon);var bg=new PIXI.Graphics();bg.lineStyle(1,0xFFFFFF);bg.beginFill(0xFF0000);bg.drawRoundedRect(0,0,50,24,4);newIcon['bg']=bg;newIcon.addChild(bg);var style={fontSize:17,fill:0xffffff};var tf=game.GameUtils.createText(game.GameText.NEW,style);tf.anchor.x=0.5;tf.x=bg.width/2;tf.y=3;newIcon['tf']=tf;newIcon.addChild(tf);newIcon.x=600;newIcon.y=4;};return GameTitleCon;}(game.GameObject));game.GameTitleCon=GameTitleCon;})(game||(game={}));var game;(function(game){var InfoColor=(function(){function InfoColor(){}
InfoColor.RED=0xBD0000;InfoColor.BLUE=0x2794B2;InfoColor.GREEN=0x2E8745;return InfoColor;}());game.InfoColor=InfoColor;})(game||(game={}));var game;(function(game){var LimitContextMenu=(function(_super){__extends(LimitContextMenu,_super);function LimitContextMenu(dispatcher,isContext){if(isContext===void 0){isContext=true;}
var _this=_super.call(this)||this;_this.subMenus=[];_this.isContext=isContext;_this.dispatcher=dispatcher;_this.isEnabled=true;_this.initView();return _this;}
LimitContextMenu.prototype.destructor=function(){trace("LimitContextMenu::destructor");if(this.isContext)
component.VMouseUtils.off(game.GlobalVals.stage,component.VMouseUtils.MOUSE_DOWN,this.onStageMouse,this);};LimitContextMenu.prototype.initView=function(){this.items=[];this.itemW=162;this.itemH=24;this.bg=new PIXI.Graphics();this.addChild(this.bg);this.titleTf=game.GameUtils.createText('',{fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'});this.titleTf.anchor.x=0.5;this.titleTf.anchor.y=0.5;this.titleTf.x=this.itemW*0.5;this.titleTf.y=this.itemH*0.5;this.addChild(this.titleTf);if(this.isContext)
component.VMouseUtils.on(game.GlobalVals.stage,component.VMouseUtils.MOUSE_DOWN,this.onStageMouse,this);};LimitContextMenu.prototype.getHeight=function(){var h=this.items.length?this.itemH*(this.items.length+1):0;for(var i=0;i<this.subMenus.length;i++)
h+=this.subMenus[i].getHeight();return h;};LimitContextMenu.prototype.onStageMouse=function(e){if(!this.visible)
return;var mp=component.VMouseUtils.mousePos();mp=this.toLocal(mp);if(!new PIXI.Rectangle(0,0,this.width,this.height).contains(mp.x,mp.y)){this.hide();}};LimitContextMenu.prototype.activeLimit=function(limitID){for(var i=0;i<this.items.length;i++)
this.items[i].setActive(false);for(var i=0;i<this.items.length;i++){if(limitID==this.items[i]['limitId']){this.items[i].setActive(true);this.activeBtn=this.items[i];this.activeBtn.setActive(true);break;}}};LimitContextMenu.prototype.setData=function(tableId){this.tableId=tableId;var data=null;for(var i=0;i<game.GlobalVals.limitsResponse.content.length;i++){if(game.GlobalVals.limitsResponse.content[i].table==tableId){data=game.GlobalVals.limitsResponse.content[i].limits;break;}}
if(!data)
return;var tableConfigs=game.GameSettings.TABLE_INFOS[tableId];var orgSc=this.titleTf['orgScaleX'];this.titleTf.scale.x=orgSc;this.titleTf.scale.y=this.titleTf.scale.x;this.titleTf.text=game.GameUtils.getGameName(tableId);if(this.titleTf.width>this.itemW-10){this.titleTf.scale.x=orgSc*((this.itemW-10)/this.titleTf.width);this.titleTf.scale.y=this.titleTf.scale.x;}
this.data=data;for(var i=0;i<this.items.length;i++){delete this.items[i]['limitId'];component.VComponentUtils.deepClean(this.items[i]);}
this.items=[];var bg=this.bg;var item;var activeInd=-1;for(var i=0;i<data.length;i++){var ibg0=new PIXI.Graphics();ibg0.lineStyle(0,0,0);ibg0.beginFill(0x403933);ibg0.drawRect(0,0,this.itemW,this.itemH);ibg0.endFill();var ibg1=new PIXI.Graphics();ibg1.lineStyle(0,0,0);ibg1.beginFill(0x807468);ibg1.drawRect(0,0,this.itemW,this.itemH);ibg1.endFill();item=new component.VButton([ibg0,ibg1],this.onItem.bind(this));item.y=(i+1)*this.itemH;item['limitId']=data[i].id;var tf=game.GameUtils.createText('',{fontSize:11,fill:0xffffff,align:'left'});tf.anchor.x=0.5;tf.anchor.y=0.5;tf.x=this.itemW*0.5;tf.y=this.itemH*0.5;tf.text=game.GlobalVals.userInfo.currency+" "+component.VComponentUtils.getNumInFormat(data[i].min)+" - "+component.VComponentUtils.getNumInFormat(data[i].max);item.addChild(tf);this.addChild(item);this.items.push(item);}
bg.clear();bg.lineStyle(0,0,0);bg.beginFill(0xF2E3C4);bg.drawRect(0,0,this.itemW,this.itemH);bg.endFill();};LimitContextMenu.prototype.show=function(){this.visible=true;if(this.isContext)
game.GlobalVals.onShownPopup(this);};LimitContextMenu.prototype.hide=function(){this.visible=false;if(this.isContext)
game.GlobalVals.onHidePopup();};LimitContextMenu.prototype.clearActive=function(){if(this.activeBtn){this.activeBtn.setActive(false);this.activeBtn=null;}};LimitContextMenu.prototype.dissable=function(){this.isEnabled=false;for(var i=0;i<this.items.length;i++){this.items[i].dissable();}};LimitContextMenu.prototype.enable=function(){this.isEnabled=true;for(var i=0;i<this.items.length;i++){this.items[i].enable();}};LimitContextMenu.prototype.disableNonselectedMenus=function(){var menus=[];menus.push(this);if(this.parentMenu)
menus.push(this.parentMenu);for(var i=0;i<this.subMenus.length;i++)
menus.push(this.subMenus[i]);for(var i=0;i<menus.length;i++)
if(!menus[i].activeBtn)
menus[i].dissable();};LimitContextMenu.prototype.enableAllMenus=function(){var menus=[];menus.push(this);if(this.parentMenu)
menus.push(this.parentMenu);for(var i=0;i<this.subMenus.length;i++)
menus.push(this.subMenus[i]);for(var i=0;i<menus.length;i++)
menus[i].enable();};LimitContextMenu.prototype.hasActiveItem=function(){var menus=[];menus.push(this);if(this.parentMenu)
menus.push(this.parentMenu);for(var i=0;i<this.subMenus.length;i++)
menus.push(this.subMenus[i]);for(var i=0;i<menus.length;i++)
if(menus[i].activeBtn)
return true;return false;};LimitContextMenu.prototype.runActiveItem=function(){var menus=[];menus.push(this);if(this.parentMenu)
menus.push(this.parentMenu);for(var i=0;i<this.subMenus.length;i++)
menus.push(this.subMenus[i]);for(var i=0;i<menus.length;i++)
if(menus[i].activeBtn){menus[i].onItem(menus[i].activeBtn,true);break;}};LimitContextMenu.prototype.onItem=function(btn,force){if(force===void 0){force=false;}
if(!this.isEnabled)
return;if(!force&&this.activeBtn==btn)
return;this.activeBtn=btn;for(var i=0;i<this.subMenus.length;i++){this.subMenus[i].clearActive();}
if(this.parentMenu)
this.parentMenu.clearActive();if(this.isContext)
this.hide();else if(this.parent instanceof LimitContextMenu)
this.parent['hide']();trace('change table limit to ============================================= '+btn['limitId']);this.dispatcher.dispatchEventWith(game.GameEvent.CHANGE_LIMIT,{table:this.tableId,limit:btn['limitId']});};return LimitContextMenu;}(PIXI.Container));game.LimitContextMenu=LimitContextMenu;})(game||(game={}));var game;(function(game){var LimitDetail=(function(_super){__extends(LimitDetail,_super);function LimitDetail(gameModel,viewW,viewH){return _super.call(this,gameModel,viewW,viewH)||this;}
LimitDetail.prototype.initView=function(){_super.prototype.initView.call(this);};LimitDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.BANKER+' / '+game.GameText.PLAYER,game.GameText.BIG+' / '+game.GameText.SMALL,game.GameText.PLAYER_BANKER_PAIR,game.GameText.TIE,game.GameText.NATURAL,game.GameText.SUPER_6_PLUS];var tfs=['bankerTf','bigTf','bPairTf','tieTf','naturalTf','superTf'];var posX=12;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;for(var i=0;i<texts.length;i++){tf=game.GameUtils.createText(texts[i],style);tf.x=posX;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this[tfs[i]]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};LimitDetail.prototype.setData=function(data){this.bankerTf.text=component.VComponentUtils.getNumInFormat(this.gameModel.getBetMin(game.BetType.BANKER.toString()))+" - "+component.VComponentUtils.getNumInFormat(this.gameModel.getBetMax(game.BetType.BANKER.toString()));this.bigTf.text=component.VComponentUtils.getNumInFormat(this.gameModel.getBetMin(game.BetType.BIG.toString()))+" - "+component.VComponentUtils.getNumInFormat(this.gameModel.getBetMax(game.BetType.BIG.toString()));this.bPairTf.text=component.VComponentUtils.getNumInFormat(this.gameModel.getBetMin(game.BetType.BANKER_PAIR.toString()))+" - "+component.VComponentUtils.getNumInFormat(this.gameModel.getBetMax(game.BetType.BANKER_PAIR.toString()));this.tieTf.text=component.VComponentUtils.getNumInFormat(this.gameModel.getBetMin(game.BetType.TIE.toString()))+" - "+component.VComponentUtils.getNumInFormat(this.gameModel.getBetMax(game.BetType.TIE.toString()));this.naturalTf.text=component.VComponentUtils.getNumInFormat(this.gameModel.getBetMin(game.BetType.BANKER_N8.toString()))+" - "+component.VComponentUtils.getNumInFormat(this.gameModel.getBetMax(game.BetType.BANKER_N8.toString()));this.superTf.text=component.VComponentUtils.getNumInFormat(this.gameModel.getBetMin(game.BetType.SUPER.toString()))+" - "+component.VComponentUtils.getNumInFormat(this.gameModel.getBetMax(game.BetType.SUPER.toString()));};return LimitDetail;}(game.BaseGameDetail));game.LimitDetail=LimitDetail;})(game||(game={}));var game;(function(game){var LivePoolDetail=(function(_super){__extends(LivePoolDetail,_super);function LivePoolDetail(gameModel,viewW,viewH){return _super.call(this,gameModel,viewW,viewH)||this;}
LivePoolDetail.prototype.initView=function(){_super.prototype.initView.call(this);};LivePoolDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.BANKER,game.GameText.PLAYER,game.GameText.TIE,game.GameText.BANKER_PAIR,game.GameText.PLAYER_PAIR,game.GameText.BIG,game.GameText.SMALL,game.GameText.BANKER_NATURAL.replace('{0}','8'),game.GameText.PLAYER_NATURAL.replace('{0}','8'),game.GameText.BANKER_NATURAL.replace('{0}','9'),game.GameText.PLAYER_NATURAL.replace('{0}','9'),game.GameText.SUPER_6_PLUS];var results=[];results.push(game.BetType.getResult(game.BetType.BANKER));results.push(game.BetType.getResult(game.BetType.PLAYER));results.push(game.BetType.getResult(game.BetType.TIE));results.push(game.BetType.getResult(game.BetType.BANKER_PAIR,game.BetType.getResult(game.BetType.BANKER)));results.push(game.BetType.getResult(game.BetType.PLAYER_PAIR,game.BetType.getResult(game.BetType.PLAYER)));results.push(game.BetType.getResult(game.BetType.BIG));results.push(game.BetType.getResult(game.BetType.SMALL));results.push(game.BetType.getResult(game.BetType.BANKER_N8,game.BetType.getResult(game.BetType.BANKER)));results.push(game.BetType.getResult(game.BetType.PLAYER_N8,game.BetType.getResult(game.BetType.PLAYER)));results.push(game.BetType.getResult(game.BetType.BANKER_N9,game.BetType.getResult(game.BetType.BANKER)));results.push(game.BetType.getResult(game.BetType.PLAYER_N9,game.BetType.getResult(game.BetType.PLAYER)));results.push(game.BetType.getResult(game.BetType.SUPER));this.tfs=[];var posX=5;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;var icon;for(var i=0;i<texts.length;i++){icon=new game.PearlRoadIcon().setData(game.TrendIconUtils.NORMAL_SIZE);content.addChild(icon);icon.x=posX+icon.size*0.5;icon.y=posY+icon.size*0.5;if(i==5||i==6)
icon.setType(game.TrendType.BIG_SMALL);else
icon.setType(game.TrendType.NATURAL);icon.draw(new game.netdata.TrendsItem().setData(results[i]));tf=game.GameUtils.createText(texts[i],style);tf.x=posX+20;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};LivePoolDetail.prototype.clearData=function(){for(var i=0;i<this.tfs.length;i++)
this.tfs[i].text='0';};LivePoolDetail.prototype.setData=function(data){this.clearData();for(var i=0;i<data.content.cat.length;i++){this.tfs[parseInt(data.content.cat[i])-1].text=component.VComponentUtils.getNumInFormat(data.content.amount[i]);}};return LivePoolDetail;}(game.BaseGameDetail));game.LivePoolDetail=LivePoolDetail;})(game||(game={}));var game;(function(game){var HViewModeControl=(function(_super){__extends(HViewModeControl,_super);function HViewModeControl(gameModel,eventMode){if(eventMode===void 0){eventMode=game.GameEvent.CHANGE_VIEW_MODE;}
var _this=_super.call(this,gameModel)||this;_this.items=[];_this.expanded=true;_this.eventMode=eventMode;return _this;}
HViewModeControl.prototype.destructor=function(){for(var i=0;i<this.items.length;i++){delete this.items[i].tf['item'];this.items[i].tf.removeEventListener("click",this.onItemBinding);}
if(this.hViewModeCon)
this.hViewModeCon.parentNode.removeChild(this.hViewModeCon);_super.prototype.destructor.call(this);};HViewModeControl.prototype.expand=function(){this.expanded=true;for(var i=0;i<this.items.length;i++){if(this.items[i]==this.selectedItem)
continue;this.items[i].tf.style.display='';}};HViewModeControl.prototype.collapse=function(){this.expanded=false;for(var i=0;i<this.items.length;i++){if(this.items[i]==this.selectedItem)
continue;this.items[i].tf.style.display='none';}};HViewModeControl.prototype.initialize=function(modes){this.items=[];this.hViewModeCon=document.createElement('div');this.hViewModeCon.style.position='absolute';document.getElementById("hContainer").appendChild(this.hViewModeCon);var item;var ih=24;for(var i=0;i<modes.length;i++){item={};var tf=document.createElement('div');tf.style.display='table-cell';tf.style.borderRadius='5px';tf.style.background='rgba(0,0,0,0.7)';tf.style.position='absolute';tf.style.color='#ffffff';tf.style.fontSize='18px';tf.style.fontWeight='bold';tf.style.fontFamily='arial';tf.style.border='1px solid rgba(0,0,0,0.7)';tf.style.width='30px';tf.style.height=ih+'px';tf.style.left='0px';tf.style.top=i*(ih+7)+'px';tf.style.textAlign='center';tf.style.paddingTop='4px';tf.style.cursor='pointer';tf.innerHTML=modes[i].toUpperCase();this.hViewModeCon.appendChild(tf);this.onItemBinding=this.onItemUp.bind(this);tf.addEventListener("click",this.onItemBinding);item['mode']=modes[i];item['tf']=tf;tf['item']=item;this.items.push(item);}};HViewModeControl.prototype.activeItemWithData=function(data){for(var i=0;i<this.items.length;i++){if(this.items[i]['mode']==data){this.activeItem(this.items[i]);break;}}};HViewModeControl.prototype.setPos=function(x,y){this.orgX=x;this.orgY=y;this.sizeHandler();};HViewModeControl.prototype.activeItem=function(item){if(this.selectedItem)
this.selectedItem['tf'].style.color='#ffffff';item['tf'].style.color='#777777';this.selectedItem=item;component.VComponentUtils.removeElementFromArray(this.items,this.selectedItem);this.items.unshift(this.selectedItem);var ih=24;for(var i=0;i<this.items.length;i++){this.items[i].tf.style.left='0px';this.items[i].tf.style.top=i*(ih+7)+'px';}};HViewModeControl.prototype.onItemUp=function(e){var item=e.target.item;if(item==this.selectedItem){this.expanded?this.collapse():this.expand();return;}
this.activeItem(item);this.gameModel.notify(this.eventMode,item['mode']);};HViewModeControl.prototype.sizeHandler=function(){this.hViewModeCon.style.left=this.orgX+3+'px';this.hViewModeCon.style.top=this.orgY+2+'px';};return HViewModeControl;}(game.GameObject));game.HViewModeControl=HViewModeControl;})(game||(game={}));var game;(function(game){var LiveChipGroup=(function(_super){__extends(LiveChipGroup,_super);function LiveChipGroup(gameModel,con){var _this=_super.call(this,gameModel)||this;_this.container=con;_this.percents=[0.1,0.15,0.2,0.25,0.3];_this.betPLaceArr=[];return _this;}
LiveChipGroup.prototype.setVisible=function(vi){this.tf.visible=vi;this.tfBg.visible=vi;for(var i=0;i<this.betPLaceArr.length;i++)
this.betPLaceArr[i].visible=vi;};LiveChipGroup.prototype.initView=function(posArr,tfPos){var betPlace;if(posArr)
for(var i=0;i<posArr.length;i++){betPlace=new game.BetPlace(this.gameModel,true);betPlace.x=posArr[i].x;betPlace.y=posArr[i].y;betPlace.scale.x=0.4;betPlace.scale.y=betPlace.scale.x;betPlace.alpha=0.7;this.betPLaceArr.push(betPlace);}
var arr=this.betPLaceArr.slice();arr.sort(function(a,b){return a.y>=b.y?(a.y==b.y?0:1):-1;});for(var i=0;i<arr.length;i++)
this.container.addChild(arr[i]);this.tfCon=new PIXI.Container();this.tfBg=new PIXI.Graphics();this.tfCon.addChild(this.tfBg);this.tf=game.GameUtils.createText('',{fontFamily:"dinbold",fontSize:12,fontStyle:'bold',fill:0xffffff,align:'center'});this.tf.x=3;this.tf.y=2;this.tfCon.addChild(this.tf);this.container.addChild(this.tfCon);this.tfCon.x=tfPos.x;this.tfCon.y=tfPos.y;};LiveChipGroup.prototype.updateView=function(posArr,tfPos){var betPlace;for(var i=0;i<posArr.length;i++){betPlace=this.betPLaceArr[i];betPlace.x=posArr[i].x;betPlace.y=posArr[i].y;}
this.tfCon.x=tfPos.x;this.tfCon.y=tfPos.y;};LiveChipGroup.prototype.setAmount=function(amt){if(amt>0){this.tf.text=component.VComponentUtils.getNumInFormat(Math.round(amt));this.tfBg.clear();this.tfBg.beginFill(0x222222,0.7);this.tfBg.drawRoundedRect(0,0,this.tf.width+4,this.tf.height+4,5);this.tfBg.endFill();}
else{this.tf.text="";this.tfBg.clear();}
var minChipVal=this.gameModel.chipControl.liveChips[0].getVal();for(var i=0;i<this.betPLaceArr.length;i++){var amt2=Math.round(amt*this.percents[i]);amt2-=((amt2*10)%(minChipVal*10)/10);this.betPLaceArr[i].setAmount(amt2);}};return LiveChipGroup;}(game.GameObject));game.LiveChipGroup=LiveChipGroup;})(game||(game={}));var game;(function(game){var LiveChipMng=(function(_super){__extends(LiveChipMng,_super);function LiveChipMng(gameModel,con){var _this=_super.call(this,gameModel)||this;_this.container=con;_this.groupMap={};_this.isVisible=true;return _this;}
LiveChipMng.prototype.destructor=function(){for(var i in this.groupMap){this.groupMap[i].destroy();delete this.groupMap[i];}
_super.prototype.destructor.call(this);};LiveChipMng.prototype.initView=function(setting){this.setting=setting;var group;for(var i in this.setting){group=new game.LiveChipGroup(this.gameModel,this.container);group.initView(this.setting[i].arr,this.setting[i].totalPos);this.groupMap[i]=group;}};LiveChipMng.prototype.updateView=function(setting){this.setting=setting;var group;for(var i in this.setting){group=this.groupMap[i];group.updateView(this.setting[i].arr,this.setting[i].totalPos);}};LiveChipMng.prototype.setVisible=function(vi){this.isVisible=vi;for(var i in this.groupMap){this.groupMap[i].setVisible(vi);}};LiveChipMng.prototype.setAmount=function(betType,amt){if(!this.groupMap[betType]){return;}
this.groupMap[betType].setAmount(amt);};LiveChipMng.prototype.clearChips=function(){for(var i in this.groupMap){this.groupMap[i].setAmount(0);}};return LiveChipMng;}(game.GameObject));game.LiveChipMng=LiveChipMng;})(game||(game={}));var game;(function(game){var MiniTool=(function(_super){__extends(MiniTool,_super);function MiniTool(gameModel){var _this=_super.call(this,gameModel)||this;_this.initialize();return _this;}
MiniTool.prototype.destructor=function(){_super.prototype.destructor.call(this);};MiniTool.prototype.initialize=function(){this.liveTool=new PIXI.Container();this.liveTool.y=280;this.liveTool.addChild(new PIXI.Sprite(PIXI.Texture.fromFrame('live_phone_bg.png')));var labelTf=component.VComponentUtils.createText('',{fontFamily:"Arial",fontSize:14,fill:0xffffff});this.liveTool.addChild(labelTf);labelTf.x=111;labelTf.y=8;labelTf.anchor.x=1;labelTf.text=game.GameText.LIVE;this.labelTf=labelTf;var phoneTf=component.VComponentUtils.createText('',{fontFamily:"Arial",fontSize:14,fill:0xffffff});this.liveTool.addChild(phoneTf);this.gameModel.toolTip.addToolTip(this.liveTool,game.GameText.DIAL);phoneTf.x=170;phoneTf.y=8;var phone='';var ids=game.GameUtils.getGroupedTableIds(this.gameModel.TABLE_ID);for(var i=0;i<ids.length;i++)
if(game.GameSettings.LIVE_PHONE['live_call_table'+ids[i]]){phone=game.GameSettings.LIVE_PHONE['live_call_table'+ids[i]];break;}
phoneTf.text=phone;this.phoneTf=phoneTf;this.topTool=new game.TopTool(this.gameModel);this.initMinigames();this.addChild(this.topTool);this.addChild(this.liveTool);this.updateView();};MiniTool.prototype.initMinigames=function(){var viewMode=game.GlobalVals.viewMode;if(viewMode==game.ViewMode.MODE_7S||viewMode==game.ViewMode.MODE_7S_3D){return;}};MiniTool.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;};return MiniTool;}(game.GameObject));game.MiniTool=MiniTool;})(game||(game={}));var game;(function(game){var PlayerBetInfo=(function(_super){__extends(PlayerBetInfo,_super);function PlayerBetInfo(gameModel,viewW,viewH){var _this=_super.call(this,gameModel,viewW,viewH)||this;_this.initView();_this.items=[];return _this;}
PlayerBetInfo.prototype.initView=function(){_super.prototype.initView.call(this);var bg=this.bg;bg.clear();bg.beginFill(0x26231E);bg.drawRect(0,0,this.viewW,this.viewH);bg.endFill();this.bg.mask=null;};PlayerBetInfo.prototype.initContent=function(){this.content=new PIXI.Container();this.addChild(this.content);};PlayerBetInfo.prototype.updateRoomBetInfo=function(){if(!this.gameModel.roomBetInfo)
return;this.clear();var item=core.VObjectPool.get(game.PlayerBetItem);item.gameModel=this.gameModel;this.addChild(item);item.y=this.items.length*item.height;this.items.push(item);var seatId=this.gameModel.SEAT_ID;item.setData(seatId,this.gameModel.getAvatarId(seatId),this.gameModel.getNickname(seatId),this.gameModel.getTotalBetAmount(seatId));for(var i=0;i<this.gameModel.roomBetInfo.content.nicknames.length;i++){seatId=parseInt(this.gameModel.roomBetInfo.content.nicknames[i][0]);if(seatId==this.gameModel.SEAT_ID)
continue;var item=core.VObjectPool.get(game.PlayerBetItem);item.gameModel=this.gameModel;this.addChild(item);item.y=this.items.length*item.height;this.items.push(item);item.setData(seatId,this.gameModel.getAvatarId(seatId),this.gameModel.getNickname(seatId),this.gameModel.getTotalBetAmount(seatId));}};PlayerBetInfo.prototype.setDetailData=function(playerBet,betPlace){if(playerBet===void 0){playerBet=null;}
if(betPlace===void 0){betPlace=null;}
this.clear();var seatId;if(betPlace&&betPlace.getAmount()>0){var item=core.VObjectPool.get(game.PlayerBetItem);item.gameModel=this.gameModel;this.addChild(item);this.items.push(item);seatId=this.gameModel.SEAT_ID;item.setData(seatId,this.gameModel.getAvatarId(seatId),this.gameModel.getNickname(seatId),betPlace.getAmount());}
if(!playerBet)
return;for(var i=0;i<playerBet.chipStack.length;i++){var item=core.VObjectPool.get(game.PlayerBetItem);item.gameModel=this.gameModel;this.addChild(item);item.y=this.items.length*item.height;this.items.push(item);seatId=playerBet.chipStack[i].getVal();item.setData(seatId,this.gameModel.getAvatarId(seatId),this.gameModel.getNickname(seatId),playerBet.amounts[seatId]);}};PlayerBetInfo.prototype.clear=function(){while(this.items.length)
core.VObjectPool.release(this.items.pop(),game.PlayerBetItem);};return PlayerBetInfo;}(game.BaseGameDetail));game.PlayerBetInfo=PlayerBetInfo;})(game||(game={}));var game;(function(game){var PlayerBetItem=(function(_super){__extends(PlayerBetItem,_super);function PlayerBetItem(gameModel){var _this=_super.call(this,gameModel)||this;_this.initView();return _this;}
PlayerBetItem.prototype.destructor=function(){while(this.chips.length){var chip=this.chips.pop();this.chipCon.removeChild(chip);this.gameModel.chipControl.releaseChip(chip);}
_super.prototype.destructor.call(this);};PlayerBetItem.prototype.clean=function(){while(this.chips.length){var chip=this.chips.pop();this.chipCon.removeChild(chip);this.gameModel.chipControl.releaseChip(chip);}
if(this.parent)
this.parent.removeChild(this);};PlayerBetItem.prototype.initView=function(){this.chips=[];this.bg=new PIXI.Graphics();this.addChild(this.bg);this.bg.lineStyle(1,0x302D28);this.bg.moveTo(2,36);this.bg.lineTo(2+320,36);var f0=new PIXI.Graphics();f0.lineStyle(1,0x346550);f0.drawRoundedRect(0,0,32,32,3);var f1=new PIXI.Graphics();f1.lineStyle(0,0,0);f1.beginFill(0xFDC526);f1.drawRoundedRect(0,0,32,32,3);f1.endFill();var seatCon=new component.VToggleButton(f0,f1);this.seatCon=seatCon;this.addChild(seatCon);seatCon.x=2;seatCon.y=2;this.seatTf=game.GameUtils.createNormalText('',18);this.seatTf.anchor.x=0.5;this.seatTf.anchor.y=0.5;this.seatTf.x=18;this.seatTf.y=18;this.addChild(this.seatTf);this.usernameTf=game.GameUtils.createNormalText('',14);this.usernameTf.x=75;this.usernameTf.y=9;this.addChild(this.usernameTf);this.chipCon=new PIXI.Container();this.chipCon.x=199;this.chipCon.y=23;this.chipCon.scale.x=0.6;this.chipCon.scale.y=this.chipCon.scale.x;this.addChild(this.chipCon);this.amountTf=game.GameUtils.createNormalText('',14);this.amountTf.x=297;this.amountTf.y=9;this.amountTf.anchor.x=1;this.addChild(this.amountTf);this.avatar=new game.AvatarIcon(this.gameModel).initialize(32);this.avatar.x=38;this.avatar.y=2;this.addChild(this.avatar);this.selector=new PIXI.Graphics();this.addChild(this.selector);this.selector.lineStyle(1,0x85724A);this.selector.drawRoundedRect(35.75,2,265,32,10);};PlayerBetItem.prototype.setData=function(seatId,avatarId,nick,amount){if(!this.gameModel.chipControl)
return;while(this.chips.length){var chip=this.chips.pop();this.chipCon.removeChild(chip);this.gameModel.chipControl.releaseChip(chip);}
for(var i=0;i<3;i++){var chip=this.gameModel.chipControl.getChip(seatId,game.Chip.PLAYER);this.chipCon.addChild(chip);this.chips.push(chip);chip.y=-5*i;}
this.seatTf.text=seatId.toString();this.seatTf.style.fill=seatId!=this.gameModel.SEAT_ID?0xffffff:0x000000;this.seatCon.setFrame(seatId!=this.gameModel.SEAT_ID?0:1);this.selector.visible=seatId==this.gameModel.SEAT_ID;this.avatar.setID(avatarId.toString());this.usernameTf.text=nick;this.amountTf.text=component.VComponentUtils.getNumInFormat(amount,1);};return PlayerBetItem;}(game.GameObject));game.PlayerBetItem=PlayerBetItem;})(game||(game={}));var game;(function(game){var PlayerBetPlace=(function(_super){__extends(PlayerBetPlace,_super);function PlayerBetPlace(gameModel){var _this=_super.call(this,gameModel)||this;_this.chipStack=[];_this.amounts=[];for(var i=0;i<9;i++)
_this.amounts[i]=0;return _this;}
PlayerBetPlace.prototype.destructor=function(){_super.prototype.destructor.call(this);};PlayerBetPlace.prototype.showSelector=function(){if(this.chipStack.length)
this.chipStack[0].selector.visible=true;};PlayerBetPlace.prototype.hideSelector=function(){if(this.chipStack.length)
this.chipStack[0].selector.visible=false;};PlayerBetPlace.prototype.addChip=function(seatId,amount){this.amounts[seatId]=amount;for(var i=0;i<this.chipStack.length;i++)
if(this.chipStack[i].getVal()==seatId)
return;var chip=this.gameModel.chipControl.getChip(seatId,game.Chip.PLAYER);chip.y=-5*(this.chipStack.length);this.chipStack.push(chip);chip.shadow.visible=this.chipStack.length==1;this.addChild(chip);};PlayerBetPlace.prototype.clearChips=function(){for(var i=0;i<9;i++)
this.amounts[i]=0;while(this.chipStack.length){var chip=this.chipStack.pop();this.removeChild(chip);this.gameModel.chipControl.releaseChip(chip);}};return PlayerBetPlace;}(game.GameObject));game.PlayerBetPlace=PlayerBetPlace;})(game||(game={}));var game;(function(game){var BaccaratDetailPopup=(function(_super){__extends(BaccaratDetailPopup,_super);function BaccaratDetailPopup(main,w,h){var _this=_super.call(this,main,w,h)||this;var icon=new game.TrendInfoPanel(null);_this.icon=icon;icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=(w-icon.width)*0.5;icon.y=42;_this.addChild(icon);return _this;}
BaccaratDetailPopup.prototype.show=function(data){_super.prototype.show.call(this,data);this.icon.setData(data);};BaccaratDetailPopup.prototype.setData=function(data){_super.prototype.setData.call(this,data);};BaccaratDetailPopup.prototype.getBetName=function(betType){return game.GameText["Baccarat_"+betType];};return BaccaratDetailPopup;}(game.BaseBetDetailPopup));game.BaccaratDetailPopup=BaccaratDetailPopup;})(game||(game={}));var game;(function(game){var BaseTipPopup=(function(_super){__extends(BaseTipPopup,_super);function BaseTipPopup(main,title,msg){if(title===void 0){title='';}
if(msg===void 0){msg='';}
var _this=_super.call(this,main,340,100)||this;_this.closeBtn.visible=false;_this.okBtn.visible=false;_this.hasUnderlay=false;_this.msgTf.y=_this.statusBar.height+(_this.viewH-_this.statusBar.height)*0.5;_this.titleTf.text=title;_this.msgTf.text=msg;return _this;}
BaseTipPopup.prototype.setTip=function(title,msg){this.titleTf.text=title;this.msgTf.text=msg;};return BaseTipPopup;}(game.MessagePopup));game.BaseTipPopup=BaseTipPopup;})(game||(game={}));var game;(function(game){var BullDetailPopup=(function(_super){__extends(BullDetailPopup,_super);function BullDetailPopup(main,w,h){var _this=_super.call(this,main,w,h)||this;var icon=new bull_fight.GenTrendInfoPanel(null);_this.icon=icon;icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=(w-icon.width)*0.5;icon.y=42;_this.addChild(icon);return _this;}
BullDetailPopup.prototype.show=function(data){_super.prototype.show.call(this,data);this.icon.setData(data);};BullDetailPopup.prototype.setData=function(data){_super.prototype.setData.call(this,data);};BullDetailPopup.prototype.getBetName=function(betType){return bull_fight.BetArea.sGetBetName(betType);};return BullDetailPopup;}(game.BaseBetDetailPopup));game.BullDetailPopup=BullDetailPopup;})(game||(game={}));var game;(function(game){var DragonTigerDetailPopup=(function(_super){__extends(DragonTigerDetailPopup,_super);function DragonTigerDetailPopup(main,w,h){var _this=_super.call(this,main,w,h)||this;var icon=new dragon_tiger.DraTrendInfoPanel(null);_this.icon=icon;icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=(w-140)*0.5;icon.y=42;_this.addChild(icon);return _this;}
DragonTigerDetailPopup.prototype.show=function(data){_super.prototype.show.call(this,data);this.icon.setData(data);};DragonTigerDetailPopup.prototype.setData=function(data){_super.prototype.setData.call(this,data);};DragonTigerDetailPopup.prototype.getBetName=function(betType){return game.GameText["DragonTiger_"+betType];};return DragonTigerDetailPopup;}(game.BaseBetDetailPopup));game.DragonTigerDetailPopup=DragonTigerDetailPopup;})(game||(game={}));var game;(function(game){var FabulousDetailPopup=(function(_super){__extends(FabulousDetailPopup,_super);function FabulousDetailPopup(main,w,h){var _this=_super.call(this,main,w,h)||this;var icon=new game.TrendInfoPanel(null);_this.icon=icon;icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=(w-icon.width)*0.5;icon.y=42;_this.addChild(icon);return _this;}
FabulousDetailPopup.prototype.show=function(data){_super.prototype.show.call(this,data);this.icon.setData(data);};FabulousDetailPopup.prototype.setData=function(data){_super.prototype.setData.call(this,data);};FabulousDetailPopup.prototype.getBetName=function(betType){return game.GameText["Fabulous_"+betType];};return FabulousDetailPopup;}(game.BaseBetDetailPopup));game.FabulousDetailPopup=FabulousDetailPopup;})(game||(game={}));var game;(function(game){var HiLoDetailPopup=(function(_super){__extends(HiLoDetailPopup,_super);function HiLoDetailPopup(main,w,h){var _this=_super.call(this,main,w,h)||this;var icon=new super_hi_lo.TrendInfoPanel(null);_this.icon=icon;icon.bg.visible=false;icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=w*0.5-43*icon.scale.x*0.5;icon.y=42;_this.addChild(icon);return _this;}
HiLoDetailPopup.prototype.show=function(data){this.payouts=data.payouts;_super.prototype.show.call(this,data);this.icon.setData(data);};HiLoDetailPopup.prototype.setData=function(data){_super.prototype.setData.call(this,data);};HiLoDetailPopup.prototype.getBetName=function(betType){return super_hi_lo.BetType.getName(betType)+' ( '+this.getPayout(betType)+' )';};HiLoDetailPopup.prototype.getPayout=function(betType){var result=1;for(var i=0;i<this.payouts.length;i++){if(this.payouts[i].cat==betType){result=this.payouts[i].payout;break;}}
return result;};return HiLoDetailPopup;}(game.BaseBetDetailPopup));game.HiLoDetailPopup=HiLoDetailPopup;})(game||(game={}));var game;(function(game){var HistoryPanel=(function(_super){__extends(HistoryPanel,_super);function HistoryPanel(main,w,h){var _this=_super.call(this,main,w,h)||this;_this.closeTimerId=0;_this.initialize();return _this;}
HistoryPanel.prototype.destroy=function(options){clearTimeout(this.closeTimerId);_super.prototype.destroy.call(this);};HistoryPanel.prototype.initialize=function(){var pageSize=20;var tt=22.7;this.table=new component.VTable(850,22,20,[game.GameText.BET_NO,game.GameText.DATE+' '+'(GMT+'+game.GameSettings.DISPLAY_TIME_ZONE+')',game.GameText.TABLE_CODE,game.GameText.TABLE,game.GameText.GAME_CODE,game.GameText.BET_AMOUNT,game.GameText.WIN,game.GameText.RESULT,""],[2/tt,4/tt,2/tt,2/tt,2/tt,3/tt,3/tt,4/tt,0.7/tt],"center",{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12},{fontFamily:"Arial",fill:0x817C78,fontSize:12});this.table.x=10;this.table.y=92;this.addChild(this.table);this.table.dispatcher.addEventListener(component.VTable.RECORD_CLICK,this.onRecord,this);this.titleTf.text=game.GameText.HISTORY.toUpperCase();var posY=43;this.initGameSelect(11,posY);var tf=game.GameUtils.createNormalText(game.GameText.START_DATE);this.addChild(tf);tf.x=176;tf.y=48;var tf=game.GameUtils.createText(game.GameText.TRANSACTION_RECORD_TIP,{fontSize:11,fill:0xAAAAAA});this.addChild(tf);tf.anchor.x=0.5;tf.x=this.viewW/2;tf.y=72;var startDate=new component.VCalenda(175,25,220,170,game.GameSettings.CANVAS_WIDTH-game.GameSettings.TABLE_SMALL_VIEW_WIDTH,game.GameSettings.CANVAS_HEIGHT,null,game.GameSettings.DISPLAY_TIME_ZONE,'calendar_icon.png');this.startDate=startDate;startDate.x=242;startDate.y=posY;this.addChild(startDate);var d=new Date();d=component.VComponentUtils.getTimezoneDate(d.getTime(),game.GameSettings.DISPLAY_TIME_ZONE);d.setHours(0);d.setMinutes(0);d.setSeconds(0);startDate.setSelectedDate(d);tf=game.GameUtils.createNormalText(game.GameText.END_DATE);this.addChild(tf);tf.x=443;tf.y=48;var endDate=new component.VCalenda(175,25,220,170,game.GameSettings.CANVAS_WIDTH-game.GameSettings.TABLE_SMALL_VIEW_WIDTH,game.GameSettings.CANVAS_HEIGHT,null,game.GameSettings.DISPLAY_TIME_ZONE,'calendar_icon.png');this.endDate=endDate;endDate.x=508;endDate.y=43;this.addChild(endDate);d.setHours(23);d.setMinutes(59);d.setSeconds(59);endDate.setSelectedDate(d);var searchBtn=component.VButton.createSimple(this.onSearch.bind(this),game.GameText.SEARCH,81,25);searchBtn.setLockDelay(5000);this.addChild(searchBtn);searchBtn.x=703;searchBtn.y=posY;var pageMng=new component.VPagesManager(100,1,25,false,false);this.pageMng=pageMng;pageMng.x=797;pageMng.y=43;this.addChild(pageMng);pageMng.dispatcher.addEventListener(component.VPagesManager.CHANGE_INDEX,this.onPageChange,this);this.initPopups();};HistoryPanel.prototype.initPopups=function(){var w=650;var h=526;this.popupDetailMap={};var gameIds=game.GameSettings.CONFIG.history;var detailClass=[game.SevenUpDetailPopup,game.BaccaratDetailPopup,game.BaccaratDetailPopup,game.BaccaratDetailPopup,game.BaccaratDetailPopup,game.BaccaratDetailPopup,game.RouletteDetailPopup,game.DragonTigerDetailPopup,game.SicBoDetailPopup,game.FabulousDetailPopup,game.LuckyBacDetailPopup,game.BullDetailPopup,game.HiLoDetailPopup,game.S3PDetailPopup,game.SFDetailPopup];for(var i=0;i<gameIds.length;i++){var popup=new detailClass[i](this.main,w,h);this.addChild(popup);popup.x=(this.width-w)*0.5;popup.y=(this.height-h)*0.5;popup.hide();this.popupDetailMap[gameIds[i]]=popup;}};HistoryPanel.prototype.onSearch=function(){this.pageMng.onBegin();};HistoryPanel.prototype.onPageChange=function(e){this.getHistory(this.gameId,e.data);};HistoryPanel.prototype.initGameSelect=function(posX,posY){var w=148;this.gameSelectIcon=new PIXI.Graphics();this.gameSelectIcon.x=posX;this.gameSelectIcon.y=posY;this.gameSelectIcon.beginFill(0x000000);this.gameSelectIcon.drawRoundedRect(0,0,148,24,5);this.gameSelectIcon.endFill();var gameSelectTf=game.GameUtils.createNormalText('',11);gameSelectTf.x=5;gameSelectTf.y=5;this.gameSelectTf=gameSelectTf;this.gameSelectIcon.addChild(gameSelectTf);var arrow=new PIXI.Sprite(this.main.resourceMng.commonLoader.resources['menu_arrow'].texture);this.gameSelectIcon.addChild(arrow);arrow.x=130;arrow.y=7;arrow.scale.x=1.5;arrow.scale.y=arrow.scale.x;this.addChild(this.gameSelectIcon);var gameSelectContent=new PIXI.Container();this.gameSelectContent=gameSelectContent;this.addChild(gameSelectContent);var arr=[game.GameText.ALL_TRANSACTIONS];var gameIds=[-1];for(var j in game.GameSettings.CONFIG.gameInfos){arr.push(game.GameUtils.getGameNameByGameId(game.GameSettings.CONFIG.gameInfos[j].gameId));gameIds.push(game.GameSettings.CONFIG.gameInfos[j].gameId);}
var defaultItem;this.gameItemArr=[];for(var i=0;i<arr.length;i++){var f0=new PIXI.Graphics();f0.beginFill(0x191512);f0.drawRect(0,0,w,26);f0.endFill();var f1=new PIXI.Graphics();f1.beginFill(0x3F3832);f1.drawRect(0,0,w,26);f1.endFill();var item=new component.VButton([f0,f1],this.onGameItemHdl.bind(this));if(i==0)
defaultItem=item;this.gameSelectContent.addChild(item);var tf=game.GameUtils.createNormalText(arr[i],11);item['tf']=tf;item['gameId']=gameIds[i];tf.anchor.x=0.5;tf.anchor.y=0.5;tf.x=w*0.5;tf.y=item.height*0.5;item.addChild(tf);item.y=i*item.height;this.gameItemArr.push(item);}
var scroll=game.GameUtils.createScroll(2,this.gameSelectContent.height);var vcombo=new component.VComboBox(this.gameSelectIcon,this.gameSelectContent,scroll,w,this.gameSelectContent.height,game.GameSettings.CANVAS_WIDTH,game.GameSettings.CANVAS_HEIGHT);vcombo.scroll.visible=false;this.selectedGameCombo=vcombo;};HistoryPanel.prototype.activeGame=function(tableId){if(tableId===void 0){tableId=-1;}
var gameId=tableId==-1?-1:game.GameSettings.TABLE_INFOS[tableId].gameId;for(var i=0;i<this.gameItemArr.length;i++){if(this.gameItemArr[i].gameId==gameId){this.activeGameItem(this.gameItemArr[i]);break;}}};HistoryPanel.prototype.onGameItemHdl=function(target){this.activeGameItem(target);};HistoryPanel.prototype.activeGameItem=function(item){if(this.selectedGameItem)
this.selectedGameItem.setActive(false);this.selectedGameItem=item;this.selectedGameItem.setActive(true);this.gameSelectTf.text=item['tf'].text;this.selectedGameCombo.collapse();this.gameId=item.gameId;this.pageMng.onBegin();};HistoryPanel.prototype.getHistory=function(gameId,pageindex){if(pageindex===void 0){pageindex=0;}
if(this.startDate.selectedDate.getTime()>=this.endDate.selectedDate.getTime())
return;if(this.endDate.selectedDate.getTime()-this.startDate.selectedDate.getTime()>game.GameSettings.HIS_QUERY_MAX_DURATION*24*3600000){game.GlobalVals.messagePopup.showMessage(game.GameText.HISTORY_MAX_DAY_ALERT.replace("{0}",game.GameSettings.HIS_QUERY_MAX_DURATION),null,game.GameText.NOTICE);return;}
this.gameId=gameId;this.table.reset();game.GlobalVals.main.loading.show(false,"",false);clearTimeout(this.closeTimerId);this.closeTimerId=setTimeout(function(){game.GlobalVals.main.loading.hide();this.closeTimerId=0;}.bind(this),3000);game.NetUtils.sendWS({"kind":game.GameCMD.BET_HISTORY,"game":this.gameId,"pageindex":pageindex,"starttime":game.GameUtils.getServerTime(this.startDate.selectedDate.getTime()),"endtime":game.GameUtils.getServerTime(this.endDate.selectedDate.getTime())});};HistoryPanel.prototype.setData=function(data){game.GlobalVals.main.loading.hide();clearTimeout(this.closeTimerId);var arr=data.content;if(arr.length<this.table.getMaxRow())
this.pageMng.next.visible=false;var rowIdx=0;for(var i=0;i<arr.length;i++){var r=arr[i];if(!game.GameSettings.TABLE_INFOS[r.tableId])
continue;var createTime=component.VComponentUtils.getDateStr(component.VComponentUtils.getTimezoneDate(parseInt(r.createTime),game.GameSettings.DISPLAY_TIME_ZONE),false);this.table.setData(rowIdx,[r.id,createTime,game.GameSettings.TABLE_INFOS[r.tableId].tableName,r.tableId,r.shoeIndex+'-'+r.roundIndex,game.GlobalVals.userInfo.currency+' '+r.betAmount,game.GlobalVals.userInfo.currency+' '+component.VComponentUtils.getNumInFormat(r.returnAmount-r.betAmount),"",""]);this.table.getRecord(rowIdx).info=r;this.table.getCell(rowIdx,6).tf.style.fill=r.returnAmount-r.betAmount>0?game.StyleMng.BLUE:(r.returnAmount-r.betAmount==0?game.StyleMng.GREEN:game.StyleMng.RED);this.showGameResult(r.gameId,this.table.getCell(rowIdx,7),r);this.showHisStatus(this.table.getCell(rowIdx,8),r.status);rowIdx++;}};HistoryPanel.prototype.showHisStatus=function(cell,status){var icon;switch(status){case 1000:case 1001:case 3001:icon=new PIXI.Sprite(PIXI.Texture.fromFrame('history_item_status_voided.png'));break;case 2000:case 2100:icon=new PIXI.Sprite(PIXI.Texture.fromFrame('history_item_status_edited.png'));break;}
if(icon){icon.x=5;icon.y=2;icon.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;icon.scale.y=icon.scale.x;cell.customIcon=icon;cell.addChild(icon);}};HistoryPanel.prototype.setBuldleResult=function(data){game.GlobalVals.main.loading.hide();clearTimeout(this.closeTimerId);this.activePopup.setData(data);};HistoryPanel.prototype.showGameResult=function(gameId,cell,info){switch(gameId){case game.GameID.ROULETTE:this.showRouletteResult(cell,info);break;case game.GameID.BACCARAT:case game.GameID.BACCARAT_NONCOMMISSION:case game.GameID.SQUEEZE_BACCARAT:case game.GameID.SQUEEZE_BACCARAT_NONCOMMISSION:this.showBacResult(cell,info);break;case game.GameID.BULL_FIGHT:this.showBullResult(cell,info);break;case game.GameID.BACCARAT_SUPER98:this.showSuper98BacResult(cell,info);break;case game.GameID.DRAGON_TIGER:this.showDragonTigerResult(cell,info);break;case game.GameID.SEVEN_UP:this.showSevResult(cell,info);break;case game.GameID.SICBO:this.showSicboResult(cell,info);break;case game.GameID.FABULOUS:this.showBacResult(cell,info);break;case game.GameID.LUCKY_BACCARAT:this.showLuckResult(cell,info);break;case game.GameID.SUPER_HI_LO:this.showHiLoResult(cell,info);break;case game.GameID.SUPER_3PICTURES:this.showS3PResult(cell,info);break;case game.GameID.SUPER_FANTAN:this.showSuperFantanResult(cell,info);break;}};HistoryPanel.prototype.onRecord=function(e){var info=e.data.info;var gameId=info.gameId;if(this.popupDetailMap[gameId])
this.activePopup=this.popupDetailMap[gameId];this.activePopup.show(info);this.activePopup.centerPos();};HistoryPanel.prototype.showSuper98BacResult=function(cell,info){var con=new PIXI.Container();var icon=new game.PearlRoadIcon();icon.drawResult(info.result);icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=14;icon.y=11;con.addChild(icon);var icon2=new PIXI.Sprite(PIXI.Texture.fromFrame('colordice_'+info.luckyNumber+'.png'));icon2.anchor.x=0.5;icon2.anchor.y=0.5;icon2.scale.x=22/icon2.width;icon2.scale.y=icon2.scale.x;icon2.x=40;icon2.y=2+icon.height*0.5;con.addChild(icon2);cell.customIcon=con;cell.addChild(con);};HistoryPanel.prototype.showBacResult=function(cell,info){var con=new PIXI.Container();var icon=new game.PearlRoadIcon();icon.drawResult(info.result);icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=14;icon.y=11;con.addChild(icon);cell.customIcon=con;cell.addChild(con);};HistoryPanel.prototype.showBullResult=function(cell,info){var con=new PIXI.Container();var icon=new bull_fight.GenPearlIcon();icon.drawResult(info.result);icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=14;icon.y=11;con.addChild(icon);cell.customIcon=con;cell.addChild(con);};HistoryPanel.prototype.showSevResult=function(cell,info){var con=new PIXI.Container();var icon=new seven_up.GenPearlIcon();icon.drawResult(info.result);icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=14;icon.y=11;con.addChild(icon);cell.customIcon=con;cell.addChild(con);};HistoryPanel.prototype.showLuckResult=function(cell,info){var con=new PIXI.Container();var icon=new lucky_baccarat.LuckPearlIcon();icon.drawResult(info.result);icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=14;icon.y=11;con.addChild(icon);cell.customIcon=con;cell.addChild(con);};HistoryPanel.prototype.showDragonTigerResult=function(cell,info){var con=new PIXI.Container();var icon=new dragon_tiger.DraPearlIcon();icon.drawResult(info.result);icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=14;icon.y=11;con.addChild(icon);cell.customIcon=con;cell.addChild(con);};HistoryPanel.prototype.showRouletteResult=function(cell,info){var icon=new roulette.TrendDettailIcon(20,11,1);icon.setNum(parseInt(info.result));icon.x=5;icon.y=2;cell.customIcon=icon;cell.addChild(icon);};HistoryPanel.prototype.showSuperFantanResult=function(cell,info){var con=new PIXI.Container();var fanIcon=new super_fantan.TrendDetailIcon(20,11,1);fanIcon.setData(info);fanIcon.x=5;fanIcon.y=2;con.addChild(fanIcon);var cards=new super_fantan.SFCards(info.cards);var text=game.GameUtils.createNormalText('',14,0xffffff,'bold');text.x=40;text.y=2;text.anchor.x=0.5;text.text=cards.total.toString();con.addChild(text);var bonusIcon=new PIXI.Sprite();bonusIcon.texture=PIXI.Texture.fromFrame('colordice_'+info.luckyNumber+'.png');bonusIcon.width=bonusIcon.height=20;bonusIcon.x=55;bonusIcon.y=2;con.addChild(bonusIcon);cell.customIcon=con;cell.addChild(con);};HistoryPanel.prototype.showSicboResult=function(cell,info){var icon=new sicbo.GenTrendInfoPanel(null);icon.setData(info);icon.x=5;icon.y=0;icon.scale.x=0.5;icon.scale.y=icon.scale.x;icon.bg.visible=false;cell.customIcon=icon;cell.addChild(icon);};HistoryPanel.prototype.showHiLoResult=function(cell,info){var icon=new super_hi_lo.PearlIcon();icon.draw(info);icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=14;icon.y=11;cell.customIcon=icon;cell.addChild(icon);};HistoryPanel.prototype.showS3PResult=function(cell,info){var icon=new super_3pictures.PearlIcon();icon.draw(info);icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=14;icon.y=11;cell.customIcon=icon;cell.addChild(icon);};HistoryPanel.prototype.show=function(data){if(data===void 0){data=null;}
_super.prototype.show.call(this,data);};HistoryPanel.prototype.hide=function(){_super.prototype.hide.call(this);};return HistoryPanel;}(game.BasePopup));game.HistoryPanel=HistoryPanel;})(game||(game={}));var game;(function(game){var LuckyBacDetailPopup=(function(_super){__extends(LuckyBacDetailPopup,_super);function LuckyBacDetailPopup(main,w,h){var _this=_super.call(this,main,w,h)||this;var icon=new game.TrendInfoPanel(null);_this.icon=icon;icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=(w-icon.width)*0.5;icon.y=42;_this.addChild(icon);return _this;}
LuckyBacDetailPopup.prototype.show=function(data){_super.prototype.show.call(this,data);this.icon.setData(data);};LuckyBacDetailPopup.prototype.setData=function(data){_super.prototype.setData.call(this,data);};LuckyBacDetailPopup.prototype.getBetName=function(betType){return lucky_baccarat.BetArea.sGetBetName(betType);};return LuckyBacDetailPopup;}(game.BaseBetDetailPopup));game.LuckyBacDetailPopup=LuckyBacDetailPopup;})(game||(game={}));var game;(function(game){var ReportPanel=(function(_super){__extends(ReportPanel,_super);function ReportPanel(main,w,h){var _this=_super.call(this,main,w,h)||this;_this.titleTf.text=game.GameText.WIN_LOSE_REPORT;var posY=43;_this.table=new component.VTable(w-20,30,5,["",""],[1/2,1/2],'left');_this.table.columns[1].setAlign('right');_this.table.titleCon.visible=false;_this.table.x=10;_this.table.y=55;_this.addChild(_this.table);var tf=game.GameUtils.createNormalText(game.GameText.START_DATE);_this.addChild(tf);tf.x=12;tf.y=48;var startDate=new component.VCalenda(175,25,220,170,game.GameSettings.CANVAS_WIDTH-game.GameSettings.TABLE_SMALL_VIEW_WIDTH,game.GameSettings.CANVAS_HEIGHT,null,game.GameSettings.DISPLAY_TIME_ZONE,'calendar_icon.png');_this.startDate=startDate;startDate.x=tf.x+60;startDate.y=posY;_this.addChild(startDate);var d=new Date();d=component.VComponentUtils.getTimezoneDate(d.getTime(),game.GameSettings.DISPLAY_TIME_ZONE);d.setHours(0);d.setMinutes(0);d.setSeconds(0);startDate.setSelectedDate(d);tf=game.GameUtils.createNormalText(game.GameText.END_DATE);_this.addChild(tf);tf.x=260;tf.y=48;var endDate=new component.VCalenda(175,25,220,170,game.GameSettings.CANVAS_WIDTH-game.GameSettings.TABLE_SMALL_VIEW_WIDTH,game.GameSettings.CANVAS_HEIGHT,null,game.GameSettings.DISPLAY_TIME_ZONE,'calendar_icon.png');_this.endDate=endDate;endDate.x=tf.x+60;endDate.y=43;_this.addChild(endDate);d.setHours(23);d.setMinutes(59);d.setSeconds(59);endDate.setSelectedDate(d);var searchBtn=component.VButton.createSimple(_this.onSearch.bind(_this),game.GameText.SEARCH,81,25);_this.addChild(searchBtn);searchBtn.x=510;searchBtn.y=posY;return _this;}
ReportPanel.prototype.onSearch=function(){this.getData();};ReportPanel.prototype.getData=function(){this.table.setData(0,[game.GameText.BET_AMOUNT,game.GlobalVals.userInfo.currency+' '+'0']);this.table.setData(1,[game.GameText.WIN_LOSE_AMOUNT,game.GlobalVals.userInfo.currency+' '+'0']);this.table.setData(4,[game.GameText.TIPPED_AMOUNT,game.GlobalVals.userInfo.currency+' '+'0']);this.table.setData(2,[game.GameText.MINI_GAME+": "+game.GameText.BET_AMOUNT,game.GlobalVals.userInfo.currency+' '+'0']);this.table.setData(3,[game.GameText.MINI_GAME+": "+game.GameText.WIN_LOSE_AMOUNT,game.GlobalVals.userInfo.currency+' '+'0']);if(this.startDate.selectedDate.getTime()>=this.endDate.selectedDate.getTime())
return;game.NetUtils.sendWS({"kind":game.GameCMD.USER_BET_STATS,"starttime":game.GameUtils.getServerTime(this.startDate.selectedDate.getTime()),"endtime":game.GameUtils.getServerTime(this.endDate.selectedDate.getTime())});};ReportPanel.prototype.setLiveBetStats=function(data){game.GlobalVals.main.loading.hide();var r=data.content;this.table.setData(0,[game.GameText.BET_AMOUNT,game.GlobalVals.userInfo.currency+' '+component.VComponentUtils.getNumInFormat(r.betAmount)]);this.table.setData(1,[game.GameText.WIN_LOSE_AMOUNT,game.GlobalVals.userInfo.currency+' '+component.VComponentUtils.getNumInFormat(r.returnAmount-r.betAmount)]);this.table.getCell(1,1).tf.style.fill=r.returnAmount-r.betAmount>=0?game.TrendIconUtils.GREEN:game.TrendIconUtils.RED;this.table.setData(4,[game.GameText.TIPPED_AMOUNT,game.GlobalVals.userInfo.currency+' '+(r.tipAmount?component.VComponentUtils.getNumInFormat(r.tipAmount):'0')]);};ReportPanel.prototype.setMiniBetStats=function(data){game.GlobalVals.main.loading.hide();var r=data.content;this.table.setData(2,[game.GameText.MINI_GAME+": "+game.GameText.BET_AMOUNT,game.GlobalVals.userInfo.currency+' '+component.VComponentUtils.getNumInFormat(r.betAmountRSLOT)]);this.table.setData(3,[game.GameText.MINI_GAME+": "+game.GameText.WIN_LOSE_AMOUNT,game.GlobalVals.userInfo.currency+' '+component.VComponentUtils.getNumInFormat(r.returnAmountRSLOT-r.betAmountRSLOT)]);this.table.getCell(3,1).tf.style.fill=r.returnAmountRSLOT-r.betAmountRSLOT>=0?game.TrendIconUtils.GREEN:game.TrendIconUtils.RED;};ReportPanel.prototype.show=function(data){if(data===void 0){data=null;}
this.getData();_super.prototype.show.call(this,data);};ReportPanel.prototype.hide=function(){_super.prototype.hide.call(this);};return ReportPanel;}(game.BasePopup));game.ReportPanel=ReportPanel;})(game||(game={}));var game;(function(game){var RouletteDetailPopup=(function(_super){__extends(RouletteDetailPopup,_super);function RouletteDetailPopup(main,w,h){var _this=_super.call(this,main,w,h)||this;var icon=new roulette.TrendDettailIcon(55,30,2);_this.icon=icon;icon.x=299;icon.y=45;_this.addChild(icon);_this.initBetMap();return _this;}
RouletteDetailPopup.prototype.show=function(data){_super.prototype.show.call(this,data);this.icon.setNum(data.result);};RouletteDetailPopup.prototype.setData=function(data){_super.prototype.setData.call(this,data);};RouletteDetailPopup.prototype.initBetMap=function(){this.betMap={};for(var i=1;i<=3;i++){for(var j=i;j<=i+33;j+=3)
this.betMap["G"+j]=[((j-3)>=0?(j-3):0),j];}
var i1=2,i2=3;for(var i=38;i<=60;i+=2){this.betMap["G"+i]=[i1,i2];i1+=3;i2+=3;}
i1=1,i2=2;for(var i=37;i<=59;i+=2){this.betMap["G"+i]=[i1,i2];i1+=3;i2+=3;}
i1=1;this.betMap["H1"]=[0,1,2];this.betMap["H2"]=[0,2,3];for(var i=3;i<=14;i++){this.betMap["H"+i]=[i1,(i1+1),(i1+2)];i1+=3;}
i1=1;for(var i=1;i<=11;i++){this.betMap["K"+i]=[];for(var j=0;j<6;j++)
this.betMap["K"+i].push(i1+j);i1+=3;}
i1=2;for(var i=2;i<=22;i+=2){this.betMap["J"+i]=[i1,(i1+1),(i1+3),(i1+4)];i1+=3;}
i1=1;for(var i=1;i<=21;i+=2){this.betMap["J"+i]=[i1,(i1+1),(i1+3),(i1+4)];i1+=3;}
this.betMap["J23"]=[0,1,2,3];};RouletteDetailPopup.prototype.getBetName=function(betType){var gameName="Roulette_";if(betType.charAt(0)=="F")
return game.GameText.Roulette_F+' '+betType.substr(1,betType.length-1);if("GKJH".indexOf(betType.charAt(0))>=0){var betName=game.GameText["Roulette_"+betType.charAt(0)];for(var i=0;i<this.betMap[betType].length;i++)
betName+=' '+this.betMap[betType][i];return betName;}
return game.GameText[gameName+betType];};return RouletteDetailPopup;}(game.BaseBetDetailPopup));game.RouletteDetailPopup=RouletteDetailPopup;})(game||(game={}));var game;(function(game){var S3PDetailPopup=(function(_super){__extends(S3PDetailPopup,_super);function S3PDetailPopup(main,w,h){var _this=_super.call(this,main,w,h)||this;var icon=new super_3pictures.TrendInfoPanel(null);_this.icon=icon;icon.bg.visible=false;icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=w*0.5-icon.width*0.5-25;icon.y=42;_this.addChild(icon);return _this;}
S3PDetailPopup.prototype.show=function(data){_super.prototype.show.call(this,data);this.icon.setData(data);};S3PDetailPopup.prototype.setData=function(data){_super.prototype.setData.call(this,data);};S3PDetailPopup.prototype.getBetName=function(betType){return super_3pictures.BetType.getName(betType);};return S3PDetailPopup;}(game.BaseBetDetailPopup));game.S3PDetailPopup=S3PDetailPopup;})(game||(game={}));var game;(function(game){var SevenUpDetailPopup=(function(_super){__extends(SevenUpDetailPopup,_super);function SevenUpDetailPopup(main,w,h){var _this=_super.call(this,main,w,h)||this;var icon=new seven_up.GenTrendInfoPanel(null);_this.icon=icon;icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=(w-icon.bg.width*icon.scale.x)*0.5;icon.y=42;_this.addChild(icon);return _this;}
SevenUpDetailPopup.prototype.show=function(data){_super.prototype.show.call(this,data);this.icon.setData(data);};SevenUpDetailPopup.prototype.setData=function(data){_super.prototype.setData.call(this,data);};SevenUpDetailPopup.prototype.getBetName=function(betType){return game.GameText["SevenUp_"+betType];};return SevenUpDetailPopup;}(game.BaseBetDetailPopup));game.SevenUpDetailPopup=SevenUpDetailPopup;})(game||(game={}));var game;(function(game){var SFDetailPopup=(function(_super){__extends(SFDetailPopup,_super);function SFDetailPopup(main,w,h){var _this=_super.call(this,main,w,h)||this;_this.fanIcon=new super_fantan.TrendDetailIcon(55,30,2);_this.fanIcon.x=(w/2)-80-(55/2);_this.fanIcon.y=45;_this.addChild(_this.fanIcon);_this.text=game.GameUtils.createNormalText('',45,0xffffff,'bold');_this.text.x=w/2;_this.text.y=45;_this.text.anchor.x=0.5;_this.addChild(_this.text);_this.bonusIcon=new PIXI.Sprite();_this.bonusIcon.width=_this.bonusIcon.height=55;_this.bonusIcon.x=w/2+80;_this.bonusIcon.y=45;_this.bonusIcon.anchor.x=0.5;_this.addChild(_this.bonusIcon);return _this;}
SFDetailPopup.prototype.show=function(data){_super.prototype.show.call(this,data);this.fanIcon.setData(data);var cards=new super_fantan.SFCards(data.cards);this.text.text=cards.total.toString();this.bonusIcon.texture=PIXI.Texture.fromFrame('colordice_'+data.luckyNumber+'.png');};SFDetailPopup.prototype.setData=function(data){_super.prototype.setData.call(this,data);};SFDetailPopup.prototype.getBetName=function(betType){return super_fantan.SFBetType.getName(betType);};return SFDetailPopup;}(game.BaseBetDetailPopup));game.SFDetailPopup=SFDetailPopup;})(game||(game={}));var game;(function(game){var SicBoDetailPopup=(function(_super){__extends(SicBoDetailPopup,_super);function SicBoDetailPopup(main,w,h){var _this=_super.call(this,main,w,h)||this;var icon=new sicbo.GenTrendInfoPanel(null);_this.icon=icon;icon.scale.x=1.2;icon.scale.y=icon.scale.x;icon.x=(w-140)*0.5;icon.y=42;_this.addChild(icon);_this.nameArr=[];for(var i=1;i<=6;i++)
for(var j=i+1;j<=6;j++)
_this.nameArr.push(i+","+j);return _this;}
SicBoDetailPopup.prototype.show=function(data){_super.prototype.show.call(this,data);this.icon.setData(data);};SicBoDetailPopup.prototype.setData=function(data){_super.prototype.setData.call(this,data);};SicBoDetailPopup.prototype.getBetName=function(betType){var gameName="SicBo_";if(betType.charAt(0)=="B")
return game.GameText.SicBo_B.replace('{0}',betType.substr(1,betType.length-1));if(betType.charAt(0)=="C")
return game.GameText.SicBo_C+' '+betType.substr(1,betType.length-1);if(betType.charAt(0)=="D"){var n=betType.substr(1,betType.length-1);return game.GameText.SicBo_D+' '+n+','+n+','+n;}
if(betType.charAt(0)=="F"){var n=betType.substr(1,betType.length-1);return game.GameText.SicBo_F+' '+n+','+n;}
if(betType.charAt(0)=="G"){var n=betType.substr(1,betType.length-1);return game.GameText.SicBo_G.replace('{0}',this.nameArr[parseInt(n)-1]);}
return game.GameText[gameName+betType];};return SicBoDetailPopup;}(game.BaseBetDetailPopup));game.SicBoDetailPopup=SicBoDetailPopup;})(game||(game={}));var game;(function(game){var Preloader=(function(_super){__extends(Preloader,_super);function Preloader(){var _this=_super.call(this)||this;var texture=PIXI.Texture.fromImage('../common_bin/assets/logo.png');_this.logo=new PIXI.Sprite(texture);_this.addChild(_this.logo);_this.logo.anchor.x=0.5;_this.logo.anchor.y=0.5;_this.logo.x=game.GameSettings.CANVAS_WIDTH*0.5;_this.logo.y=300;var loading=new component.Loading(0);_this.addChild(loading);loading.setSize(100,100);loading.x=(game.GameSettings.CANVAS_WIDTH-loading.width)*0.5;loading.y=400;_this.loading=loading;return _this;}
return Preloader;}(PIXI.Container));game.Preloader=Preloader;})(game||(game={}));var game;(function(game){var SelectRoomCon=(function(_super){__extends(SelectRoomCon,_super);function SelectRoomCon(gameMode){var _this=_super.call(this,gameMode)||this;_this.items=[];_this.downPos=new PIXI.Point();_this.icon=new component.VButton([PIXI.Texture.fromFrame('select_room_btn0001.png'),PIXI.Texture.fromFrame('select_room_btn0002.png')],function(){});_this.addChild(_this.icon);_this.icon.height=game.StyleMng.SETTING_BTN_SIZE;_this.icon.scale.x=_this.icon.scale.y;var roomTf=component.VComponentUtils.createText('',{fontFamily:"Arial",fontSize:11/_this.icon.scale.x,fill:0xffffff,align:"center"});_this.icon.addChild(roomTf);_this.icon["roomTf"]=roomTf;roomTf.anchor.x=0.5;roomTf.x=40/_this.icon.scale.x;roomTf.y=16/_this.icon.scale.y;component.VMouseUtils.on(_this.icon,component.VMouseUtils.MOUSE_UP,_this.onIconUp,_this);return _this;}
SelectRoomCon.prototype.destructor=function(){component.VMouseUtils.off(this.icon,component.VMouseUtils.MOUSE_UP,this.onIconUp,this);this.reset();_super.prototype.destructor.call(this);};SelectRoomCon.prototype.initialize=function(maxSeat){if(maxSeat===void 0){maxSeat=7;}
this.maxSeat=maxSeat;var viewW=80;var viewH=110;this.content=new PIXI.Container();this.addChild(this.content);var scroll=new PIXI.Container();var sDis=2;var up=new PIXI.Sprite(PIXI.Texture.fromFrame('info_panel_sroll_up.png'));scroll.addChild(up);scroll['upBtn']=up;up.y=sDis;var down=new PIXI.Sprite(PIXI.Texture.fromFrame('info_panel_sroll_down.png'));scroll.addChild(down);scroll['downBtn']=down;down.y=viewH-down.height-2*sDis;var track=new PIXI.Sprite(PIXI.Texture.fromFrame('info_panel_sroll_track.png'));scroll.addChild(track);scroll['track']=track;track.height=viewH-5*sDis-2*up.height;track.y=up.height+2*sDis;var face=new PIXI.Sprite(PIXI.Texture.fromFrame('info_panel_sroll_face.png'));scroll.addChild(face);face.height=viewH*0.3;scroll['face']=face;this.vCombo=new component.VComboBox(this.icon,this.content,scroll,viewW,viewH,this.gameModel.GAME_WIDTH,this.gameModel.GAME_HEIGHT);};SelectRoomCon.prototype.reset=function(){for(var i=0;i<this.items.length;i++){var item=this.items[i];component.VMouseUtils.off(item,component.VMouseUtils.MOUSE_OVER,this.onItemOver,this);component.VMouseUtils.off(item,component.VMouseUtils.MOUSE_OUT,this.onItemOut,this);component.VMouseUtils.off(item,component.VMouseUtils.MOUSE_UP,this.onItemUp,this);component.VMouseUtils.off(item,component.VMouseUtils.MOUSE_DOWN,this.onItemDown,this);this.content.removeChild(item).destroy();}
this.items=[];};SelectRoomCon.prototype.lock=function(){this.isLocked=true;};SelectRoomCon.prototype.unlock=function(){this.isLocked=false;};SelectRoomCon.prototype.setData=function(data){this.reset();var arr=data.content.rooms;arr.sort(function(a,b){return a[1]<=b[1]?(a[1]==b[1]?0:1):-1;});var item;var items=this.items;for(var i=0;i<arr.length;i++){item=new PIXI.Container();item["roomId"]=arr[i][0];this.content.addChild(item);var ibg=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('room_item_bg0001.png'),PIXI.Texture.fromFrame('room_item_bg0002.png'),PIXI.Texture.fromFrame('room_item_bg0003.png')]);item.addChild(ibg);item['bg']=ibg;var roomTf=component.VComponentUtils.createText(arr[i][0].toString(),{fontFamily:"Arial",fontSize:11,fill:0xffffff,align:"center"});item.addChild(roomTf);item["roomTf"]=roomTf;roomTf.x=5;roomTf.y=4;var infoTf=component.VComponentUtils.createText(arr[i][1]+'/'+this.maxSeat,{fontFamily:"Arial",fontSize:11,fill:0xffffff,align:"center"});item.addChild(infoTf);item["infoTf"]=infoTf;infoTf.x=49;infoTf.y=4;item.y=i*ibg.height;if(arr[i][0]==this.gameModel.ROOM_ID)
this.activeItem(item);if(!this.isLocked){component.VMouseUtils.on(item,component.VMouseUtils.MOUSE_OVER,this.onItemOver,this);component.VMouseUtils.on(item,component.VMouseUtils.MOUSE_OUT,this.onItemOut,this);component.VMouseUtils.on(item,component.VMouseUtils.MOUSE_UP,this.onItemUp,this);component.VMouseUtils.on(item,component.VMouseUtils.MOUSE_DOWN,this.onItemDown,this);}
else
item.alpha=0.5;items.push(item);}
this.vCombo.scroller.updateScroll();};SelectRoomCon.prototype.onIconUp=function(e){this.reset();game.NetUtils.sendWS({"kind":game.GameCMD.ROOM_LIST,"table":this.gameModel.TABLE_ID});};SelectRoomCon.prototype.onItemOver=function(e){var item=e.target;if(this.selectedItem==item)
return;item.bg.gotoAndStop(1);};SelectRoomCon.prototype.onItemOut=function(e){var item=e.target;if(this.selectedItem==item)
return;item.bg.gotoAndStop(0);};SelectRoomCon.prototype.onItemDown=function(e){this.downPos.copy(component.VMouseUtils.mousePos());};SelectRoomCon.prototype.onItemUp=function(e){if(Math.abs(component.VMouseUtils.mousePos().x-this.downPos.x)>=5||Math.abs(component.VMouseUtils.mousePos().y-this.downPos.y)>=5)
return;var item=e.target;if(this.selectedItem==item)
return;this.vCombo.collapse();this.gameModel.notify(game.GameEvent.CHANGE_ROOM,item.roomId);};SelectRoomCon.prototype.activeItem=function(item){if(this.selectedItem)
this.deactiveItem(this.selectedItem);this.selectedItem=item;item.bg.gotoAndStop(2);this.icon["roomTf"].text=item.roomId;};SelectRoomCon.prototype.deactiveItem=function(item){this.selectedItem=item;item.bg.gotoAndStop(0);};SelectRoomCon.prototype.activeRoom=function(roomId){this.icon["roomTf"].text=roomId.toString();};return SelectRoomCon;}(game.GameObject));game.SelectRoomCon=SelectRoomCon;})(game||(game={}));var game;(function(game){var SaveBetCon=(function(_super){__extends(SaveBetCon,_super);function SaveBetCon(gameMode,icon){var _this=_super.call(this,gameMode)||this;_this.saveKey="";_this.saveKey="game_"+_this.gameModel.GAME_ID;_this.items=[];_this.downPos=new PIXI.Point();_this.icon=icon;_this.initialize();return _this;}
SaveBetCon.prototype.destructor=function(){for(var i=0;i<this.items.length;i++){this.items[i].vtf.input.removeEventListener('keyup',this.changeBinding);}
_super.prototype.destructor.call(this);};SaveBetCon.prototype.initialize=function(){var viewW=165;var viewH=32*3;this.changeBinding=this.onTextChange.bind(this);this.content=new PIXI.Container();this.addChild(this.content);var item;var icon;var btn;var btnH=16.5;for(var i=0;i<3;i++){item=new PIXI.Container();this.content.addChild(item);item['info']={};item.addChild(new PIXI.Sprite(PIXI.Texture.fromFrame('save_bet_bg.png')));icon=new PIXI.Sprite(PIXI.Texture.fromFrame('save_icon.png'));icon.x=21;icon.y=6;item.addChild(icon);game.GameUtils.resizeNodeH(icon,btnH);var tf=component.VComponentUtils.createText((i+1).toString(),{fontFamily:'Arial',fontSize:12,fill:0xffffff});tf.x=7;tf.y=8;item.addChild(tf);var vtf=new component.VHtmlInput("",67,22,{fontFamily:'Arial',fontSize:12,fill:'#FFFFFF'},11);vtf.x=45;vtf.y=5;item.addChild(vtf);item['vtf']=vtf;vtf.input.addEventListener('keyup',this.changeBinding);btn=new component.VButton([PIXI.Texture.fromFrame('save_bet_icon0001.png'),PIXI.Texture.fromFrame('save_bet_icon0002.png')],this.onBtn.bind(this));btn.x=136;btn.y=7.5;btn['btnName']="saveBtn";btn['item']=item;item['saveBtn']=btn;item.addChild(btn);game.GameUtils.resizeNodeH(btn,btnH);btn=new component.VButton([PIXI.Texture.fromFrame('load_bet_icon0001.png'),PIXI.Texture.fromFrame('load_bet_icon0002.png')],this.onBtn.bind(this));btn.x=116;btn.y=7.5;btn['btnName']="loadBtn";btn['item']=item;item['loadBtn']=btn;item.addChild(btn);game.GameUtils.resizeNodeH(btn,btnH);btn=new component.VButton([PIXI.Texture.fromFrame('delete_bet_icon0001.png'),PIXI.Texture.fromFrame('delete_bet_icon0002.png')],this.onBtn.bind(this));btn.x=142;btn.y=7.5;btn['btnName']="deleteBtn";btn['item']=item;item['deleteBtn']=btn;item.addChild(btn);game.GameUtils.resizeNodeH(btn,btnH);item.y=i*item.height;this.items.push(item);}
this.loadCookies();this.updateItems();this.vCombo=new component.VComboBox(this.icon,this.content,null,viewW,viewH,this.gameModel.GAME_WIDTH,this.gameModel.GAME_HEIGHT);};SaveBetCon.prototype.onTextChange=function(e){this.saveCookies();};SaveBetCon.prototype.saveCookies=function(){var arr=[];for(var i=0;i<this.items.length;i++){if(!this.items[i].info)
this.items[i].info={};this.items[i].info.name=this.items[i].vtf.input.value;arr.push(this.items[i].info);}
game.CookiesMng.saveCookie(this.saveKey,arr);this.updateItems();};SaveBetCon.prototype.loadCookies=function(){var arr=game.CookiesMng.getCookie(this.saveKey);if(!arr)
return;for(var i=0;i<arr.length;i++){this.items[i].info=arr[i];this.items[i].vtf.input.value=this.items[i].info.name;}
this.updateItems();};SaveBetCon.prototype.updateItems=function(){for(var i=0;i<this.items.length;i++){var item=this.items[i];item['saveBtn'].visible=!item.info||(item.info&&item.info.bet==null);item['loadBtn'].visible=item.info&&item.info.bet!=null;item['deleteBtn'].visible=item.info&&item.info.bet!=null;}};SaveBetCon.prototype.onBtn=function(btn){var item=btn.item;var info=item.info;switch(btn.btnName){case"saveBtn":this.gameModel.notify(game.GameEvent.SAVE_BET,item.info);if(item.vtf.input.value==''&&item.info.totalBet)
item.vtf.input.value=item.info.totalBet;if(item.info.totalBet>0)
this.saveCookies();break;case"loadBtn":this.gameModel.notify(game.GameEvent.LOAD_BET,item.info);break;case"deleteBtn":item.vtf.input.value="";item.info={name:"",bet:null};this.saveCookies();break;}};SaveBetCon.prototype.lock=function(){this.isLocked=true;};SaveBetCon.prototype.unlock=function(){this.isLocked=false;};return SaveBetCon;}(game.GameObject));game.SaveBetCon=SaveBetCon;})(game||(game={}));var game;(function(game){var PlayerCon=(function(_super){__extends(PlayerCon,_super);function PlayerCon(gameModel){var _this=_super.call(this,gameModel)||this;_this.loadAvatarCompleteBinding=_this.loadAvatarComplete.bind(_this);return _this;}
PlayerCon.prototype.destructor=function(){component.VMouseUtils.off(this,component.VMouseUtils.MOUSE_UP,this.onMouseUp,this);component.VMouseUtils.off(this,component.VMouseUtils.MOUSE_OVER,this.onMouseOver,this);component.VMouseUtils.off(this,component.VMouseUtils.MOUSE_OUT,this.onMouseOut,this);game.GlobalVals.resourceMng.releaseHandler(this.loadAvatarCompleteBinding);_super.prototype.destructor.call(this);};PlayerCon.prototype.initialize=function(w,h){if(w===void 0){w=120;}
if(h===void 0){h=40;}
this.viewW=w;this.viewH=h;this.bg=new PIXI.Graphics();this.addChild(this.bg);this.bg.lineStyle(0,0,0);this.bg.beginFill(0x000000,0.4);this.bg.drawRoundedRect(0,0,w,h,5);this.bg.endFill();var bg1=new PIXI.Graphics();bg1.lineStyle(1,0xFFCC00);bg1.beginFill(0x000000,0.4);bg1.drawRoundedRect(0,0,w,h,5);bg1.endFill();var bg2=new PIXI.Graphics();bg2.lineStyle(1,0xFFFFFF);bg2.beginFill(0x000000,0.4);bg2.drawRoundedRect(0,0,w,h,5);bg2.endFill();this.activeBg=new component.VButton([bg1,bg2],null);this.gameModel.toolTip.addToolTip(this.activeBg,game.GameText.CHANGE_AVATAR);component.VMouseUtils.on(this,component.VMouseUtils.MOUSE_UP,this.onMouseUp,this);component.VMouseUtils.on(this,component.VMouseUtils.MOUSE_OVER,this.onMouseOver,this);component.VMouseUtils.on(this,component.VMouseUtils.MOUSE_OUT,this.onMouseOut,this);this.addChild(this.activeBg);var avatar=new PIXI.Sprite(this.gameModel.resources['dummy_texture'].texture);this.addChild(avatar);this.avatar=avatar;var masker=new PIXI.Graphics();masker.lineStyle(0,0,0);masker.beginFill(0x0000ff);masker.drawRoundedRect(1,1,h-2,h-2,5);masker.endFill();avatar.mask=masker;this.addChild(masker);this.masker=masker;this.arrow=new PIXI.Sprite(this.gameModel.resources['menu_arrow'].texture);this.addChild(this.arrow);var middle=h+(w-h)*0.5;this.arrow.anchor.x=0.5;this.arrow.x=w*0.5;this.arrow.y=h+2;this.usernameTf=game.GameUtils.createText('',{fontFamily:"Arial",fontSize:12,fill:0xffffff});this.usernameTf.anchor.x=0.5;this.usernameTf.x=middle;this.usernameTf.y=2;this.addChild(this.usernameTf);this.winTf=game.GameUtils.createText('888',{fontFamily:"Arial",fontSize:12,fill:0x14EC29});this.winTf.anchor.x=1;this.winTf.x=middle-5;this.winTf.y=20;this.addChild(this.winTf);this.loseTf=game.GameUtils.createText('888',{fontFamily:"Arial",fontSize:12,fill:0xC7161E});this.loseTf.anchor.x=0;this.loseTf.x=middle+5;this.loseTf.y=this.winTf.y;this.addChild(this.loseTf);var midTf=game.GameUtils.createText('/',{fontFamily:"Arial",fontSize:12,fill:0xffffff});midTf.anchor.x=0.5;midTf.x=middle;midTf.y=this.winTf.y;this.addChild(midTf);return this;};PlayerCon.prototype.onMouseUp=function(){};PlayerCon.prototype.onMouseOver=function(){this.activeBg.setActive(true);};PlayerCon.prototype.onMouseOut=function(){this.activeBg.setActive(false);};PlayerCon.prototype.setAvatar=function(id){if(id=="")
id=game.GameSettings.DEFAULT_AVATAR;if(component.VComponentUtils.findInArr(game.GameSettings.CONFIG.avatars,"id",id)){var fileUrl=component.VComponentUtils.findInArr(game.GameSettings.CONFIG.avatars,"id",id).file;game.GlobalVals.resourceMng.getDynamicTexture('avatar_'+id,"../common_bin/assets/avatars/"+fileUrl,this.loadAvatarCompleteBinding);}};PlayerCon.prototype.loadAvatarComplete=function(t){this.avatar.texture=t;this.avatar.height=this.viewH-2;this.avatar.scale.x=this.avatar.scale.y;this.avatar.mask=this.masker;};return PlayerCon;}(game.GameObject));game.PlayerCon=PlayerCon;})(game||(game={}));var game;(function(game){var SeatCon=(function(_super){__extends(SeatCon,_super);function SeatCon(gameModel){var _this=_super.call(this,gameModel)||this;_this.seatId=0;return _this;}
SeatCon.prototype.destructor=function(){_super.prototype.destructor.call(this);};SeatCon.prototype.getSeatId=function(){return this.seatId;};SeatCon.prototype.initialize=function(seatId,playerInfoW,playerInfoH){if(playerInfoW===void 0){playerInfoW=120;}
if(playerInfoH===void 0){playerInfoH=40;}
this.seatId=seatId;this.status=0;this.bg=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('seat_num'+seatId+'0001.png'),PIXI.Texture.fromFrame('seat_num'+seatId+'0002.png'),PIXI.Texture.fromFrame('seat_num'+seatId+'0003.png')]);this.addChild(this.bg);this.bg.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;this.bg.scale.y=this.bg.scale.x;this.bg.buttonMode=true;var cx=this.bg.width*0.5;var cy=this.bg.height*0.5;var playerCon=new game.PlayerCon(this.gameModel).initialize(playerInfoW,playerInfoH);this.addChild(playerCon);playerCon.x=cx-playerInfoW*0.5;playerCon.y=cy-playerInfoH-this.bg.height*0.5+10;playerCon.visible=false;this.playerCon=playerCon;var sitText=new PIXI.Container();var tf=game.GameUtils.createText(game.GameText.SIT_HERE.toUpperCase(),{fontFamily:"Arial",fontSize:10,fill:0xffffff});tf.x=5;tf.y=2;var bg=new PIXI.Graphics();sitText.addChild(bg);bg.lineStyle(0,0,0);bg.beginFill(0x000000,0.4);bg.drawRoundedRect(0,0,tf.width+10,tf.height+4,2);bg.endFill();sitText.addChild(bg);sitText.addChild(tf);sitText.x=cx-bg.width*0.5;sitText.y=cy-bg.height-20;this.sitText=sitText;this.addChild(sitText);return this;};SeatCon.prototype.setCurrentUser=function(isCurrentUser){this.isCurrentUser=isCurrentUser;this.playerCon.bg.visible=!isCurrentUser;this.playerCon.activeBg.visible=isCurrentUser;};SeatCon.prototype.enterSeat=function(username,avatarId,win,lose,isCurrentUser){if(isCurrentUser===void 0){isCurrentUser=false;}
this.playerCon.visible=true;this.sitText.visible=false;this.status=1;this.bg.buttonMode=false;var maxL=10;this.playerCon.usernameTf.text=username.substr(0,maxL)+(username.length>maxL?"..":"");this.playerCon.winTf.text=win.toString();this.playerCon.loseTf.text=lose.toString();this.playerCon.bg.visible=!isCurrentUser;this.playerCon.activeBg.visible=isCurrentUser;this.playerCon.setAvatar(avatarId);this.bg.gotoAndStop(isCurrentUser?2:1);};SeatCon.prototype.leaveSeat=function(){this.playerCon.visible=false;this.sitText.visible=true;this.status=0;this.bg.buttonMode=true;this.bg.gotoAndStop(0);};return SeatCon;}(game.GameObject));game.SeatCon=SeatCon;})(game||(game={}));var game;(function(game){var SettingContainer=(function(_super){__extends(SettingContainer,_super);function SettingContainer(gameModel){var _this=_super.call(this,gameModel)||this;_this.balanceObj={};_this.initView();_this.isShowMenu=false;return _this;}
SettingContainer.prototype.destructor=function(){trace("SettingContainer::destructor");TweenMax.killTweensOf(this.balanceObj);TweenMax.killTweensOf(this.menu);component.VMouseUtils.off(game.GlobalVals.stage,component.VMouseUtils.MOUSE_UP,this.stageUpHdl,this);_super.prototype.destructor.call(this);};SettingContainer.prototype.initView=function(){var balanceY=0;var btnH=game.StyleMng.SETTING_BTN_SIZE;this.initLivePoolBtn(balanceY,btnH);this.balance=new PIXI.Container();var bg=new PIXI.Sprite(this.gameModel.resources['balance_bg'].texture);this.balance.addChild(bg);this.balance['bg']=bg;this.addChild(this.balance);var refreshBtn=new component.VButton([PIXI.Texture.fromFrame('refresh_button0001.png'),PIXI.Texture.fromFrame('refresh_button0002.png')],this.onRefreshBalance.bind(this),5000);refreshBtn.x=147;this.balance.addChild(refreshBtn);this.gameModel.toolTip.addToolTip(refreshBtn,game.GameText.REFRESH+" "+game.GameText.BALANCE);this.refreshBtn=refreshBtn;game.GameUtils.resizeNodeH(refreshBtn,btnH);var cashierBtn=new component.VButton([PIXI.Texture.fromFrame('cashier_button0001.png'),PIXI.Texture.fromFrame('cashier_button0002.png')],this.onCashier.bind(this));if(OPERATOR_ID.toLowerCase()=='w88'){this.gameModel.toolTip.addToolTip(cashierBtn,game.GameText.CASHIER);}
else
cashierBtn.dissable();this.balance.addChild(cashierBtn);this.cashierBtn=cashierBtn;game.GameUtils.resizeNodeH(cashierBtn,btnH);var settingBtn=new component.VButton([PIXI.Texture.fromFrame('togglemenus0001.png'),PIXI.Texture.fromFrame('togglemenus0002.png')],this.onSettings.bind(this));settingBtn.x=11;settingBtn.y=balanceY;this.gameModel.toolTip.addToolTip(settingBtn,game.GameText.MENU);this.settingBtn=settingBtn;game.GameUtils.resizeNodeH(settingBtn,btnH);var btn7s=new component.VButton([PIXI.Texture.fromFrame('toggle_room_btn0001.png'),PIXI.Texture.fromFrame('toggle_room_btn0002.png')],function(){this.gameModel.notify(game.GameEvent.CHANGE_VIEW_MODE,game.ViewMode.MODE_7S);}.bind(this));btn7s.x=241+32+10;btn7s.y=balanceY;this.addChild(btn7s);this.gameModel.toolTip.addToolTip(btn7s,game.GameText.VIEW_7S);this.btn7s=btn7s;game.GameUtils.resizeNodeH(btn7s,btnH);if(!game.GameSettings.checkViewModeAvailable(this.gameModel.GAME_ID,game.ViewMode.MODE_7S))
this.btn7s.visible=false;var saveBetBtn=new component.VButton([PIXI.Texture.fromFrame('save_bet_btn0001.png'),PIXI.Texture.fromFrame('save_bet_btn0002.png')]);saveBetBtn.x=241;saveBetBtn.y=balanceY;this.addChild(saveBetBtn);this.gameModel.toolTip.addToolTip(saveBetBtn,game.GameText.SAVE_BET);this.saveBetBtn=saveBetBtn;game.GameUtils.resizeNodeH(saveBetBtn,btnH);this.saveBetBtn.visible=false;var saveBetCon=new game.SaveBetCon(this.gameModel,saveBetBtn);this.addChild(saveBetCon);var menuCon=new PIXI.Container();this.addChild(menuCon);this.addChild(settingBtn);this.menuCon=menuCon;var menu=new PIXI.Container();this.menu=menu;var soundOn=new component.VButton([PIXI.Texture.fromFrame('menu_audioon_icon0001.png'),PIXI.Texture.fromFrame('menu_audioon_icon0002.png')],this.onMenu.bind(this));var soundOff=new component.VButton([PIXI.Texture.fromFrame('menu_audiooff_icon0001.png'),PIXI.Texture.fromFrame('menu_audiooff_icon0002.png')],this.onMenu.bind(this));game.GameUtils.resizeNodeH(soundOn,btnH);game.GameUtils.resizeNodeH(soundOff,btnH);var soundItem=new component.VToggleButton(soundOn,soundOff,this.soundHdl.bind(this));soundItem.setFrame(game.CookiesMng.getCookie("mute")?1:0);var arr=['menu_cashier',soundItem,'menu_rules','menu_reports','menu_history','menu_livechat'];var txts=[game.GameText.CASHIER,game.GameText.SOUND,game.GameText.RULES,game.GameText.REPORTS,game.GameText.HISTORY,game.GameText.LIVE_CHAT];arr.reverse();txts.reverse();var item;var posY=0;for(var i=0;i<arr.length;i++){if(OPERATOR_ID.toLowerCase()!='w88'&&(arr[i]=='menu_cashier'||arr[i]=='menu_livechat'))
continue;if(typeof(arr[i])=='string'){item=new component.VButton([PIXI.Texture.fromFrame(arr[i]+'0001.png'),PIXI.Texture.fromFrame(arr[i]+'0002.png')],this.onMenu.bind(this));item['btnName']=arr[i];game.GameUtils.resizeNodeH(item,btnH);}
else{item=arr[i];if(item==soundItem)
item['btnName']='soundItem';}
this.gameModel.toolTip.addToolTip(item,txts[i]);item.y=posY;posY+=btnH;menu.addChild(item);}
var masker=new PIXI.Graphics();masker.beginFill(0x0000ff);masker.drawRect(0,0,menu.width,menu.height);menuCon.addChild(masker);menuCon.addChild(menu);masker.y=-menu.height;menu.mask=masker;menuCon.x=settingBtn.x;if(!this.menuDirectionDown){menuCon.y=this.settingBtn.y-10;this.menu.y=0;}
else{menuCon.y=this.settingBtn.y+this.settingBtn.height+10+menu.height;this.menu.y=-2*this.menu.height;}
component.VMouseUtils.on(game.GlobalVals.stage,component.VMouseUtils.MOUSE_UP,this.stageUpHdl,this);var tf=game.GameUtils.createText('',{fontFamily:"Arial",fontSize:14,fill:0xffffff,align:'left'});this.balance.addChild(tf);tf.x=30;tf.y=8;this.balance['tf']=tf;this.balance.x=52;this.balance.y=balanceY;};SettingContainer.prototype.initLivePoolBtn=function(balanceY,btnH){var arr=[PIXI.Texture.fromFrame('icon_livepool_on.png'),PIXI.Texture.fromFrame('icon_livepool_off.png')];this.livePoolBtn=new PIXI.extras.MovieClip(arr);this.livePoolBtn.gotoAndStop(0);component.VMouseUtils.on(this.livePoolBtn,component.VMouseUtils.MOUSE_UP,this.onLivePool,this);this.addChild(this.livePoolBtn);this.livePoolBtn.buttonMode=true;this.livePoolBtn.x=241;this.livePoolBtn.y=balanceY;this.gameModel.toolTip.addToolTip(this.livePoolBtn,game.GameText.LIVE_POOL);game.GameUtils.resizeNodeH(this.livePoolBtn,btnH);};SettingContainer.prototype.onLivePool=function(){this.livePoolBtn.gotoAndStop(this.livePoolBtn.currentFrame==0?1:0);this.gameModel.dispatcher.dispatchEventWith(game.GameEvent.TOGGLE_LIVE_POOL,this.livePoolBtn.currentFrame==0?true:false);};SettingContainer.prototype.setBalance=function(balance,currency,animated){if(animated===void 0){animated=false;}
var tf=this.balance['tf'];tf.scale.x=tf['orgScaleX'];tf.scale.y=tf['orgScaleX'];if(animated){var str=this.balance['tf'].text.split(" ")[1];str=str.replace(/,/g,'').trim();this.balanceObj.balance=str==''?0:parseFloat(str);TweenMax.to(this.balanceObj,1,{balance:balance,ease:Linear.easeNone,onUpdate:function(){this.balance['tf'].text=currency+" "+component.VComponentUtils.getNumInFormat(this.balanceObj.balance);if(this.balance['tf'].width>game.StyleMng.BALANCE_TF_WIDTH){this.balance['tf'].scale.x=this.balance['tf']['orgScaleX']*(game.StyleMng.BALANCE_TF_WIDTH/this.balance['tf'].width);this.balance['tf'].scale.y=this.balance['tf'].scale.x;}}.bind(this)});}
else{TweenMax.killTweensOf(this.balanceObj);this.balance['tf'].text=currency+" "+component.VComponentUtils.getNumInFormat(balance);if(this.balance['tf'].width>game.StyleMng.BALANCE_TF_WIDTH){this.balance['tf'].scale.x=this.balance['tf']['orgScaleX']*(game.StyleMng.BALANCE_TF_WIDTH/this.balance['tf'].width);this.balance['tf'].scale.y=this.balance['tf'].scale.x;}}};SettingContainer.prototype.stageUpHdl=function(){var mp=component.VMouseUtils.mousePos();mp=this.settingBtn.parent.toLocal(mp);if(this.showMenu&&!new PIXI.Rectangle(this.settingBtn.x,this.settingBtn.y,this.settingBtn.width,this.settingBtn.height).contains(mp.x,mp.y))
this.hideMenu();};SettingContainer.prototype.onSettings=function(){this.isShowMenu=!this.isShowMenu;TweenMax.killTweensOf(this.menu);this.isShowMenu?this.showMenu():this.hideMenu();};SettingContainer.prototype.showMenu=function(){TweenMax.to(this.menu,0.2,{y:-this.menu.height,ease:Linear.easeNone});this.isShowMenu=true;};SettingContainer.prototype.hideMenu=function(){if(!this.menuDirectionDown)
TweenMax.to(this.menu,0.2,{y:0,ease:Linear.easeNone});else
TweenMax.to(this.menu,0.2,{y:-2*this.menu.height,ease:Linear.easeNone});this.isShowMenu=false;};SettingContainer.prototype.onRefreshBalance=function(){trace("onRefreshBalance");game.NetUtils.sendWS({kind:game.GameCMD.GET_BALANCE,game:this.gameModel.TABLE_ID});};SettingContainer.prototype.onCashier=function(){if(OPERATOR_ID.toLowerCase()!='w88')
return;component.VComponentUtils.openWindowPopup(FUND_TRANSFER_URL,"FUND_TRANSFER_URL",300,400,true);};SettingContainer.prototype.soundHdl=function(btn){if(btn.currentFrame==0){Howler.mute(false);game.CookiesMng.saveCookie("mute",false);}
else{Howler.mute(true);game.CookiesMng.saveCookie("mute",true);}};SettingContainer.prototype.onMenu=function(btn){switch(btn.btnName){case'menu_history':game.GlobalVals.showHistory(this.gameModel.TABLE_ID);break;case'menu_reports':game.GlobalVals.reportPanel.show();break;case'menu_rules':var ruleIndex=game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID]?game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].ruleIndex:1;component.VComponentUtils.openWindowPopup(game.GameSettings.CONFIG.ruleUrls.replace('{1}',LANG).replace('{2}',ruleIndex),"FUND_TRANSFER_URL",1000,768,true);break;case'menu_cashier':this.onCashier();break;case'menu_livechat':LIVE_CHAT=LIVE_CHAT.replace('{CF2}',game.GlobalVals.userInfo.nickname);var win=window.open(LIVE_CHAT,'_blank');win.focus();break;}};return SettingContainer;}(game.GameObject));game.SettingContainer=SettingContainer;})(game||(game={}));var game;(function(game){var SoundMng=(function(_super){__extends(SoundMng,_super);function SoundMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.msgQueue=[];return _this;}
SoundMng.prototype.destructor=function(){clearTimeout(this.showStatusTimerId);_super.prototype.destructor.call(this);};SoundMng.prototype.playS=function(soundId,frameId){var duration;if(frameId){this.gameModel.sounds[soundId].play(frameId);duration=this.gameModel.sounds[soundId]._sprite[frameId][1];}
else{this.gameModel.sounds[soundId].play();duration=this.gameModel.sounds[soundId]._duration*1000;}
clearTimeout(this.showStatusTimerId);this.showStatusTimerId=setTimeout(this.onNextStatus.bind(this),duration);};SoundMng.prototype.playSound=function(soundId,showImmediately,frameId){if(showImmediately===void 0){showImmediately=false;}
if(frameId===void 0){frameId="";}
if(!game.GameSettings.SOUND_ENABLE)
return;if(showImmediately){this.playS(soundId,frameId);}
else{if(this.showStatusTimerId){this.msgQueue.push({soundId:soundId,frameId:frameId});if(this.msgQueue.length>10)
this.msgQueue.shift();}
else{this.playS(soundId,frameId);}}};SoundMng.prototype.onNextStatus=function(){if(!this.msgQueue)
return;if(this.msgQueue.length==0){this.showStatusTimerId=0;return;}
var obj=this.msgQueue.shift();this.playS(obj.soundId,obj.frameId);};SoundMng.SOUND_SPRITE="soundsprite";SoundMng.BANKER_NATURAL="banker_natural";SoundMng.BANKER_PAIRS="banker_pairs";SoundMng.PLAYER_NATURAL="player_natural";SoundMng.PLAYER_PAIRS="player_pairs";SoundMng.BANKER_WIN="sfx_banker_wins";SoundMng.PLAYER_WIN="sfx_player_wins";SoundMng.CHANGE_CHIP="change_chip";SoundMng.STACK_CHIP="stack_chip";SoundMng.TICK="sfx_timer";SoundMng.CARD_SWIPE="card_swipe";SoundMng.MAGIC_WAND="Magic_Wand";SoundMng.DICE_ROLLING="Shake_And_Roll_Dice";SoundMng.ANOUNCE_YOU_WIN="sfx_congratulations_you_win";SoundMng.ANOUNCE_NO_MORE_BETS="sfx_no_more_bets";SoundMng.ANOUNCE_PLACE_BETS="sfx_place_your_bets";SoundMng.BANKER_WIN_ON="sfx_banker_wins_on";SoundMng.PLAYER_WIN_ON="sfx_player_wins_on";SoundMng.DRAGON_WIN="sfx_dragon_wins";SoundMng.TIGER_WIN="sfx_tiger_wins";SoundMng.TIE_ON_BACCARAT="sfx_tie_on_baccarat";SoundMng.TIE_ON="sfx_tie_on";SoundMng.TIE="sfx_tie";SoundMng.BIG="sfx_big";SoundMng.SMALL="sfx_small";SoundMng.SOUND_HILO="soundhilo";SoundMng.HI='sfx_hi';SoundMng.LO='sfx_lo';SoundMng.SEVEN='sfx_7';SoundMng.SOUND_3PICTURES="sound3pictures";return SoundMng;}(game.GameObject));game.SoundMng=SoundMng;})(game||(game={}));var game;(function(game){var TablesView=(function(_super){__extends(TablesView,_super);function TablesView(main){var _this=_super.call(this,main)||this;_this.initView();return _this;}
TablesView.prototype.initView=function(){this.tableSmallView=new game.TablesSmallView(this.main);this.addChild(this.tableSmallView);};TablesView.prototype.setData=function(data){this.tableSmallView.setData(data);};TablesView.prototype.setLimits=function(){this.tableSmallView.setLimits();};TablesView.prototype.onCommitSuccess=function(data){this.tableSmallView.onCommitSuccess(data);};TablesView.prototype.activeTable=function(tableID,limitID){this.tableSmallView.activeTable(tableID,limitID);};return TablesView;}(game.MainObject));game.TablesView=TablesView;})(game||(game={}));var game;(function(game){var TablesSmallView=(function(_super){__extends(TablesSmallView,_super);function TablesSmallView(main){var _this=_super.call(this,main)||this;_this.inited=false;_this.btnMap={};_this.downPos=new PIXI.Point();_this.filterBtns=[];_this.tableBtns=[];_this.activeBtns=[];return _this;}
TablesSmallView.prototype.initView=function(){var fill=0x082024;var stroke=0x444847;var w=game.GameSettings.TABLE_SMALL_VIEW_WIDTH;var h=32;var bg=new PIXI.Graphics();this.addChild(bg);bg.lineStyle(1,stroke);bg.beginFill(fill);bg.drawRect(0,0,w,game.GameSettings.CANVAS_HEIGHT);bg.endFill();var filter=new PIXI.Container();this.addChild(filter);var fbg=new PIXI.Graphics();filter.addChild(fbg);var btns=12;var btnDis=btns*0.4;for(var i=0;i<game.GameSettings.CONFIG.studioLobbyOrder.length+2;i++){var studio=-1;var fill;var stroke;var f0;var f1;if(i==0){f0=new PIXI.Sprite(PIXI.Texture.fromFrame('jumptable_baccarat_off.png'));f0.scale.set(0.6,0.6);f1=new PIXI.Sprite(PIXI.Texture.fromFrame('jumptable_baccarat_on.png'));f1.scale.set(0.6,0.6);}
else if(i==1){f0=new PIXI.Sprite(PIXI.Texture.fromFrame('jumptable_other_off.png'));f0.scale.set(0.6,0.6);f1=new PIXI.Sprite(PIXI.Texture.fromFrame('jumptable_other_on.png'));f1.scale.set(0.6,0.6);}
else{studio=game.GameSettings.CONFIG.studioLobbyOrder[i-2];stroke=game.GameUtils.getStudioHighLightColor(studio);fill=game.GameUtils.getStudioColor(studio);f0=new PIXI.Graphics();f0.lineStyle(1,stroke);f0.beginFill(fill);f0.drawRoundedRect(0,0,btns,btns,btns*0.2);f0.endFill();f1=new PIXI.Graphics();f1.lineStyle(2,0xDDDDDD);f1.beginFill(fill);f1.drawRoundedRect(0,0,btns,btns,btns*0.2);f1.endFill();}
var sbtn=new component.VToggleButton(f0,f1,this.onFilterChanged.bind(this),false);sbtn.interactive=true;sbtn.buttonMode=true;sbtn.x=4;sbtn.y=btnDis+i*(btnDis+btns);sbtn['studio']=studio;sbtn['index']=i;this.filterBtns.push(sbtn);filter.addChild(sbtn);}
fbg.lineStyle(1,0x403A33);fbg.beginFill(0x1A1614);fbg.drawRoundedRect(0,0,30,btnDis+this.filterBtns.length*(btnDis+btns),5);fbg.endFill();filter.x=-21;filter.y=300;var btnS=12;var masker=game.GameUtils.createBg(game.GameSettings.TABLE_SMALL_VIEW_WIDTH,game.GameSettings.CANVAS_HEIGHT-2*btnS);this.addChild(masker);masker.y=btnS;var maskerCopy=game.GameUtils.createBg(game.GameSettings.TABLE_SMALL_VIEW_WIDTH,game.GameSettings.CANVAS_HEIGHT-2*btnS);this.addChild(maskerCopy);maskerCopy.y=btnS;this.btnCon=new PIXI.Container();this.addChild(this.btnCon);this.btnCon.mask=masker;var arrow;var scroll=new PIXI.Container();var up=game.GameUtils.createBg(game.GameSettings.TABLE_SMALL_VIEW_WIDTH,btnS,0xC0B298);scroll.addChild(up);arrow=new PIXI.Sprite(game.GlobalVals.resourceMng.commonLoader.resources['menu_arrow'].texture);arrow.anchor.x=0.5;arrow.anchor.y=0.5;up.addChild(arrow);arrow.x=up.width*0.5;arrow.y=up.height*0.5-1;arrow.scale.y=-1;scroll['upBtn']=up;up.buttonMode=true;var down=game.GameUtils.createBg(game.GameSettings.TABLE_SMALL_VIEW_WIDTH,btnS,0xC0B298);scroll.addChild(down);scroll['downBtn']=down;arrow=new PIXI.Sprite(game.GlobalVals.resourceMng.commonLoader.resources['menu_arrow'].texture);arrow.anchor.x=0.5;arrow.anchor.y=0.5;down.addChild(arrow);arrow.x=down.width*0.5;arrow.y=down.height*0.5;down.y=game.GameSettings.CANVAS_HEIGHT-btnS;down.buttonMode=true;this.addChild(scroll);var btn;var posY=0;var tableIds=game.GameUtils.getAllTableIds();for(var i=0;i<tableIds.length;i++){var tableId=tableIds[i];if(this.btnMap[tableId])
continue;if(game.netdata.ShowLobbyResponse.getDisplayStatus(game.GlobalVals.lobbyResponse,tableId)!=1){trace("not display limit for table === "+tableId);continue;}
var activeGroup=null;for(var j=0;j<game.GameSettings.CONFIG.tableSmallView.length;j++){var group=game.GameSettings.CONFIG.tableSmallView[j];for(var k=0;k<group.tables.length;k++){if(group.tables[k]==tableId){activeGroup=group;break;}}}
var c=game.GameUtils.getStudioColor(game.GameUtils.getStudio(tableId));f1=game.GameUtils.createBg(w,h,c,0,0.7);f1.lineStyle(1,0x293E41);f1.moveTo(2,h-1);f1.lineTo(w-4,h-1);var f2=game.GameUtils.createBg(w,h,game.GameUtils.getStudioHighLightColor(game.GameUtils.getStudio(tableId)),3,0.9,game.GameUtils.getStudio(tableId)==0?0x356770:0x417746);btn=new component.VButton([f1,f2],this.onBtnUp.bind(this));this.btnCon.addChild(btn);var iconUrl=activeGroup&&activeGroup.icon?activeGroup.icon:game.GameSettings.TABLE_INFOS[tableIds[i]].icon;var icon=new PIXI.Sprite(PIXI.Texture.fromFrame(iconUrl));icon.anchor.y=0.5;icon.y=h*0.5;icon.x=2;btn.addChild(icon);btn['icon']=icon;icon.width=20;icon.scale.y=icon.scale.x;var tf=game.GameUtils.createText('',{fontFamily:"Arial",fontSize:12,fill:0xffffff,align:'center'});tf.anchor;tf.anchor.y=0.5;tf.anchor.x=0.5;btn.addChild(tf);tf.text=game.GameSettings.TABLE_INFOS[tableIds[i]].tableName;btn['tf']=tf;tf.x=36;tf.y=h*0.5;btn['tableId']=tableId;btn.y=posY;var hint=activeGroup&&activeGroup.hint?activeGroup.hint:game.GameSettings.TABLE_INFOS[tableIds[i]].hint;game.GlobalVals.toolTip.addToolTip(btn,game.GameText.ENTER+' '+hint,0,0);btn['gameId']=game.GameSettings.TABLE_INFOS[tableIds[i]].gameId;component.VMouseUtils.on(btn,component.VMouseUtils.MOUSE_DOWN,this.onBtnDown,this);posY+=btn.height;this.btnMap[tableIds[i]]=btn;if(activeGroup){for(var j=0;j<activeGroup.tables.length;j++){this.btnMap[activeGroup.tables[j]]=this.btnMap[tableId];}}
this.tableBtns.push(btn);}
this.scroller=new component.VVerScroll(maskerCopy,this.btnCon,scroll,true);this.onFilterChanged(this.filterBtns[0]);};TablesSmallView.prototype.updateTableBtnsPos=function(){var posY=0;for(var i=0;i<this.tableBtns.length;i++){var btn=this.tableBtns[i];if(!btn.visible)
continue;btn.y=posY;posY+=btn.height;}
this.scroller.updateScroll(posY);};TablesSmallView.prototype.onFilterChanged=function(btn){if(btn['studio']>=0){if(this.activeBtns.length>=2){var firstBtn=this.activeBtns[0];var secondBtn=this.activeBtns[1];if(secondBtn['studio']==btn['studio'])
this.activeBtns.pop();else{this.activeBtns.shift();if(firstBtn['studio']!=btn['studio'])
this.activeBtns.push(btn);}}
else
this.activeBtns.push(btn);}
else
this.activeBtns.splice(0,this.activeBtns.length);for(var i=0;i<this.filterBtns.length;i++)
this.filterBtns[i].setFrame(0);for(var i=0;i<this.activeBtns.length;i++)
this.activeBtns[i].setFrame(1);var tableBtn;if(btn['studio']>=0){for(var i=0;i<this.tableBtns.length;i++){tableBtn=this.tableBtns[i];tableBtn.visible=false;for(var j=0;j<this.activeBtns.length;j++){var checkBtn=this.activeBtns[j];if(game.GameUtils.getStudio(tableBtn['tableId'])==checkBtn['studio']){tableBtn.visible=true;break;}}}}
else{switch(btn['index']){case 0:case 1:btn.setFrame(1);for(var i=0;i<this.tableBtns.length;i++){tableBtn=this.tableBtns[i];var isBaccarat=(tableBtn['gameId']==game.GameID.BACCARAT||tableBtn['gameId']==game.GameID.BACCARAT_CINEMATIC||tableBtn['gameId']==game.GameID.BACCARAT_NONCOMMISSION||tableBtn['gameId']==game.GameID.BACCARAT_SUPER98||tableBtn['gameId']==game.GameID.FABULOUS||tableBtn['gameId']==game.GameID.LUCKY_BACCARAT||tableBtn['gameId']==game.GameID.SQUEEZE_BACCARAT||tableBtn['gameId']==game.GameID.SQUEEZE_BACCARAT_NONCOMMISSION)?true:false;tableBtn.visible=(btn['index']==0&&isBaccarat)||(btn['index']==1&&!isBaccarat)?true:false;}
break;}}
this.updateTableBtnsPos();};TablesSmallView.prototype.getBtn=function(tableId){return this.btnMap[tableId];};TablesSmallView.prototype.onBtnDown=function(e){this.downPos.copy(component.VMouseUtils.mousePos());};TablesSmallView.prototype.setData=function(data){if(this.inited){throw new Error("TablesSmallView dupplicated init!");}
this.inited=true;this.initView();};TablesSmallView.prototype.setLimits=function(){var data=game.GlobalVals.limitsResponse;for(var i=0;i<data.content.length;i++){if(!this.btnMap[data.content[i].table])
continue;var btn=this.btnMap[data.content[i].table];if(!btn['menu']){var pids=game.GameUtils.getGroupedTableIds(data.content[i].table);var ids=[];for(var k=0;k<pids.length;k++)
if(game.netdata.ShowLobbyResponse.getDisplayStatus(game.GlobalVals.lobbyResponse,pids[k])==1)
ids.push(pids[k]);if(!ids.length)
continue;var contextMenu=new game.LimitContextMenu(this.main.dispatcher);contextMenu.setData(ids[0]);this.main.mainView.overlay.addChild(contextMenu);contextMenu.hide();btn['menu']=contextMenu;for(var j=1;j<ids.length;j++){var contextMenu=new game.LimitContextMenu(this.main.dispatcher,false);contextMenu.setData(ids[j]);btn['menu'].addChild(contextMenu);contextMenu.y=btn['menu'].getHeight();btn['menu'].subMenus.push(contextMenu);contextMenu.parentMenu=btn['menu'];if(!game.netdata.LimitsResponse.getLimitContent(game.GlobalVals.limitsResponse,ids[j]).limits.length)
contextMenu.visible=false;}}}};TablesSmallView.prototype.onCommitSuccess=function(data){if(!this.btnMap[data.content.table])
return;var btn=this.btnMap[data.content.table];};TablesSmallView.prototype.setTime=function(tableID,num){if(!this.btnMap[tableID])
return;};TablesSmallView.prototype.activeTable=function(tableID,limitId){if(!this.btnMap[tableID])
return;for(var i in this.btnMap)
this.btnMap[i].setActive(false);this.btnMap[tableID].setActive(true);this.btnMap[tableID]['menu'].activeLimit(limitId);if(this.btnMap[tableID]['menu']){var subMenus=this.btnMap[tableID]['menu'].subMenus;for(var j=0;j<subMenus.length;j++)
subMenus[j].activeLimit(limitId);}};TablesSmallView.prototype.onBtnUp=function(btn){this.activeBtn=btn;if(Math.abs(component.VMouseUtils.mousePos().x-this.downPos.x)>=5||Math.abs(component.VMouseUtils.mousePos().y-this.downPos.y)>=5)
return;var menu=btn['menu'];if(!menu)
return;var subMenus=btn['menu']['subMenus'];if(menu.activeBtn){menu.onItem(menu.activeBtn,true);return;}
else{for(var i=0;i<subMenus.length;i++){var subMenu=subMenus[i];if(subMenu.activeBtn){subMenu.onItem(subMenu.activeBtn,true);return;}}}
menu.show();var p=new PIXI.Point(btn.x,this.btnCon.y+btn.y);p=this.toGlobal(p);p=this.main.mainView.overlay.toLocal(p);menu.x=p.x-menu.width-2;menu.y=p.y;if(menu.y>game.GameSettings.CANVAS_HEIGHT-menu.height)
menu.y=game.GameSettings.CANVAS_HEIGHT-menu.height;};return TablesSmallView;}(game.MainObject));game.TablesSmallView=TablesSmallView;})(game||(game={}));var game;(function(game){var TipCon=(function(_super){__extends(TipCon,_super);function TipCon(gameModel){var _this=_super.call(this,gameModel)||this;var masker=game.GameUtils.createBg(204,92);_this.addChild(masker);_this.masker=masker;_this.popup=new PIXI.Container();_this.addChild(_this.popup);_this.popup.x=-107;_this.popup.y=-92;_this.chips=[];masker.x=_this.popup.x;masker.y=_this.popup.y;_this.tipDir=1;var map={};map["USD"]=[1,5,10,50];map["EUR"]=[1,5,10,50];map["GBP"]=[1,5,10,50];map["MYR"]=[5,25,100,500];map["RMB"]=[5,25,100,500];map["IDR"]=[10,50,100,500];map["VND"]=[25,100,500,1000];map["THB"]=[25,100,500,1000];map["JPY"]=[100,500,1000,5000];map["ALL"]=[100,500,1000,5000];map["KRW"]=[1000,5000,10000,50000];map["MMK"]=[1000,5000,10000,50000];map["KHR"]=[1000,5000,10000,50000];map["ID2"]=[10000,50000,100000,500000];map["VN2"]=[25000,100000,500000,1000000];_this.tipMap=map;var bg=new PIXI.Sprite(PIXI.Texture.fromFrame("tip_bg.png"));_this.popup.addChild(bg);_this.selector=new PIXI.Graphics();_this.selector.lineStyle(3,0xFFBE3D);_this.selector.drawCircle(0,0,18);_this.popup.addChild(_this.selector);_this.popup['bg']=bg;for(var i=0;i<4;i++){var chip=new component.VButton([PIXI.Texture.fromFrame('tip_chip_'+(i+1)+'.png'),PIXI.Texture.fromFrame('tip_chip_'+(i+1)+'.png')],_this.onTip.bind(_this));_this.popup.addChild(chip);chip.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;chip.y=5;chip.scale.y=chip.scale.x;chip.x=10+(chip.width+4)*i;chip.data=i;var tf=game.GameUtils.createText("",{fontFamily:"Arial",fontSize:18,fontStyle:"bold"},1);tf.anchor.x=0.5;tf.anchor.y=0.5;chip.addChild(tf);chip['tf']=tf;tf.x=chip.getWidth()*0.5;tf.y=25;if(i==0){_this.onTip(chip);}
_this.chips.push(chip);}
var confirmBtn=new component.VButton([PIXI.Texture.fromFrame('tip_btn_confirm0001.png'),PIXI.Texture.fromFrame('tip_btn_confirm0002.png')],_this.onConfirm.bind(_this),1000);_this.confirmBtn=confirmBtn;confirmBtn.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;confirmBtn.scale.y=confirmBtn.scale.x;confirmBtn.x=12+(chip.width+4)*4;confirmBtn.y=10;_this.popup.addChild(confirmBtn);_this.gameModel.toolTip.addToolTip(confirmBtn,game.GameText.BET_CONFIRM_TOOLTIP);var tipBtn=new PIXI.Graphics();_this.addChild(tipBtn);_this.tipBtn=tipBtn;var tipBase=new PIXI.Sprite(PIXI.Texture.fromFrame('tip_base.png'));tipBase.anchor.x=0.5;tipBase.anchor.y=0.5;tipBase.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;tipBase.scale.y=tipBase.scale.x;tipBtn.addChild(tipBase);var tipHeart=new PIXI.Sprite(PIXI.Texture.fromFrame('tip_heart.png'));tipHeart.anchor.x=0.5;tipHeart.anchor.y=0.5;tipHeart.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;tipHeart.scale.y=tipHeart.scale.x;tipBtn.addChild(tipHeart);tipHeart.y=-27;_this.tipHeart=tipHeart;_this.animChip=new PIXI.Sprite();_this.addChild(_this.animChip);_this.animChip.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;_this.animChip.scale.y=_this.animChip.scale.x;_this.animChip.mask=masker;_this.animChip.visible=false;var tf=game.GameUtils.createNormalText("",18,0x000000);tf.style.fontStyle="bold";tf.anchor.x=0.5;tf.anchor.y=0.5;_this.animChip.addChild(tf);_this.animChip['tf']=tf;tf.x=27;tf.y=25;component.VMouseUtils.on(tipBtn,component.VMouseUtils.MOUSE_OVER,_this.onTipOver,_this);component.VMouseUtils.on(tipBtn,component.VMouseUtils.MOUSE_OUT,_this.onTipOut,_this);component.VMouseUtils.on(tipBtn,component.VMouseUtils.MOUSE_UP,_this.onTipUp,_this);component.VMouseUtils.on(game.GlobalVals.stage,component.VMouseUtils.MOUSE_DOWN,_this.onStageMouse,_this);_this.popup.alpha=0;_this.popup.visible=false;_this.masker.visible=false;return _this;}
TipCon.prototype.initTips=function(){this.tipValues=this.tipMap[game.GlobalVals.userInfo.currency]?this.tipMap[game.GlobalVals.userInfo.currency]:this.tipMap["USD"];for(var i=0;i<this.tipValues.length;i++)
this.chips[i]['tf'].text=this.tipValues[i]>=1000?this.tipValues[i]/1000+'K':this.tipValues[i].toString();};TipCon.prototype.destructor=function(){TweenMax.killTweensOf(this.animChip);TweenMax.killTweensOf(this.tipHeart);TweenMax.killTweensOf(this.popup);component.VMouseUtils.off(game.GlobalVals.stage,component.VMouseUtils.MOUSE_DOWN,this.onStageMouse,this);component.VMouseUtils.off(this.tipBtn,component.VMouseUtils.MOUSE_OVER,this.onTipOver,this);component.VMouseUtils.off(this.tipBtn,component.VMouseUtils.MOUSE_OUT,this.onTipOut,this);component.VMouseUtils.off(this.tipBtn,component.VMouseUtils.MOUSE_UP,this.onTipUp,this);_super.prototype.destructor.call(this);};TipCon.prototype.onTipOver=function(){TweenMax.killTweensOf(this.tipHeart);TweenMax.to(this.tipHeart,0.3,{y:this.tipDir==1?-32:-27,ease:Linear.easeNone,onComplete:function(){this.tipDir=-this.tipDir;this.onTipOver();}.bind(this)});};TipCon.prototype.onTipOut=function(e){TweenMax.killTweensOf(this.tipHeart);this.tipHeart.y=-27;};TipCon.prototype.onTipUp=function(){if(this.popup.alpha==1)
this.hide();else
this.show();};TipCon.prototype.onStageMouse=function(e){if(!this.visible)
return;var mp=component.VMouseUtils.mousePos();var mp1=this.popup.toLocal(mp);var mp2=this.tipBtn.toLocal(mp);if(!new PIXI.Rectangle(0,0,204,42).contains(mp1.x,mp1.y)&&!new PIXI.Rectangle(-this.tipBtn.width/2,-this.tipBtn.height,this.tipBtn.width,this.tipBtn.height).contains(mp2.x,mp2.y))
this.hide();};TipCon.prototype.show=function(){game.GlobalVals.onShownPopup(this.popup);this.popup.visible=true;this.masker.visible=true;TweenMax.to(this.popup,0.5,{alpha:1});var s=game.GameSettings.CANVAS_WIDTH-game.GameSettings.TABLE_SMALL_VIEW_WIDTH;if(this.x+this.popup.width*0.5>s)
this.popup.x=-this.popup.width*0.5-(this.x+this.popup.width*0.5-s);this.tipHeart.alpha=0.5;};TipCon.prototype.hide=function(){TweenMax.to(this.popup,0.5,{alpha:0,onComplete:function(){this.popup.visible=false;this.masker.visible=false;game.GlobalVals.onHidePopup();}.bind(this)});this.tipHeart.alpha=1;};TipCon.prototype.onConfirm=function(){if(game.GlobalVals.userInfo.getBalance()<this.tipValues[this.selectedTip.data]){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.BALANCE_NOT_ENOUGHT);this.hide();return;}
game.NetUtils.sendWS({"table":this.gameModel.TABLE_ID,"amount":this.tipValues[this.selectedTip.data],"from":game.GameSettings.APP[game.GlobalVals.viewMode],"kind":game.GameCMD.TIP});};TipCon.prototype.onTipSucceed=function(data){this.confirmBtn.interactive=true;this.animChip.visible=true;var index=this.tipValues.indexOf(data.content.value);this.animChip.texture=PIXI.Texture.fromFrame('tip_chip_'+(index+1)+'.png');this.animChip.x=this.popup.x+this.chips[index].x;this.animChip.y=this.popup.y+this.chips[index].y;this.animChip['tf'].text=this.tipValues[index].toString();TweenMax.killTweensOf(this.animChip);TweenMax.to(this.animChip,0.3,{x:-this.animChip.width*0.5,onComplete:function(){TweenMax.to(this.animChip,0.5,{y:0});}.bind(this)});this.hide();};TipCon.prototype.onTip=function(tip){this.selectedTip=tip;this.selector.x=this.selectedTip.x+this.selectedTip.width*0.5;this.selector.y=this.selectedTip.y+this.selectedTip.height*0.5;};return TipCon;}(game.GameObject));game.TipCon=TipCon;})(game||(game={}));var game;(function(game){var TopTool=(function(_super){__extends(TopTool,_super);function TopTool(gameModel){var _this=_super.call(this,gameModel)||this;_this.initView();return _this;}
TopTool.prototype.destructor=function(){if(document.addEventListener){document.removeEventListener('webkitfullscreenchange',this.fullscreenChangeBinding,false);document.removeEventListener('mozfullscreenchange',this.fullscreenChangeBinding,false);document.removeEventListener('fullscreenChange',this.fullscreenChangeBinding,false);document.removeEventListener('MSFullscreenChange',this.fullscreenChangeBinding,false);}
clearInterval(this.timerId);_super.prototype.destructor.call(this);};TopTool.prototype.initView=function(){this.shownAds=false;var bg=new PIXI.Graphics();bg.beginFill(0x000000);bg.drawRect(0,0,331,33);bg.endFill();this.addChild(bg);this.bg=bg;var timeTf=component.VComponentUtils.createText('',{fontFamily:"Arial",fontSize:13,fill:0xffffff});this.addChild(timeTf);timeTf.x=5;timeTf.y=8;this.timeTf=timeTf;this.fullscreenChangeBinding=this.onFullScreenChange.bind(this);if(document.addEventListener){document.addEventListener('webkitfullscreenchange',this.fullscreenChangeBinding,false);document.addEventListener('mozfullscreenchange',this.fullscreenChangeBinding,false);document.addEventListener('fullscreenChange',this.fullscreenChangeBinding,false);document.addEventListener('MSFullscreenChange',this.fullscreenChangeBinding,false);}
var fullscreenOn=new component.VButton([PIXI.Texture.fromFrame('fullscreen_on0001.png'),PIXI.Texture.fromFrame('fullscreen_on0002.png')],function(){});this.gameModel.toolTip.addToolTip(fullscreenOn,game.GameText.FULLSCREEN);var fullscreenOff=new component.VButton([PIXI.Texture.fromFrame('fullscreen_off0001.png'),PIXI.Texture.fromFrame('fullscreen_off0002.png')],function(){});this.gameModel.toolTip.addToolTip(fullscreenOff,game.GameText.EXIT_FULLSCREEN);var fullscreenBtn=new component.VToggleButton(fullscreenOn,fullscreenOff,this.onFullScreen.bind(this));fullscreenBtn.y=7;fullscreenBtn.x=254;game.GameUtils.resizeNodeH(fullscreenBtn,20);this.addChild(fullscreenBtn);this.fullscreenBtn=fullscreenBtn;fullscreenBtn.buttonMode=true;var wdoc=window.document;if(wdoc.mozFullScreen||wdoc.webkitIsFullScreen)
this.fullscreenBtn.setFrame(1);else
this.fullscreenBtn.setFrame(0);var exitBtn=new component.VButton([PIXI.Texture.fromFrame('back_to_lobby0001.png'),PIXI.Texture.fromFrame('back_to_lobby0002.png')],this.onExitBtn.bind(this));this.addChild(exitBtn);this.exitBtn=exitBtn;exitBtn.x=304;exitBtn.y=2;game.GameUtils.resizeNodeH(exitBtn,25);this.gameModel.toolTip.addToolTip(exitBtn,game.GameText.BACK_TO_LOBBY);if(SHOW_GAME_ADS){var adsBtn=new component.VButton([PIXI.Texture.fromFrame('toggle_ads_btn0001.png'),PIXI.Texture.fromFrame('toggle_ads_btn0002.png')],this.onAdsBtn.bind(this));this.addChild(adsBtn);adsBtn.x=278.5;adsBtn.y=4;game.GameUtils.resizeNodeH(adsBtn,23);this.adsBtn=adsBtn;this.gameModel.toolTip.addToolTip(adsBtn,game.GameText.ADS);this.adsCon=new game.AdsCon(this.gameModel,331,245);this.adsCon.y=bg.height;this.addChild(this.adsCon);}
else{if(game.GlobalVals.operatorFlagInfo&&game.GlobalVals.operatorFlagInfo.miniStatus!=2&&game.GlobalVals.operatorFlagInfo.miniStatus!=3&&this.gameModel.GAME_ID!=game.GameID.LOBBY&&game.GlobalVals.viewMode!=game.ViewMode.MODE_7S)
game.GlobalVals.resourceMng.getDynamicTexture("club_bravado.jpg","../common_bin/assets/adverts/club_bravado.jpg",function onLoaded(t){var page=new PIXI.Sprite(t);component.VComponentUtils.alignImg(page,331,245,0,0,true);this.addChild(page);page.y=bg.height;}.bind(this));}
this.updateTime();this.timerId=setInterval(this.onTimer.bind(this),1000);};TopTool.prototype.showAds=function(){if(!this.adsCon)
return;this.adsCon.show(false);this.shownAds=true;};TopTool.prototype.hideAds=function(){if(!this.adsCon)
return;this.adsCon.hide();this.shownAds=false;};TopTool.prototype.updateTime=function(){this.date=new Date();this.curTime=this.date.getTime();this.onTimer();};TopTool.prototype.onTimer=function(){this.curTime+=1000;this.date.setTime(this.curTime);this.timeTf.text=component.VComponentUtils.getDateStr(this.date);};TopTool.prototype.onFullScreen=function(){var wdoc=window.document;var docEl=wdoc.documentElement;var _fRequestFullScreen=docEl.requestFullscreen||docEl.mozRequestFullScreen||docEl.webkitRequestFullScreen||docEl.msRequestFullscreen;var _fCancelFullScreen=wdoc.exitFullscreen||wdoc.mozCancelFullScreen||wdoc.webkitExitFullscreen||wdoc.msExitFullscreen;if(document.fullscreenElement||document['msFullscreenElement']||wdoc.mozFullScreen||wdoc.webkitIsFullScreen){_fCancelFullScreen.call(window.document);}
else{_fRequestFullScreen.call(window.document.documentElement);}};TopTool.prototype.onFullScreenChange=function(e){var wdoc=window.document;if(document.fullscreenElement||document['msFullscreenElement']||wdoc.mozFullScreen||wdoc.webkitIsFullScreen)
this.fullscreenBtn.setFrame(1);else
this.fullscreenBtn.setFrame(0);};TopTool.prototype.onExitBtn=function(){if(!game.GlobalVals.WAITING_SHOW_LOBBY_RESPONSE){game.GlobalVals.WAITING_SHOW_LOBBY_RESPONSE=true;game.NetUtils.sendWSSimple(game.GameCMD.SHOW_LOBBY);}};TopTool.prototype.onAdsBtn=function(){if(!SHOW_GAME_ADS)
return;this.toggleAds();};TopTool.prototype.toggleAds=function(){this.shownAds=!this.shownAds;if(this.shownAds){this.adsCon.show();}
else{this.adsCon.hide();}};return TopTool;}(game.GameObject));game.TopTool=TopTool;})(game||(game={}));var game;(function(game){var BigEyeIcon=(function(_super){__extends(BigEyeIcon,_super);function BigEyeIcon(){return _super!==null&&_super.apply(this,arguments)||this;}
BigEyeIcon.prototype.opDraw=function(info){var results=info.result.split('');var type;if(results[game.BetType.BANKER-1]=='1')
type=1;if(results[game.BetType.PLAYER-1]=='1')
type=2;this.clear();var iconType=type==1?"trend_bigeyeroad_red":"trend_bigeyeroad_blue";this.createImg(iconType);};return BigEyeIcon;}(game.TrendIcon));game.BigEyeIcon=BigEyeIcon;})(game||(game={}));var game;(function(game){var CockRoachIcon=(function(_super){__extends(CockRoachIcon,_super);function CockRoachIcon(){return _super.call(this)||this;}
CockRoachIcon.prototype.draw=function(info){this.info=info;var result=info.result;var type;if(result.charAt(game.BetType.BANKER-1)=='1')
type=1;this.clear();var iconType=type==1?"trend_cockroachroad_red":"trend_cockroachroad_blue";this.createImg(iconType);};return CockRoachIcon;}(game.TrendIcon));game.CockRoachIcon=CockRoachIcon;})(game||(game={}));var game;(function(game){var PearlRoadIcon=(function(_super){__extends(PearlRoadIcon,_super);function PearlRoadIcon(){var _this=_super.call(this)||this;_this.type=game.TrendType.NORMAL;return _this;}
PearlRoadIcon.prototype.draw=function(info){this.info=info;this.clear();this.drawResult(info.result);};PearlRoadIcon.prototype.drawResult=function(result){this.clear();var results=result.split('');var win;if(results[game.BetType.BANKER-1]=='1')
win=1;if(results[game.BetType.PLAYER-1]=='1')
win=2;if(results[game.BetType.TIE-1]=='1')
win=3;var iconType="";switch(true){case true:if(this.type==game.TrendType.BIG_SMALL){var bigSmall=0;if(results[game.BetType.BIG-1]=='1')
bigSmall=1;if(results[game.BetType.SMALL-1]=='1')
bigSmall=2;if(bigSmall>0){iconType=bigSmall==1?"trend_big":"trend_small";this.createImg(iconType);break;}}
var natural=0;if(results[game.BetType.BANKER_N8-1]=='1'||results[game.BetType.PLAYER_N8-1]=='1')
natural=8;if(results[game.BetType.BANKER_N9-1]=='1'||results[game.BetType.PLAYER_N9-1]=='1')
natural=9;if(results[game.BetType.SUPER-1]=='1')
natural=6;if(this.type==game.TrendType.NATURAL&&natural>0){if(natural==6){iconType='trend_super6';this.createImg(iconType);break;}
if(win==3){iconType=natural==8?"trend_natural_t8":"trend_natural_t9";}
else if(win==1){iconType=natural==8?"trend_natural_b8":"trend_natural_b9";}
else{iconType=natural==8?"trend_natural_p8":"trend_natural_p9";}
this.createImg(iconType);break;}
else{iconType=win==3?"result_solid_2":(win==1?"result_solid_0":"result_solid_1");}
this.createImg(iconType);this.drawPair(result);}};return PearlRoadIcon;}(game.TrendIcon));game.PearlRoadIcon=PearlRoadIcon;})(game||(game={}));var game;(function(game){var SmallRoadIcon=(function(_super){__extends(SmallRoadIcon,_super);function SmallRoadIcon(){return _super.call(this)||this;}
SmallRoadIcon.prototype.draw=function(info){this.info=info;this.clear();var result=info.result;this.createImg(result.charAt(game.BetType.BANKER-1)=='1'?"trend_smallroad_red":"trend_smallroad_blue");};return SmallRoadIcon;}(game.TrendIcon));game.SmallRoadIcon=SmallRoadIcon;})(game||(game={}));var game;(function(game){var TrendIconPool=(function(){function TrendIconPool(){}
TrendIconPool.get=function(type){if(!TrendIconPool.pool[type])
TrendIconPool.pool[type]=[];if(TrendIconPool.pool[type].length==0){var sp=new PIXI.Sprite(PIXI.Texture.fromFrame(type+".png"));sp.anchor.x=0.5;sp.anchor.y=0.5;sp['_image_id_']=type;return sp;}
return TrendIconPool.pool[type].pop();};TrendIconPool.isInPool=function(obj){var type=obj['_image_id_'];if(!type||!TrendIconPool.pool[type])
return false;for(var i=0;i<TrendIconPool.pool[type].length;i++){if(obj==TrendIconPool.pool[type][i])
return true;}
return false;};TrendIconPool.release=function(obj){if(obj.parent)
obj.parent.removeChild(obj);obj.scale.x=1;obj.scale.y=1;obj.x=0;obj.y=0;obj.visible=true;var type=obj['_image_id_'];if(!TrendIconPool.pool[type])
TrendIconPool.pool[type]=[];TrendIconPool.pool[type].push(obj);return true;};TrendIconPool.clearAll=function(){var obj;for(var type in TrendIconPool.pool){for(var i=0;i<TrendIconPool.pool[type].length;i++){obj=TrendIconPool.pool[type][i];if(obj.clean)
obj.clean();if(obj.destroy)
obj.destroy.length?obj.destroy(true):obj.destroy();}
delete TrendIconPool.pool[type];}
TrendIconPool.pool=null;};return TrendIconPool;}());game.TrendIconPool=TrendIconPool;TrendIconPool.pool={};})(game||(game={}));var game;(function(game){var TrendIconUtils=(function(){function TrendIconUtils(){}
TrendIconUtils.addALLTextures=function(textureMnd){var arr=[];arr.push(TrendIconUtils.SMALL_STROKE_CIRCLE_BLUE);arr.push(TrendIconUtils.SMALL_STROKE_CIRCLE_RED);arr.push(TrendIconUtils.SMALL_FILL_CIRCLE_BLUE);arr.push(TrendIconUtils.SMALL_FILL_CIRCLE_RED);arr.push(TrendIconUtils.SMALL_FILL_CIRCLE_GREEN);arr.push(TrendIconUtils.SMALL_LINE_BLUE);arr.push(TrendIconUtils.SMALL_LINE_RED);arr.push(TrendIconUtils.STROKE_CIRCLE_BLUE);arr.push(TrendIconUtils.STROKE_CIRCLE_RED);arr.push(TrendIconUtils.STROKE_CIRCLE_GREEN);arr.push(TrendIconUtils.FILL_CIRCLE_BLUE);arr.push(TrendIconUtils.FILL_CIRCLE_RED);arr.push(TrendIconUtils.FILL_CIRCLE_GREEN);arr.push(TrendIconUtils.FILL_CIRCLE_WHITE);arr.push(TrendIconUtils.PAIR_CIRCLE_BLUE);arr.push(TrendIconUtils.PAIR_CIRCLE_RED);for(var i=0;i<arr.length;i++){textureMnd.addTexture(arr[i],TrendIconUtils.getIcon(arr[i]),50,50);}};TrendIconUtils.getIcon=function(id){var g=new PIXI.Graphics();var size;var stroke=0;var fill;var thickness=0;var r=0;switch(id){case TrendIconUtils.SMALL_LINE_RED:stroke=TrendIconUtils.RED;var thickness=2;size=TrendIconUtils.NORMAL_SIZE*0.4;g.lineStyle(thickness,stroke);g.moveTo(-size,size);g.lineTo(size,-size);return g;case TrendIconUtils.SMALL_LINE_BLUE:stroke=TrendIconUtils.BLUE;var thickness=2;size=TrendIconUtils.NORMAL_SIZE*0.4;g.lineStyle(thickness,stroke);g.moveTo(-size,size);g.lineTo(size,-size);return g;case TrendIconUtils.SMALL_STROKE_CIRCLE_RED:stroke=TrendIconUtils.RED;fill=0xffffff;size=TrendIconUtils.NORMAL_SIZE*0.5;thickness=size/7;break;case TrendIconUtils.SMALL_STROKE_CIRCLE_BLUE:stroke=TrendIconUtils.BLUE;fill=0xffffff;size=TrendIconUtils.NORMAL_SIZE*0.5;thickness=size/7;break;case TrendIconUtils.STROKE_CIRCLE_RED:stroke=TrendIconUtils.RED;fill=0xffffff;size=TrendIconUtils.NORMAL_SIZE;thickness=size/7;break;case TrendIconUtils.STROKE_CIRCLE_BLUE:stroke=TrendIconUtils.BLUE;fill=0xffffff;size=TrendIconUtils.NORMAL_SIZE;thickness=size/7;break;case TrendIconUtils.STROKE_CIRCLE_GREEN:stroke=TrendIconUtils.GREEN;fill=0xffffff;size=TrendIconUtils.NORMAL_SIZE;thickness=size/7;break;case TrendIconUtils.SMALL_FILL_CIRCLE_RED:fill=TrendIconUtils.RED;size=TrendIconUtils.NORMAL_SIZE*0.4;thickness=0;break;case TrendIconUtils.SMALL_FILL_CIRCLE_BLUE:fill=TrendIconUtils.BLUE;size=TrendIconUtils.NORMAL_SIZE*0.4;thickness=0;break;case TrendIconUtils.SMALL_FILL_CIRCLE_GREEN:fill=TrendIconUtils.GREEN;size=TrendIconUtils.NORMAL_SIZE*0.4;thickness=0;break;case TrendIconUtils.FILL_CIRCLE_RED:fill=TrendIconUtils.RED;size=TrendIconUtils.NORMAL_SIZE;thickness=0;break;case TrendIconUtils.FILL_CIRCLE_BLUE:fill=TrendIconUtils.BLUE;size=TrendIconUtils.NORMAL_SIZE;thickness=0;break;case TrendIconUtils.FILL_CIRCLE_GREEN:fill=TrendIconUtils.GREEN;size=TrendIconUtils.NORMAL_SIZE;thickness=0;break;case TrendIconUtils.FILL_CIRCLE_WHITE:fill=0xffffff;size=TrendIconUtils.NORMAL_SIZE;thickness=0;break;case TrendIconUtils.PAIR_CIRCLE_BLUE:fill=TrendIconUtils.BLUE;size=TrendIconUtils.NORMAL_SIZE*0.2;thickness=1;stroke=0x333333;break;case TrendIconUtils.PAIR_CIRCLE_RED:fill=TrendIconUtils.RED;size=TrendIconUtils.NORMAL_SIZE*0.2;thickness=1;stroke=0x333333;break;}
r=size*0.5-thickness*0.5;g.lineStyle(thickness,stroke);g.beginFill(fill);g.drawCircle(0,0,r);g.endFill();return g;};TrendIconUtils.NORMAL_SIZE=15;TrendIconUtils.BLUE=0x2B91C2;TrendIconUtils.RED=0xBD2726;TrendIconUtils.GREEN=0x3C9448;TrendIconUtils.BLACK=0x000000;TrendIconUtils.SMALL_STROKE_CIRCLE_BLUE="TrendIconUtils_SMALL_STROKE_CIRCLE_BLUE";TrendIconUtils.SMALL_STROKE_CIRCLE_RED="TrendIconUtils_SMALL_STROKE_CIRCLE_RED";TrendIconUtils.SMALL_FILL_CIRCLE_BLUE="TrendIconUtils_SMALL_FILL_CIRCLE_BLUE";TrendIconUtils.SMALL_FILL_CIRCLE_RED="TrendIconUtils_SMALL_FILL_CIRCLE_RED";TrendIconUtils.SMALL_FILL_CIRCLE_GREEN="TrendIconUtils_SMALL_FILL_CIRCLE_GREEN";TrendIconUtils.SMALL_LINE_BLUE="TrendIconUtils_SMALL_LINE_BLUE";TrendIconUtils.SMALL_LINE_RED="TrendIconUtils_SMALL_LINE_RED";TrendIconUtils.STROKE_CIRCLE_BLUE="TrendIconUtils_SMALL_STROKE_CIRCLE_BLUE";TrendIconUtils.STROKE_CIRCLE_RED="TrendIconUtils_SMALL_STROKE_CIRCLE_RED";TrendIconUtils.STROKE_CIRCLE_GREEN="TrendIconUtils_SMALL_STROKE_CIRCLE_GREEN";TrendIconUtils.FILL_CIRCLE_BLUE="TrendIconUtils_SMALL_FILL_CIRCLE_BLUE";TrendIconUtils.FILL_CIRCLE_RED="TrendIconUtils_SMALL_FILL_CIRCLE_RED";TrendIconUtils.FILL_CIRCLE_GREEN="TrendIconUtils_FILL_CIRCLE_GREEN";TrendIconUtils.FILL_CIRCLE_WHITE="TrendIconUtils_FILL_CIRCLE_WHITE";TrendIconUtils.PAIR_CIRCLE_BLUE="TrendIconUtils_PAIR_CIRCLE_BLUE";TrendIconUtils.PAIR_CIRCLE_RED="TrendIconUtils_PAIR_CIRCLE_RED";return TrendIconUtils;}());game.TrendIconUtils=TrendIconUtils;})(game||(game={}));var game;(function(game){var IconCount=(function(_super){__extends(IconCount,_super);function IconCount(gameModel){var _this=_super.call(this,gameModel)||this;_this.initialize();return _this;}
IconCount.prototype.destructor=function(){this.tfs=[];this.icons=[];_super.prototype.destructor.call(this);};IconCount.prototype.initialize=function(){this.tfs=[];this.icons=[];var results=[];results.push(game.BetType.getResult(game.BetType.BANKER));results.push(game.BetType.getResult(game.BetType.PLAYER));results.push(game.BetType.getResult(game.BetType.TIE));results.push(game.BetType.getResult(game.BetType.BANKER_PAIR,game.BetType.getResult(game.BetType.BANKER)));results.push(game.BetType.getResult(game.BetType.PLAYER_PAIR,game.BetType.getResult(game.BetType.PLAYER)));results.push(game.BetType.getResult(game.BetType.BIG));results.push(game.BetType.getResult(game.BetType.SMALL));results.push(game.BetType.getResult(game.BetType.BANKER_N9,game.BetType.getResult(game.BetType.BANKER)));results.push(game.BetType.getResult(game.BetType.BANKER_N8,game.BetType.getResult(game.BetType.BANKER)));results.push(game.BetType.getResult(game.BetType.PLAYER_N9,game.BetType.getResult(game.BetType.PLAYER)));results.push(game.BetType.getResult(game.BetType.PLAYER_N8,game.BetType.getResult(game.BetType.PLAYER)));var dis=20;var posX=0;var icon;for(var i=0;i<results.length;i++){icon=new game.PearlRoadIcon().setData(16);icon.x=posX;posX+=dis;if(i==5||i==6)
icon.setType(game.TrendType.BIG_SMALL);else
icon.setType(game.TrendType.NATURAL);icon.draw(new game.netdata.TrendsItem().setData(results[i]));var tf=game.GameUtils.createText('0',{fontFamily:"Arial",fontSize:12,fill:0xffffff,align:'center'});tf.anchor.x=0.5;tf.x=icon.x;tf.y=icon.y+8;this.tfs[i]=tf;this.icons[i]=icon;this.addChild(icon);this.addChild(tf);}
this.clear();};IconCount.prototype.clear=function(){for(var i=0;i<this.tfs.length;i++){this.tfs[i].text='0';}};IconCount.prototype.addTrend=function(item,isAnim){if(isAnim===void 0){isAnim=false;}
var ind=-1;if(item.result.charAt(game.BetType.BANKER-1)=='1')
ind=0;if(item.result.charAt(game.BetType.PLAYER-1)=='1')
ind=1;if(item.result.charAt(game.BetType.TIE-1)=='1')
ind=2;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(game.BetType.BANKER_PAIR-1)=='1')
ind=3;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(game.BetType.PLAYER_PAIR-1)=='1')
ind=4;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(game.BetType.BIG-1)=='1')
ind=5;if(item.result.charAt(game.BetType.SMALL-1)=='1')
ind=6;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(game.BetType.BANKER_N9-1)=='1')
ind=7;if(item.result.charAt(game.BetType.BANKER_N8-1)=='1')
ind=8;if(item.result.charAt(game.BetType.PLAYER_N9-1)=='1')
ind=9;if(item.result.charAt(game.BetType.PLAYER_N8-1)=='1')
ind=10;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}};IconCount.prototype.updateTrends=function(values){for(var i=0;i<values.length;i++)
this.addTrend(values[i]);};return IconCount;}(game.GameObject));game.IconCount=IconCount;})(game||(game={}));var game;(function(game){var PearlRoad=(function(_super){__extends(PearlRoad,_super);function PearlRoad(gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem){if(name===void 0){name="";}
if(isHoverIcon===void 0){isHoverIcon=false;}
if(minItem===void 0){minItem=250;}
if(maxItem===void 0){maxItem=300;}
var _this=_super.call(this,gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem)||this;_this.type=game.TrendType.NORMAL;_this.expandBtn.visible=false;return _this;}
PearlRoad.prototype.setType=function(type){this.type=type;};PearlRoad.prototype.addTrend=function(item,isUpdateScroll,isDummy){if(isUpdateScroll===void 0){isUpdateScroll=false;}
this.onDummyRelease();var exItem=this.trends.length==0?null:this.trends[this.trends.length-1].info;var orgP1=this.p1.clone();var p=this.p1;var icon=this.gameModel.vObjectPool.get(this.TrendIconClass).setData(this.iconSize,isDummy);icon.setType(this.type);icon.x=this.iconSize*0.5+p.x*this.iconSize;icon.y=this.iconSize*0.5+p.y*this.iconSize;icon['index']=this.trends.length;icon.draw(item);if(this.isHoverIcon&&!isDummy){icon.buttonMode=true;component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_UP,this.onItemMouseUp,this);component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_OVER,this.onItemMouseOver,this);component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_OUT,this.onItemMouseOut,this);}
this.content.addChild(icon);if(!isDummy){this.trends.push(icon);}
if(isUpdateScroll)
this.updateScroll();if(p.y<this.maxRow-1)
p.y++;else{p.y=0;p.x++;}
this.isChanged=true;if(isDummy){this.p1.copy(orgP1);this.dummyIcon=icon;}};return PearlRoad;}(game.TrendContainer));game.PearlRoad=PearlRoad;})(game||(game={}));var game;(function(game){var Predict=(function(_super){__extends(Predict,_super);function Predict(gameModel){var _this=_super.call(this,gameModel)||this;_this.initialize();for(var i=2;i<=4;i++){_this.setTrendIcon('icon'+i,false);}
return _this;}
Predict.prototype.destructor=function(){component.VMouseUtils.off(this.banker,component.VMouseUtils.MOUSE_OVER,this.onOver,this);component.VMouseUtils.off(this.banker,component.VMouseUtils.MOUSE_OUT,this.onOut,this);component.VMouseUtils.off(this.player,component.VMouseUtils.MOUSE_OVER,this.onOver,this);component.VMouseUtils.off(this.player,component.VMouseUtils.MOUSE_OUT,this.onOut,this);this.banker=null;this.player=null;_super.prototype.destructor.call(this);};Predict.prototype.initialize=function(){this.banker=new PIXI.Container();this.player=new PIXI.Container();this.gameModel.toolTip.addToolTip(this.banker,game.GameText.PREDICT.replace('{0}',game.GameText.BANKER));this.gameModel.toolTip.addToolTip(this.player,game.GameText.PREDICT.replace('{0}',game.GameText.PLAYER));this.player.y=45+2;this.addChild(this.banker);this.addChild(this.player);var btns=[this.banker,this.player];var results=[game.BetType.getResult(game.BetType.BANKER),game.BetType.getResult(game.BetType.PLAYER)];var names=[game.GameText.BANKER,game.GameText.PLAYER];for(var i=0;i<btns.length;i++){var size=18;var posX=12;var posY=32;var dis=22;var bg=new PIXI.Graphics();bg.lineStyle(0,0,0);bg.beginFill(0xffffff);bg.drawRect(0,0,92,45);btns[i]['bg']=bg;btns[i].addChild(bg);var icon1=new game.PearlRoadIcon().setData(size);icon1.draw(new game.netdata.TrendsItem().setData(results[i]));icon1.x=posX;icon1.y=posY;posX+=dis;btns[i].addChild(icon1);var icon2=new game.TrendIcon().setData(size);icon2.draw(new game.netdata.TrendsItem().setData(results[i]));icon2.x=posX;icon2.y=posY;posX+=dis;btns[i].addChild(icon2);var icon3=new game.SmallRoadIcon().setData(size);icon3.draw(new game.netdata.TrendsItem().setData(results[i]));icon3.x=posX;icon3.y=posY;posX+=dis;btns[i].addChild(icon3);var icon4=new game.CockRoachIcon().setData(size);icon4.draw(new game.netdata.TrendsItem().setData(results[i]));icon4.x=posX;icon4.y=posY;posX+=dis;btns[i].addChild(icon4);btns[i]['icon1']=icon1;btns[i]['icon2']=icon2;btns[i]['icon3']=icon3;btns[i]['icon4']=icon4;var tf=game.GameUtils.createText(names[i],{fontFamily:"dinbold",fontSize:16,fontStyle:'bold',fill:0x000000,align:'center'});tf.anchor.x=0.5;tf.x=bg.width*0.5;tf.y=0;btns[i].addChild(tf);btns[i]['tf']=tf;btns[i].buttonMode=true;component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_OVER,this.onOver,this);component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_OUT,this.onOut,this);}};Predict.prototype.onOver=function(e){e.target['bg'].alpha=0.8;};Predict.prototype.onOut=function(e){e.target['bg'].alpha=1;};;Predict.prototype.setTrendIcon=function(icon,isVisible){this.banker[icon].visible=isVisible;this.player[icon].visible=isVisible;};Predict.prototype.resizeBtns=function(w,h,padding){if(padding===void 0){padding=14;}
this.resizeBtn(this.banker,w,h,padding);this.resizeBtn(this.player,w,h,padding);};Predict.prototype.resizeBtn=function(btn,w,h,padding){if(padding===void 0){padding=14;}
var hor=w>h;var icons=[];btn['bg'].width=w;btn['bg'].height=h;if(!hor)
btn['tf'].visible=false;for(var i=0;i<btn.children.length;i++){var ch=btn.children[i];if(ch instanceof game.BaseTrendIcon)
icons.push(ch);}
for(var i=0;i<icons.length;i++){if(hor){icons[i].y=h*0.7;icons[i].x=padding+((w-2*padding)/(icons.length-1))*i;}
else{icons[i].x=w*0.5;icons[i].y=padding+((h-2*padding)/(icons.length-1))*i;}}};return Predict;}(game.GameObject));game.Predict=Predict;})(game||(game={}));var game;(function(game){var TrendInfoPanel=(function(_super){__extends(TrendInfoPanel,_super);function TrendInfoPanel(gameModel){var _this=_super.call(this,gameModel)||this;_this.cards=[];_this.initView();return _this;}
TrendInfoPanel.prototype.initView=function(){this.showTimoutId=0;this.cardsPosX=[101,71,26+3,143,173,200+4];this.cardPosY=6;this.bg=new PIXI.Graphics();this.bg.beginFill(0x000000);this.bg.drawRoundedRect(0,0,273,55,5);this.bg.endFill();this.bg.lineStyle(1,0xDDDDDD);this.bg.moveTo(136.25,4);this.bg.lineTo(136.25,4+48);this.addChild(this.bg);var style={fontFamily:"Arial",fontStyle:'bold',fontSize:22,fill:0xffffff,align:'center'};this.playerTf=game.GameUtils.createText('',style);this.playerTf.x=14;this.playerTf.y=27;this.playerTf.anchor.x=0.5;this.addChild(this.playerTf);this.bankerTf=game.GameUtils.createText('',style);this.bankerTf.x=250+8;this.bankerTf.y=27;this.bankerTf.anchor.x=0.5;this.addChild(this.bankerTf);var cardsFrame=[];var arr=['A',2,3,4,5,6,7,8,9,'T','J','Q','K'];var key="";for(var c=0;c<6;c++){var card=new PIXI.Sprite();card.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;card.scale.y=card.scale.x;card.x=this.cardsPosX[c];card.y=this.cardPosY;this.addChild(card);this.cards.push(card);}
this.cards[2].anchor.x=1;this.cards[2].rotation=-90*Math.PI/180;this.cards[5].anchor.x=1;this.cards[5].rotation=-90*Math.PI/180;this.initIcons();};TrendInfoPanel.prototype.initIcons=function(){this.playerIcon=new game.PearlRoadIcon();this.playerIcon.drawResult(game.BetType.getResult(game.BetType.PLAYER));this.playerIcon.x=14;this.playerIcon.y=15;this.playerIcon.width=18;this.playerIcon.scale.y=this.playerIcon.scale.x;this.addChild(this.playerIcon);this.bankerIcon=new game.PearlRoadIcon();this.bankerIcon.drawResult(game.BetType.getResult(game.BetType.BANKER));this.bankerIcon.x=258;this.bankerIcon.y=15;this.bankerIcon.width=18;this.bankerIcon.scale.y=this.bankerIcon.scale.x;this.addChild(this.bankerIcon);};TrendInfoPanel.prototype.hide=function(){this.visible=false;};TrendInfoPanel.prototype.show=function(target){this.onShow(target);};TrendInfoPanel.prototype.setData=function(data){var cards=data.cards;for(var i=0;i<this.cards.length;i++)
this.cards[i].visible=false;this.visible=true;var arr=cards.split('#');var val=0;var card;var key;var str="";for(var i=0;i<arr[0].length/2;i++)
str+=arr[0].substr(arr[0].length-i*2-2,2);arr[0]=str;for(var i=0;i<arr[0].length/2;i++){key='smallcard_'+arr[0].substr(i*2,2)+".png";this.cards[i].visible=true;this.cards[i].texture=PIXI.Texture.fromFrame(key);card=arr[0][i*2+1];val+='TJQK'.indexOf(card)>=0?0:(card=='A'?1:parseInt(card));}
val=val%10;this.playerTf.text=val.toString();val=0;var c=0;for(var i=arr[1].length/2-1;i>=0;i--){key='smallcard_'+arr[1].substr(i*2,2)+".png";this.cards[3+c].visible=true;this.cards[3+c].texture=PIXI.Texture.fromFrame(key);card=arr[1][i*2+1];val+='TJQK'.indexOf(card)>=0?0:(card=='A'?1:parseInt(card));c++;}
val=val%10;this.bankerTf.text=val.toString();};TrendInfoPanel.prototype.onShow=function(target){trace("target.info = "+JSON.stringify(target.info));this.setData(target.info);var p=new PIXI.Point(target.x,target.y);p=target.parent.toGlobal(p);p=this.gameModel.overlay.toLocal(p);p.y+=target.size;if(p.x+this.width>this.gameModel.GAME_WIDTH-50)
p.x=this.gameModel.GAME_WIDTH-this.width-50;if(p.y+this.height>this.gameModel.GAME_HEIGHT)
p.y-=(this.height+target.size*2);this.x=p.x;this.y=p.y;};return TrendInfoPanel;}(game.GameObject));game.TrendInfoPanel=TrendInfoPanel;})(game||(game={}));var game;(function(game){var TrendRoad=(function(_super){__extends(TrendRoad,_super);function TrendRoad(gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem){if(name===void 0){name="";}
if(isHoverIcon===void 0){isHoverIcon=false;}
if(minItem===void 0){minItem=250;}
if(maxItem===void 0){maxItem=300;}
var _this=_super.call(this,gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem)||this;_this.nameTf.scale.x=0.5;_this.nameTf.scale.y=_this.nameTf.scale.x;return _this;}
TrendRoad.prototype.onItemMouseOver=function(e){};TrendRoad.prototype.onItemMouseOut=function(e){};TrendRoad.prototype.addTrend=function(item,isUpdateScroll,isDummy){if(isUpdateScroll===void 0){isUpdateScroll=false;}
if(isDummy===void 0){isDummy=false;}
this.onDummyRelease();var icon=this.drawTrendItem(item,isUpdateScroll,isDummy);};TrendRoad.prototype.updateScroll=function(blank){if(blank===void 0){blank=-1;}
_super.prototype.updateScroll.call(this);};TrendRoad.prototype.drawBg=function(isDark){if(isDark===void 0){isDark=false;}
this.isDark=isDark;this.nameTf.style=isDark?{fontFamily:"Arial",fontSize:30,fontStyle:'bold',fill:0x464646,align:'center'}:{fontFamily:"Arial",fontSize:30,fontStyle:'bold',fill:0xCDCDCD,align:'center'};var c=isDark?0x333333:0xffffff;this.underlay.lineStyle(0,0,0);this.underlay.clear();this.underlay.beginFill(c);this.underlay.drawRect(0,0,this.orgW,this.orgH);this.underlay.endFill();var w=this.orgH*(this.viewW/this.viewH)+4*this.iconSize;this.bg.clear();this.bg.lineStyle(0,0,0);this.bg.beginFill(c,0.1);this.bg.drawRect(0,0,w,this.orgH);this.bg.endFill();this.bg.lineStyle(1,isDark?0x282828:0xD0D0D0);for(var i=0;i<=this.maxRow/2;i++){this.bg.moveTo(0,i*this.iconSize*2);this.bg.lineTo(w,i*this.iconSize*2);}
for(i=0;i<=w/(this.iconSize*2);i++){this.bg.moveTo(i*this.iconSize*2,0);this.bg.lineTo(i*this.iconSize*2,this.orgH);}};TrendRoad.prototype.update=function(){_super.prototype.update.call(this);this.bg.x=(-this.content.x+this.content.x%(this.iconSize*2*this.content.scale.x))/this.content.scale.x;};return TrendRoad;}(game.TrendContainer));game.TrendRoad=TrendRoad;})(game||(game={}));var game;(function(game){var TrendType=(function(){function TrendType(){}
TrendType.NORMAL=0;TrendType.BIG_SMALL=1;TrendType.NATURAL=2;TrendType.EVEN_ODD=3;TrendType.RED_BLACK=4;TrendType.DRAGON=5;TrendType.TIGER=6;TrendType.FAB_4=7;TrendType.LUCKY_BACCARAT_6=8;TrendType.LUCKY_BACCARAT=9;TrendType.LUCKY_BACCARAT_NUM=10;return TrendType;}());game.TrendType=TrendType;})(game||(game={}));var game;(function(game){var ViewMode=(function(){function ViewMode(){}
ViewMode.MODE_2D='2d';ViewMode.MODE_3D='3d';ViewMode.MODE_7S='7s';ViewMode.MODE_7S_3D='7s_3d';return ViewMode;}());game.ViewMode=ViewMode;})(game||(game={}));var game;(function(game){var ViewModeControl=(function(_super){__extends(ViewModeControl,_super);function ViewModeControl(gameModel,eventMode){if(eventMode===void 0){eventMode=game.GameEvent.CHANGE_VIEW_MODE;}
var _this=_super.call(this,gameModel)||this;_this.items=[];_this.expanded=true;_this.eventMode=eventMode;return _this;}
ViewModeControl.prototype.destructor=function(){for(var i=0;i<this.items.length;i++){component.VMouseUtils.off(this.items[i],component.VMouseUtils.MOUSE_UP,this.onItemUp,this);}
_super.prototype.destructor.call(this);};ViewModeControl.prototype.expand=function(){this.expanded=true;for(var i=0;i<this.items.length;i++){if(this.items[i]==this.selectedItem)
continue;this.items[i].visible=true;}};ViewModeControl.prototype.collapse=function(){this.expanded=false;for(var i=0;i<this.items.length;i++){if(this.items[i]==this.selectedItem)
continue;this.items[i].visible=false;}};ViewModeControl.prototype.initialize=function(modes){this.items=[];var item;var ih=27;for(var i=0;i<modes.length;i++){item=new PIXI.Graphics();item.beginFill(0x000000,0.7);item.drawRoundedRect(0,0,30,ih,5);item.endFill();item.buttonMode=true;var tf=game.GameUtils.createText(modes[i].toUpperCase(),{fill:0xffffff,fontSize:16,fontStyle:'bold'});tf.x=4;tf.y=2;item.addChild(tf);item.y=i*(ih+4);this.addChild(item);component.VMouseUtils.on(item,component.VMouseUtils.MOUSE_UP,this.onItemUp,this);item['mode']=modes[i];item['tf']=tf;tf['item']=item;this.items.push(item);}};ViewModeControl.prototype.activeItemWithData=function(data){for(var i=0;i<this.items.length;i++){if(this.items[i]['mode']==data){this.activeItem(this.items[i]);break;}}};ViewModeControl.prototype.setPos=function(x,y){this.x=x;this.y=y;};ViewModeControl.prototype.activeItem=function(item){if(this.selectedItem)
this.selectedItem['tf'].style.fill=0xffffff;item['tf'].style.fill=0x777777;this.selectedItem=item;component.VComponentUtils.removeElementFromArray(this.items,this.selectedItem);this.items.unshift(this.selectedItem);var ih=27;for(var i=0;i<this.items.length;i++){this.items[i].y=i*(ih+4);}};ViewModeControl.prototype.onItemUp=function(e){var item=e.target;if(item==this.selectedItem){this.expanded?this.collapse():this.expand();return;}
this.activeItem(item);this.gameModel.notify(this.eventMode,item['mode']);this.collapse();};ViewModeControl.prototype.sizeHandler=function(){};return ViewModeControl;}(game.GameObject));game.ViewModeControl=ViewModeControl;})(game||(game={}));var game;(function(game){var VSharedTexture=(function(){function VSharedTexture(source,w,h){this.source=source;this.renderTexture=PIXI.RenderTexture.create(w,h);this.source.x=this.source.width*0.5;this.source.y=this.source.height*0.5;game.GlobalVals.renderer.render(source,this.renderTexture);}
VSharedTexture.prototype.setScale=function(sx,sy){this.source.scale.x=sx;this.source.scale.y=sy;game.GlobalVals.renderer.render(this.source,this.renderTexture);};VSharedTexture.prototype.destructor=function(){component.VComponentUtils.deepClean(this.source);this.renderTexture.destroy(true);};return VSharedTexture;}());game.VSharedTexture=VSharedTexture;})(game||(game={}));var game;(function(game){var WebRTCMng=(function(){function WebRTCMng(){this.remoteVideo=null;this.peerConnection=null;this.peerConnectionConfig={'iceServers':[]};this.localStream=null;this.wsURL="";this.wsConnection=null;this.streamInfo={applicationName:"wphtable51",streamName:"PH798768755db6Live3",sessionId:"[empty]"};this.userData={param1:"value1"};this.repeaterRetryCount=0;this.newAPI=false;this.urlIndex=0;}
WebRTCMng.prototype.initialize=function(video){this.remoteVideo=video;window['RTCPeerConnection']=window['RTCPeerConnection']||window['mozRTCPeerConnection']||window['webkitRTCPeerConnection'];window['RTCIceCandidate']=window['RTCIceCandidate']||window['mozRTCIceCandidate']||window['webkitRTCIceCandidate'];window['RTCSessionDescription']=window['RTCSessionDescription']||window['mozRTCSessionDescription']||window['webkitRTCSessionDescription'];this.newAPI=true;if(navigator['mediaDevices']&&navigator['mediaDevices'].getUserMedia){this.newAPI=false;}
return this;};WebRTCMng.prototype.gotIceCandidate=function(event){if(event.candidate!=null){}};WebRTCMng.prototype.sendGetOffer=function(){trace("sendGetOffer: "+JSON.stringify(this.streamInfo));this.wsConnection.send('{"direction":"play", "command":"getOffer", "streamInfo":'+JSON.stringify(this.streamInfo)+'}');};WebRTCMng.prototype.wsConnect=function(url){this.wsURL=url;if(this.wsConnection)
this.wsConnection.close();this.wsConnection=new WebSocket(url);var wsConnection=this.wsConnection;wsConnection.onopen=function(){trace("wsConnection.onopen =================================");var RTCPeerConnection=window['RTCPeerConnection'];this.peerConnection=new RTCPeerConnection(this.peerConnectionConfig);var peerConnection=this.peerConnection;peerConnection.onicecandidate=this.gotIceCandidate.bind(this);peerConnection.ontrack=this.gotRemoteTrack.bind(this);peerConnection.onaddstream=this.gotRemoteStream.bind(this);trace("wsURL: "+this.wsURL);this.sendGetOffer();}.bind(this);wsConnection.onmessage=function(evt){trace("wsConnection.onmessage: "+evt.data);var RTCSessionDescription=window['RTCSessionDescription'];var RTCIceCandidate=window['RTCIceCandidate'];var peerConnection=this.peerConnection;var msgJSON=JSON.parse(evt.data);var msgStatus=Number(msgJSON['status']);var msgCommand=msgJSON['command'];trace("msgStatus "+msgStatus);if(msgStatus==514){this.repeaterRetryCount++;if(this.repeaterRetryCount<10)
setTimeout(this.sendGetOffer,500);else
this.stopPlay();}
else if(msgStatus!=200){this.stopPlay();}
else{var streamInfoResponse=msgJSON['streamInfo'];if(streamInfoResponse!==undefined)
this.streamInfo.sessionId=streamInfoResponse.sessionId;var sdpData=msgJSON['sdp'];if(sdpData!==undefined){trace('sdp: '+JSON.stringify(msgJSON['sdp']));peerConnection.setRemoteDescription(new RTCSessionDescription(msgJSON.sdp),function(){peerConnection.createAnswer(this.gotDescription.bind(this),this.errorHandler.bind(this));}.bind(this),this.errorHandler.bind(this));}
var iceCandidates=msgJSON['iceCandidates'];if(iceCandidates!==undefined){for(var index in iceCandidates){peerConnection.addIceCandidate(new RTCIceCandidate(iceCandidates[index]));}}}
if('sendResponse'.localeCompare(msgCommand)==0){if(wsConnection!=null)
wsConnection.close();wsConnection=null;}}.bind(this);wsConnection.onclose=function(){trace("wsConnection.onclose");}.bind(this);wsConnection.onerror=function(evt){trace("wsConnection.onerror: "+JSON.stringify(evt));if(this.urlIndex<game.GameSettings.CONFIG.webRTCUrls.length){this.urlIndex++;this.wsConnect(game.GameSettings.CONFIG.webRTCUrls[this.urlIndex]);}}.bind(this);};WebRTCMng.prototype.sendPost=function(url,params){var RTCSessionDescription=window['RTCSessionDescription'];var RTCIceCandidate=window['RTCIceCandidate'];var peerConnection=this.peerConnection;var http=new XMLHttpRequest();http.open("POST",url,true);http.setRequestHeader("Accept","text/plain");http.setRequestHeader("Content-Type","text/plain");http.onreadystatechange=function(){trace('http.readyState:'+http.readyState+'  http.status:'+http.status);if(http.readyState==4&&http.status==200){console.log("http.responseText = "+http.responseText);console.log('JSON.parse[before]');var responseJSON=JSON.parse(http.responseText);console.log('JSON.parse[after]');var streamInfoResponse=responseJSON['streamInfo'];if(streamInfoResponse!==undefined){this.streamInfo.sessionId=streamInfoResponse.sessionId;}
var sdpData=responseJSON['sdp'];if(sdpData!==undefined){console.log('sdp: '+responseJSON['sdp']);peerConnection.setRemoteDescription(new RTCSessionDescription(responseJSON.sdp),function(){peerConnection.createAnswer(this.gotDescription.bind(this),this.errorHandler.bind(this));}.bind(this),this.errorHandler.bind(this));}
var iceCandidates=responseJSON['iceCandidates'];if(iceCandidates!==undefined){for(var index in iceCandidates){console.log('iceCandidates: '+iceCandidates[index]);peerConnection.addIceCandidate(new RTCIceCandidate(iceCandidates[index]));}}}}.bind(this);http.send(params);};WebRTCMng.prototype.gotDescription=function(description){console.log('gotDescription');this.peerConnection.setLocalDescription(description,function(){console.log('sendAnswer');if(this.wsConnection)
this.wsConnection.send('{"direction":"play", "command":"sendResponse", "streamInfo":'+JSON.stringify(this.streamInfo)+', "sdp":'+JSON.stringify(description)+'}');else
this.sendPost(this.wsURL,'{"direction":"play", "command":"sendResponse", "streamInfo":'+JSON.stringify(this.streamInfo)+', "sdp":'+JSON.stringify(description)+'}');}.bind(this),function(){console.log('set description error');});};WebRTCMng.prototype.gotRemoteTrack=function(event){try{this.remoteVideo.srcObject=event.streams[0];}
catch(error){this.remoteVideo.src=window.URL.createObjectURL(event.streams[0]);}};WebRTCMng.prototype.gotRemoteStream=function(event){console.log('gotRemoteStream: '+event.stream);try{this.remoteVideo.srcObject=event.stream;}
catch(error){this.remoteVideo.src=window.URL.createObjectURL(event.stream);}};WebRTCMng.prototype.startWs=function(appName,streamName){this.stopPlay();this.urlIndex=WEBRTC_INDEX;this.repeaterRetryCount=0;this.streamInfo.applicationName=appName;this.streamInfo.streamName=streamName;trace("startPlay: "+" streamInfo:"+JSON.stringify(this.streamInfo));this.wsConnect(game.GameSettings.CONFIG.webRTCUrls[this.urlIndex]);};WebRTCMng.prototype.start=function(appName,streamName){this.streamInfo.applicationName=appName;this.streamInfo.streamName=streamName;if(this.peerConnection){this.peerConnection.onicecandidate=null;this.peerConnection.onaddstream=null;this.peerConnection.ontrack=null;this.peerConnection=null;}
var RTCPeerConnection=window['RTCPeerConnection'];this.peerConnection=new RTCPeerConnection(this.peerConnectionConfig);var peerConnection=this.peerConnection;peerConnection.onicecandidate=this.gotIceCandidate.bind(this);peerConnection.onaddstream=this.gotRemoteStream.bind(this);peerConnection.ontrack=this.gotRemoteStream.bind(this);this.wsURL=game.GameSettings.CONFIG.webRTCHttp;this.sendPost(this.wsURL,'{"direction":"play", "command":"getOffer", "streamInfo":'+JSON.stringify(this.streamInfo)+'}');};WebRTCMng.prototype.stopPlay=function(){if(!this.wsConnection||!this.peerConnection)
return;try{this.peerConnection.close();this.wsConnection.close();}
catch(e){}
this.peerConnection=null;this.wsConnection=null;console.log("stopPlay");};WebRTCMng.prototype.errorHandler=function(error){trace(error);};return WebRTCMng;}());game.WebRTCMng=WebRTCMng;})(game||(game={}));var baccarat;(function(baccarat){var Game=(function(_super){__extends(Game,_super);function Game(){return _super.call(this)||this;}
Game.prototype.destructor=function(){_super.prototype.destructor.call(this);};Game.prototype.initialize=function(tableId,resources){this.resetGameResultDelay=1500;this.initGameId(tableId);_super.prototype.initialize.call(this,tableId,resources);var str="1 10001,2 10002,3 10003,4 10004,5 10005,6 10006,7 10007,8 10008,9 10009,10 10010,11 10011,12 10012";var arr=str.split(',');var betLimitIdMap={};for(var i=0;i<arr.length;i++){var arr2=arr[i].split(' ');betLimitIdMap[arr2[0]]=arr2[1];}
this.gameModel.betLimitIdMap=betLimitIdMap;return this;};Game.prototype.initGameId=function(tableId){this.gameModel.GAME_ID=game.GameID.BACCARAT;if(!game.GameUtils.checkCommision(tableId))
this.gameModel.GAME_ID=game.GameID.BACCARAT_NONCOMMISSION;if(game.GameUtils.checkSuper98(tableId))
this.gameModel.GAME_ID=game.GameID.BACCARAT_SUPER98;};Game.prototype.onBetCountDownComplete=function(){_super.prototype.onBetCountDownComplete.call(this);this.gameView.showStatus(game.GameText.WAIT_CARD_DEAL);};Game.prototype.onStopBet=function(){_super.prototype.onStopBet.call(this);this.gameView.gameResult.banker.visible=true;this.gameView.gameResult.player.visible=true;};Game.prototype.resetGameResult=function(){_super.prototype.resetGameResult.call(this);this.gameView.gameResult.banker.visible=false;this.gameView.gameResult.player.visible=false;};Game.prototype.startGame=function(){_super.prototype.startGame.call(this);};Game.prototype.initView=function(){this.gameView=new baccarat.GameView(this.gameModel);this.addChild(this.gameView);};Game.prototype.onAuthSuccess=function(){_super.prototype.onAuthSuccess.call(this);};Game.prototype.onWSOpenHdl=function(){_super.prototype.onWSOpenHdl.call(this);};Game.prototype.onWSCloseHdl=function(){_super.prototype.onWSCloseHdl.call(this);};Game.prototype.onGameEvent=function(e){_super.prototype.onGameEvent.call(this,e);};return Game;}(game.BaseGame));baccarat.Game=Game;})(baccarat||(baccarat={}));var baccarat;(function(baccarat){var BetArea=(function(_super){__extends(BetArea,_super);function BetArea(gameModel,input){var _this=_super.call(this,gameModel,input)||this;_this.bCount=0;_this.winRatio=new PIXI.Sprite();_this.winRatio.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;_this.winRatio.scale.y=_this.winRatio.scale.x;_this.addChildAt(_this.winRatio,_this.getChildIndex(_this.betAreaText)+1);var mode=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?"":game.GlobalVals.viewMode+'_';var winLang=LANG=='cs'?'_cs':'';_this.win98Ratio=new PIXI.Sprite(_this.gameModel.resources[mode+'bac_super98_win_ratio'+winLang].texture);_this.win98Ratio.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;_this.win98Ratio.scale.y=_this.winRatio.scale.x;_this.addChildAt(_this.win98Ratio,_this.getChildIndex(_this.betAreaText)+1);_this.winMasker=new PIXI.Graphics();_this.addChildAt(_this.winMasker,_this.getChildIndex(_this.betAreaText)+1);_this.winMasker.alpha=0;_this.win98Masker=new PIXI.Graphics();_this.addChildAt(_this.win98Masker,_this.getChildIndex(_this.betAreaText)+1);_this.win98Masker.alpha=0;_this.win98Ratio.visible=false;_this.super6Info=new PIXI.Graphics();_this.super6Info.beginFill(0xff0000,0);_this.super6Info.drawRect(0,0,14,11);_this.addChild(_this.super6Info);_this.super6Info.buttonMode=true;_this.super6InfoPanel=new baccarat.Super6InfoPopup(null);_this.gameModel.overlay.addChild(_this.super6InfoPanel);_this.super6InfoPanel.hide();if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(_this.super6Info,component.VMouseUtils.MOUSE_OVER,_this.onShowInfo,_this);else
component.VMouseUtils.on(_this.super6Info,component.VMouseUtils.MOUSE_UP,_this.onShowInfo,_this);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(_this.super6Info,component.VMouseUtils.MOUSE_OUT,_this.onHideInfo,_this);else
component.VMouseUtils.on(_this.super6Info,component.VMouseUtils.MOUSE_UP_OUTSIDE,_this.onHideInfo,_this);return _this;}
BetArea.prototype.destructor=function(){_super.prototype.destructor.call(this);clearInterval(this.blinkIntervalId);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.off(this.super6Info,component.VMouseUtils.MOUSE_OVER,this.onShowInfo,this);else
component.VMouseUtils.off(this.super6Info,component.VMouseUtils.MOUSE_UP,this.onShowInfo,this);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.off(this.super6Info,component.VMouseUtils.MOUSE_OUT,this.onHideInfo,this);else
component.VMouseUtils.off(this.super6Info,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.onHideInfo,this);};BetArea.prototype.onShowInfo=function(){this.super6InfoPanel.show();this.super6InfoPanel.x=this.super6Info.x+20;this.super6InfoPanel.y=this.super6Info.y+20;};BetArea.prototype.onHideInfo=function(){this.super6InfoPanel.hide();};BetArea.prototype.initSettings=function(){_super.prototype.initSettings.call(this);this.initLiveChipSettings();this.initBetSettings();};BetArea.prototype.initLiveChipSettings=function(){var settings={};settings['2']={totalPos:new PIXI.Point(400.6,473.05),arr:[new PIXI.Point(362.25,498.9),new PIXI.Point(376.75,494.4),new PIXI.Point(365,484.95),new PIXI.Point(380.15,482.2),new PIXI.Point(391.1,488.2)]};settings['1']={totalPos:new PIXI.Point(851.4,467.45),arr:[new PIXI.Point(904.75,494.7),new PIXI.Point(919.5,499.7),new PIXI.Point(915.5,486),new PIXI.Point(891.85,488.15),new PIXI.Point(901.85,482.5)]};settings['3']={totalPos:new PIXI.Point(702.55,471.2),arr:[new PIXI.Point(671.4,502.45),new PIXI.Point(687.4,505.95),new PIXI.Point(678.15,495.75),new PIXI.Point(692.5,494.5),new PIXI.Point(702.15,500.95)]};this.liveChip2DSetting=settings;};BetArea.prototype.initBetSettings=function(){var settings=[{id:6,x:121.6,y:458.4},{id:5,x:462.95,y:493.65},{id:12,x:560.6,y:535.95},{id:3,x:564.9,y:497.15},{id:4,x:718.95,y:493.65},{id:7,x:1041.85,y:458.4},{id:1,x:808.5,y:483},{id:8,x:925.7,y:470.6},{id:10,x:941.2,y:504.3},{id:9,x:225.75,y:470.6},{id:11,x:207.45,y:504.3},{id:2,x:323.3,y:483}];for(var i=0;i<settings.length;i++){settings[i].id="A"+settings[i].id;settings[i].url=settings[i].id+".png";}
this.bet2DSetting=settings;settings=[{id:6,x:79.45,y:559.15},{id:5,x:451.25,y:559.15},{id:12,x:554.25,y:591.3},{id:3,x:557.8,y:559.15},{id:4,x:722.75,y:559.15},{id:7,x:1071.15,y:559.15},{id:9,x:196.1,y:559.15},{id:11,x:181.1,y:588.65},{id:2,x:303.95,y:559.15},{id:1,x:819,y:559.15},{id:8,x:945.65,y:559.15},{id:10,x:958.25,y:588.65}];for(var i=0;i<settings.length;i++){settings[i].id="A"+settings[i].id;settings[i].url="3d_"+settings[i].id+".png";}
this.bet3DSetting=settings;};BetArea.prototype.initJson=function(){var url=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?"assets/baccarat/2d/bet_area.json":(game.GlobalVals.viewMode==game.ViewMode.MODE_3D?"assets/baccarat/3d/bet_area.json":"assets/baccarat/7s/bet_area.json");this.updateJson(url);};BetArea.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:(game.GlobalVals.viewMode==game.ViewMode.MODE_3D?this.liveChip3DSetting:this.liveChip7SSetting);_super.prototype.initLiveChip.call(this,vSetting);};BetArea.prototype.initBetCon=function(settings){if(settings===void 0){settings=null;}
var vSetting=settings?settings:game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:(game.GlobalVals.viewMode==game.ViewMode.MODE_3D?this.bet3DSetting:this.bet7SSetting);_super.prototype.initBetCon.call(this,vSetting);};BetArea.prototype.updateText=function(){var viewMode=game.GlobalVals.viewMode;var betAreaText=this.betAreaText;betAreaText.texture=this.gameModel.resources[(viewMode!=game.ViewMode.MODE_2D?viewMode+"_":"")+'bet_area_text_'+game.GameUtils.getStudioColorName(this.gameModel.STUDIO)].texture;betAreaText.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;betAreaText.scale.y=betAreaText.scale.x;switch(viewMode){case game.ViewMode.MODE_2D:betAreaText.x=115+4;betAreaText.y=393;this.winRatio.x=255;this.winRatio.y=497;this.super6Info.x=699;this.super6Info.y=538;break;case game.ViewMode.MODE_3D:betAreaText.x=78.6;betAreaText.y=557;this.winRatio.x=232;this.winRatio.y=577;this.super6Info.x=700;this.super6Info.y=592;break;}
this.win98Ratio.x=this.winRatio.x;this.win98Ratio.y=this.winRatio.y;};BetArea.prototype.changeView=function(){var viewMode=game.GlobalVals.viewMode;var url=viewMode==game.ViewMode.MODE_2D?"assets/baccarat/2d/bet_area.json":(viewMode==game.ViewMode.MODE_3D?"assets/baccarat/3d/bet_area.json":"assets/baccarat/7s/bet_area.json");this.updateJson(url);var vSetting=viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:(viewMode==game.ViewMode.MODE_3D?this.bet3DSetting:this.bet7SSetting);_super.prototype.updateBetConSettings.call(this,vSetting);vSetting=viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:(viewMode==game.ViewMode.MODE_3D?this.liveChip3DSetting:this.liveChip7SSetting);this.liveChipMng.updateView(vSetting);this.updateText();_super.prototype.changeView.call(this);};BetArea.prototype.reset=function(){_super.prototype.reset.call(this);this.isSuper98=false;this.win98Ratio.visible=false;this.winRatio.visible=true;this.winRatio.mask=null;if(this.gameModel.TABLE_ID==0)
return;clearInterval(this.blinkIntervalId);this.win98Ratio.alpha=1;this.blinkIntervalId=0;var winLang=LANG=='cs'?'_cs':'';var mode=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?"":game.GlobalVals.viewMode+'_';if(game.GameUtils.checkCommision(this.gameModel.TABLE_ID))
this.winRatio.texture=this.gameModel.resources[mode+'bac_commission_win_ratio'+winLang].texture;else
this.winRatio.texture=this.gameModel.resources[mode+'bac_noncommission_win_ratio'+winLang].texture;};BetArea.prototype.drawWinMask=function(masker,hit){var dis=10;masker.drawRect(hit.x+dis,hit.y+dis,hit.width-2*dis,hit.height-dis);};BetArea.prototype.updateWin98Ratio=function(data){var result=data.content.result;var cards=data.content.cards;this.win98Ratio.visible=true;this.winRatio.visible=true;this.winMasker.clear();this.win98Masker.clear();this.winMasker.beginFill(0xff0000,0.5);this.win98Masker.beginFill(0xff0000,0.5);var masker;if(result.charAt(game.BetType.BANKER-1)=='1'&&(result.charAt(game.BetType.BANKER_N8-1)=='1'||result.charAt(game.BetType.BANKER_N9-1)=='1'))
masker=this.win98Masker;else
masker=this.winMasker;this.drawWinMask(masker,this.betMap['A'+game.BetType.BANKER]);if(result.charAt(game.BetType.BANKER-1)=='1'&&result.charAt(game.BetType.BANKER_N8-1)=='1')
masker=this.win98Masker;else
masker=this.winMasker;this.drawWinMask(masker,this.betMap['A'+game.BetType.BANKER_N8]);if(result.charAt(game.BetType.BANKER-1)=='1'&&result.charAt(game.BetType.BANKER_N9-1)=='1')
masker=this.win98Masker;else
masker=this.winMasker;this.drawWinMask(masker,this.betMap['A'+game.BetType.BANKER_N9]);if(result.charAt(game.BetType.PLAYER-1)=='1'&&(result.charAt(game.BetType.PLAYER_N8-1)=='1'||result.charAt(game.BetType.PLAYER_N9-1)=='1'))
masker=this.win98Masker;else
masker=this.winMasker;this.drawWinMask(masker,this.betMap['A'+game.BetType.PLAYER]);if(result.charAt(game.BetType.PLAYER-1)=='1'&&result.charAt(game.BetType.PLAYER_N8-1)=='1')
masker=this.win98Masker;else
masker=this.winMasker;this.drawWinMask(masker,this.betMap['A'+game.BetType.PLAYER_N8]);if(result.charAt(game.BetType.PLAYER-1)=='1'&&result.charAt(game.BetType.PLAYER_N9-1)=='1')
masker=this.win98Masker;else
masker=this.winMasker;this.drawWinMask(masker,this.betMap['A'+game.BetType.PLAYER_N9]);var num=this.gameModel.gameView.gameResult['getCardVal'](cards.split("#")[1]);if(result.charAt(game.BetType.TIE-1)=='1'&&(num==8||num==9))
masker=this.win98Masker;else
masker=this.winMasker;this.drawWinMask(masker,this.betMap['A'+game.BetType.TIE]);if(result.charAt(game.BetType.BANKER_PAIR-1)=='1')
masker=this.win98Masker;else
masker=this.winMasker;this.drawWinMask(masker,this.betMap['A'+game.BetType.BANKER_PAIR]);if(result.charAt(game.BetType.PLAYER_PAIR-1)=='1')
masker=this.win98Masker;else
masker=this.winMasker;this.drawWinMask(masker,this.betMap['A'+game.BetType.PLAYER_PAIR]);this.drawWinMask(this.winMasker,this.betMap['A'+game.BetType.BIG]);this.drawWinMask(this.winMasker,this.betMap['A'+game.BetType.SMALL]);this.winMasker.endFill();this.win98Masker.endFill();this.winRatio.mask=this.winMasker;this.win98Ratio.mask=this.win98Masker;};BetArea.prototype.showResult=function(data){_super.prototype.showResult.call(this,data);if(this.isSuper98)
this.updateWin98Ratio(data);var winLang=LANG=='cs'?'_cs':'';var mode=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?"":game.GlobalVals.viewMode+'_';if(game.GameUtils.checkCommision(this.gameModel.TABLE_ID))
this.winRatio.texture=this.gameModel.resources[mode+'bac_commission_win_ratio'+winLang].texture;else
this.winRatio.texture=this.gameModel.resources[mode+'bac_noncommission_win_ratio'+winLang].texture;if(!game.GameUtils.checkCommision(this.gameModel.TABLE_ID)&&data.content.result.charAt(game.BetType.BANKER-1)=='1'&&this.gameModel.gameView.gameResult.getCardVal(data.content.cards.split("#")[1])==6){this.winRatio.texture=this.gameModel.resources[mode+'bac_banker_win_on_six'+winLang].texture;}};BetArea.prototype.showSuper98=function(){this.isSuper98=true;this.winRatio.visible=false;this.win98Ratio.visible=true;this.win98Ratio.mask=null;this.blinkRatio();};BetArea.prototype.onTableLimit=function(){_super.prototype.onTableLimit.call(this);var mode=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?"":game.GlobalVals.viewMode+'_';var winLang=LANG=='cs'?'_cs':'';if(game.GameUtils.checkCommision(this.gameModel.TABLE_ID))
this.winRatio.texture=this.gameModel.resources[mode+'bac_commission_win_ratio'+winLang].texture;else
this.winRatio.texture=this.gameModel.resources[mode+'bac_noncommission_win_ratio'+winLang].texture;};BetArea.prototype.blinkRatio=function(){clearInterval(this.blinkIntervalId);this.bCount=2*10;this.blinkIntervalId=setInterval(this.blinked.bind(this),300);};BetArea.prototype.blinked=function(){if(this.bCount%2==0)
this.win98Ratio.alpha=1;else
this.win98Ratio.alpha=0.5;this.bCount--;if(this.bCount==0){clearInterval(this.blinkIntervalId);this.blinkIntervalId=0;this.win98Ratio.alpha=1;}};BetArea.prototype.checkRestrict=function(betType){if('A6A7'.indexOf('A'+betType)>=0){if(this.gameModel.game.getLastRound()>game.GameSettings.BIG_SMALL_MAX_ROUND){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.BIG_SMALL_MAX_ROUND_ALERT.replace('{0}',game.GameSettings.BIG_SMALL_MAX_ROUND.toString()));return true;}}
if('A4A5'.indexOf('A'+betType)>=0){if(this.gameModel.game.getLastRound()>game.GameSettings.PAIR_MAX_ROUND){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.PAIR_MAX_ROUND_ALERT.replace('{0}',game.GameSettings.PAIR_MAX_ROUND.toString()));return true;}}
return false;};BetArea.prototype.onBetClick=function(hit){if(this.checkRestrict(hit.betType))
return;_super.prototype.onBetClick.call(this,hit);};BetArea.prototype.rebet=function(){for(var i=0;i<this.savedBets.length;i++){var info=this.savedBets[i];if(this.checkRestrict(info.betType))
return;}
_super.prototype.rebet.call(this);};return BetArea;}(game.BaseBetArea));baccarat.BetArea=BetArea;})(baccarat||(baccarat={}));var baccarat;(function(baccarat){var CardControl=(function(_super){__extends(CardControl,_super);function CardControl(gameModel){return _super.call(this,gameModel)||this;}
CardControl.prototype.initialize=function(){this.cardConfigs=[];var c0=new game.CardConfig();c0.x=510.2;c0.y=384.05;c0.vertices=[-0.2,0,71.4,0,67.2,76.8,-12.2,76.8];this.cardConfigs[0]=c0;var c1=new game.CardConfig();c1.x=694;c1.y=384.2;c1.vertices=[-0.2,0,71.4,0,83.1,76.8,3.95,76.8];this.cardConfigs[1]=c1;var c2=new game.CardConfig();c2.x=434.55;c2.y=384.05;c2.vertices=[0,0,71.4,0,59.7,76.8,-18,76.8];this.cardConfigs[2]=c2;var c3=new game.CardConfig();c3.x=768.7;c3.y=384.05;c3.vertices=[0,0,71.4,0,91.7,76.8,11.6,76.8];this.cardConfigs[3]=c3;var c4=new game.CardConfig();c4.x=324.6;c4.y=385.55;c4.vertices=[-0.2,0,104,0,91.6,50.95,-18.6,50.95];this.cardConfigs[4]=c4;var c5=new game.CardConfig();c5.x=846.35;c5.y=385.55;c5.vertices=[-0.2,0,108.2,0,127.8,51.95,12.2,51.95];this.cardConfigs[5]=c5;c0.uvs=[0,0,1,0,1,1,0,1];c1.uvs=c0.uvs.slice();c2.uvs=c0.uvs.slice();c3.uvs=c0.uvs.slice();c4.uvs=[1,0,1,1,0,1,0,0];c5.uvs=c4.uvs.slice();for(var i=0;i<this.cardConfigs.length;i++){this.cardConfigs[i].vertices=new Float32Array(this.cardConfigs[i].vertices);this.cardConfigs[i].uvs=new Float32Array(this.cardConfigs[i].uvs);}
this.cards=[null,null,null,null,null,null];};CardControl.prototype.dealCard=function(cardId,cardPos,animated,isDealCardBack){if(animated===void 0){animated=true;}
if(isDealCardBack===void 0){isDealCardBack=false;}
_super.prototype.dealCard.call(this,cardId,cardPos,animated,isDealCardBack);this.updateCardVals();};CardControl.prototype.clearCard=function(carPos){_super.prototype.clearCard.call(this,carPos);this.updateCardVals();};CardControl.prototype.clearAllCards=function(){_super.prototype.clearAllCards.call(this);this.updateCardVals();};CardControl.prototype.updateCardVals=function(){var gameResult=this.gameModel.gameView.gameResult;var bcards="";var pcards="";for(var i=0;i<this.cards.length;i++){if(!this.cards[i])
continue;if(i%2==0)
pcards+=this.cards[i]['cardId'];else
bcards+=this.cards[i]['cardId'];}
gameResult.setPlayerCard(gameResult.getCardVal(pcards));gameResult.setBankerCard(gameResult.getCardVal(bcards));};return CardControl;}(game.BaseCardControl));baccarat.CardControl=CardControl;})(baccarat||(baccarat={}));var baccarat;(function(baccarat){var ChipControl=(function(_super){__extends(ChipControl,_super);function ChipControl(gameModel){return _super.call(this,gameModel)||this;}
ChipControl.prototype.initChipPos=function(){this.updateChipPos(null);};ChipControl.prototype.initChips=function(schips,shownRange){_super.prototype.initChips.call(this,schips,shownRange);this.updateLeftRight();};ChipControl.prototype.updateLeftRight=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y-7;this.rightArrow.rotation=-10*Math.PI/180;break;case game.ViewMode.MODE_3D:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y;this.rightArrow.rotation=0;break;}};ChipControl.prototype.updateChipPos=function(chipsPos){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.chipsPos=[new PIXI.Point(-52.35,1.85),new PIXI.Point(0.05,0.65),new PIXI.Point(51.05,-1.55),new PIXI.Point(102.15,-5.2),new PIXI.Point(154.85,-10.95),new PIXI.Point(207.4,-19.4),new PIXI.Point(257.55,-28.45),new PIXI.Point(305.95,-38.85)];break;case game.ViewMode.MODE_3D:this.chipsPos=[new PIXI.Point(-52.25,0.55),new PIXI.Point(-0.6,0.55),new PIXI.Point(51.05,0.55),new PIXI.Point(102.7,0.55),new PIXI.Point(154.35,0.55),new PIXI.Point(206,0.55),new PIXI.Point(257.65,0.55),new PIXI.Point(309.3,0.55)];break;}
_super.prototype.updateChipPos.call(this,this.chipsPos);};ChipControl.prototype.changeView=function(){this.updateChipPos(null);this.updateLeftRight();this.drawMasker();_super.prototype.changeView.call(this);};return ChipControl;}(game.BaseChipControl));baccarat.ChipControl=ChipControl;})(baccarat||(baccarat={}));var baccarat;(function(baccarat){var GameHUD=(function(_super){__extends(GameHUD,_super);function GameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameHUD.prototype.initView=function(){_super.prototype.initView.call(this);this.settingCon=new game.SettingContainer(this.gameModel);this.settingCon.x=0;this.settingCon.y=581;this.addChild(this.settingCon);this.gameInfoCon=new baccarat.GameInfoCon(this.gameModel);this.addChild(this.gameInfoCon);};GameHUD.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.settingCon.x=0;this.settingCon.y=580;this.gameInfoCon.expand();this.gameInfoCon.resizeBtn.visible=false;break;case game.ViewMode.MODE_3D:this.settingCon.x=0;this.settingCon.y=632;this.gameInfoCon.collapse();this.gameInfoCon.resizeBtn.visible=true;break;}};GameHUD.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameHUD;}(game.BaseGameHUD));baccarat.GameHUD=GameHUD;})(baccarat||(baccarat={}));var baccarat;(function(baccarat){var GameInfoCon=(function(_super){__extends(GameInfoCon,_super);function GameInfoCon(gameModel){return _super.call(this,gameModel)||this;}
return GameInfoCon;}(game.BaseGameInfoCon));baccarat.GameInfoCon=GameInfoCon;})(baccarat||(baccarat={}));var baccarat;(function(baccarat){var GameResult=(function(_super){__extends(GameResult,_super);function GameResult(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameResult.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.bankerCardVal.x=920;this.bankerCardVal.y=324;this.playerCardVal.x=306;this.playerCardVal.y=324;this.result1Tf.y=360;this.result2Tf.y=380+30;break;case game.ViewMode.MODE_3D:this.removeChild(this.banker);this.removeChild(this.player);this.bankerCardVal.x=920+50;this.bankerCardVal.y=450;this.playerCardVal.x=306-50;this.playerCardVal.y=450;this.result1Tf.y=360+100;this.result2Tf.y=380+30+100;break;}};GameResult.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameResult;}(game.BaseGameResult));baccarat.GameResult=GameResult;})(baccarat||(baccarat={}));var baccarat;(function(baccarat){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.destructor=function(){if(!component.VComponentUtils.isMobile)
component.VMouseUtils.off(this.infoIcon,component.VMouseUtils.MOUSE_OVER,this.onShowInfo,this);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.off(this.infoIcon,component.VMouseUtils.MOUSE_UP,this.onShowInfo,this);else
component.VMouseUtils.off(this.infoIcon,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.onHideInfo,this);_super.prototype.destructor.call(this);};GameView.prototype.onShowInfo=function(){this.super98Panel.show();this.super98Panel.x=this.infoIcon.x-this.super98Panel.viewW*0.5;this.super98Panel.y=this.infoIcon.y-this.super98Panel.viewH-12;};GameView.prototype.onHideInfo=function(){this.super98Panel.hide();};GameView.prototype.initialize=function(){_super.prototype.initialize.call(this);var bonusBg=new PIXI.extras.MovieClip([this.gameModel.resources['table_bonus98_1'].texture,this.gameModel.resources['table_bonus98_2'].texture]);this.bonusBg=bonusBg;bonusBg.x=92;bonusBg.y=379;this.addChild(this.bonusBg);this.noCommission=new PIXI.Container();this.addChild(this.noCommission);var gp=new PIXI.Graphics();gp.lineStyle(0,0,0);gp.beginFill(0x000000,0.2);gp.drawRoundedRect(0,0,186,44,8);gp.endFill();this.noCommission.addChild(gp);var tf1=component.VComponentUtils.createText(game.GameText.NO_COMMISSION,{fontFamily:"Arial",fontSize:16,fill:0xffffff});tf1.anchor.x=0.5;tf1.x=gp.width*0.5;tf1.y=5;this.noCommission.addChild(tf1);var tf2=component.VComponentUtils.createText(game.GameText.BANKER_WIN_ON_6_PAY,{fontFamily:"Arial",fontSize:12,fill:0xffffff});if(tf2.width>gp.width){tf2.scale.x=tf2['orgScaleX']*(gp.width/tf2.width);tf2.scale.y=tf2.scale.x;}
tf2.anchor.x=0.5;tf2.x=gp.width*0.5;tf2.y=26;this.noCommission.addChild(tf2);this.noCommission.x=60;this.noCommission.y=325;this.initTrends();this.chipControl=new baccarat.ChipControl(this.gameModel);this.chipControl.x=907;this.chipControl.y=591;this.chipControl.dissable();this.gameModel.chipControl=this.chipControl;this.betArea=new baccarat.BetArea(this.gameModel,this.betInput);this.betArea.dissable();this.addChild(this.betArea);this.betControl=new game.BetControl(this.gameModel);this.betControl.x=477;this.betControl.y=580;this.betControl.hide();this.cardControl=new baccarat.CardControl(this.gameModel);this.addChild(this.cardControl);this.addChild(this.betControl);this.addChild(this.chipControl);this.diceAnim=new game.DiceAnim(this.gameModel);this.addChild(this.diceAnim);var arr=[];for(var i=1;i<=7;i++)
arr.push('color_dice0'+i+'');for(var i=1;i<=12;i++)
arr.push('color_dice'+i+'0');this.diceAnim.initialize(arr,7);this.diceAnim.pivot.x=192;this.diceAnim.pivot.y=650;this.diceAnim.x=138+25;this.diceAnim.y=392+10;this.diceAnim.scale.x=0.5;this.diceAnim.scale.y=0.5;this.diceAnim.visible=false;_super.prototype.initCountDown.call(this);this.countdown.x=640;this.countdown.y=383;this.gameResult=(new baccarat.GameResult(this.gameModel));this.addChild(this.gameResult);this.gameHUD=new baccarat.GameHUD(this.gameModel);this.addChild(this.gameHUD);this.bonusBg.visible=false;this.noCommission.visible=false;this.super98Panel=new baccarat.Super98InfoPopup(null);this.gameModel.overlay.addChild(this.super98Panel);this.super98Panel.hide();var infoIcon=new component.VButton([PIXI.Texture.fromFrame('left_info_icon.png'),PIXI.Texture.fromFrame('left_info_icon.png')]);infoIcon.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;infoIcon.scale.y=infoIcon.scale.x;infoIcon.rotation=7*Math.PI/180;infoIcon.buttonMode=true;this.addChild(infoIcon);this.infoIcon=infoIcon;this.infoIcon.visible=false;if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(infoIcon,component.VMouseUtils.MOUSE_OVER,this.onShowInfo,this);else
component.VMouseUtils.on(infoIcon,component.VMouseUtils.MOUSE_UP,this.onShowInfo,this);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(infoIcon,component.VMouseUtils.MOUSE_OUT,this.onHideInfo,this);else
component.VMouseUtils.on(this.infoIcon,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.onHideInfo,this);this.updateView();};GameView.prototype.activeSuperHand=function(isSupper){this.bonusBg.gotoAndStop(isSupper?1:0);if(isSupper){this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,true,"sfx_super98");this.betArea['showSuper98']();}};GameView.prototype.updateVodView=function(){if(!this.vodInited)
return;var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.gameModel.VOD_WIDTH=511;this.gameModel.VOD_HEIGHT=311;this.gameModel.VOD_X=386;this.gameModel.VOD_Y=3;this.processVodLoadMediaData();break;case game.ViewMode.MODE_3D:this.gameModel.VOD_X=0;this.gameModel.VOD_Y=-140;this.gameModel.VOD_WIDTH=this.gameModel.GAME_WIDTH-2*this.gameModel.VOD_X;this.gameModel.VOD_HEIGHT=this.gameModel.GAME_HEIGHT;this.processVodLoadMediaData();break;}
this.sizeHandler();};GameView.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;this.updateVodView();switch(viewMode){case game.ViewMode.MODE_2D:this.chipControl.x=907;this.chipControl.y=591;this.betControl.x=477;this.betControl.y=580;this.bonusBg.x=92;this.bonusBg.y=379;this.bonusBg.textures=[this.gameModel.resources['table_bonus98_1'].texture,this.gameModel.resources['table_bonus98_2'].texture];this.bonusBg.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;this.bonusBg.scale.y=this.bonusBg.scale.x;this.diceAnim.x=138+25;this.diceAnim.y=392+10;this.bonusBg.gotoAndStop(this.bonusBg.currentFrame);this.noCommission.x=60;this.noCommission.y=325;this.cardControl.visible=true;this.bg.y=0;if(this.gameModel.TABLE_ID)
this.bg.texture=this.gameModel.resources['table_bg_'+game.GameUtils.getColor(this.gameModel.TABLE_ID)].texture;this.betArea.collectWinPos.x=138;this.betArea.collectWinPos.y=572;this.betInput.x=497+6;this.betInput.y=583;this.infoIcon.x=196;this.infoIcon.y=401;break;case game.ViewMode.MODE_3D:this.chipControl.x=915.15;this.chipControl.y=641;this.betControl.x=482.05;this.betControl.y=633;this.bonusBg.x=80;this.bonusBg.y=500;this.diceAnim.x=125;this.diceAnim.y=496;this.bonusBg.textures=[this.gameModel.resources['3d_table_bonus98_1'].texture,this.gameModel.resources['3d_table_bonus98_2'].texture];this.bonusBg.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;this.bonusBg.scale.y=this.bonusBg.scale.x;this.bonusBg.gotoAndStop(this.bonusBg.currentFrame);this.noCommission.x=1027.25;this.noCommission.y=508;this.cardControl.visible=false;if(this.gameModel.TABLE_ID)
this.bg.texture=this.gameModel.resources['baccarat3d_table_background_'+game.GameUtils.getColor(this.gameModel.TABLE_ID)].texture;this.bg.y=555;this.betArea.collectWinPos.x=127.1;this.betArea.collectWinPos.y=619;this.betInput.x=508;this.betInput.y=636;this.infoIcon.x=180;this.infoIcon.y=514;break;}};GameView.prototype.changeView=function(){this.updateView();this.gameResult.changeView();_super.prototype.changeView.call(this);};GameView.prototype.onTableLimit=function(){_super.prototype.onTableLimit.call(this);if(!game.GameUtils.checkSuper98(this.gameModel.TABLE_ID)){this.removeChild(this.bonusBg);this.infoIcon.visible=false;}
else{this.bonusBg.visible=true;this.infoIcon.visible=true;}
if(game.GameUtils.checkCommision(this.gameModel.TABLE_ID)){this.removeChild(this.noCommission);}
else{this.noCommission.visible=true;}};return GameView;}(game.BaseGameViewGroup1));baccarat.GameView=GameView;})(baccarat||(baccarat={}));var baccarat;(function(baccarat){var Super6InfoPopup=(function(_super){__extends(Super6InfoPopup,_super);function Super6InfoPopup(main){var _this=_super.call(this,main,220,122)||this;_this.closeBtn.visible=false;_this.titleTf.text=game.GameText.SUPER_6_PLUS;_this.hasUnderlay=false;var table=new component.VTable(219,35,2,["",""],[2.8/4,1.2/4],"center",{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12},{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12,wordWrap:true},0x25221D,0x25221D,0x25221D);table.titleCon.visible=false;_this.addChild(table);table.setData(0,[game.GameText.SUPER_6_INFO_2_CARDS,LANG=='cs'?"112":"12:1"]);table.setData(1,[game.GameText.SUPER_6_INFO_3_CARDS,LANG=='cs'?"118":"18:1"]);return _this;}
return Super6InfoPopup;}(game.BasePopup));baccarat.Super6InfoPopup=Super6InfoPopup;})(baccarat||(baccarat={}));var baccarat;(function(baccarat){var Super98InfoPopup=(function(_super){__extends(Super98InfoPopup,_super);function Super98InfoPopup(main){var _this=_super.call(this,main,308,280)||this;_this.closeBtn.visible=false;_this.titleTf.text=game.GameText.SUPER_98;_this.hasUnderlay=false;var table=new component.VTable(308-1,22,9,["",""],[3/4,1/4],"center",{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12},{fontFamily:"Arial",fontSize:12,fill:0xF0E4D8,wordWrap:true});table.titleCon.visible=false;table.y=10;_this.addChild(table);table.setData(0,[game.GameText.PLAYER_NATURAL_8_9,LANG=='cs'?"11.05":"1.05:1"]);table.setData(1,[game.GameText.BANKER_NATURAL_8_9,LANG=='cs'?"11.05":"1.05:1"]);table.setData(2,[game.GameText.TIE_ON_NATUAL_8_9,LANG=='cs'?"19":"9:1"]);table.setData(3,[game.GameText.PLAYER_PAIR,LANG=='cs'?"112":"12:1"]);table.setData(4,[game.GameText.BANKER_PAIR,LANG=='cs'?"112":"12:1"]);table.setData(5,[game.GameText.PLAYER_NATURAL.replace('{0}','8'),LANG=='cs'?"19":"9:1"]);table.setData(6,[game.GameText.PLAYER_NATURAL.replace('{0}','9'),LANG=='cs'?"19":"9:1"]);table.setData(7,[game.GameText.BANKER_NATURAL.replace('{0}','8'),LANG=='cs'?"19":"9:1"]);table.setData(8,[game.GameText.BANKER_NATURAL.replace('{0}','9'),LANG=='cs'?"19":"9:1"]);var tf=game.GameUtils.createNormalText('');_this.addChild(tf);tf.scale.x=tf["orgScaleX"];tf.scale.y=tf.scale.x;tf.text=game.GameText.SUPER_HAND_PAYOUT.replace('(','\n(');if(tf.width>_this.viewW){tf.scale.x=tf["orgScaleX"]*(_this.viewW/tf.width);tf.scale.y=tf.scale.x;}
tf.anchor.x=0.5;tf.x=_this.bg.width*0.5;tf.y=_this.bg.height-7-tf.height;return _this;}
return Super98InfoPopup;}(game.BasePopup));baccarat.Super98InfoPopup=Super98InfoPopup;})(baccarat||(baccarat={}));var baccarat;(function(baccarat){var TrendMng=(function(_super){__extends(TrendMng,_super);function TrendMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
TrendMng.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:var maxView=new PIXI.Rectangle(366,622,859,140);this.normalTrend.setSmallView(new PIXI.Rectangle(maxView.x,maxView.y,765,92));this.normalTrend.setMaxView(maxView);this.bigEyeTrend.setSmallView(new PIXI.Rectangle(maxView.x,716,285,46));this.bigEyeTrend.setMaxView(maxView);this.smallTrend.setSmallView(new PIXI.Rectangle(653,this.bigEyeTrend.y,285,46));this.smallTrend.setMaxView(maxView);this.cockRoachTrend.setSmallView(new PIXI.Rectangle(940,this.bigEyeTrend.y,285,46));this.cockRoachTrend.setMaxView(maxView);this.pearlRoadTrend.setSmallView(new PIXI.Rectangle(25,maxView.y,300,92));this.pearlRoadTrend.setMaxView(maxView);this.pearViewBtn.x=4;this.pearViewBtn.y=623;this.iconCount.x=25+8;this.iconCount.y=735+8;this.predict.x=1133;this.predict.y=maxView.y;this.predict.banker.x=0;this.predict.banker.y=0;this.predict.player.x=0;this.predict.player.y=47;this.bg.clear();this.bg.lineStyle(1,0x26231E);this.bg.beginFill(0x26231E);this.bg.drawRect(0,0,this.gameModel.GAME_WIDTH,151);this.bg.endFill();this.bg.y=617;this.tableBtnCon.x=328;this.tableBtnCon.y=622;this.iconCount.scale.x=1;this.iconCount.scale.y=this.iconCount.scale.x;break;case game.ViewMode.MODE_3D:maxView=new PIXI.Rectangle(275.95,672.65,949,92);this.normalTrend.setSmallView(new PIXI.Rectangle(maxView.x,maxView.y,495,maxView.height));this.normalTrend.setMaxView(maxView);this.bigEyeTrend.setSmallView(new PIXI.Rectangle(774,maxView.y,224,45));this.bigEyeTrend.setMaxView(maxView);this.smallTrend.setSmallView(new PIXI.Rectangle(this.bigEyeTrend.x,720,224,45));this.smallTrend.setMaxView(maxView);this.cockRoachTrend.setSmallView(new PIXI.Rectangle(1001,maxView.y,224,45));this.cockRoachTrend.setMaxView(maxView);this.pearlRoadTrend.setSmallView(new PIXI.Rectangle(26,maxView.y,209,61));this.pearlRoadTrend.setMaxView(maxView);this.pearViewBtn.x=5;this.pearViewBtn.y=675;this.changeColorBtn.x=5;this.changeColorBtn.y=746;this.iconCount.x=36;this.iconCount.y=744;this.predict.x=1001;this.predict.y=720;this.predict.banker.x=0;this.predict.banker.y=0;this.predict.player.x=115;this.predict.player.y=0;this.predict.resizeBtns(109,45);this.bg.clear();this.bg.lineStyle(1,0x26231E);this.bg.beginFill(0x26231E);this.bg.drawRect(0,0,this.gameModel.GAME_WIDTH,96);this.bg.endFill();this.bg.y=671;this.bg.lineStyle(1,0x777777);this.bg.moveTo(246.3,5);this.bg.lineTo(246.3,5+86);this.tableBtnCon.x=254.8;this.tableBtnCon.y=673;this.iconCount.scale.x=0.95;this.iconCount.scale.y=this.iconCount.scale.x;break;}};TrendMng.prototype.getBigBoardName=function(){return game.GameSettings.TABLE_INFOS[this.activeTableId].hint.toUpperCase();};TrendMng.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};TrendMng.prototype.onTableBtn=function(e){};TrendMng.prototype.superOnTableBtn=function(e){_super.prototype.onTableBtn.call(this,e);};return TrendMng;}(game.BaseTrendMng));baccarat.TrendMng=TrendMng;})(baccarat||(baccarat={}));var baccarat_7s;(function(baccarat_7s){var Game=(function(_super){__extends(Game,_super);function Game(){return _super.call(this)||this;}
Game.prototype.initialize=function(tableId,resources){_super.prototype.initialize.call(this,tableId,resources);return this;};Game.prototype.startGame=function(){_super.prototype.startGame.call(this);};Game.prototype.initView=function(){this.gameView=new baccarat_7s.GameView(this.gameModel);this.addChild(this.gameView);};Game.prototype.onGameEvent=function(e){_super.prototype.onGameEvent.call(this,e);};return Game;}(baccarat.Game));baccarat_7s.Game=Game;})(baccarat_7s||(baccarat_7s={}));var baccarat_7s;(function(baccarat_7s){var Bac7sDetailCon=(function(_super){__extends(Bac7sDetailCon,_super);function Bac7sDetailCon(gameModel){return _super.call(this,gameModel)||this;}
Bac7sDetailCon.prototype.destructor=function(){this.tabMng.removeEventListener(component.VTabMng.CHANGE,this.onChange,this);_super.prototype.destructor.call(this);};Bac7sDetailCon.prototype.initView=function(){this.viewW=379;this.viewH=157;this.contentY=27;var w=this.viewW;var h=this.viewH;var contentY=this.contentY;var limitBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('limit_icon0001.png'),PIXI.Texture.fromFrame('limit_icon0002.png')]);var livePoolBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('livepool_icon0001.png'),PIXI.Texture.fromFrame('livepool_icon0002.png')]);var bonusBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('bonus98_icon0001.png'),PIXI.Texture.fromFrame('bonus98_icon0002.png')]);var trendBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('trend_icon0001.png'),PIXI.Texture.fromFrame('trend_icon0002.png')]);this.bonusBtn=bonusBtn;game.GameUtils.resizeNodeH(limitBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(livePoolBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(bonusBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(trendBtn,game.StyleMng.INFO_TAB_BTN_SIZE);this.gameModel.toolTip.addToolTip(limitBtn,game.GameText.LIMITS);this.gameModel.toolTip.addToolTip(livePoolBtn,game.GameText.LIVE_POOL);this.gameModel.toolTip.addToolTip(bonusBtn,game.GameText.SUPER_98_HIS);this.gameModel.toolTip.addToolTip(trendBtn,game.GameText.TREND_CHANGE_TABLE_TOOLTIP.replace('{0} ','').replace('{0}',''));this.trendBtn=trendBtn;var btns=[limitBtn,livePoolBtn,bonusBtn,trendBtn];if(game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].gameId!=game.GameID.BACCARAT_SUPER98)
btns.splice(2,1);this.btns=btns;for(var i=0;i<btns.length;i++){this.addChild(btns[i]);btns[i].buttonMode=true;btns[i].gotoAndStop(1);btns[i].x=(btns[i].width+1)*i;}
this.limitDetail=new game.LimitDetail(this.gameModel,w,h);this.livePoolDetail=new game.LivePoolDetail(this.gameModel,w,h);this.bonusUpsDetail=new game.BonusUpsDetail(this.gameModel,w,h);this.trendDetail=new baccarat_7s.TrendDetail(this.gameModel,w,h);var contents=[this.limitDetail,this.livePoolDetail,this.bonusUpsDetail,this.trendDetail];if(game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].gameId!=game.GameID.BACCARAT_SUPER98)
contents.splice(2,1);for(var i=0;i<contents.length;i++){this.addChild(contents[i]);contents[i].y=contentY;}
this.trendDetail.y=-90;var tabMng=new component.VTabMng();tabMng.initialize(btns,contents);tabMng.addEventListener(component.VTabMng.CHANGE,this.onChange,this);this.tabMng=tabMng;var expandBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_expand0001.png'),PIXI.Texture.fromFrame('info_pane_expand0002.png')],this.onExpand.bind(this));expandBtn.x=this.viewW-expandBtn.width;var conllapseBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_collapse0001.png'),PIXI.Texture.fromFrame('info_pane_collapse0002.png')],this.onCollapse.bind(this));conllapseBtn.x=this.viewW-conllapseBtn.width;var resizeBtn=new component.VToggleButton(expandBtn,conllapseBtn);this.addChild(resizeBtn);resizeBtn.y=this.contentY+this.viewH-resizeBtn.height;this.resizeBtn=resizeBtn;};Bac7sDetailCon.prototype.onChange=function(e){this.resizeBtn.visible=e.data!=this.trendBtn;};return Bac7sDetailCon;}(game.GameDetailCon));baccarat_7s.Bac7sDetailCon=Bac7sDetailCon;})(baccarat_7s||(baccarat_7s={}));var baccarat_7s;(function(baccarat_7s){var Bac7sSettingContainer=(function(_super){__extends(Bac7sSettingContainer,_super);function Bac7sSettingContainer(gameModel){var _this=_super.call(this,gameModel)||this;_this.btn7s.visible=false;_this.roomCon=new game.SelectRoomCon(_this.gameModel);_this.roomCon.x=_this.btn7s.x;_this.addChild(_this.roomCon);_this.roomCon.initialize(7);return _this;}
Bac7sSettingContainer.prototype.destructor=function(){_super.prototype.destructor.call(this);};return Bac7sSettingContainer;}(game.SettingContainer));baccarat_7s.Bac7sSettingContainer=Bac7sSettingContainer;})(baccarat_7s||(baccarat_7s={}));var baccarat_7s;(function(baccarat_7s){var BetArea=(function(_super){__extends(BetArea,_super);function BetArea(gameModel,input){return _super.call(this,gameModel,input)||this;}
BetArea.prototype.initSettings=function(){this.initBetSettings();};BetArea.prototype.initLiveChipSettings=function(){var settings={};};BetArea.prototype.initBetSettings=function(){var settings=[{id:"6",x:180.35,y:429.3},{id:"11",x:316.95,y:451.85},{id:"9",x:476.6,y:467.6},{id:"8",x:642.75,y:467.6},{id:"10",x:797.15,y:451.85},{id:"7",x:956.7,y:429.3},{id:"5",x:144.85,y:465.6,arr:[{x:373.35,y:532.25},{x:338.15,y:528.25},{x:305.75,y:524.25},{x:270.95,y:519.45},{x:234.95,y:515.05},{x:201.35,y:508.25},{x:166.8,y:500.2}]},{id:"3",x:393.15,y:500.95,arr:[{x:620,y:545.9},{x:584.8,y:545.8},{x:552.4,y:545.05},{x:517.6,y:544.15},{x:481.6,y:541.7},{x:448,y:539.45},{x:413.45,y:535.95}]},{id:"4",x:880.1,y:465.6,arr:[{x:1114.1,y:500.05},{x:1080.2,y:507.1},{x:1047.8,y:512.85},{x:1014.3,y:518.45},{x:977.65,y:524.45},{x:944.7,y:528.7},{x:910.15,y:532.35}]},{id:"1_1",x:1000.45,y:513.65},{id:"1_2",x:856.8,y:537.65},{id:"1_3",x:712.3,y:554.45},{id:"1_5",x:562.6,y:562.75},{id:"1_6",x:408,y:554.3},{id:"1_7",x:254.15,y:537.4},{id:"1_8",x:102.25,y:513.65},{id:"2_1",x:1026.25,y:561.15},{id:"2_2",x:872,y:587.95},{id:"2_3",x:717.4,y:605.95},{id:"2_5",x:557.35,y:614.8},{id:"2_6",x:392.55,y:605.8},{id:"2_7",x:228.4,y:587.65},{id:"2_8",x:70.2,y:560.8},{id:"12",x:642.85,y:500.95,arr:[{x:868.55,y:535.95},{x:833.35,y:539.1},{x:799.65,y:542.25},{x:766.15,y:543.3},{x:730.15,y:545.4},{x:696.55,y:545.75},{x:662,y:547.45}]}];for(var i=0;i<settings.length;i++){settings[i].id="A"+settings[i].id;settings[i].url="7s_"+settings[i].id+".png";}
this.bet2DSetting=settings;};BetArea.prototype.drawWinMask=function(masker,hit){var dis=20;if(hit.id=='A5')
masker.drawRect(312,492,59,30);else if(hit.id=='A4')
masker.drawRect(1038,475,65,23);else if(hit.id=='A3')
masker.drawRect(518,510,43,23);else if(hit.id=='A12')
masker.drawRect(785,506,43,23);else if(hit.id=='A11')
masker.drawRect(381,479,32,24);else if(hit.id=='A6')
masker.drawRect(22,453,32,24);else if(hit.id=='A7')
masker.drawRect(1012,453,32,24);else
masker.drawRect(hit.x+dis,hit.y+dis,hit.width-2*dis,hit.height-dis);};BetArea.prototype.updateWin98Ratio=function(data){var result=data.content.result;var cards=data.content.cards;this.win98Ratio.visible=true;this.winRatio.visible=true;this.winMasker.clear();this.win98Masker.clear();this.winMasker.beginFill(0xff0000,0.5);this.win98Masker.beginFill(0xff0000,0.5);var masker;if(result.charAt(game.BetType.BANKER-1)=='1'&&(result.charAt(game.BetType.BANKER_N8-1)=='1'||result.charAt(game.BetType.BANKER_N9-1)=='1'))
masker=this.win98Masker;else
masker=this.winMasker;for(var i=1;i<=8;i++){if(i==4)
continue;this.drawWinMask(masker,this.betMap['A'+game.BetType.BANKER+'_'+i]);}
if(result.charAt(game.BetType.BANKER-1)=='1'&&result.charAt(game.BetType.BANKER_N8-1)=='1')
masker=this.win98Masker;else
masker=this.winMasker;this.drawWinMask(masker,this.betMap['A'+game.BetType.BANKER_N8]);if(result.charAt(game.BetType.BANKER-1)=='1'&&result.charAt(game.BetType.BANKER_N9-1)=='1')
masker=this.win98Masker;else
masker=this.winMasker;this.drawWinMask(masker,this.betMap['A'+game.BetType.BANKER_N9]);if(result.charAt(game.BetType.PLAYER-1)=='1'&&(result.charAt(game.BetType.PLAYER_N8-1)=='1'||result.charAt(game.BetType.PLAYER_N9-1)=='1'))
masker=this.win98Masker;else
masker=this.winMasker;for(var i=1;i<=8;i++){if(i==4)
continue;this.drawWinMask(masker,this.betMap['A'+game.BetType.PLAYER+'_'+i]);}
if(result.charAt(game.BetType.PLAYER-1)=='1'&&result.charAt(game.BetType.PLAYER_N8-1)=='1')
masker=this.win98Masker;else
masker=this.winMasker;this.drawWinMask(masker,this.betMap['A'+game.BetType.PLAYER_N8]);if(result.charAt(game.BetType.PLAYER-1)=='1'&&result.charAt(game.BetType.PLAYER_N9-1)=='1')
masker=this.win98Masker;else
masker=this.winMasker;this.drawWinMask(masker,this.betMap['A'+game.BetType.PLAYER_N9]);var num=this.gameModel.gameView.gameResult['getCardVal'](cards.split("#")[1]);if(result.charAt(game.BetType.TIE-1)=='1'&&(num==8||num==9))
masker=this.win98Masker;else
masker=this.winMasker;this.drawWinMask(masker,this.betMap['A'+game.BetType.TIE]);if(result.charAt(game.BetType.BANKER_PAIR-1)=='1')
masker=this.win98Masker;else
masker=this.winMasker;this.drawWinMask(masker,this.betMap['A'+game.BetType.BANKER_PAIR]);if(result.charAt(game.BetType.PLAYER_PAIR-1)=='1')
masker=this.win98Masker;else
masker=this.winMasker;this.drawWinMask(masker,this.betMap['A'+game.BetType.PLAYER_PAIR]);this.drawWinMask(this.winMasker,this.betMap['A'+game.BetType.BIG]);this.drawWinMask(this.winMasker,this.betMap['A'+game.BetType.SMALL]);this.winMasker.endFill();this.win98Masker.endFill();this.winRatio.mask=this.winMasker;this.win98Ratio.mask=this.win98Masker;};BetArea.prototype.onBetClick=function(hit){if(hit['seatId']>0&&hit['seatId']!=this.seatId)
return;return _super.prototype.onBetClick.call(this,hit);};BetArea.prototype.onBetRightClick=function(hit){if(hit['seatId']>0&&hit['seatId']!=this.seatId)
return;_super.prototype.onBetRightClick.call(this,hit);};BetArea.prototype.initJson=function(){var url=game.GlobalVals.viewMode==game.ViewMode.MODE_7S?"assets/baccarat/7s/bet_area.json":"assets/baccarat/7s_3d/bet_area.json";this.updateJson(url);};BetArea.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}};BetArea.prototype.initBetCon=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_7S?this.bet2DSetting:this.bet3DSetting;_super.prototype.initBetCon.call(this,vSetting);};BetArea.prototype.initChipCon=function(){_super.prototype.initChipCon.call(this);for(var i=1;i<=8;i++){if(i==4)
continue;this.betPlaceMap['A1_'+i].seatId=i;this.betPlaceMap['A2_'+i].seatId=i;this.betPlaceMap['A1_'+i].betHit.seatId=i;this.betPlaceMap['A2_'+i].betHit.seatId=i;}
for(var s in this.betPlaceMap){if(this.betPlaceMap[s]instanceof Array){for(var j=0;j<this.betPlaceMap[s].length;j++){this.betPlaceMap[s][j].scale.x=0.9;this.betPlaceMap[s][j].scale.y=this.betPlaceMap[s][j].scale.x;}}
else{this.betPlaceMap[s].scale.x=0.9;this.betPlaceMap[s].scale.y=this.betPlaceMap[s].scale.x;}}};BetArea.prototype.updateText=function(){var viewMode=game.GlobalVals.viewMode;var betAreaText=this.betAreaText;betAreaText.texture=this.gameModel.resources[(viewMode!=game.ViewMode.MODE_2D?viewMode+"_":"")+'bet_area_text_'+game.GameUtils.getColor(this.gameModel.TABLE_ID)].texture;betAreaText.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;betAreaText.scale.y=betAreaText.scale.x;switch(viewMode){case game.ViewMode.MODE_7S:betAreaText.x=69.5;betAreaText.y=392;this.winRatio.x=136;this.winRatio.y=479;this.super6Info.x=855;this.super6Info.y=506;break;case game.ViewMode.MODE_7S_3D:break;}
this.win98Ratio.x=this.winRatio.x;this.win98Ratio.y=this.winRatio.y;};BetArea.prototype.changeView=function(){var viewMode=game.GlobalVals.viewMode;var url=viewMode==game.ViewMode.MODE_7S?"assets/baccarat/7s/bet_area.json":"assets/baccarat/7s_3d/bet_area.json";this.updateJson(url);var vSetting=viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.updateBetConSettings.call(this,vSetting);this.updateText();_super.prototype.changeView.call(this);};return BetArea;}(baccarat.BetArea));baccarat_7s.BetArea=BetArea;})(baccarat_7s||(baccarat_7s={}));var baccarat_7s;(function(baccarat_7s){var CardControl=(function(_super){__extends(CardControl,_super);function CardControl(gameModel){return _super.call(this,gameModel)||this;}
CardControl.prototype.initialize=function(){this.cardConfigs=new Array();var c0=new game.CardConfig();c0.x=510.2;c0.y=384.05;c0.vertices=[-0.2,0,71.4,0,67.2,76.8,-12.2,76.8];this.cardConfigs[0]=c0;var c1=new game.CardConfig();c1.x=694;c1.y=384.2;c1.vertices=[-0.2,0,71.4,0,83.1,76.8,3.95,76.8];this.cardConfigs[1]=c1;var c2=new game.CardConfig();c2.x=434.55;c2.y=384.05;c2.vertices=[0,0,71.4,0,59.7,76.8,-18,76.8];this.cardConfigs[2]=c2;var c3=new game.CardConfig();c3.x=768.7;c3.y=384.05;c3.vertices=[0,0,71.4,0,91.7,76.8,11.6,76.8];this.cardConfigs[3]=c3;var c4=new game.CardConfig();c4.x=324.6;c4.y=385.55;c4.vertices=[-0.2,0,104,0,91.6,50.95,-18.6,50.95];this.cardConfigs[4]=c4;var c5=new game.CardConfig();c5.x=846.35;c5.y=385.55;c5.vertices=[-0.2,0,108.2,0,127.8,51.95,12.2,51.95];this.cardConfigs[5]=c5;c0.uvs=[0,0,1,0,1,1,0,1];c1.uvs=c0.uvs.slice();c2.uvs=c0.uvs.slice();c3.uvs=c0.uvs.slice();c4.uvs=[1,0,1,1,0,1,0,0];c5.uvs=c4.uvs.slice();for(var i=0;i<this.cardConfigs.length;i++){this.cardConfigs[i].vertices=new Float32Array(this.cardConfigs[i].vertices);this.cardConfigs[i].uvs=new Float32Array(this.cardConfigs[i].uvs);}
this.cards=[null,null,null,null,null,null];};return CardControl;}(baccarat.CardControl));baccarat_7s.CardControl=CardControl;})(baccarat_7s||(baccarat_7s={}));var baccarat_7s;(function(baccarat_7s){var ChipControl=(function(_super){__extends(ChipControl,_super);function ChipControl(gameModel){return _super.call(this,gameModel)||this;}
ChipControl.prototype.initChipPos=function(){this.updateChipPos(null);};ChipControl.prototype.initChips=function(schips,shownRange){_super.prototype.initChips.call(this,schips,shownRange);this.updateLeftRight();};ChipControl.prototype.updateLeftRight=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y-7;this.rightArrow.rotation=-10*Math.PI/180;break;case game.ViewMode.MODE_7S_3D:break;}};ChipControl.prototype.updateChipPos=function(chipsPos){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:this.chipsPos=[new PIXI.Point(-52.35,1.85),new PIXI.Point(0.05,0.65),new PIXI.Point(51.05,-1.55),new PIXI.Point(102.15,-5.2),new PIXI.Point(154.85,-10.95),new PIXI.Point(207.4,-19.4),new PIXI.Point(257.55,-28.45),new PIXI.Point(305.95,-38.85)];break;case game.ViewMode.MODE_7S_3D:break;}
_super.prototype.updateChipPos.call(this,this.chipsPos);};ChipControl.prototype.changeView=function(){this.updateChipPos(null);this.updateLeftRight();this.drawMasker();_super.prototype.changeView.call(this);};return ChipControl;}(game.BaseChipControl));baccarat_7s.ChipControl=ChipControl;})(baccarat_7s||(baccarat_7s={}));var baccarat_7s;(function(baccarat_7s){var GameHUD=(function(_super){__extends(GameHUD,_super);function GameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameHUD.prototype.initView=function(){_super.prototype.initView.call(this);this.settingCon=new baccarat_7s.Bac7sSettingContainer(this.gameModel);this.settingCon.x=0;this.settingCon.y=581;this.addChild(this.settingCon);this.gameInfoCon=new baccarat_7s.GameInfoCon(this.gameModel);this.addChild(this.gameInfoCon);};GameHUD.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:this.settingCon.x=12;this.settingCon.y=730;this.gameInfoCon.expand();this.gameInfoCon.resizeBtn.visible=false;this.settingCon.livePoolBtn.visible=false;break;case game.ViewMode.MODE_7S_3D:break;}};GameHUD.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameHUD;}(game.BaseGameHUD));baccarat_7s.GameHUD=GameHUD;})(baccarat_7s||(baccarat_7s={}));var baccarat_7s;(function(baccarat_7s){var GameInfoCon=(function(_super){__extends(GameInfoCon,_super);function GameInfoCon(gameModel){return _super.call(this,gameModel)||this;}
GameInfoCon.prototype.initGameDetailCon=function(){this.gameDetailCon=new baccarat_7s.Bac7sDetailCon(this.gameModel);this.addChild(this.gameDetailCon);this.gameDetailCon.y=90;};return GameInfoCon;}(game.BaseGameInfoCon));baccarat_7s.GameInfoCon=GameInfoCon;})(baccarat_7s||(baccarat_7s={}));var baccarat_7s;(function(baccarat_7s){var GameResult=(function(_super){__extends(GameResult,_super);function GameResult(gameModel){return _super.call(this,gameModel)||this;}
GameResult.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:this.bankerCardVal.x=920;this.bankerCardVal.y=324;this.playerCardVal.x=306;this.playerCardVal.y=324;this.result1Tf.y=360;this.result2Tf.y=380+30;break;case game.ViewMode.MODE_7S_3D:break;}};GameResult.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameResult;}(game.BaseGameResult));baccarat_7s.GameResult=GameResult;})(baccarat_7s||(baccarat_7s={}));var baccarat_7s;(function(baccarat_7s){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.destructor=function(){if(!component.VComponentUtils.isMobile)
component.VMouseUtils.off(this.infoIcon,component.VMouseUtils.MOUSE_OVER,this.onShowInfo,this);else
component.VMouseUtils.off(this.infoIcon,component.VMouseUtils.MOUSE_UP,this.onShowInfo,this);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.off(this.infoIcon,component.VMouseUtils.MOUSE_OUT,this.onHideInfo,this);else
component.VMouseUtils.off(this.infoIcon,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.onHideInfo,this);_super.prototype.destructor.call(this);};GameView.prototype.onShowInfo=function(){this.super98Panel.show();this.super98Panel.x=this.infoIcon.x+20;this.super98Panel.y=this.infoIcon.y+20;};GameView.prototype.onHideInfo=function(){this.super98Panel.hide();};GameView.prototype.initialize=function(){_super.prototype.initialize.call(this);var bonusBg=new PIXI.extras.MovieClip([this.gameModel.resources['table_bonus98_1'].texture,this.gameModel.resources['table_bonus98_2'].texture]);this.bonusBg=bonusBg;bonusBg.x=92;bonusBg.y=379;this.bonusBg.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;this.bonusBg.scale.y=this.bonusBg.scale.x;this.addChild(this.bonusBg);this.bonusBg.visible=false;this.noCommission=new PIXI.Container();this.addChild(this.noCommission);var gp=new PIXI.Graphics();gp.lineStyle(0,0,0);gp.beginFill(0x000000,0.2);gp.drawRoundedRect(0,0,186,44,8);gp.endFill();this.noCommission.addChild(gp);this.noCommission.visible=false;var tf1=component.VComponentUtils.createText(game.GameText.NO_COMMISSION,{fontFamily:"Arial",fontSize:16,fill:0xffffff});tf1.anchor.x=0.5;tf1.x=gp.width*0.5;tf1.y=5;this.noCommission.addChild(tf1);var tf2=component.VComponentUtils.createText(game.GameText.BANKER_WIN_ON_6_PAY,{fontFamily:"Arial",fontSize:12,fill:0xffffff});if(tf2.width>gp.width){tf2.scale.x=gp.width/tf2.width;tf2.scale.y=tf2.scale.x;}
tf2.anchor.x=0.5;tf2.x=gp.width*0.5;tf2.y=26;this.noCommission.addChild(tf2);this.noCommission.x=60;this.noCommission.y=325;this.initTrends();this.chipControl=new baccarat_7s.ChipControl(this.gameModel);this.chipControl.x=907;this.chipControl.y=591;this.chipControl.dissable();this.gameModel.chipControl=this.chipControl;this.betArea=new baccarat_7s.BetArea(this.gameModel,this.betInput);this.betArea.dissable();this.addChild(this.betArea);this.seatControl=new baccarat_7s.SeatControl(this.gameModel);this.addChild(this.seatControl);this.betControl=new game.BetControl(this.gameModel);this.betControl.x=477;this.betControl.y=580;this.betControl.hide();this.cardControl=new baccarat_7s.CardControl(this.gameModel);this.addChild(this.cardControl);this.addChild(this.betControl);this.addChild(this.chipControl);this.diceAnim=new game.DiceAnim(this.gameModel);this.addChild(this.diceAnim);var arr=[];for(var i=1;i<=7;i++)
arr.push('color_dice0'+i+'');for(var i=1;i<=12;i++)
arr.push('color_dice'+i+'0');this.diceAnim.initialize(arr,7);this.diceAnim.pivot.x=192;this.diceAnim.pivot.y=650;this.diceAnim.x=138+25;this.diceAnim.y=392+10;this.diceAnim.scale.x=0.5;this.diceAnim.scale.y=0.5;this.diceAnim.visible=false;_super.prototype.initCountDown.call(this);this.countdown.x=640;this.countdown.y=383;this.gameResult=(new baccarat_7s.GameResult(this.gameModel));this.addChild(this.gameResult);this.gameHUD=new baccarat_7s.GameHUD(this.gameModel);this.addChild(this.gameHUD);this.setChildIndex(this.overlay,this.children.length-1);this.updateView();this.gameModel.dispatcher.addEventListener(GameEvent.TREND_EXPAND,this.onTrendExpand,this);this.super98Panel=new baccarat.Super98InfoPopup(null);"";this.gameModel.overlay.addChild(this.super98Panel);this.super98Panel.hide();var infoIcon=new component.VButton([PIXI.Texture.fromFrame('left_info_icon.png'),PIXI.Texture.fromFrame('left_info_icon.png')]);infoIcon.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;infoIcon.scale.y=infoIcon.scale.x;infoIcon.rotation=7*Math.PI/180;infoIcon.buttonMode=true;this.addChild(infoIcon);infoIcon.x=196;infoIcon.y=401;this.infoIcon=infoIcon;this.infoIcon.visible=false;if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(infoIcon,component.VMouseUtils.MOUSE_OVER,this.onShowInfo,this);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(infoIcon,component.VMouseUtils.MOUSE_OUT,this.onHideInfo,this);else
component.VMouseUtils.on(this.infoIcon,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.onHideInfo,this);};GameView.prototype.onTrendExpand=function(e){var trend=e.data;};GameView.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}};GameView.prototype.activeSuperHand=function(isSupper){this.bonusBg.gotoAndStop(isSupper?1:0);if(isSupper)
this.betArea['showSuper98']();};GameView.prototype.updateVodView=function(){if(!this.vodInited)
return;var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:this.gameModel.VOD_WIDTH=511;this.gameModel.VOD_HEIGHT=311;this.gameModel.VOD_X=386;this.gameModel.VOD_Y=3;this.processVodLoadMediaData();break;case game.ViewMode.MODE_7S_3D:break;}
this.sizeHandler();};GameView.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;this.updateVodView();switch(viewMode){case game.ViewMode.MODE_7S:this.chipControl.x=915.95;this.chipControl.y=741;this.betControl.x=483;this.betControl.y=730;this.bonusBg.x=92;this.bonusBg.y=379;this.bonusBg.textures=[this.gameModel.resources['table_bonus98_1'].texture,this.gameModel.resources['table_bonus98_2'].texture];this.diceAnim.x=138+25;this.diceAnim.y=392+10;this.bonusBg.gotoAndStop(this.bonusBg.currentFrame);this.noCommission.x=60;this.noCommission.y=325;this.cardControl.visible=true;this.bg.y=0;if(this.gameModel.TABLE_ID)
this.bg.texture=this.gameModel.resources['table_bg_'+game.GameUtils.getColor(this.gameModel.TABLE_ID)].texture;this.betArea.collectWinPos.x=115;this.betArea.collectWinPos.y=722;this.betInput.x=507;this.betInput.y=732;break;case game.ViewMode.MODE_7S_3D:break;}
this.gameResult.changeView();};GameView.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};GameView.prototype.onTableLimit=function(){_super.prototype.onTableLimit.call(this);_super.prototype.onTableLimit.call(this);if(!game.GameUtils.checkSuper98(this.gameModel.TABLE_ID)){this.removeChild(this.bonusBg);this.infoIcon.visible=false;}
else{this.bonusBg.visible=true;this.infoIcon.visible=true;}
if(game.GameUtils.checkCommision(this.gameModel.TABLE_ID)){this.removeChild(this.noCommission);}
else{this.noCommission.visible=true;}};return GameView;}(game.BaseGameViewGroup1));baccarat_7s.GameView=GameView;})(baccarat_7s||(baccarat_7s={}));var baccarat_7s;(function(baccarat_7s){var SeatControl=(function(_super){__extends(SeatControl,_super);function SeatControl(gameModel){return _super.call(this,gameModel)||this;}
SeatControl.prototype.initialize=function(playerInfoW,playerInfoH){if(playerInfoW===void 0){playerInfoW=120;}
if(playerInfoH===void 0){playerInfoH=40;}
_super.prototype.initialize.call(this,playerInfoW,playerInfoH);var settings=[{x:1128.7,y:641.7},{x:957.3,y:668.9},{x:785.85,y:683},{x:612.65,y:687.35},{x:440.35,y:681.6},{x:268.35,y:667.05},{x:97,y:642.6}];this.updateView(settings);};return SeatControl;}(game.BaseSeatControl));baccarat_7s.SeatControl=SeatControl;})(baccarat_7s||(baccarat_7s={}));var baccarat_7s;(function(baccarat_7s){var TrendDetail=(function(_super){__extends(TrendDetail,_super);function TrendDetail(gameModel,viewW,viewH){var _this=_super.call(this,gameModel)||this;var bg=new PIXI.Graphics();bg.beginFill(0xFFF5E9);bg.drawRect(0,117,viewW,viewH);bg.endFill();_this.addChild(bg);var content=new PIXI.Container();_this.addChild(content);_this.content=content;_this.gameModel.dispatcher.addEventListener(game.GameEvent.TREND_EXPAND,_this.onTrendExpand,_this);return _this;}
TrendDetail.prototype.addTrends=function(trendMng){var content=this.content;content.addChild(trendMng.bigEyeTrend);content.addChild(trendMng.smallTrend);content.addChild(trendMng.cockRoachTrend);};TrendDetail.prototype.onTrendExpand=function(e){var trend=e.data;if(trend.expandBtn.currentFrame==0){trend.setBgAlpha(0.7);if(this.expandedTrend){this.expandedTrend.collapse();this.expandedTrend.setBgAlpha(1);}
this.expandedTrend=trend;}
else{trend.setBgAlpha(1);this.expandedTrend=null;}};return TrendDetail;}(game.GameObject));baccarat_7s.TrendDetail=TrendDetail;})(baccarat_7s||(baccarat_7s={}));var baccarat_7s;(function(baccarat_7s){var TrendMng=(function(_super){__extends(TrendMng,_super);function TrendMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
TrendMng.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:var maxView=new PIXI.Rectangle(384.6,129.55,511,138);this.normalTrend.setSmallView(new PIXI.Rectangle(923+18,34,270-18,92));this.normalTrend.setMaxView(maxView);this.pearlRoadTrend.setSmallView(new PIXI.Rectangle(923+18,130,270-18,92));this.pearlRoadTrend.setMaxView(maxView);this.bigEyeTrend.setSmallView(new PIXI.Rectangle(3,120,372,50));this.bigEyeTrend.setMaxView(maxView);this.removeChild(this.bigEyeTrend);this.smallTrend.setSmallView(new PIXI.Rectangle(3,this.bigEyeTrend.y+this.bigEyeTrend.viewH+1,372,50));this.smallTrend.setMaxView(maxView);this.removeChild(this.smallTrend);this.cockRoachTrend.setSmallView(new PIXI.Rectangle(3,this.smallTrend.y+this.smallTrend.viewH+1,372,50));this.cockRoachTrend.setMaxView(maxView);this.removeChild(this.cockRoachTrend);this.pearViewBtn.x=902;this.pearViewBtn.y=this.pearlRoadTrend.y+4+52;this.iconCount.x=932+18;this.iconCount.y=248;this.predict.x=0;this.predict.y=0;this.predict.banker.x=1200;this.predict.banker.y=this.normalTrend.y;this.predict.player.x=1200;this.predict.player.y=this.pearlRoadTrend.y;this.predict.resizeBtns(22,this.normalTrend.viewH);this.bg.clear();this.bg.lineStyle(1,0x1F1F1F);this.bg.beginFill(0x1F1F1F);this.bg.drawRect(0,0,330,250);this.bg.endFill();this.bg.x=900;this.bg.y=30;this.tableBtnCon.x=902;this.tableBtnCon.y=33;this.iconCount.scale.x=1;this.iconCount.scale.y=this.iconCount.scale.x;this.changeColorBtn.x=902;this.changeColorBtn.y=156.05+52;break;case game.ViewMode.MODE_7S_3D:break;}};TrendMng.prototype.onExpandBtn=function(e){};TrendMng.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};TrendMng.prototype.onTableBtn=function(e){};TrendMng.prototype.superOnTableBtn=function(e){_super.prototype.onTableBtn.call(this,e);};return TrendMng;}(game.BaseTrendMng));baccarat_7s.TrendMng=TrendMng;})(baccarat_7s||(baccarat_7s={}));var seven_up;(function(seven_up){var BetResultId=(function(){function BetResultId(){}
BetResultId.getResult=function(id,src){if(src===void 0){src='00000000000';}
return src.substring(0,id)+'1'+src.substring(id+1);};BetResultId.BANKER_7=0;BetResultId.PLAYER_7=1;BetResultId.TIE_7=2;BetResultId.BANKER_OTHER=3;BetResultId.PLAYER_OTHER=4;BetResultId.TIE_OTHER=5;BetResultId.TWO_7=6;BetResultId.THREE_7=7;BetResultId.FOUR_7=8;BetResultId.FIVE_7=9;BetResultId.SIX_7=10;return BetResultId;}());seven_up.BetResultId=BetResultId;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var Game=(function(_super){__extends(Game,_super);function Game(){return _super.call(this)||this;}
Game.prototype.destructor=function(){_super.prototype.destructor.call(this);};Game.prototype.initialize=function(tableId,resources){this.resetGameResultDelay=1500;this.clearTimeoutIds=[];this.dealTimeoutIds=[];this.gameModel.GAME_ID=game.GameID.SEVEN_UP;_super.prototype.initialize.call(this,tableId,resources);var str="1 10401,2 10402,3 10403,4 10404";var arr=str.split(',');var betLimitIdMap={};for(var i=0;i<arr.length;i++){var arr2=arr[i].split(' ');betLimitIdMap[arr2[0]]=arr2[1];}
this.gameModel.betLimitIdMap=betLimitIdMap;return this;};Game.prototype.onBetCountDownComplete=function(){_super.prototype.onBetCountDownComplete.call(this);this.gameView.showStatus(game.GameText.WAIT_CARD_DEAL);};Game.prototype.onStopBet=function(){_super.prototype.onStopBet.call(this);this.gameView.gameResult.banker.visible=true;this.gameView.gameResult.player.visible=true;};Game.prototype.resetGameResult=function(){_super.prototype.resetGameResult.call(this);this.gameView.gameResult.banker.visible=false;this.gameView.gameResult.player.visible=false;};Game.prototype.startGame=function(){_super.prototype.startGame.call(this);};Game.prototype.initView=function(){this.gameView=new seven_up.GameView(this.gameModel);this.addChild(this.gameView);};Game.prototype.onAuthSuccess=function(){_super.prototype.onAuthSuccess.call(this);};Game.prototype.onWSOpenHdl=function(){_super.prototype.onWSOpenHdl.call(this);};Game.prototype.onWSCloseHdl=function(){_super.prototype.onWSCloseHdl.call(this);};Game.prototype.onGameEvent=function(e){_super.prototype.onGameEvent.call(this,e);};return Game;}(game.BaseGame));seven_up.Game=Game;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var BetArea=(function(_super){__extends(BetArea,_super);function BetArea(gameModel,input){return _super.call(this,gameModel,input)||this;}
BetArea.prototype.initSettings=function(){_super.prototype.initSettings.call(this);this.initLiveChipSettings();this.initBetSettings();};BetArea.prototype.initLiveChipSettings=function(){var settings={};settings['2']={totalPos:new PIXI.Point(327.9,465.9),arr:[new PIXI.Point(293.25,496.9),new PIXI.Point(307.75,492.4),new PIXI.Point(296,482.95),new PIXI.Point(311.15,480.2),new PIXI.Point(322.1,486.2)]};settings['1']={totalPos:new PIXI.Point(923.4,465.45),arr:[new PIXI.Point(976.75,492.7),new PIXI.Point(991.5,497.7),new PIXI.Point(987.5,484),new PIXI.Point(963.85,486.15),new PIXI.Point(973.85,480.5)]};settings['3']={totalPos:new PIXI.Point(716.55,476.2),arr:[new PIXI.Point(685.4,507.45),new PIXI.Point(701.4,510.95),new PIXI.Point(692.15,500.75),new PIXI.Point(706.5,499.5),new PIXI.Point(716.15,505.95)]};this.liveChip2DSetting=settings;};BetArea.prototype.initBetSettings=function(){var settings=[{id:"A2",x:254.9,y:479.5},{id:"A3",x:557.15,y:499.85},{id:"A4",x:552.3,y:537.75},{id:"A1",x:730.65,y:479.5}];for(var i=0;i<settings.length;i++){settings[i].id=settings[i].id;settings[i].url="SEVEN_UP_"+settings[i].id+".png";}
this.bet2DSetting=settings;};BetArea.prototype.initJson=function(){var url=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?"assets/seven_up/2d/bet_area.json":(game.GlobalVals.viewMode==game.ViewMode.MODE_3D?"assets/seven_up/3d/bet_area.json":"assets/seven_up/7s/bet_area.json");this.updateJson(url);};BetArea.prototype.showResult=function(data){this.hideHighlight();var results=data.content.result;if(results[seven_up.BetResultId.BANKER_7]=='1'||results[seven_up.BetResultId.BANKER_OTHER]=='1')
this.showWinHLBettype(seven_up.BetType.BANKER.toString());if(results[seven_up.BetResultId.PLAYER_7]=='1'||results[seven_up.BetResultId.PLAYER_OTHER]=='1')
this.showWinHLBettype(seven_up.BetType.PLAYER.toString());if(results[seven_up.BetResultId.TIE_7]=='1'||results[seven_up.BetResultId.TIE_OTHER]=='1')
this.getBetPlaceWithType(seven_up.BetType.TIE).betHit['winHL'].visible=true;if(results.substr(6,results.length-6).indexOf('1')>=0)
this.getBetPlaceWithType(seven_up.BetType.SEVEN_UP).betHit['winHL'].visible=true;};BetArea.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:this.liveChip3DSetting;_super.prototype.initLiveChip.call(this,vSetting);};BetArea.prototype.initBetCon=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D||game.GlobalVals.viewMode==game.ViewMode.MODE_7S?this.bet2DSetting:this.bet3DSetting;_super.prototype.initBetCon.call(this,vSetting);};BetArea.prototype.updateText=function(){var viewMode=game.GlobalVals.viewMode;var betAreaText=this.betAreaText;betAreaText.texture=this.gameModel.resources[(viewMode!=game.ViewMode.MODE_2D?viewMode+"_":"")+'bet_area_text_'+game.GameUtils.getColor(this.gameModel.TABLE_ID)].texture;betAreaText.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;betAreaText.scale.y=betAreaText.scale.x;switch(viewMode){case game.ViewMode.MODE_2D:betAreaText.x=255;betAreaText.y=395;break;case game.ViewMode.MODE_3D:break;}};BetArea.prototype.getBetName=function(betType){return game.GameText["SevenUp_"+betType];};BetArea.prototype.onBetClick=function(hit){if(hit.betType==seven_up.BetType.SEVEN_UP&&this.getTotalBet()-this.getBetPlaceWithType(seven_up.BetType.SEVEN_UP).getAmount()==0){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.must_bet_other);return;}
var id=hit['id'];if('A4'.indexOf(id)>=0){if(this.gameModel.game.getLastRound()>game.GameSettings.SUPER_7_MAX_ROUND){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.super7_not_available.replace('{0}',game.GameSettings.SUPER_7_MAX_ROUND.toString()));return;}}
if(hit['seatId']>0&&hit['seatId']!=this.seatId)
return;_super.prototype.onBetClick.call(this,hit);};BetArea.prototype.rebet=function(){for(var i=0;i<this.savedBets.length;i++){var info=this.savedBets[i];var id='A'+info.betType;if('A4'.indexOf(id)>=0){if(this.gameModel.game.getLastRound()>game.GameSettings.SUPER_7_MAX_ROUND){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.super7_not_available.replace('{0}',game.GameSettings.SUPER_7_MAX_ROUND.toString()));return;}}}
_super.prototype.rebet.call(this);};return BetArea;}(game.BaseBetArea));seven_up.BetArea=BetArea;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var BetType=(function(){function BetType(){}
BetType.getResult=function(type,src){if(src===void 0){src='0000000';}
return src.substring(0,type-1)+'1'+src.substring(type,7);};BetType.BANKER=1;BetType.PLAYER=2;BetType.TIE=3;BetType.SEVEN_UP=4;return BetType;}());seven_up.BetType=BetType;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var CardControl=(function(_super){__extends(CardControl,_super);function CardControl(gameModel){return _super.call(this,gameModel)||this;}
CardControl.prototype.initialize=function(){this.cardConfigs=new Array();var c0=new game.CardConfig();c0.x=510.2;c0.y=384.05;c0.vertices=[-0.2,0,71.4,0,67.2,76.8,-12.2,76.8];this.cardConfigs[0]=c0;var c1=new game.CardConfig();c1.x=694;c1.y=384.2;c1.vertices=[-0.2,0,71.4,0,83.1,76.8,3.95,76.8];this.cardConfigs[1]=c1;var c2=new game.CardConfig();c2.x=434.55;c2.y=384.05;c2.vertices=[0,0,71.4,0,59.7,76.8,-18,76.8];this.cardConfigs[2]=c2;var c3=new game.CardConfig();c3.x=768.7;c3.y=384.05;c3.vertices=[0,0,71.4,0,91.7,76.8,11.6,76.8];this.cardConfigs[3]=c3;var c4=new game.CardConfig();c4.x=324.6;c4.y=385.55;c4.vertices=[-0.2,0,104,0,91.6,50.95,-18.6,50.95];this.cardConfigs[4]=c4;var c5=new game.CardConfig();c5.x=846.35;c5.y=385.55;c5.vertices=[-0.2,0,108.2,0,127.8,51.95,12.2,51.95];this.cardConfigs[5]=c5;c0.uvs=[0,0,1,0,1,1,0,1];c1.uvs=c0.uvs.slice();c2.uvs=c0.uvs.slice();c3.uvs=c0.uvs.slice();c4.uvs=[1,0,1,1,0,1,0,0];c5.uvs=c4.uvs.slice();for(var i=0;i<this.cardConfigs.length;i++){this.cardConfigs[i].vertices=new Float32Array(this.cardConfigs[i].vertices);this.cardConfigs[i].uvs=new Float32Array(this.cardConfigs[i].uvs);}
this.cards=[null,null,null,null,null,null];};CardControl.prototype.dealCard=function(cardId,cardPos,animated){if(animated===void 0){animated=true;}
_super.prototype.dealCard.call(this,cardId,cardPos,animated);this.updateCardVals();};CardControl.prototype.clearCard=function(carPos){_super.prototype.clearCard.call(this,carPos);this.updateCardVals();};CardControl.prototype.clearAllCards=function(){for(var carPos=1;carPos<this.cards.length;carPos++){if(!this.cards[carPos])
continue;TweenMax.killTweensOf(this.cards[carPos]);component.VComponentUtils.deepClean(this.cards[carPos]);this.animatingMap[carPos]=false;this.cards[carPos]=null;}
this.updateCardVals();};CardControl.prototype.updateCardVals=function(){var gameResult=this.gameModel.gameView.gameResult;var bcards="";var pcards="";for(var i=0;i<this.cards.length;i++){if(!this.cards[i])
continue;if(i%2==0)
pcards+=this.cards[i]['cardId'];else
bcards+=this.cards[i]['cardId'];}
gameResult.setPlayerCard(gameResult.getCardVal(pcards));gameResult.setBankerCard(gameResult.getCardVal(bcards));};return CardControl;}(game.BaseCardControl));seven_up.CardControl=CardControl;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var ChipControl=(function(_super){__extends(ChipControl,_super);function ChipControl(gameModel){return _super.call(this,gameModel)||this;}
ChipControl.prototype.initChipPos=function(){this.updateChipPos(null);};ChipControl.prototype.initChips=function(schips,shownRange){_super.prototype.initChips.call(this,schips,shownRange);this.updateLeftRight();};ChipControl.prototype.updateLeftRight=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y-7;this.rightArrow.rotation=-10*Math.PI/180;break;case game.ViewMode.MODE_3D:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y;this.rightArrow.rotation=0;break;}};ChipControl.prototype.updateChipPos=function(chipsPos){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.chipsPos=[new PIXI.Point(-52.35,1.85),new PIXI.Point(0.05,0.65),new PIXI.Point(51.05,-1.55),new PIXI.Point(102.15,-5.2),new PIXI.Point(154.85,-10.95),new PIXI.Point(207.4,-19.4),new PIXI.Point(257.55,-28.45),new PIXI.Point(305.95,-38.85)];break;case game.ViewMode.MODE_3D:this.chipsPos=[new PIXI.Point(-52.25,0.55),new PIXI.Point(-0.6,0.55),new PIXI.Point(51.05,0.55),new PIXI.Point(102.7,0.55),new PIXI.Point(154.35,0.55),new PIXI.Point(206,0.55),new PIXI.Point(257.65,0.55),new PIXI.Point(309.3,0.55)];break;}
_super.prototype.updateChipPos.call(this,this.chipsPos);};ChipControl.prototype.changeView=function(){this.updateChipPos(null);this.updateLeftRight();this.drawMasker();_super.prototype.changeView.call(this);};return ChipControl;}(game.BaseChipControl));seven_up.ChipControl=ChipControl;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var GameHUD=(function(_super){__extends(GameHUD,_super);function GameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameHUD.prototype.initView=function(){_super.prototype.initView.call(this);this.settingCon=new game.SettingContainer(this.gameModel);this.settingCon.x=0;this.settingCon.y=581;this.addChild(this.settingCon);this.gameInfoCon=new seven_up.GameInfoCon(this.gameModel);this.addChild(this.gameInfoCon);};GameHUD.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.settingCon.x=0;this.settingCon.y=580;this.gameInfoCon.expand();this.gameInfoCon.resizeBtn.visible=false;break;case game.ViewMode.MODE_3D:this.settingCon.x=0;this.settingCon.y=632;this.gameInfoCon.collapse();this.gameInfoCon.resizeBtn.visible=true;break;}};GameHUD.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameHUD;}(game.BaseGameHUD));seven_up.GameHUD=GameHUD;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var GenGameDetailCon=(function(_super){__extends(GenGameDetailCon,_super);function GenGameDetailCon(){return _super!==null&&_super.apply(this,arguments)||this;}
GenGameDetailCon.prototype.initLimitDetail=function(){this.limitDetail=new seven_up.GenLimitDetail(this.gameModel,this.viewW,this.viewH);};GenGameDetailCon.prototype.initLivePoolDetail=function(){this.livePoolDetail=new seven_up.GenLivePoolDetail(this.gameModel,this.viewW,this.viewH);};return GenGameDetailCon;}(game.GameDetailCon));seven_up.GenGameDetailCon=GenGameDetailCon;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var GenLimitDetail=(function(_super){__extends(GenLimitDetail,_super);function GenLimitDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
GenLimitDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLimitDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();this.tfs=[];var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.BANKER+' / '+game.GameText.PLAYER,game.GameText.TIE,game.GameText.SUPER_7];var posX=12;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;for(var i=0;i<texts.length;i++){tf=game.GameUtils.createText(texts[i],style);tf.x=posX;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};GenLimitDetail.prototype.setData=function(data){this.tfs[0].text=component.VComponentUtils.getNumInFormat(data.content[0].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[0].max);this.tfs[1].text=component.VComponentUtils.getNumInFormat(data.content[2].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[2].max);this.tfs[2].text=component.VComponentUtils.getNumInFormat(data.content[3].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[3].max);};return GenLimitDetail;}(game.LimitDetail));seven_up.GenLimitDetail=GenLimitDetail;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var GenLivePoolDetail=(function(_super){__extends(GenLivePoolDetail,_super);function GenLivePoolDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
GenLivePoolDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLivePoolDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.BANKER,game.GameText.PLAYER,game.GameText.TIE,game.GameText.SUPER_7];var results=[];results.push([seven_up.BetType.getResult(seven_up.BetType.BANKER),game.TrendType.NORMAL]);results.push([seven_up.BetType.getResult(seven_up.BetType.PLAYER),game.TrendType.NORMAL]);results.push([seven_up.BetType.getResult(seven_up.BetType.TIE),game.TrendType.NORMAL]);results.push([seven_up.BetType.getResult(seven_up.BetType.SEVEN_UP),game.TrendType.NORMAL]);this.tfs=[];var posX=5;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;var icon;for(var i=0;i<texts.length;i++){if(i==3){icon=new PIXI.Sprite(PIXI.Texture.fromFrame('trend_super7.png'));icon.width=game.TrendIconUtils.NORMAL_SIZE;icon.scale.y=icon.scale.x;icon.size=icon.width;icon.anchor.x=0.5;icon.anchor.y=0.5;}
else{icon=new game.PearlRoadIcon().setData(game.TrendIconUtils.NORMAL_SIZE);icon.setType(results[i][1]);icon.drawResult(results[i][0]);}
content.addChild(icon);icon.x=posX+icon.size*0.5;icon.y=posY+icon.size*0.5;tf=game.GameUtils.createText(texts[i],style);tf.x=posX+20;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};return GenLivePoolDetail;}(game.LivePoolDetail));seven_up.GenLivePoolDetail=GenLivePoolDetail;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var GameInfoCon=(function(_super){__extends(GameInfoCon,_super);function GameInfoCon(gameModel){return _super.call(this,gameModel)||this;}
GameInfoCon.prototype.initGameDetailCon=function(){this.gameDetailCon=new seven_up.GenGameDetailCon(this.gameModel);this.addChild(this.gameDetailCon);this.gameDetailCon.y=90;};return GameInfoCon;}(game.BaseGameInfoCon));seven_up.GameInfoCon=GameInfoCon;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var GameResult=(function(_super){__extends(GameResult,_super);function GameResult(){return _super!==null&&_super.apply(this,arguments)||this;}
GameResult.prototype.destructor=function(){_super.prototype.destructor.call(this);};GameResult.prototype.showResult=function(data){this.reset();var results=data.content.result;var cards=data.content.cards;if(results[seven_up.BetResultId.BANKER_7]=='1'||results[seven_up.BetResultId.BANKER_OTHER]=='1')
this.banker.gotoAndStop(1);if(results[seven_up.BetResultId.PLAYER_7]=='1'||results[seven_up.BetResultId.PLAYER_OTHER]=='1')
this.player.gotoAndStop(1);var arr=cards.split('#');var bVal;var pVal;pVal=this.getCardVal(arr[0]);this.setPlayerCard(pVal);bVal=this.getCardVal(arr[1]);this.setBankerCard(bVal);if(results[seven_up.BetResultId.BANKER_OTHER]=='1')
this.result1Tf.text=game.GameText.BANKER;else if(results[seven_up.BetResultId.BANKER_7]=='1')
this.result1Tf.text=game.GameText.banker7;if(results[seven_up.BetResultId.PLAYER_OTHER]=='1')
this.result1Tf.text=game.GameText.PLAYER;else if(results[seven_up.BetResultId.PLAYER_7]=='1')
this.result1Tf.text=game.GameText.player7;if(results[seven_up.BetResultId.TIE_OTHER]=='1')
this.result1Tf.text=game.GameText.TIE;else if(results[seven_up.BetResultId.TIE_7]=='1')
this.result1Tf.text=game.GameText.tie7;if(results[seven_up.BetResultId.BANKER_OTHER]=='1'||results[seven_up.BetResultId.BANKER_7]=='1'){this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.BANKER_WIN_ON);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_point"+bVal);}
else if(results[seven_up.BetResultId.PLAYER_OTHER]=='1'||results[seven_up.BetResultId.PLAYER_7]=='1'){this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.PLAYER_WIN_ON);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_point"+pVal);}
else{this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.TIE_ON);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_point"+bVal);}
var str7s=results.substr(6,results.length-6);if(str7s.indexOf('1')>=0){var count7s=str7s.indexOf('1')+2;this.result2Tf.text=game.GameText['super7_any'+count7s];this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_super7");}};return GameResult;}(game.BaseGameResult));seven_up.GameResult=GameResult;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.baseInitialize=function(){_super.prototype.initialize.call(this);};GameView.prototype.initialize=function(){this.baseInitialize();this.vodBg=new PIXI.Graphics();this.vodBg.beginFill(0x000000);this.vodBg.drawRect(0,0,512,309);this.vodBg.x=this.gameModel.VOD_X;this.vodBg.y=this.gameModel.VOD_Y;this.vodBg.endFill();this.initTrends();this.chipControl=new seven_up.ChipControl(this.gameModel);this.chipControl.x=907;this.chipControl.y=591;this.chipControl.dissable();this.gameModel.chipControl=this.chipControl;this.betArea=new seven_up.BetArea(this.gameModel,this.betInput);this.betArea.dissable();this.addChild(this.betArea);this.betControl=new game.BetControl(this.gameModel);this.betControl.x=477;this.betControl.y=580;this.betControl.hide();this.cardControl=new seven_up.CardControl(this.gameModel);this.addChild(this.cardControl);this.addChild(this.betControl);this.addChild(this.chipControl);_super.prototype.initCountDown.call(this);this.countdown.x=640;this.countdown.y=383;this.gameResult=(new seven_up.GameResult(this.gameModel));this.addChild(this.gameResult);this.cardControl.dealCard('A7',0,false);this.gameHUD=new seven_up.GameHUD(this.gameModel);this.addChild(this.gameHUD);this.initSuper7Panel();this.updateView();};GameView.prototype.initSuper7Panel=function(){this.super7Panel=new seven_up.Super7Popup(null);this.gameModel.overlay.addChild(this.super7Panel);this.super7Panel.hide();var infoIcon=component.VButton.createSimple(null,'',18,18);infoIcon.buttonMode=true;this.addChild(infoIcon);infoIcon.alpha=0.01;this.infoIcon=infoIcon;if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(infoIcon,component.VMouseUtils.MOUSE_OVER,this.onShowInfo,this);else
component.VMouseUtils.on(infoIcon,component.VMouseUtils.MOUSE_UP,this.onShowInfo,this);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(infoIcon,component.VMouseUtils.MOUSE_OUT,this.onHideInfo,this);else
component.VMouseUtils.on(infoIcon,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.onHideInfo,this);};GameView.prototype.onShowInfo=function(){this.super7Panel.show();this.super7Panel.x=this.infoIcon.x-this.super7Panel.viewW*0.5;this.super7Panel.y=this.infoIcon.y-this.super7Panel.viewH-12;};GameView.prototype.onHideInfo=function(){this.super7Panel.hide();};GameView.prototype.activeSuperHand=function(isSupper){};GameView.prototype.updateVodView=function(){if(!this.vodInited)
return;var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.gameModel.VOD_WIDTH=511;this.gameModel.VOD_HEIGHT=311;this.gameModel.VOD_X=386;this.gameModel.VOD_Y=3;this.processVodLoadMediaData();break;case game.ViewMode.MODE_3D:this.gameModel.VOD_X=0;this.gameModel.VOD_Y=-140;this.gameModel.VOD_WIDTH=this.gameModel.GAME_WIDTH-2*this.gameModel.VOD_X;this.gameModel.VOD_HEIGHT=this.gameModel.GAME_HEIGHT;this.processVodLoadMediaData();break;}
this.sizeHandler();};GameView.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;this.updateVodView();switch(viewMode){case game.ViewMode.MODE_2D:this.chipControl.x=907;this.chipControl.y=591;this.betControl.x=477;this.betControl.y=580;this.cardControl.visible=true;this.bg.y=0;this.betArea.collectWinPos.x=138;this.betArea.collectWinPos.y=572;this.betInput.x=497+6;this.betInput.y=583;this.infoIcon.x=709;this.infoIcon.y=536;break;case game.ViewMode.MODE_3D:break;}};GameView.prototype.changeView=function(){this.updateView();this.gameResult.changeView();_super.prototype.changeView.call(this);};GameView.prototype.confirmBet=function(){if(this.betArea.getTotalBet()-this.betArea.getBetPlaceWithType(seven_up.BetType.SEVEN_UP).getAmount()==0){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.must_bet_other);return;}
return _super.prototype.confirmBet.call(this);};return GameView;}(game.BaseGameViewGroup1));seven_up.GameView=GameView;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var Super7Popup=(function(_super){__extends(Super7Popup,_super);function Super7Popup(main){var _this=_super.call(this,main,250,200)||this;_this.closeBtn.visible=false;_this.titleTf.text=game.GameText.super7_title;_this.hasUnderlay=false;var table=new component.VTable(240,25,5,["",""],[5/6,1/6],"left",{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12},{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12,wordWrap:true},0x25221D,0x25221D,0x25221D);table.titleCon.visible=false;_this.addChild(table);table.x=5;table.y=10;table.setData(0,[game.GameText.super7_any2,LANG=='cs'?"23":"3:2"]);table.setData(1,[game.GameText.super7_any3,LANG=='cs'?"16":"6:1"]);table.setData(2,[game.GameText.super7_any4,LANG=='cs'?"115":"15:1"]);table.setData(3,[game.GameText.super7_any5,LANG=='cs'?"177":"77:1"]);table.setData(4,[game.GameText.super7_any6,LANG=='cs'?"1777":"777:1"]);var tf=game.GameUtils.createNormalText('');_this.addChild(tf);tf.x=table.x;tf.text=game.GameText.super7_term;tf.y=table.y+table.height+30;return _this;}
return Super7Popup;}(game.BasePopup));seven_up.Super7Popup=Super7Popup;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var GenIconCount=(function(_super){__extends(GenIconCount,_super);function GenIconCount(gameModel){return _super.call(this,gameModel)||this;}
GenIconCount.prototype.initialize=function(){this.tfs=[];this.icons=[];var results=[];results.push([seven_up.BetType.getResult(seven_up.BetType.BANKER),game.TrendType.NORMAL]);results.push([seven_up.BetType.getResult(seven_up.BetType.PLAYER),game.TrendType.NORMAL]);results.push([seven_up.BetType.getResult(seven_up.BetType.TIE),game.TrendType.NORMAL]);var dis=20;var posX=0;var icon;for(var i=0;i<results.length;i++){icon=new game.PearlRoadIcon().setData(16);icon.x=posX;posX+=dis;icon.setType(results[i][1]);icon.draw(new game.netdata.TrendsItem().setData(results[i][0]));var tf=game.GameUtils.createText('0',{fontFamily:"Arial",fontSize:12,fill:0xffffff,align:'center'});tf.anchor.x=0.5;tf.x=icon.x;tf.y=icon.y+8;this.tfs[i]=tf;this.icons[i]=icon;this.addChild(icon);this.addChild(tf);}
this.clear();};GenIconCount.prototype.clear=function(){for(var i=0;i<this.tfs.length;i++){this.tfs[i].text='0';}};GenIconCount.prototype.addTrend=function(item,isAnim){if(isAnim===void 0){isAnim=false;}
var ind=-1;if(item.result.charAt(seven_up.BetResultId.BANKER_7)=='1'||item.result.charAt(seven_up.BetResultId.BANKER_OTHER)=='1')
ind=0;if(item.result.charAt(seven_up.BetResultId.PLAYER_7)=='1'||item.result.charAt(seven_up.BetResultId.PLAYER_OTHER)=='1')
ind=1;if(item.result.charAt(seven_up.BetResultId.TIE_7)=='1'||item.result.charAt(seven_up.BetResultId.TIE_OTHER)=='1')
ind=2;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}};return GenIconCount;}(game.IconCount));seven_up.GenIconCount=GenIconCount;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var GenTrendContainer=(function(_super){__extends(GenTrendContainer,_super);function GenTrendContainer(){return _super!==null&&_super.apply(this,arguments)||this;}
GenTrendContainer.prototype.isTie=function(item){return item.result.charAt(2)=='1'||item.result.charAt(5)=='1';};GenTrendContainer.prototype.changeWinner=function(item1,item2){if(item1==null||item2==null)
return true;var s1=parseInt(item1.result.substr(0,3))|parseInt(item1.result.substr(3,3));var s2=parseInt(item2.result.substr(0,3))|parseInt(item2.result.substr(3,3));return s1!=s2;};return GenTrendContainer;}(game.TrendContainer));seven_up.GenTrendContainer=GenTrendContainer;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var GenTrendInfoPanel=(function(_super){__extends(GenTrendInfoPanel,_super);function GenTrendInfoPanel(gameModel){return _super.call(this,gameModel)||this;}
GenTrendInfoPanel.prototype.setData=function(data){var info={};core.VUtils.copy(data,info);var cards=data.cards;var arr=cards.split('#');arr[0]=arr[0].substr(0,arr[0].length-2).concat('A7');info.cards=arr.join('#');_super.prototype.setData.call(this,info);};return GenTrendInfoPanel;}(game.TrendInfoPanel));seven_up.GenTrendInfoPanel=GenTrendInfoPanel;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var GenPearlIcon=(function(_super){__extends(GenPearlIcon,_super);function GenPearlIcon(){return _super.call(this)||this;}
GenPearlIcon.prototype.drawResult=function(result){this.clear();var iconType="";if(result.charAt(seven_up.BetResultId.BANKER_7)=='1'||result.charAt(seven_up.BetResultId.BANKER_OTHER)=='1')
iconType="result_solid_0";if(result.charAt(seven_up.BetResultId.PLAYER_7)=='1'||result.charAt(seven_up.BetResultId.PLAYER_OTHER)=='1')
iconType="result_solid_1";if(result.charAt(seven_up.BetResultId.TIE_7)=='1'||result.charAt(seven_up.BetResultId.TIE_OTHER)=='1')
iconType="result_solid_2";this.createImg(iconType);};return GenPearlIcon;}(game.PearlRoadIcon));seven_up.GenPearlIcon=GenPearlIcon;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var GenTrendIcon=(function(_super){__extends(GenTrendIcon,_super);function GenTrendIcon(){return _super.call(this)||this;}
GenTrendIcon.prototype.draw=function(info){this.info=info;var result=info.result;var iconType="";if(result.charAt(seven_up.BetResultId.BANKER_7)=='1'||result.charAt(seven_up.BetResultId.BANKER_OTHER)=='1')
iconType="result_circle_0";if(result.charAt(seven_up.BetResultId.PLAYER_7)=='1'||result.charAt(seven_up.BetResultId.PLAYER_OTHER)=='1')
iconType="result_circle_1";this.clear();this.createImg(iconType);};return GenTrendIcon;}(game.TrendIcon));seven_up.GenTrendIcon=GenTrendIcon;})(seven_up||(seven_up={}));var seven_up;(function(seven_up){var TrendMng=(function(_super){__extends(TrendMng,_super);function TrendMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
TrendMng.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:var maxView=new PIXI.Rectangle(366,622,859,140);this.normalTrend.setSmallView(new PIXI.Rectangle(maxView.x,maxView.y,765,92));this.normalTrend.setMaxView(maxView);this.bigEyeTrend.setSmallView(new PIXI.Rectangle(maxView.x,716,285,46));this.bigEyeTrend.setMaxView(maxView);this.smallTrend.setSmallView(new PIXI.Rectangle(653,this.bigEyeTrend.y,285,46));this.smallTrend.setMaxView(maxView);this.cockRoachTrend.setSmallView(new PIXI.Rectangle(940,this.bigEyeTrend.y,285,46));this.cockRoachTrend.setMaxView(maxView);this.pearlRoadTrend.setSmallView(new PIXI.Rectangle(25,maxView.y,300,92));this.pearlRoadTrend.setMaxView(maxView);this.pearViewBtn.x=4;this.pearViewBtn.y=623;this.iconCount.x=25+8;this.iconCount.y=735+8;this.predict.x=1133;this.predict.y=maxView.y;this.predict.banker.x=0;this.predict.banker.y=0;this.predict.player.x=0;this.predict.player.y=47;this.bg.clear();this.bg.lineStyle(1,0x26231E);this.bg.beginFill(0x26231E);this.bg.drawRect(0,0,this.gameModel.GAME_WIDTH,151);this.bg.endFill();this.bg.y=617;this.tableBtnCon.x=328;this.tableBtnCon.y=622;this.iconCount.scale.x=1;this.iconCount.scale.y=this.iconCount.scale.x;break;case game.ViewMode.MODE_3D:break;}};TrendMng.prototype.getBigBoardName=function(){return game.GameSettings.TABLE_INFOS[this.activeTableId].hint.toUpperCase();};TrendMng.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};TrendMng.prototype.initIconCount=function(){this.iconCount=new seven_up.GenIconCount(this.gameModel);};TrendMng.prototype.initNormmalContainer=function(){this.normalTrend=new seven_up.GenTrendContainer(this.gameModel,seven_up.GenTrendIcon,765,92,6,game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].hint.toUpperCase(),true);};TrendMng.prototype.initPearlRoad=function(){this.pearlRoadTrend=new game.PearlRoad(this.gameModel,seven_up.GenPearlIcon,300,92,6,game.GameText.PEARL_ROAD.toUpperCase(),true);};TrendMng.prototype.initPredict=function(){_super.prototype.initPredict.call(this);};TrendMng.prototype.initView=function(){_super.prototype.initView.call(this);};TrendMng.prototype.initTrendInfoPanel=function(){this.trendInfoPanel=new seven_up.GenTrendInfoPanel(this.gameModel);};TrendMng.prototype.onTableBtn=function(e){};TrendMng.prototype.isTie=function(item){return item.result.charAt(seven_up.BetResultId.TIE_7)=='1'||item.result.charAt(seven_up.BetResultId.TIE_OTHER)=='1';};TrendMng.prototype.getWin=function(item){var v=0;if(item.result.charAt(seven_up.BetResultId.BANKER_7)=='1'||item.result.charAt(seven_up.BetResultId.BANKER_OTHER)=='1')
v=1;else if(item.result.charAt(seven_up.BetResultId.PLAYER_7)=='1'||item.result.charAt(seven_up.BetResultId.PLAYER_OTHER)=='1')
v=2;return v;};TrendMng.prototype.superOnTableBtn=function(e){_super.prototype.onTableBtn.call(this,e);};return TrendMng;}(game.BaseTrendMng));seven_up.TrendMng=TrendMng;})(seven_up||(seven_up={}));var seven_up_7s;(function(seven_up_7s){var Game=(function(_super){__extends(Game,_super);function Game(){return _super.call(this)||this;}
Game.prototype.initView=function(){this.gameView=new seven_up_7s.GameView(this.gameModel);this.addChild(this.gameView);};return Game;}(seven_up.Game));seven_up_7s.Game=Game;})(seven_up_7s||(seven_up_7s={}));var seven_up_7s;(function(seven_up_7s){var BetArea=(function(_super){__extends(BetArea,_super);function BetArea(gameModel,input){return _super.call(this,gameModel,input)||this;}
BetArea.prototype.initSettings=function(){_super.prototype.initSettings.call(this);this.initBetSettings();};BetArea.prototype.initLiveChipSettings=function(){var settings={};};BetArea.prototype.initBetSettings=function(){var settings=[{id:"A3",x:170.65,y:430.75,arr:[{x:603.45,y:507.45},{x:535.45,y:505.45},{x:469.45,y:501.45},{x:403.5,y:495.45},{x:337.5,y:487.45},{x:273.5,y:476.45},{x:206.5,y:466.45}]},{id:"A4",x:641.75,y:430.75,arr:[{x:1072.45,y:466.45},{x:1007.45,y:476.45},{x:940.45,y:486.45},{x:873.45,y:493.45},{x:807.45,y:501.45},{x:741.45,y:505.45},{x:673.45,y:507.45}]},{id:"A1_1",x:980.2,y:478.8},{id:"A1_2",x:845.2,y:501.5},{id:"A1_3",x:707.65,y:517.3},{id:"A1_5",x:563.7,y:525.25},{id:"A1_6",x:412.95,y:517.25},{id:"A1_7",x:262.65,y:501.25},{id:"A1_8",x:115.05,y:478.8},{id:"A2_1",x:1015.2,y:543.8},{id:"A2_2",x:865.1,y:570.1},{id:"A2_3",x:714.4,y:587.65},{id:"A2_5",x:556.5,y:596.3},{id:"A2_6",x:391.85,y:587.45},{id:"A2_7",x:227.6,y:569.8},{id:"A2_8",x:69.2,y:543.65}];for(var i=0;i<settings.length;i++){settings[i].url="SEVEN_UP_7s_"+settings[i].id+".png";}
this.bet2DSetting=settings;};BetArea.prototype.onBetRightClick=function(hit){if(hit['seatId']>0&&hit['seatId']!=this.seatId)
return;_super.prototype.onBetRightClick.call(this,hit);};BetArea.prototype.initJson=function(){var url=game.GlobalVals.viewMode==game.ViewMode.MODE_7S?"assets/seven_up/7s/bet_area.json":"assets/seven_up/7s_3d/bet_area.json";this.updateJson(url);};BetArea.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}};BetArea.prototype.initBetCon=function(settings){if(settings===void 0){settings=null;}
_super.prototype.initBetCon.call(this,settings);};BetArea.prototype.initChipCon=function(){_super.prototype.initChipCon.call(this);for(var i=1;i<=8;i++){if(i==4)
continue;this.betPlaceMap['A1_'+i].seatId=i;this.betPlaceMap['A2_'+i].seatId=i;this.betPlaceMap['A1_'+i].betHit.seatId=i;this.betPlaceMap['A2_'+i].betHit.seatId=i;}
for(var s in this.betPlaceMap){if(this.betPlaceMap[s]instanceof Array){for(var j=0;j<this.betPlaceMap[s].length;j++){this.betPlaceMap[s][j].scale.x=0.9;this.betPlaceMap[s][j].scale.y=this.betPlaceMap[s][j].scale.x;}}
else{this.betPlaceMap[s].scale.x=0.9;this.betPlaceMap[s].scale.y=this.betPlaceMap[s].scale.x;}}};BetArea.prototype.updateText=function(){var viewMode=game.GlobalVals.viewMode;var betAreaText=this.betAreaText;betAreaText.texture=this.gameModel.resources[(viewMode!=game.ViewMode.MODE_2D?viewMode+"_":"")+'bet_area_text_'+game.GameUtils.getColor(this.gameModel.TABLE_ID)].texture;betAreaText.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;betAreaText.scale.y=betAreaText.scale.x;switch(viewMode){case game.ViewMode.MODE_7S:betAreaText.x=69;betAreaText.y=393;break;case game.ViewMode.MODE_7S_3D:break;}};BetArea.prototype.changeView=function(){var viewMode=game.GlobalVals.viewMode;var url=viewMode==game.ViewMode.MODE_7S?"assets/seven_up/7s/bet_area.json":"assets/seven_up/7s_3d/bet_area.json";this.updateJson(url);var vSetting=viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.updateBetConSettings.call(this,vSetting);this.updateText();_super.prototype.changeView.call(this);};return BetArea;}(seven_up.BetArea));seven_up_7s.BetArea=BetArea;})(seven_up_7s||(seven_up_7s={}));var seven_up_7s;(function(seven_up_7s){var CardControl=(function(_super){__extends(CardControl,_super);function CardControl(gameModel){return _super.call(this,gameModel)||this;}
return CardControl;}(seven_up.CardControl));seven_up_7s.CardControl=CardControl;})(seven_up_7s||(seven_up_7s={}));var seven_up_7s;(function(seven_up_7s){var ChipControl=(function(_super){__extends(ChipControl,_super);function ChipControl(gameModel){return _super.call(this,gameModel)||this;}
return ChipControl;}(baccarat_7s.ChipControl));seven_up_7s.ChipControl=ChipControl;})(seven_up_7s||(seven_up_7s={}));var seven_up_7s;(function(seven_up_7s){var GameHUD=(function(_super){__extends(GameHUD,_super);function GameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameHUD.prototype.initView=function(){_super.prototype.initView.call(this);this.settingCon=new seven_up_7s.Sev7sSettingContainer(this.gameModel);this.settingCon.x=0;this.settingCon.y=581;this.addChild(this.settingCon);this.gameInfoCon=new seven_up_7s.GameInfoCon(this.gameModel);this.addChild(this.gameInfoCon);};GameHUD.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:this.settingCon.x=12;this.settingCon.y=730;this.gameInfoCon.expand();this.gameInfoCon.resizeBtn.visible=false;this.settingCon.livePoolBtn.visible=false;break;case game.ViewMode.MODE_7S_3D:break;}};GameHUD.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameHUD;}(game.BaseGameHUD));seven_up_7s.GameHUD=GameHUD;})(seven_up_7s||(seven_up_7s={}));var seven_up_7s;(function(seven_up_7s){var GameInfoCon=(function(_super){__extends(GameInfoCon,_super);function GameInfoCon(gameModel){return _super.call(this,gameModel)||this;}
GameInfoCon.prototype.initGameDetailCon=function(){this.gameDetailCon=new seven_up_7s.Sev7sDetailCon(this.gameModel);this.addChild(this.gameDetailCon);this.gameDetailCon.y=90;};return GameInfoCon;}(game.BaseGameInfoCon));seven_up_7s.GameInfoCon=GameInfoCon;})(seven_up_7s||(seven_up_7s={}));var seven_up_7s;(function(seven_up_7s){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.initialize=function(){this.baseInitialize();this.vodBg=new PIXI.Graphics();this.vodBg.beginFill(0x000000);this.vodBg.drawRect(0,0,512,309);this.vodBg.x=this.gameModel.VOD_X;this.vodBg.y=this.gameModel.VOD_Y;this.vodBg.endFill();this.initTrends();this.chipControl=new seven_up_7s.ChipControl(this.gameModel);this.chipControl.x=907;this.chipControl.y=591;this.chipControl.dissable();this.gameModel.chipControl=this.chipControl;this.betArea=new seven_up_7s.BetArea(this.gameModel,this.betInput);this.betArea.dissable();this.addChild(this.betArea);this.seatControl=new seven_up_7s.SeatControl(this.gameModel);this.addChild(this.seatControl);this.betControl=new game.BetControl(this.gameModel);this.betControl.x=477;this.betControl.y=580;this.betControl.hide();this.cardControl=new seven_up_7s.CardControl(this.gameModel);this.addChild(this.cardControl);this.addChild(this.betControl);this.addChild(this.chipControl);_super.prototype.initCountDown.call(this);this.countdown.x=640;this.countdown.y=383;this.gameResult=(new seven_up.GameResult(this.gameModel));this.addChild(this.gameResult);this.cardControl.dealCard('A7',0,false);this.gameHUD=new seven_up_7s.GameHUD(this.gameModel);this.addChild(this.gameHUD);this.setChildIndex(this.overlay,this.children.length-1);this.gameModel.dispatcher.addEventListener(GameEvent.TREND_EXPAND,this.onTrendExpand,this);this.initSuper7Panel();this.updateView();};GameView.prototype.onTrendExpand=function(e){var trend=e.data;};GameView.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}};GameView.prototype.activeSuperHand=function(isSupper){};GameView.prototype.updateVodView=function(){if(!this.vodInited)
return;var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:this.gameModel.VOD_WIDTH=511;this.gameModel.VOD_HEIGHT=311;this.gameModel.VOD_X=386;this.gameModel.VOD_Y=3;this.processVodLoadMediaData();break;case game.ViewMode.MODE_7S_3D:break;}
this.sizeHandler();};GameView.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;this.updateVodView();switch(viewMode){case game.ViewMode.MODE_7S:this.chipControl.x=915.95;this.chipControl.y=741;this.betControl.x=483;this.betControl.y=730;this.cardControl.visible=true;this.bg.y=0;if(this.gameModel.TABLE_ID)
this.bg.texture=this.gameModel.resources['table_bg_'+game.GameUtils.getColor(this.gameModel.TABLE_ID)].texture;this.betArea.collectWinPos.x=115;this.betArea.collectWinPos.y=722;this.betInput.x=507;this.betInput.y=732;this.infoIcon.x=1064.45;this.infoIcon.y=432;break;case game.ViewMode.MODE_7S_3D:break;}};GameView.prototype.changeView=function(){this.updateView();this.gameResult.changeView();_super.prototype.changeView.call(this);};return GameView;}(seven_up.GameView));seven_up_7s.GameView=GameView;})(seven_up_7s||(seven_up_7s={}));var seven_up_7s;(function(seven_up_7s){var SeatControl=(function(_super){__extends(SeatControl,_super);function SeatControl(gameModel){return _super.call(this,gameModel)||this;}
SeatControl.prototype.initialize=function(playerInfoW,playerInfoH){if(playerInfoW===void 0){playerInfoW=120;}
if(playerInfoH===void 0){playerInfoH=40;}
_super.prototype.initialize.call(this,playerInfoW,playerInfoH);var settings=[{x:1128.7,y:641.7},{x:957.3,y:668.9},{x:785.85,y:683},{x:612.65,y:687.35},{x:440.35,y:681.6},{x:268.35,y:667.05},{x:97,y:642.6}];this.updateView(settings);};return SeatControl;}(game.BaseSeatControl));seven_up_7s.SeatControl=SeatControl;})(seven_up_7s||(seven_up_7s={}));var seven_up_7s;(function(seven_up_7s){var Sev7sDetailCon=(function(_super){__extends(Sev7sDetailCon,_super);function Sev7sDetailCon(gameModel){return _super.call(this,gameModel)||this;}
Sev7sDetailCon.prototype.destructor=function(){this.tabMng.removeEventListener(component.VTabMng.CHANGE,this.onChange,this);_super.prototype.destructor.call(this);};Sev7sDetailCon.prototype.initView=function(){this.viewW=379;this.viewH=157;this.contentY=27;var w=this.viewW;var h=this.viewH;var contentY=this.contentY;var limitBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('limit_icon0001.png'),PIXI.Texture.fromFrame('limit_icon0002.png')]);var livePoolBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('livepool_icon0001.png'),PIXI.Texture.fromFrame('livepool_icon0002.png')]);var trendBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('trend_icon0001.png'),PIXI.Texture.fromFrame('trend_icon0002.png')]);game.GameUtils.resizeNodeH(limitBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(livePoolBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(trendBtn,game.StyleMng.INFO_TAB_BTN_SIZE);this.gameModel.toolTip.addToolTip(limitBtn,game.GameText.LIMITS);this.gameModel.toolTip.addToolTip(livePoolBtn,game.GameText.LIVE_POOL);this.gameModel.toolTip.addToolTip(trendBtn,game.GameText.TREND_CHANGE_TABLE_TOOLTIP.replace('{0} ','').replace('{0}',''));this.trendBtn=trendBtn;var btns=[limitBtn,livePoolBtn,trendBtn];this.btns=btns;for(var i=0;i<btns.length;i++){this.addChild(btns[i]);btns[i].buttonMode=true;btns[i].gotoAndStop(1);btns[i].x=(btns[i].width+1)*i;}
this.limitDetail=new seven_up.GenLimitDetail(this.gameModel,w,h);this.limitDetail.y=contentY;this.addChild(this.limitDetail);this.livePoolDetail=new seven_up.GenLivePoolDetail(this.gameModel,w,h);this.livePoolDetail.y=contentY;this.addChild(this.livePoolDetail);this.trendDetail=new seven_up_7s.TrendDetail(this.gameModel,w,h);this.trendDetail.y=-90;this.addChild(this.trendDetail);var contents=[this.limitDetail,this.livePoolDetail,this.trendDetail];var tabMng=new component.VTabMng();tabMng.initialize(btns,contents);tabMng.addEventListener(component.VTabMng.CHANGE,this.onChange,this);this.tabMng=tabMng;var expandBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_expand0001.png'),PIXI.Texture.fromFrame('info_pane_expand0002.png')],this.onExpand.bind(this));expandBtn.x=this.viewW-expandBtn.width;var conllapseBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_collapse0001.png'),PIXI.Texture.fromFrame('info_pane_collapse0002.png')],this.onCollapse.bind(this));conllapseBtn.x=this.viewW-conllapseBtn.width;var resizeBtn=new component.VToggleButton(expandBtn,conllapseBtn);this.addChild(resizeBtn);resizeBtn.y=this.contentY+this.viewH-resizeBtn.height;this.resizeBtn=resizeBtn;};Sev7sDetailCon.prototype.onChange=function(e){this.resizeBtn.visible=e.data!=this.trendBtn;};Sev7sDetailCon.prototype.onTableLimit=function(){};return Sev7sDetailCon;}(game.GameDetailCon));seven_up_7s.Sev7sDetailCon=Sev7sDetailCon;})(seven_up_7s||(seven_up_7s={}));var seven_up_7s;(function(seven_up_7s){var Sev7sSettingContainer=(function(_super){__extends(Sev7sSettingContainer,_super);function Sev7sSettingContainer(gameModel){var _this=_super.call(this,gameModel)||this;_this.btn7s.visible=false;_this.roomCon=new game.SelectRoomCon(_this.gameModel);_this.roomCon.x=_this.btn7s.x;_this.addChild(_this.roomCon);_this.roomCon.initialize(7);return _this;}
Sev7sSettingContainer.prototype.destructor=function(){_super.prototype.destructor.call(this);};return Sev7sSettingContainer;}(game.SettingContainer));seven_up_7s.Sev7sSettingContainer=Sev7sSettingContainer;})(seven_up_7s||(seven_up_7s={}));var seven_up_7s;(function(seven_up_7s){var TrendDetail=(function(_super){__extends(TrendDetail,_super);function TrendDetail(gameModel,viewW,viewH){var _this=_super.call(this,gameModel)||this;var bg=new PIXI.Graphics();bg.beginFill(0xFFF5E9);bg.drawRect(0,117,viewW,viewH);bg.endFill();_this.addChild(bg);var content=new PIXI.Container();_this.addChild(content);_this.content=content;_this.gameModel.dispatcher.addEventListener(game.GameEvent.TREND_EXPAND,_this.onTrendExpand,_this);return _this;}
TrendDetail.prototype.addTrends=function(trendMng){var content=this.content;content.addChild(trendMng.bigEyeTrend);content.addChild(trendMng.smallTrend);content.addChild(trendMng.cockRoachTrend);};TrendDetail.prototype.onTrendExpand=function(e){var trend=e.data;if(trend.expandBtn.currentFrame==0){trend.setBgAlpha(0.7);if(this.expandedTrend){this.expandedTrend.collapse();this.expandedTrend.setBgAlpha(1);}
this.expandedTrend=trend;}
else{trend.setBgAlpha(1);this.expandedTrend=null;}};return TrendDetail;}(game.GameObject));seven_up_7s.TrendDetail=TrendDetail;})(seven_up_7s||(seven_up_7s={}));var seven_up_7s;(function(seven_up_7s){var TrendMng=(function(_super){__extends(TrendMng,_super);function TrendMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
TrendMng.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:var maxView=new PIXI.Rectangle(384.6,129.55,511,138);this.normalTrend.setSmallView(new PIXI.Rectangle(923+18,34,270-18,92));this.normalTrend.setMaxView(maxView);this.pearlRoadTrend.setSmallView(new PIXI.Rectangle(923+18,130,270-18,92));this.pearlRoadTrend.setMaxView(maxView);this.bigEyeTrend.setSmallView(new PIXI.Rectangle(3,120,372,50));this.bigEyeTrend.setMaxView(maxView);this.removeChild(this.bigEyeTrend);this.smallTrend.setSmallView(new PIXI.Rectangle(3,this.bigEyeTrend.y+this.bigEyeTrend.viewH+1,372,50));this.smallTrend.setMaxView(maxView);this.removeChild(this.smallTrend);this.cockRoachTrend.setSmallView(new PIXI.Rectangle(3,this.smallTrend.y+this.smallTrend.viewH+1,372,50));this.cockRoachTrend.setMaxView(maxView);this.removeChild(this.cockRoachTrend);this.pearViewBtn.x=902;this.pearViewBtn.y=this.pearlRoadTrend.y+4+52;this.iconCount.x=932+18;this.iconCount.y=248;this.predict.x=0;this.predict.y=0;this.predict.banker.x=1200;this.predict.banker.y=this.normalTrend.y;this.predict.player.x=1200;this.predict.player.y=this.pearlRoadTrend.y;this.predict.resizeBtns(22,this.normalTrend.viewH);this.bg.clear();this.bg.lineStyle(1,0x1F1F1F);this.bg.beginFill(0x1F1F1F);this.bg.drawRect(0,0,330,250);this.bg.endFill();this.bg.x=900;this.bg.y=30;this.tableBtnCon.x=902;this.tableBtnCon.y=33;this.iconCount.scale.x=1;this.iconCount.scale.y=this.iconCount.scale.x;this.changeColorBtn.x=902;this.changeColorBtn.y=156.05+52;break;case game.ViewMode.MODE_7S_3D:break;}};TrendMng.prototype.onExpandBtn=function(e){};return TrendMng;}(seven_up.TrendMng));seven_up_7s.TrendMng=TrendMng;})(seven_up_7s||(seven_up_7s={}));var fabulous;(function(fabulous){var Game=(function(_super){__extends(Game,_super);function Game(){return _super.call(this)||this;}
Game.prototype.destructor=function(){_super.prototype.destructor.call(this);};Game.prototype.initialize=function(tableId,resources){this.resetGameResultDelay=1500;this.clearTimeoutIds=[];this.dealTimeoutIds=[];this.gameModel.GAME_ID=game.GameID.FABULOUS;_super.prototype.initialize.call(this,tableId,resources);var str="1 10001,2 10002,3 10003,4 10015,5 10016,6 10013,7 10014";var arr=str.split(',');var betLimitIdMap={};for(var i=0;i<arr.length;i++){var arr2=arr[i].split(' ');betLimitIdMap[arr2[0]]=arr2[1];}
this.gameModel.betLimitIdMap=betLimitIdMap;return this;};Game.prototype.onBetCountDownComplete=function(){_super.prototype.onBetCountDownComplete.call(this);this.gameView.showStatus(game.GameText.WAIT_CARD_DEAL);};Game.prototype.onStopBet=function(){_super.prototype.onStopBet.call(this);this.gameView.gameResult.banker.visible=true;this.gameView.gameResult.player.visible=true;};Game.prototype.resetGameResult=function(){_super.prototype.resetGameResult.call(this);this.gameView.gameResult.banker.visible=false;this.gameView.gameResult.player.visible=false;};Game.prototype.startGame=function(){_super.prototype.startGame.call(this);};Game.prototype.initView=function(){this.gameView=new fabulous.GameView(this.gameModel);this.addChild(this.gameView);};Game.prototype.onAuthSuccess=function(){_super.prototype.onAuthSuccess.call(this);};Game.prototype.onWSOpenHdl=function(){_super.prototype.onWSOpenHdl.call(this);};Game.prototype.onWSCloseHdl=function(){_super.prototype.onWSCloseHdl.call(this);};Game.prototype.onGameEvent=function(e){_super.prototype.onGameEvent.call(this,e);};return Game;}(game.BaseGame));fabulous.Game=Game;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var BetArea=(function(_super){__extends(BetArea,_super);function BetArea(gameModel,input){return _super.call(this,gameModel,input)||this;}
BetArea.prototype.initSettings=function(){_super.prototype.initSettings.call(this);this.initLiveChipSettings();this.initBetSettings();};BetArea.prototype.initLiveChipSettings=function(){var settings={};settings['2']={totalPos:new PIXI.Point(456.9,466.9),arr:[new PIXI.Point(422.25,497.9),new PIXI.Point(436.75,493.4),new PIXI.Point(425,483.95),new PIXI.Point(440.15,481.2),new PIXI.Point(451.1,487.2)]};settings['1']={totalPos:new PIXI.Point(781.4,466.45),arr:[new PIXI.Point(834.75,493.7),new PIXI.Point(849.5,498.7),new PIXI.Point(845.5,485),new PIXI.Point(821.85,487.15),new PIXI.Point(831.85,481.5)]};settings['3']={totalPos:new PIXI.Point(688.55,470.2),arr:[new PIXI.Point(657.4,501.45),new PIXI.Point(673.4,504.95),new PIXI.Point(664.15,494.75),new PIXI.Point(678.5,493.5),new PIXI.Point(688.15,499.95)]};this.liveChip2DSetting=settings;};BetArea.prototype.initBetSettings=function(){var settings=[{id:"A2",x:388.8,y:481.7},{id:"A3",x:572,y:492.05},{id:"A1",x:710.95,y:481.7},{id:"A5",x:217.65,y:459.25},{id:"A4",x:867.6,y:459.25},{id:"A7",x:198.15,y:492.05},{id:"A6",x:880.4,y:492.05}];for(var i=0;i<settings.length;i++){settings[i].id=settings[i].id;settings[i].url="FAB_"+settings[i].id+".png";}
this.bet2DSetting=settings;};BetArea.prototype.initJson=function(){var url=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?"assets/fabulous/2d/bet_area.json":(game.GlobalVals.viewMode==game.ViewMode.MODE_3D?"assets/fabulous/3d/bet_area.json":"assets/fabulous/7s/bet_area.json");this.updateJson(url);};BetArea.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:this.liveChip3DSetting;_super.prototype.initLiveChip.call(this,vSetting);};BetArea.prototype.initBetCon=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.initBetCon.call(this,vSetting);};BetArea.prototype.updateText=function(){var viewMode=game.GlobalVals.viewMode;var betAreaText=this.betAreaText;betAreaText.texture=this.gameModel.resources[(viewMode!=game.ViewMode.MODE_2D?viewMode+"_":"")+'bet_area_text'].texture;betAreaText.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;betAreaText.scale.y=betAreaText.scale.x;switch(viewMode){case game.ViewMode.MODE_2D:betAreaText.x=195;betAreaText.y=393.8;break;case game.ViewMode.MODE_3D:break;}};BetArea.prototype.changeView=function(){var viewMode=game.GlobalVals.viewMode;var url=viewMode==game.ViewMode.MODE_2D?"assets/fabulous/2d/bet_area.json":(viewMode==game.ViewMode.MODE_3D?"assets/fabulous/3d/bet_area.json":"assets/fabulous/7s/bet_area.json");this.updateJson(url);var vSetting=viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.updateBetConSettings.call(this,vSetting);vSetting=viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:this.liveChip3DSetting;this.liveChipMng.updateView(vSetting);this.updateText();_super.prototype.changeView.call(this);};BetArea.prototype.onBetClick=function(hit){var id=hit['id'];if('A4A5'.indexOf(id)>=0){if(this.gameModel.game.getLastRound()>game.GameSettings.PAIR_MAX_ROUND){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.PAIR_FAB_MAX_ROUND_ALERT.replace('{0}',game.GameSettings.PAIR_MAX_ROUND.toString()));return;}}
_super.prototype.onBetClick.call(this,hit);};BetArea.prototype.rebet=function(){for(var i=0;i<this.savedBets.length;i++){var info=this.savedBets[i];var id='A'+info.betType;if('A4A5'.indexOf(id)>=0){if(this.gameModel.game.getLastRound()>game.GameSettings.PAIR_MAX_ROUND){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.PAIR_FAB_MAX_ROUND_ALERT.replace('{0}',game.GameSettings.PAIR_MAX_ROUND.toString()));return;}}}
_super.prototype.rebet.call(this);};BetArea.prototype.getBetName=function(betType){return game.GameText["Fabulous_"+betType];};return BetArea;}(game.BaseBetArea));fabulous.BetArea=BetArea;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var CardControl=(function(_super){__extends(CardControl,_super);function CardControl(gameModel){return _super.call(this,gameModel)||this;}
CardControl.prototype.initialize=function(){this.cardConfigs=new Array();var c0=new game.CardConfig();c0.x=510.2;c0.y=384.05;c0.vertices=[-0.2,0,71.4,0,67.2,76.8,-12.2,76.8];this.cardConfigs[0]=c0;var c1=new game.CardConfig();c1.x=694;c1.y=384.2;c1.vertices=[-0.2,0,71.4,0,83.1,76.8,3.95,76.8];this.cardConfigs[1]=c1;var c2=new game.CardConfig();c2.x=434.55;c2.y=384.05;c2.vertices=[0,0,71.4,0,59.7,76.8,-18,76.8];this.cardConfigs[2]=c2;var c3=new game.CardConfig();c3.x=768.7;c3.y=384.05;c3.vertices=[0,0,71.4,0,91.7,76.8,11.6,76.8];this.cardConfigs[3]=c3;var c4=new game.CardConfig();c4.x=324.6;c4.y=385.55;c4.vertices=[-0.2,0,104,0,91.6,50.95,-18.6,50.95];this.cardConfigs[4]=c4;var c5=new game.CardConfig();c5.x=846.35;c5.y=385.55;c5.vertices=[-0.2,0,108.2,0,127.8,51.95,12.2,51.95];this.cardConfigs[5]=c5;c0.uvs=[0,0,1,0,1,1,0,1];c1.uvs=c0.uvs.slice();c2.uvs=c0.uvs.slice();c3.uvs=c0.uvs.slice();c4.uvs=[1,0,1,1,0,1,0,0];c5.uvs=c4.uvs.slice();for(var i=0;i<this.cardConfigs.length;i++){this.cardConfigs[i].vertices=new Float32Array(this.cardConfigs[i].vertices);this.cardConfigs[i].uvs=new Float32Array(this.cardConfigs[i].uvs);}
this.cards=[null,null,null,null,null,null];};CardControl.prototype.dealCard=function(cardId,cardPos,animated){if(animated===void 0){animated=true;}
_super.prototype.dealCard.call(this,cardId,cardPos,animated);this.updateCardVals();};CardControl.prototype.clearCard=function(carPos){_super.prototype.clearCard.call(this,carPos);this.updateCardVals();};CardControl.prototype.clearAllCards=function(){_super.prototype.clearAllCards.call(this);this.updateCardVals();};CardControl.prototype.updateCardVals=function(){var gameResult=this.gameModel.gameView.gameResult;var bcards="";var pcards="";for(var i=0;i<this.cards.length;i++){if(!this.cards[i])
continue;if(i%2==0)
pcards+=this.cards[i]['cardId'];else
bcards+=this.cards[i]['cardId'];}
gameResult.setPlayerCard(gameResult.getCardVal(pcards));gameResult.setBankerCard(gameResult.getCardVal(bcards));};return CardControl;}(game.BaseCardControl));fabulous.CardControl=CardControl;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var ChipControl=(function(_super){__extends(ChipControl,_super);function ChipControl(gameModel){return _super.call(this,gameModel)||this;}
ChipControl.prototype.initChipPos=function(){this.updateChipPos(null);};ChipControl.prototype.initChips=function(schips,shownRange){_super.prototype.initChips.call(this,schips,shownRange);this.updateLeftRight();};ChipControl.prototype.updateLeftRight=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y-7;this.rightArrow.rotation=-10*Math.PI/180;break;case game.ViewMode.MODE_3D:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y;this.rightArrow.rotation=0;break;}};ChipControl.prototype.updateChipPos=function(chipsPos){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.chipsPos=[new PIXI.Point(-52.35,1.85),new PIXI.Point(0.05,0.65),new PIXI.Point(51.05,-1.55),new PIXI.Point(102.15,-5.2),new PIXI.Point(154.85,-10.95),new PIXI.Point(207.4,-19.4),new PIXI.Point(257.55,-28.45),new PIXI.Point(305.95,-38.85)];break;case game.ViewMode.MODE_3D:this.chipsPos=[new PIXI.Point(-52.25,0.55),new PIXI.Point(-0.6,0.55),new PIXI.Point(51.05,0.55),new PIXI.Point(102.7,0.55),new PIXI.Point(154.35,0.55),new PIXI.Point(206,0.55),new PIXI.Point(257.65,0.55),new PIXI.Point(309.3,0.55)];break;}
_super.prototype.updateChipPos.call(this,this.chipsPos);};ChipControl.prototype.changeView=function(){this.updateChipPos(null);this.updateLeftRight();this.drawMasker();_super.prototype.changeView.call(this);};return ChipControl;}(game.BaseChipControl));fabulous.ChipControl=ChipControl;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var FabGameView=(function(_super){__extends(FabGameView,_super);function FabGameView(gameModel){return _super.call(this,gameModel)||this;}
FabGameView.prototype.onShowInfo=function(e){this.activePopup=this.infoPopups[e.target.tag];this.activePopup.show();this.activePopup.x=e.target.x-this.activePopup.viewW*0.5+2;this.activePopup.y=e.target.y-this.activePopup.viewH-3;};FabGameView.prototype.createFabulousPairPopup=function(){var popup=new fabulous.BankerFabulousPairPopup(null);popup.hide();this.gameModel.overlay.addChild(popup);return popup;};FabGameView.prototype.createFabulousRulePopup=function(){var popup=new fabulous.FabulousRulePopup(null);popup.hide();this.gameModel.overlay.addChild(popup);return popup;};FabGameView.prototype.createFabulousBankerPopup=function(){var popup=new fabulous.BankerPopup(null);popup.hide();this.gameModel.overlay.addChild(popup);return popup;};FabGameView.prototype.createFabulousPlayerPopup=function(){var popup=new fabulous.PlayerPopup(null);popup.hide();this.gameModel.overlay.addChild(popup);return popup;};FabGameView.prototype.onHideInfo=function(){if(this.activePopup)
this.activePopup.hide();};return FabGameView;}(game.BaseGameViewGroup1));fabulous.FabGameView=FabGameView;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var FBetType=(function(){function FBetType(){}
FBetType.getResult=function(type,src){if(src===void 0){src='0000000';}
return src.substring(0,type-1)+'1'+src.substring(type,7);};FBetType.BANKER=1;FBetType.PLAYER=2;FBetType.TIE=3;FBetType.BANKER_FABULOUS_PAIR=4;FBetType.PLAYER_FABULOUS_PAIR=5;FBetType.BANKER_FABULOUS_4=6;FBetType.PLAYER_FABULOUS_4=7;return FBetType;}());fabulous.FBetType=FBetType;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var GameHUD=(function(_super){__extends(GameHUD,_super);function GameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameHUD.prototype.initView=function(){_super.prototype.initView.call(this);this.settingCon=new game.SettingContainer(this.gameModel);this.settingCon.x=0;this.settingCon.y=581;this.addChild(this.settingCon);this.gameInfoCon=new fabulous.GameInfoCon(this.gameModel);this.addChild(this.gameInfoCon);};GameHUD.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.settingCon.x=0;this.settingCon.y=580;this.gameInfoCon.expand();this.gameInfoCon.resizeBtn.visible=false;break;case game.ViewMode.MODE_3D:this.settingCon.x=0;this.settingCon.y=632;this.gameInfoCon.collapse();this.gameInfoCon.resizeBtn.visible=true;break;}};GameHUD.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameHUD;}(game.BaseGameHUD));fabulous.GameHUD=GameHUD;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var GenGameDetailCon=(function(_super){__extends(GenGameDetailCon,_super);function GenGameDetailCon(){return _super!==null&&_super.apply(this,arguments)||this;}
GenGameDetailCon.prototype.initLimitDetail=function(){this.limitDetail=new fabulous.GenLimitDetail(this.gameModel,this.viewW,this.viewH);};GenGameDetailCon.prototype.initLivePoolDetail=function(){this.livePoolDetail=new fabulous.GenLivePoolDetail(this.gameModel,this.viewW,this.viewH);};return GenGameDetailCon;}(game.GameDetailCon));fabulous.GenGameDetailCon=GenGameDetailCon;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var GenLimitDetail=(function(_super){__extends(GenLimitDetail,_super);function GenLimitDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
GenLimitDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLimitDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();this.tfs=[];var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.BANKER+' / '+game.GameText.PLAYER,game.GameText.TIE,game.GameText.BANKER_FABULOUS_PAIR,game.GameText.PLAYER_FABULOUS_PAIR,game.GameText.BANKER_FABULOUS_4,game.GameText.PLAYER_FABULOUS_4];var posX=12;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;for(var i=0;i<texts.length;i++){tf=game.GameUtils.createText(texts[i],style);tf.x=posX;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};GenLimitDetail.prototype.setData=function(data){var limit=game.GameUtils.getBetLimit(data,10001);this.tfs[0].text=component.VComponentUtils.getNumInFormat(limit.min)+" - "+component.VComponentUtils.getNumInFormat(limit.max);limit=game.GameUtils.getBetLimit(data,10003);this.tfs[1].text=component.VComponentUtils.getNumInFormat(limit.min)+" - "+component.VComponentUtils.getNumInFormat(limit.max);limit=game.GameUtils.getBetLimit(data,10015);this.tfs[2].text=component.VComponentUtils.getNumInFormat(limit.min)+" - "+component.VComponentUtils.getNumInFormat(limit.max);this.tfs[3].text=component.VComponentUtils.getNumInFormat(limit.min)+" - "+component.VComponentUtils.getNumInFormat(limit.max);limit=game.GameUtils.getBetLimit(data,10013);this.tfs[4].text=component.VComponentUtils.getNumInFormat(limit.min)+" - "+component.VComponentUtils.getNumInFormat(limit.max);this.tfs[5].text=component.VComponentUtils.getNumInFormat(limit.min)+" - "+component.VComponentUtils.getNumInFormat(limit.max);};return GenLimitDetail;}(game.LimitDetail));fabulous.GenLimitDetail=GenLimitDetail;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var GenLivePoolDetail=(function(_super){__extends(GenLivePoolDetail,_super);function GenLivePoolDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
GenLivePoolDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLivePoolDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.BANKER,game.GameText.PLAYER,game.GameText.TIE,game.GameText.BANKER_FABULOUS_PAIR,game.GameText.PLAYER_FABULOUS_PAIR,game.GameText.BANKER_FABULOUS_4,game.GameText.PLAYER_FABULOUS_4];var results=[];results.push([fabulous.FBetType.getResult(fabulous.FBetType.BANKER),game.TrendType.NORMAL]);results.push([fabulous.FBetType.getResult(fabulous.FBetType.PLAYER),game.TrendType.NORMAL]);results.push([fabulous.FBetType.getResult(fabulous.FBetType.TIE),game.TrendType.NORMAL]);results.push([fabulous.FBetType.getResult(fabulous.FBetType.BANKER_FABULOUS_PAIR,fabulous.FBetType.getResult(fabulous.FBetType.BANKER)),game.TrendType.NORMAL]);results.push([fabulous.FBetType.getResult(fabulous.FBetType.PLAYER_FABULOUS_PAIR,fabulous.FBetType.getResult(fabulous.FBetType.PLAYER)),game.TrendType.NORMAL]);results.push([fabulous.FBetType.getResult(fabulous.FBetType.BANKER_FABULOUS_4,fabulous.FBetType.getResult(fabulous.FBetType.BANKER)),game.TrendType.FAB_4]);results.push([fabulous.FBetType.getResult(fabulous.FBetType.PLAYER_FABULOUS_4,fabulous.FBetType.getResult(fabulous.FBetType.PLAYER)),game.TrendType.FAB_4]);this.tfs=[];var posX=5;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;var icon;for(var i=0;i<texts.length;i++){icon=new fabulous.FabPearlIcon().setData(game.TrendIconUtils.NORMAL_SIZE);content.addChild(icon);icon.x=posX+icon.size*0.5;icon.y=posY+icon.size*0.5;icon.setType(results[i][1]);icon.drawResult(results[i][0]);tf=game.GameUtils.createText(texts[i],style);tf.x=posX+20;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};return GenLivePoolDetail;}(game.LivePoolDetail));fabulous.GenLivePoolDetail=GenLivePoolDetail;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var GameInfoCon=(function(_super){__extends(GameInfoCon,_super);function GameInfoCon(gameModel){return _super.call(this,gameModel)||this;}
GameInfoCon.prototype.initGameDetailCon=function(){this.gameDetailCon=new fabulous.GenGameDetailCon(this.gameModel);this.addChild(this.gameDetailCon);this.gameDetailCon.y=90;};return GameInfoCon;}(game.BaseGameInfoCon));fabulous.GameInfoCon=GameInfoCon;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var GameResult=(function(_super){__extends(GameResult,_super);function GameResult(gameModel){var _this=_super.call(this,gameModel,'banker','playerwin_yellow')||this;_this.playerCardVal['tf'].style.fill=0xFCC235;_this.updateView();return _this;}
GameResult.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.bankerCardVal.x=920;this.bankerCardVal.y=324;this.playerCardVal.x=306;this.playerCardVal.y=324;this.result1Tf.y=360;this.result2Tf.y=380+30;break;case game.ViewMode.MODE_3D:this.removeChild(this.banker);this.removeChild(this.player);this.bankerCardVal.x=920+50;this.bankerCardVal.y=450;this.playerCardVal.x=306-50;this.playerCardVal.y=450;this.result1Tf.y=360+100;this.result2Tf.y=380+30+100;break;}};GameResult.prototype.showResult=function(data){this.reset();var results=data.content.result;var cards=data.content.cards;if(results.charAt(game.BetType.BANKER-1)=='1')
this.banker.gotoAndStop(1);if(results.charAt(game.BetType.PLAYER-1)=='1')
this.player.gotoAndStop(1);var arr=cards.split('#');var bVal;var pVal;pVal=this.getCardVal(arr[0]);this.setPlayerCard(pVal);bVal=this.getCardVal(arr[1]);this.setBankerCard(bVal);if(results.charAt(fabulous.FBetType.BANKER-1)=='1')
this.result1Tf.text=game.GameText.BANKER;else if(results.charAt(fabulous.FBetType.PLAYER-1)=='1')
this.result1Tf.text=game.GameText.PLAYER;else if(results.charAt(fabulous.FBetType.TIE-1)=='1')
this.result1Tf.text=game.GameText.TIE;if(results.charAt(game.BetType.BANKER-1)=='1'){this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.BANKER_WIN_ON);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_point"+bVal);}
else if(results.charAt(game.BetType.PLAYER-1)=='1'){this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.PLAYER_WIN_ON);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_point"+pVal);}
else{this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.TIE_ON);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_point"+bVal);}};GameResult.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameResult;}(game.BaseGameResult));fabulous.GameResult=GameResult;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.initialize=function(){_super.prototype.initialize.call(this);this.bg.texture=this.gameModel.resources['table_bg_purple'].texture;this.vodBg=new PIXI.Graphics();this.vodBg.beginFill(0x000000);this.vodBg.drawRect(0,0,512,309);this.vodBg.x=this.gameModel.VOD_X;this.vodBg.y=this.gameModel.VOD_Y;this.vodBg.endFill();this.initTrends();this.chipControl=new fabulous.ChipControl(this.gameModel);this.chipControl.x=907;this.chipControl.y=591;this.chipControl.dissable();this.gameModel.chipControl=this.chipControl;var logo=new PIXI.Sprite();logo.texture=this.gameModel.resources[(game.GlobalVals.viewMode!=game.ViewMode.MODE_2D?game.GlobalVals.viewMode+"_":"")+'fabulous_logo'].texture;logo.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;logo.scale.y=logo.scale.x;this.addChild(logo);logo.x=44;logo.y=374;this.betArea=new fabulous.BetArea(this.gameModel,this.betInput);this.betArea.dissable();this.addChild(this.betArea);this.createInfoPopups();this.betControl=new game.BetControl(this.gameModel);this.betControl.x=477;this.betControl.y=580;this.betControl.hide();this.cardControl=new fabulous.CardControl(this.gameModel);this.addChild(this.cardControl);this.addChild(this.betControl);this.addChild(this.chipControl);_super.prototype.initCountDown.call(this);this.countdown.x=640;this.countdown.y=383;this.gameResult=(new fabulous.GameResult(this.gameModel));this.addChild(this.gameResult);this.gameHUD=new fabulous.GameHUD(this.gameModel);this.addChild(this.gameHUD);this.updateView();};GameView.prototype.createInfoPopups=function(){var pos=[new PIXI.Point(199.75,397),new PIXI.Point(394.75,479),new PIXI.Point(553.9,488),new PIXI.Point(852.25,480),new PIXI.Point(1027.8,457)];this.infoPopups=[this.createFabulousRulePopup(),this.createFabulousPairPopup(),this.createFabulousPlayerPopup(),this.createFabulousBankerPopup(),this.createFabulousPairPopup()];this.infoPopups[1].titleTf.text=game.GameText.PLAYER_FABULOUS_PAIR;for(var i=0;i<pos.length;i++){var btn=new PIXI.Graphics();btn.buttonMode=true;this.addChild(btn);btn.beginFill(0x0000ff);btn.drawRect(0,0,16,16);btn.endFill();btn.alpha=0;btn['tag']=i;btn.x=pos[i].x;btn.y=pos[i].y;if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(btn,component.VMouseUtils.MOUSE_OVER,this.onShowInfo,this);else
component.VMouseUtils.on(btn,component.VMouseUtils.MOUSE_UP,this.onShowInfo,this);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(btn,component.VMouseUtils.MOUSE_OUT,this.onHideInfo,this);else
component.VMouseUtils.on(btn,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.onHideInfo,this);}};GameView.prototype.activeSuperHand=function(isSupper){};GameView.prototype.updateVodView=function(){if(!this.vodInited)
return;var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.gameModel.VOD_WIDTH=511;this.gameModel.VOD_HEIGHT=311;this.gameModel.VOD_X=386;this.gameModel.VOD_Y=3;this.processVodLoadMediaData();break;case game.ViewMode.MODE_3D:this.gameModel.VOD_X=0;this.gameModel.VOD_Y=-140;this.gameModel.VOD_WIDTH=this.gameModel.GAME_WIDTH-2*this.gameModel.VOD_X;this.gameModel.VOD_HEIGHT=this.gameModel.GAME_HEIGHT;this.processVodLoadMediaData();break;}
this.sizeHandler();};GameView.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;this.updateVodView();switch(viewMode){case game.ViewMode.MODE_2D:this.chipControl.x=907;this.chipControl.y=591;this.betControl.x=477;this.betControl.y=580;this.cardControl.visible=true;this.bg.y=0;this.betArea.collectWinPos.x=138;this.betArea.collectWinPos.y=572;this.betInput.x=497+6;this.betInput.y=583;break;case game.ViewMode.MODE_3D:break;}};GameView.prototype.changeView=function(){this.updateView();this.gameResult.changeView();_super.prototype.changeView.call(this);};return GameView;}(fabulous.FabGameView));fabulous.GameView=GameView;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var BankerFabulousPairPopup=(function(_super){__extends(BankerFabulousPairPopup,_super);function BankerFabulousPairPopup(main){var _this=_super.call(this,main,210,150)||this;_this.closeBtn.visible=false;_this.titleTf.text=game.GameText.BANKER_FABULOUS_PAIR;_this.hasUnderlay=false;var table=new component.VTable(209,35,3,["",""],[4/5,1/5],"left",{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12},{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12,wordWrap:true},0x25221D,0x25221D,0x25221D);table.titleCon.visible=false;_this.addChild(table);table.setData(0,[game.GameText.SUITED_ONLY,LANG=='cs'?"11":"1:1"]);table.setData(1,[game.GameText.PAIR_ONLY,LANG=='cs'?"14":"4:1"]);table.setData(2,[game.GameText.SUITED_PAIR,LANG=='cs'?"17":"7:1"]);return _this;}
return BankerFabulousPairPopup;}(game.BasePopup));fabulous.BankerFabulousPairPopup=BankerFabulousPairPopup;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var BankerPopup=(function(_super){__extends(BankerPopup,_super);function BankerPopup(main){var _this=_super.call(this,main,280,160)||this;_this.closeBtn.visible=false;_this.titleTf.text=game.GameText.BANKER;_this.hasUnderlay=false;var table=new component.VTable(279,35,3,["",""],[4/6,2/6],"left",{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12},{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12,wordWrap:true},0x25221D,0x25221D,0x25221D);table.titleCon.visible=false;_this.addChild(table);table.setData(0,[game.GameText.BANKER_WINS_TOTAL_4,game.GameText.PUSH]);table.setData(1,[game.GameText.BANKER_WINS_TOTAL_1,LANG=='cs'?"12":"2:1"]);table.setData(2,[game.GameText.BANKER_WINS_EXCEPT_4_1,LANG=='cs'?"11":"1:1"]);return _this;}
return BankerPopup;}(game.BasePopup));fabulous.BankerPopup=BankerPopup;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var FabulousRulePopup=(function(_super){__extends(FabulousRulePopup,_super);function FabulousRulePopup(main){var _this=_super.call(this,main,365,370)||this;_this.closeBtn.visible=false;_this.titleTf.text=game.GameText.BACCARAT_FABULOUS;_this.hasUnderlay=false;var table=new component.VTable(366,30,11,["",""],[6/8,2/8],"left",{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12},{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12,wordWrap:true},0x25221D,0x25221D,0x25221D);table.titleCon.visible=false;_this.addChild(table);table.setData(0,[game.GameText.BANKER_WINS_TOTAL_4,game.GameText.PUSH]);table.setData(1,[game.GameText.BANKER_WINS_TOTAL_1,LANG=='cs'?"12":"2:1"]);table.setData(2,[game.GameText.BANKER_WINS_EXCEPT_4_1,LANG=='cs'?"11":"1:1"]);table.setData(3,[game.GameText.PLAYER_WINS_TOTAL_4,LANG=='cs'?"21":"1:2"]);table.setData(4,[game.GameText.PLAYER_WINS_TOTAL_1,LANG=='cs'?"12":"2:1"]);table.setData(5,[game.GameText.PLAYER_WINS_EXCEPT_4_1,LANG=='cs'?"11":"1:1"]);table.setData(5,[game.GameText.TIE,LANG=='cs'?"18":"8:1"]);table.setData(6,[game.GameText.SUITED_ONLY_2,LANG=='cs'?"11":"1:1"]);table.setData(7,[game.GameText.PAIR_ONLY_2,LANG=='cs'?"14":"4:1"]);table.setData(8,[game.GameText.SUITED_PAIR_2,LANG=='cs'?"17":"7:1"]);table.setData(9,[game.GameText.BANKER_FABULOUS_4,LANG=='cs'?"120":"20:1"]);table.setData(10,[game.GameText.PLAYER_FABULOUS_4,LANG=='cs'?"140":"40:1"]);return _this;}
return FabulousRulePopup;}(game.BasePopup));fabulous.FabulousRulePopup=FabulousRulePopup;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var PlayerPopup=(function(_super){__extends(PlayerPopup,_super);function PlayerPopup(main){var _this=_super.call(this,main,260,160)||this;_this.closeBtn.visible=false;_this.titleTf.text=game.GameText.PLAYER;_this.hasUnderlay=false;var table=new component.VTable(259,35,3,["",""],[4/5,1/5],"left",{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12},{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12,wordWrap:true},0x25221D,0x25221D,0x25221D);table.titleCon.visible=false;_this.addChild(table);table.setData(0,[game.GameText.PLAYER_WINS_TOTAL_4,LANG=='cs'?"21":"1:2"]);table.setData(1,[game.GameText.PLAYER_WINS_TOTAL_1,LANG=='cs'?"12":"2:1"]);table.setData(2,[game.GameText.PLAYER_WINS_EXCEPT_4_1,LANG=='cs'?"11":"1:1"]);return _this;}
return PlayerPopup;}(game.BasePopup));fabulous.PlayerPopup=PlayerPopup;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var FabIconCount=(function(_super){__extends(FabIconCount,_super);function FabIconCount(gameModel){return _super.call(this,gameModel)||this;}
FabIconCount.prototype.initialize=function(){this.tfs=[];this.icons=[];var results=[];results.push([fabulous.FBetType.getResult(fabulous.FBetType.BANKER),game.TrendType.NORMAL]);results.push([fabulous.FBetType.getResult(fabulous.FBetType.PLAYER),game.TrendType.NORMAL]);results.push([fabulous.FBetType.getResult(fabulous.FBetType.TIE),game.TrendType.NORMAL]);results.push([fabulous.FBetType.getResult(fabulous.FBetType.BANKER_FABULOUS_PAIR,fabulous.FBetType.getResult(fabulous.FBetType.BANKER)),game.TrendType.NORMAL]);results.push([fabulous.FBetType.getResult(fabulous.FBetType.PLAYER_FABULOUS_PAIR,fabulous.FBetType.getResult(fabulous.FBetType.PLAYER)),game.TrendType.NORMAL]);results.push([fabulous.FBetType.getResult(fabulous.FBetType.BANKER_FABULOUS_4,fabulous.FBetType.getResult(fabulous.FBetType.BANKER)),game.TrendType.FAB_4]);results.push([fabulous.FBetType.getResult(fabulous.FBetType.PLAYER_FABULOUS_4,fabulous.FBetType.getResult(fabulous.FBetType.PLAYER)),game.TrendType.FAB_4]);var dis=20;var posX=0;var icon;for(var i=0;i<results.length;i++){icon=new fabulous.FabPearlIcon().setData(16);icon.x=posX;posX+=dis;icon.setType(results[i][1]);icon.draw(new game.netdata.TrendsItem().setData(results[i][0]));var tf=game.GameUtils.createText('0',{fontFamily:"Arial",fontSize:12,fill:0xffffff,align:'center'});tf.anchor.x=0.5;tf.x=icon.x;tf.y=icon.y+8;this.tfs[i]=tf;this.icons[i]=icon;this.addChild(icon);this.addChild(tf);}
this.clear();};FabIconCount.prototype.clear=function(){for(var i=0;i<this.tfs.length;i++){this.tfs[i].text='0';}};FabIconCount.prototype.addTrend=function(item,isAnim){if(isAnim===void 0){isAnim=false;}
var ind=-1;if(item.result.charAt(fabulous.FBetType.BANKER-1)=='1')
ind=0;if(item.result.charAt(fabulous.FBetType.PLAYER-1)=='1')
ind=1;if(item.result.charAt(fabulous.FBetType.TIE-1)=='1')
ind=2;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(fabulous.FBetType.BANKER_FABULOUS_PAIR-1)=='1')
ind=3;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(fabulous.FBetType.PLAYER_FABULOUS_PAIR-1)=='1')
ind=4;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(fabulous.FBetType.BANKER_FABULOUS_4-1)=='1')
ind=5;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(fabulous.FBetType.PLAYER_FABULOUS_4-1)=='1')
ind=6;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}};return FabIconCount;}(game.IconCount));fabulous.FabIconCount=FabIconCount;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var FabTrendInfoPanel=(function(_super){__extends(FabTrendInfoPanel,_super);function FabTrendInfoPanel(gameModel){return _super.call(this,gameModel)||this;}
FabTrendInfoPanel.prototype.initIcons=function(){this.playerIcon=new fabulous.FabPearlIcon();this.playerIcon.drawResult(fabulous.FBetType.getResult(fabulous.FBetType.PLAYER));this.playerIcon.x=14;this.playerIcon.y=15;this.playerIcon.width=18;this.playerIcon.scale.y=this.playerIcon.scale.x;this.addChild(this.playerIcon);this.bankerIcon=new fabulous.FabPearlIcon();this.bankerIcon.drawResult(fabulous.FBetType.getResult(fabulous.FBetType.BANKER));this.bankerIcon.x=258;this.bankerIcon.y=15;this.bankerIcon.width=18;this.bankerIcon.scale.y=this.bankerIcon.scale.x;this.addChild(this.bankerIcon);};return FabTrendInfoPanel;}(game.TrendInfoPanel));fabulous.FabTrendInfoPanel=FabTrendInfoPanel;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var FabPearlIcon=(function(_super){__extends(FabPearlIcon,_super);function FabPearlIcon(){return _super.call(this)||this;}
FabPearlIcon.prototype.drawResult=function(result){this.clear();var results=result.split('');var win;if(results[game.BetType.BANKER-1]=='1')
win=1;if(results[game.BetType.PLAYER-1]=='1')
win=2;if(results[game.BetType.TIE-1]=='1')
win=3;var iconType="";if(this.type==game.TrendType.NORMAL){iconType=win==3?"result_solid_2":(win==1?"result_solid_0":"result_solid_1");}
else{if(results[fabulous.FBetType.BANKER_FABULOUS_4-1]=='1')
iconType='trend_fabulous4_banker';else if(results[fabulous.FBetType.PLAYER_FABULOUS_4-1]=='1')
iconType='trend_fabulous4_player';else
iconType=iconType=win==3?"result_solid_2":(win==1?"result_solid_0":"result_solid_1");}
this.createImg(iconType);this.drawPair(result);};return FabPearlIcon;}(game.PearlRoadIcon));fabulous.FabPearlIcon=FabPearlIcon;})(fabulous||(fabulous={}));var fabulous;(function(fabulous){var TrendMng=(function(_super){__extends(TrendMng,_super);function TrendMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
TrendMng.prototype.getBigBoardName=function(){return game.GameSettings.TABLE_INFOS[this.activeTableId].hint.toUpperCase();};TrendMng.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};TrendMng.prototype.initIconCount=function(){this.iconCount=new fabulous.FabIconCount(this.gameModel);};TrendMng.prototype.initNormmalContainer=function(){this.normalTrend=new game.TrendContainer(this.gameModel,game.TrendIcon,765,92,6,game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].hint.toUpperCase(),true);};TrendMng.prototype.initPearlRoad=function(){this.pearlRoadTrend=new game.PearlRoad(this.gameModel,fabulous.FabPearlIcon,300,92,6,game.GameText.PEARL_ROAD.toUpperCase(),true);};TrendMng.prototype.initPredict=function(){_super.prototype.initPredict.call(this);};TrendMng.prototype.initView=function(){this.pearlViewlTypes=[game.TrendType.NORMAL,game.TrendType.FAB_4];_super.prototype.initView.call(this);};TrendMng.prototype.initTrendInfoPanel=function(){this.trendInfoPanel=new fabulous.FabTrendInfoPanel(this.gameModel);};TrendMng.prototype.onTableBtn=function(e){};TrendMng.prototype.superOnTableBtn=function(e){_super.prototype.onTableBtn.call(this,e);};return TrendMng;}(game.BaseTrendMng));fabulous.TrendMng=TrendMng;})(fabulous||(fabulous={}));var fabulous_7s;(function(fabulous_7s){var Game=(function(_super){__extends(Game,_super);function Game(){return _super.call(this)||this;}
Game.prototype.destructor=function(){_super.prototype.destructor.call(this);};Game.prototype.initialize=function(tableId,resources){_super.prototype.initialize.call(this,tableId,resources);return this;};Game.prototype.initView=function(){this.gameView=new fabulous_7s.GameView(this.gameModel);this.addChild(this.gameView);};Game.prototype.startGame=function(){_super.prototype.startGame.call(this);};Game.prototype.onGameEvent=function(e){_super.prototype.onGameEvent.call(this,e);};return Game;}(fabulous.Game));fabulous_7s.Game=Game;})(fabulous_7s||(fabulous_7s={}));var fabulous_7s;(function(fabulous_7s){var BetArea=(function(_super){__extends(BetArea,_super);function BetArea(gameModel,input){return _super.call(this,gameModel,input)||this;}
BetArea.prototype.initSettings=function(){_super.prototype.initSettings.call(this);this.initBetSettings();};BetArea.prototype.initLiveChipSettings=function(){var settings={};};BetArea.prototype.initBetSettings=function(){var settings=[{id:"A3",x:144.45,y:466.55,arr:[{x:1060.3,y:504.2},{x:921.35,y:523.9},{x:780.55,y:536.45},{x:639.1,y:540.75},{x:497.9,y:538.75},{x:357.1,y:524.05},{x:217.9,y:504.25}]},{id:"A5",x:179.95,y:430.25},{id:"A7",x:406.5,y:462.8},{id:"A6",x:642.2,y:462.8},{id:"A4",x:862.15,y:430.25},{id:"A1_1",x:999.7,y:514.6},{id:"A1_2",x:855.8,y:538.6},{id:"A1_3",x:711.3,y:555.4},{id:"A1_5",x:561.45,y:563.7},{id:"A1_6",x:406.8,y:555.2},{id:"A1_7",x:252.75,y:538.3},{id:"A1_8",x:101.8,y:514.6},{id:"A2_1",x:1025.1,y:561.35},{id:"A2_2",x:871,y:588.4},{id:"A2_3",x:716.35,y:606.4},{id:"A2_5",x:556.4,y:615.25},{id:"A2_6",x:391.7,y:606.2},{id:"A2_7",x:227.65,y:588.1},{id:"A2_8",x:69.85,y:561.4}];for(var i=0;i<settings.length;i++){settings[i].id=settings[i].id;settings[i].url="FAB_7s_"+settings[i].id+".png";}
this.bet2DSetting=settings;};BetArea.prototype.onBetRightClick=function(hit){if(hit['seatId']>0&&hit['seatId']!=this.seatId)
return;_super.prototype.onBetRightClick.call(this,hit);};BetArea.prototype.onBetClick=function(hit){if(hit['seatId']>0&&hit['seatId']!=this.seatId)
return;var id=hit['id'];if('A4A5'.indexOf(id)>=0){if(this.gameModel.game.getLastRound()>game.GameSettings.PAIR_MAX_ROUND){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.PAIR_FAB_MAX_ROUND_ALERT.replace('{0}',game.GameSettings.PAIR_MAX_ROUND.toString()));return;}}
_super.prototype.onBetClick.call(this,hit);};BetArea.prototype.rebet=function(){for(var i=0;i<this.savedBets.length;i++){var info=this.savedBets[i];var id='A'+info.betType;if('A4A5'.indexOf(id)>=0){if(this.gameModel.game.getLastRound()>game.GameSettings.PAIR_MAX_ROUND){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.PAIR_FAB_MAX_ROUND_ALERT.replace('{0}',game.GameSettings.PAIR_MAX_ROUND.toString()));return;}}}
_super.prototype.rebet.call(this);};BetArea.prototype.initJson=function(){var url=game.GlobalVals.viewMode==game.ViewMode.MODE_7S?"assets/fabulous/7s/bet_area.json":"assets/fabulous/7s_3d/bet_area.json";this.updateJson(url);};BetArea.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}};BetArea.prototype.initBetCon=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_7S?this.bet2DSetting:this.bet3DSetting;_super.prototype.initBetCon.call(this,vSetting);};BetArea.prototype.initChipCon=function(){_super.prototype.initChipCon.call(this);for(var i=1;i<=8;i++){if(i==4)
continue;this.betPlaceMap['A1_'+i].seatId=i;this.betPlaceMap['A2_'+i].seatId=i;this.betPlaceMap['A1_'+i].betHit.seatId=i;this.betPlaceMap['A2_'+i].betHit.seatId=i;}
for(var s in this.betPlaceMap){if(this.betPlaceMap[s]instanceof Array){for(var j=0;j<this.betPlaceMap[s].length;j++){this.betPlaceMap[s][j].scale.x=0.9;this.betPlaceMap[s][j].scale.y=this.betPlaceMap[s][j].scale.x;}}
else{this.betPlaceMap[s].scale.x=0.9;this.betPlaceMap[s].scale.y=this.betPlaceMap[s].scale.x;}}};BetArea.prototype.updateText=function(){var viewMode=game.GlobalVals.viewMode;var betAreaText=this.betAreaText;betAreaText.texture=this.gameModel.resources[(viewMode!=game.ViewMode.MODE_2D?viewMode+"_":"")+'bet_area_text_blue'].texture;betAreaText.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;betAreaText.scale.y=betAreaText.scale.x;switch(viewMode){case game.ViewMode.MODE_7S:betAreaText.x=68.5;betAreaText.y=380.5;break;case game.ViewMode.MODE_7S_3D:break;}};BetArea.prototype.changeView=function(){var viewMode=game.GlobalVals.viewMode;var url=viewMode==game.ViewMode.MODE_7S?"assets/fabulous/7s/bet_area.json":"assets/fabulous/7s_3d/bet_area.json";this.updateJson(url);var vSetting=viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.updateBetConSettings.call(this,vSetting);this.updateText();_super.prototype.changeView.call(this);};BetArea.prototype.getBetName=function(betType){return game.GameText["Fabulous_"+betType];};return BetArea;}(game.BaseBetArea));fabulous_7s.BetArea=BetArea;})(fabulous_7s||(fabulous_7s={}));var fabulous_7s;(function(fabulous_7s){var CardControl=(function(_super){__extends(CardControl,_super);function CardControl(gameModel){return _super.call(this,gameModel)||this;}
return CardControl;}(fabulous.CardControl));fabulous_7s.CardControl=CardControl;})(fabulous_7s||(fabulous_7s={}));var fabulous_7s;(function(fabulous_7s){var ChipControl=(function(_super){__extends(ChipControl,_super);function ChipControl(gameModel){return _super.call(this,gameModel)||this;}
ChipControl.prototype.initChipPos=function(){this.updateChipPos(null);};ChipControl.prototype.initChips=function(schips,shownRange){_super.prototype.initChips.call(this,schips,shownRange);this.updateLeftRight();};ChipControl.prototype.updateLeftRight=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y-7;this.rightArrow.rotation=-10*Math.PI/180;break;case game.ViewMode.MODE_7S_3D:break;}};ChipControl.prototype.updateChipPos=function(chipsPos){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:this.chipsPos=[new PIXI.Point(-52.35,1.85),new PIXI.Point(0.05,0.65),new PIXI.Point(51.05,-1.55),new PIXI.Point(102.15,-5.2),new PIXI.Point(154.85,-10.95),new PIXI.Point(207.4,-19.4),new PIXI.Point(257.55,-28.45),new PIXI.Point(305.95,-38.85)];break;case game.ViewMode.MODE_7S_3D:break;}
_super.prototype.updateChipPos.call(this,this.chipsPos);};ChipControl.prototype.changeView=function(){this.updateChipPos(null);this.updateLeftRight();this.drawMasker();_super.prototype.changeView.call(this);};return ChipControl;}(game.BaseChipControl));fabulous_7s.ChipControl=ChipControl;})(fabulous_7s||(fabulous_7s={}));var fabulous_7s;(function(fabulous_7s){var Fab7sDetailCon=(function(_super){__extends(Fab7sDetailCon,_super);function Fab7sDetailCon(gameModel){return _super.call(this,gameModel)||this;}
Fab7sDetailCon.prototype.destructor=function(){this.tabMng.removeEventListener(component.VTabMng.CHANGE,this.onChange,this);_super.prototype.destructor.call(this);};Fab7sDetailCon.prototype.initView=function(){this.viewW=379;this.viewH=157;this.contentY=27;var w=this.viewW;var h=this.viewH;var contentY=this.contentY;var limitBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('limit_icon0001.png'),PIXI.Texture.fromFrame('limit_icon0002.png')]);var livePoolBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('livepool_icon0001.png'),PIXI.Texture.fromFrame('livepool_icon0002.png')]);var trendBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('trend_icon0001.png'),PIXI.Texture.fromFrame('trend_icon0002.png')]);game.GameUtils.resizeNodeH(limitBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(livePoolBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(trendBtn,game.StyleMng.INFO_TAB_BTN_SIZE);this.gameModel.toolTip.addToolTip(limitBtn,game.GameText.LIMITS);this.gameModel.toolTip.addToolTip(livePoolBtn,game.GameText.LIVE_POOL);this.gameModel.toolTip.addToolTip(trendBtn,game.GameText.TREND_CHANGE_TABLE_TOOLTIP.replace('{0} ','').replace('{0}',''));this.trendBtn=trendBtn;var btns=[limitBtn,livePoolBtn,trendBtn];this.btns=btns;for(var i=0;i<btns.length;i++){this.addChild(btns[i]);btns[i].buttonMode=true;btns[i].gotoAndStop(1);btns[i].x=(btns[i].width+1)*i;}
this.limitDetail=new fabulous.GenLimitDetail(this.gameModel,w,h);this.limitDetail.y=contentY;this.addChild(this.limitDetail);this.livePoolDetail=new fabulous.GenLivePoolDetail(this.gameModel,w,h);this.livePoolDetail.y=contentY;this.addChild(this.livePoolDetail);this.trendDetail=new fabulous_7s.TrendDetail(this.gameModel,w,h);this.trendDetail.y=-90;this.addChild(this.trendDetail);var contents=[this.limitDetail,this.livePoolDetail,this.trendDetail];var tabMng=new component.VTabMng();tabMng.initialize(btns,contents);tabMng.addEventListener(component.VTabMng.CHANGE,this.onChange,this);this.tabMng=tabMng;var expandBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_expand0001.png'),PIXI.Texture.fromFrame('info_pane_expand0002.png')],this.onExpand.bind(this));expandBtn.x=this.viewW-expandBtn.width;var conllapseBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_collapse0001.png'),PIXI.Texture.fromFrame('info_pane_collapse0002.png')],this.onCollapse.bind(this));conllapseBtn.x=this.viewW-conllapseBtn.width;var resizeBtn=new component.VToggleButton(expandBtn,conllapseBtn);this.addChild(resizeBtn);resizeBtn.y=this.contentY+this.viewH-resizeBtn.height;this.resizeBtn=resizeBtn;};Fab7sDetailCon.prototype.onChange=function(e){this.resizeBtn.visible=e.data!=this.trendBtn;};Fab7sDetailCon.prototype.onTableLimit=function(){};return Fab7sDetailCon;}(game.GameDetailCon));fabulous_7s.Fab7sDetailCon=Fab7sDetailCon;})(fabulous_7s||(fabulous_7s={}));var fabulous_7s;(function(fabulous_7s){var GameHUD=(function(_super){__extends(GameHUD,_super);function GameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameHUD.prototype.initView=function(){_super.prototype.initView.call(this);this.settingCon=new baccarat_7s.Bac7sSettingContainer(this.gameModel);this.settingCon.x=0;this.settingCon.y=581;this.addChild(this.settingCon);this.gameInfoCon=new fabulous_7s.GameInfoCon(this.gameModel);this.addChild(this.gameInfoCon);};GameHUD.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:this.settingCon.x=12;this.settingCon.y=730;this.gameInfoCon.expand();this.gameInfoCon.resizeBtn.visible=false;this.settingCon.livePoolBtn.visible=false;break;case game.ViewMode.MODE_7S_3D:break;}};GameHUD.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameHUD;}(game.BaseGameHUD));fabulous_7s.GameHUD=GameHUD;})(fabulous_7s||(fabulous_7s={}));var fabulous_7s;(function(fabulous_7s){var GameInfoCon=(function(_super){__extends(GameInfoCon,_super);function GameInfoCon(gameModel){return _super.call(this,gameModel)||this;}
GameInfoCon.prototype.initGameDetailCon=function(){this.gameDetailCon=new fabulous_7s.Fab7sDetailCon(this.gameModel);this.addChild(this.gameDetailCon);this.gameDetailCon.y=90;};return GameInfoCon;}(game.BaseGameInfoCon));fabulous_7s.GameInfoCon=GameInfoCon;})(fabulous_7s||(fabulous_7s={}));var fabulous_7s;(function(fabulous_7s){var GameResult=(function(_super){__extends(GameResult,_super);function GameResult(gameModel){return _super.call(this,gameModel)||this;}
GameResult.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:this.bankerCardVal.x=920;this.bankerCardVal.y=324;this.playerCardVal.x=306;this.playerCardVal.y=324;this.result1Tf.y=360;this.result2Tf.y=380+30;break;case game.ViewMode.MODE_7S_3D:break;}};GameResult.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameResult;}(fabulous.GameResult));fabulous_7s.GameResult=GameResult;})(fabulous_7s||(fabulous_7s={}));var fabulous_7s;(function(fabulous_7s){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.initialize=function(){_super.prototype.initialize.call(this);this.bg.texture=this.gameModel.resources['table_bg_purple'].texture;this.vodBg=new PIXI.Graphics();this.vodBg.beginFill(0x000000);this.vodBg.drawRect(0,0,512,309);this.vodBg.x=this.gameModel.VOD_X;this.vodBg.y=this.gameModel.VOD_Y;this.vodBg.endFill();this.initTrends();this.chipControl=new fabulous_7s.ChipControl(this.gameModel);this.chipControl.x=907;this.chipControl.y=591;this.chipControl.dissable();this.gameModel.chipControl=this.chipControl;this.betArea=new fabulous_7s.BetArea(this.gameModel,this.betInput);this.betArea.dissable();this.addChild(this.betArea);this.createInfoPopups();this.seatControl=new fabulous_7s.SeatControl(this.gameModel);this.addChild(this.seatControl);this.betControl=new game.BetControl(this.gameModel);this.betControl.x=477;this.betControl.y=580;this.betControl.hide();var logo=new PIXI.Sprite();logo.texture=this.gameModel.resources[(game.GlobalVals.viewMode!=game.ViewMode.MODE_2D?game.GlobalVals.viewMode+"_":"")+'fabulous_logo'].texture;logo.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;logo.scale.y=logo.scale.x;this.addChild(logo);logo.x=32;logo.y=352;this.cardControl=new fabulous_7s.CardControl(this.gameModel);this.addChild(this.cardControl);this.addChild(this.betControl);this.addChild(this.chipControl);_super.prototype.initCountDown.call(this);this.countdown.x=640;this.countdown.y=383;this.gameResult=(new fabulous_7s.GameResult(this.gameModel));this.addChild(this.gameResult);this.gameHUD=new fabulous_7s.GameHUD(this.gameModel);this.addChild(this.gameHUD);this.setChildIndex(this.overlay,this.children.length-1);this.updateView();this.gameModel.dispatcher.addEventListener(GameEvent.TREND_EXPAND,this.onTrendExpand,this);};GameView.prototype.createInfoPopups=function(){var pos=[new PIXI.Point(187.55,375),new PIXI.Point(398.85,460),new PIXI.Point(698.65,614),new PIXI.Point(693.5,561),new PIXI.Point(1069,429)];this.infoPopups=[this.createFabulousRulePopup(),this.createFabulousPairPopup(),this.createFabulousPlayerPopup(),this.createFabulousBankerPopup(),this.createFabulousPairPopup()];this.infoPopups[1].titleTf.text=game.GameText.PLAYER_FABULOUS_PAIR;for(var i=0;i<pos.length;i++){var btn=new PIXI.Graphics();btn.buttonMode=true;this.addChild(btn);btn.beginFill(0x0000ff);btn.drawRect(0,0,16,16);btn.endFill();btn.alpha=0;btn['tag']=i;btn.x=pos[i].x;btn.y=pos[i].y;if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(btn,component.VMouseUtils.MOUSE_OVER,this.onShowInfo,this);else
component.VMouseUtils.on(btn,component.VMouseUtils.MOUSE_UP,this.onShowInfo,this);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(btn,component.VMouseUtils.MOUSE_OUT,this.onHideInfo,this);else
component.VMouseUtils.on(btn,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.onHideInfo,this);}};GameView.prototype.onTrendExpand=function(e){var trend=e.data;};GameView.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}};GameView.prototype.activeSuperHand=function(isSupper){};GameView.prototype.updateVodView=function(){if(!this.vodInited)
return;var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:this.gameModel.VOD_WIDTH=511;this.gameModel.VOD_HEIGHT=311;this.gameModel.VOD_X=386;this.gameModel.VOD_Y=3;this.processVodLoadMediaData();break;case game.ViewMode.MODE_7S_3D:break;}
this.sizeHandler();};GameView.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;this.updateVodView();switch(viewMode){case game.ViewMode.MODE_7S:this.chipControl.x=915.95;this.chipControl.y=741;this.betControl.x=483;this.betControl.y=730;this.cardControl.visible=true;this.bg.y=0;if(this.gameModel.TABLE_ID)
this.bg.texture=this.gameModel.resources['table_bg_purple'].texture;this.betArea.collectWinPos.x=115;this.betArea.collectWinPos.y=722;this.betInput.x=507;this.betInput.y=732;break;case game.ViewMode.MODE_7S_3D:break;}};GameView.prototype.changeView=function(){this.updateView();this.gameResult.changeView();_super.prototype.changeView.call(this);};return GameView;}(fabulous.FabGameView));fabulous_7s.GameView=GameView;})(fabulous_7s||(fabulous_7s={}));var fabulous_7s;(function(fabulous_7s){var SeatControl=(function(_super){__extends(SeatControl,_super);function SeatControl(gameModel){return _super.call(this,gameModel)||this;}
SeatControl.prototype.initialize=function(playerInfoW,playerInfoH){if(playerInfoW===void 0){playerInfoW=120;}
if(playerInfoH===void 0){playerInfoH=40;}
_super.prototype.initialize.call(this,playerInfoW,playerInfoH);var settings=[{x:1128.7,y:641.7},{x:957.3,y:668.9},{x:785.85,y:683},{x:612.65,y:687.35},{x:440.35,y:681.6},{x:268.35,y:667.05},{x:97,y:642.6}];this.updateView(settings);};return SeatControl;}(game.BaseSeatControl));fabulous_7s.SeatControl=SeatControl;})(fabulous_7s||(fabulous_7s={}));var fabulous_7s;(function(fabulous_7s){var TrendDetail=(function(_super){__extends(TrendDetail,_super);function TrendDetail(gameModel,viewW,viewH){var _this=_super.call(this,gameModel)||this;var bg=new PIXI.Graphics();bg.beginFill(0xFFF5E9);bg.drawRect(0,117,viewW,viewH);bg.endFill();_this.addChild(bg);var content=new PIXI.Container();_this.addChild(content);_this.content=content;_this.gameModel.dispatcher.addEventListener(game.GameEvent.TREND_EXPAND,_this.onTrendExpand,_this);return _this;}
TrendDetail.prototype.addTrends=function(trendMng){var content=this.content;content.addChild(trendMng.bigEyeTrend);content.addChild(trendMng.smallTrend);content.addChild(trendMng.cockRoachTrend);};TrendDetail.prototype.onTrendExpand=function(e){var trend=e.data;if(trend.expandBtn.currentFrame==0){trend.setBgAlpha(0.7);if(this.expandedTrend){this.expandedTrend.collapse();this.expandedTrend.setBgAlpha(1);}
this.expandedTrend=trend;}
else{trend.setBgAlpha(1);this.expandedTrend=null;}};return TrendDetail;}(game.GameObject));fabulous_7s.TrendDetail=TrendDetail;})(fabulous_7s||(fabulous_7s={}));var fabulous_7s;(function(fabulous_7s){var TrendMng=(function(_super){__extends(TrendMng,_super);function TrendMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
TrendMng.prototype.initView=function(){this.pearlViewlTypes=[game.TrendType.NORMAL,game.TrendType.FAB_4,game.TrendType.FAB_4];_super.prototype.initView.call(this);};TrendMng.prototype.initIconCount=function(){this.iconCount=new fabulous.FabIconCount(this.gameModel);};TrendMng.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:var maxView=new PIXI.Rectangle(384.6,129.55,511,138);this.normalTrend.setSmallView(new PIXI.Rectangle(923+18,34,270-18,92));this.normalTrend.setMaxView(maxView);this.pearlRoadTrend.setSmallView(new PIXI.Rectangle(923+18,130,270-18,92));this.pearlRoadTrend.setMaxView(maxView);this.bigEyeTrend.setSmallView(new PIXI.Rectangle(3,120,372,50));this.bigEyeTrend.setMaxView(maxView);this.removeChild(this.bigEyeTrend);this.smallTrend.setSmallView(new PIXI.Rectangle(3,this.bigEyeTrend.y+this.bigEyeTrend.viewH+1,372,50));this.smallTrend.setMaxView(maxView);this.removeChild(this.smallTrend);this.cockRoachTrend.setSmallView(new PIXI.Rectangle(3,this.smallTrend.y+this.smallTrend.viewH+1,372,50));this.cockRoachTrend.setMaxView(maxView);this.removeChild(this.cockRoachTrend);this.pearViewBtn.x=902;this.pearViewBtn.y=this.pearlRoadTrend.y+4+52;this.iconCount.x=932+18;this.iconCount.y=248;this.predict.x=0;this.predict.y=0;this.predict.banker.x=1200;this.predict.banker.y=this.normalTrend.y;this.predict.player.x=1200;this.predict.player.y=this.pearlRoadTrend.y;this.predict.resizeBtns(22,this.normalTrend.viewH);this.bg.clear();this.bg.lineStyle(1,0x1F1F1F);this.bg.beginFill(0x1F1F1F);this.bg.drawRect(0,0,330,250);this.bg.endFill();this.bg.x=900;this.bg.y=30;this.tableBtnCon.x=902;this.tableBtnCon.y=33;this.iconCount.scale.x=1;this.iconCount.scale.y=this.iconCount.scale.x;this.changeColorBtn.x=902;this.changeColorBtn.y=156.05+52;break;case game.ViewMode.MODE_7S_3D:break;}};TrendMng.prototype.initPearlRoad=function(){this.pearlRoadTrend=new game.PearlRoad(this.gameModel,fabulous.FabPearlIcon,300,92,6,game.GameText.PEARL_ROAD.toUpperCase(),true);};TrendMng.prototype.onExpandBtn=function(e){};TrendMng.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};TrendMng.prototype.onTableBtn=function(e){};TrendMng.prototype.superOnTableBtn=function(e){_super.prototype.onTableBtn.call(this,e);};return TrendMng;}(game.BaseTrendMng));fabulous_7s.TrendMng=TrendMng;})(fabulous_7s||(fabulous_7s={}));var roulette;(function(roulette){var Game=(function(_super){__extends(Game,_super);function Game(){return _super.call(this)||this;}
Game.prototype.initialize=function(tableId,resources){this.resetGameResultDelay=1500;this.gameModel.GAME_ID=game.GameID.ROULETTE;_super.prototype.initialize.call(this,tableId,resources);var str="A1 10312,A2 10311,B1 10308,B2 10307,C1 10310,C2 10309,D1 10306,D2 10306,D3 10306,E1 10306,E2 10306,E3 10306,F0 10301,F1 10301,F2 10301,F3 10301,F4 10301,F5 10301,F6 10301,F7 10301,F8 10301,F9 10301,F10 10301,F11 10301,F12 10301,F13 10301,F14 10301,F15 10301,F16 10301,F17 10301,F18 10301,F19 10301,F20 10301,F21 10301,F22 10301,F23 10301,F24 10301,F25 10301,F26 10301,F27 10301,F28 10301,F29 10301,F30 10301,F31 10301,F32 10301,F33 10301,F34 10301,F35 10301,F36 10301,G1 10302,G2 10302,G3 10302,G4 10302,G5 10302,G6 10302,G7 10302,G8 10302,G9 10302,G10 10302,G11 10302,G12 10302,G13 10302,G14 10302,G15 10302,G16 10302,G17 10302,G18 10302,G19 10302,G20 10302,G21 10302,G22 10302,G23 10302,G24 10302,G25 10302,G26 10302,G27 10302,G28 10302,G29 10302,G30 10302,G31 10302,G32 10302,G33 10302,G34 10302,G35 10302,G36 10302,G37 10302,G38 10302,G39 10302,G40 10302,G41 10302,G42 10302,G43 10302,G44 10302,G45 10302,G46 10302,G47 10302,G48 10302,G49 10302,G50 10302,G51 10302,G52 10302,G53 10302,G54 10302,G55 10302,G56 10302,G57 10302,G58 10302,G59 10302,G60 10302,H1 10303,H2 10303,H3 10303,H4 10303,H5 10303,H6 10303,H7 10303,H8 10303,H9 10303,H10 10303,H11 10303,H12 10303,H13 10303,H14 10303,J1 10304,J2 10304,J3 10304,J4 10304,J5 10304,J6 10304,J7 10304,J8 10304,J9 10304,J10 10304,J11 10304,J12 10304,J13 10304,J14 10304,J15 10304,J16 10304,J17 10304,J18 10304,J19 10304,J20 10304,J21 10304,J22 10304,J23 10304,K1 10305,K2 10305,K3 10305,K4 10305,K5 10305,K6 10305,K7 10305,K8 10305,K9 10305,K10 10305,K11 10305";var arr=str.split(',');var betLimitIdMap={};for(var i=0;i<arr.length;i++){var arr2=arr[i].split(' ');betLimitIdMap[arr2[0]]=arr2[1];}
this.gameModel.betLimitIdMap=betLimitIdMap;return this;};Game.prototype.onBetCountDownComplete=function(){_super.prototype.onBetCountDownComplete.call(this);this.gameView.showStatus(game.GameText.WAIT_ROULETE_SPIN);};Game.prototype.startGame=function(){_super.prototype.startGame.call(this);};Game.prototype.initView=function(){this.gameView=new roulette.GameView(this.gameModel);this.addChild(this.gameView);};Game.prototype.onAuthSuccess=function(){_super.prototype.onAuthSuccess.call(this);};Game.prototype.onWSOpenHdl=function(){_super.prototype.onWSOpenHdl.call(this);};Game.prototype.onWSCloseHdl=function(){_super.prototype.onWSCloseHdl.call(this);};Game.prototype.onGameEvent=function(e){_super.prototype.onGameEvent.call(this,e);};return Game;}(game.BaseGame));roulette.Game=Game;})(roulette||(roulette={}));var roulette;(function(roulette){var BetArea=(function(_super){__extends(BetArea,_super);function BetArea(gameModel,input){var _this=_super.call(this,gameModel,input)||this;_this.autoSplit=false;_this.autoCorner=false;_this.autoStreet=false;_this.updateDummyBetPlaces();_this.swapChildren(_this.highlightCon,_this.betAreaText);_this.updateBetAttributes();_this.initSplitBtns();_this.marker=new PIXI.Sprite(PIXI.Texture.fromFrame('roulette_2d_marker.png'));_this.addChild(_this.marker);_this.marker.visible=false;_this.marker.anchor.x=0.5;_this.marker.anchor.y=0.5;return _this;}
BetArea.prototype.destructor=function(){TweenMax.killTweensOf(this.marker);_super.prototype.destructor.call(this);};BetArea.prototype.initSettings=function(){this.initidArr();_super.prototype.initSettings.call(this);this.initBetSettings();};BetArea.prototype.showWin=function(data){if(!data)
return;var num=parseInt(data.content.cards);var results=roulette.ResultType.getResultFromData(num).split('');var betPlace;var betType;var hit;var winArr=[];var betPlace;for(var i=0;i<this.betPlaceArr.length;i++){betPlace=this.betPlaceArr[i];if(betPlace.getAmount()==0)
continue;hit=betPlace.betHit;if(hit.id.charAt(0)=='F'){if(hit.id=='F'+num)
winArr.push(betPlace);continue;}
for(var j=0;j<hit.highlight.length;j++){if(hit.highlight[j].id=='F'+num){winArr.push(betPlace);break;}}}
for(var i=0;i<winArr.length;i++){this.playChipCollectAnim(winArr[i]);}
this.cleanTable();};BetArea.prototype.reset=function(){_super.prototype.reset.call(this);this.marker.visible=false;};BetArea.prototype.showResult=function(data){var num=parseInt(data.content.cards);this.marker.x=this.getBetPlace('F'+num).x;this.marker.y=this.getBetPlace('F'+num).y-30;TweenMax.to(this.marker,0.5,{y:this.getBetPlace('F'+num).y});this.marker.visible=true;this.hideHighlight();var betPlace;var hit;for(var i=0;i<this.betPlaceArr.length;i++){betPlace=this.betPlaceArr[i];hit=betPlace.betHit;if(!hit.winHL)
continue;if(hit.id.charAt(0)=='F'){if(hit.id=='F'+num)
hit.winHL.visible=true;continue;}
for(var j=0;j<hit.highlight.length;j++){if(hit.highlight[j].id=='F'+num){hit.winHL.visible=true;break;}}}};BetArea.prototype.initChipCon=function(){_super.prototype.initChipCon.call(this);var betPlace;for(var i in this.betPlaceMap){betPlace=this.betPlaceMap[i];betPlace.scale.x=0.85;betPlace.scale.y=betPlace.scale.x;var num=parseInt(betPlace.betHit.id.substr(1,betPlace.betHit.id.length));if(betPlace.betHit.id.charAt(0)=='F'&&num%3==0&&num>0)
betPlace.y+=5;if(betPlace.betHit.id.charAt(0)=='G'&&num%3==0&&num<=36)
betPlace.y+=5;}};BetArea.prototype.initidArr=function(){this.idArr=[];var ind=0;this.idArr[ind]=[];for(var i=3;i<=36;i+=3){this.idArr[ind].push("G"+i);this.idArr[ind].push("F"+i);}
ind++;this.idArr[ind]=['H2'];var i1=2;for(var i=38;i<=60;i+=2){this.idArr[ind].push("G"+i);if(i<60)
this.idArr[ind].push("J"+i1);i1+=2;}
ind++;this.idArr[ind]=[];for(var i=2;i<=36;i+=3){this.idArr[ind].push("G"+i);this.idArr[ind].push("F"+i);}
ind++;this.idArr[ind]=['H1'];i1=1;for(var i=37;i<=59;i+=2){this.idArr[ind].push("G"+i);if(i<59)
this.idArr[ind].push("J"+i1);i1+=2;}
ind++;this.idArr[ind]=[];for(var i=1;i<=34;i+=3){this.idArr[ind].push("G"+i);this.idArr[ind].push("F"+i);}
ind++;this.idArr[ind]=['J23'];i1=1;for(var i=3;i<=14;i++){this.idArr[ind].push("H"+i);if(i<14)
this.idArr[ind].push("K"+i1);i1++;}
this.posMap={};for(var i=0;i<this.idArr.length;i++){for(var j=0;j<this.idArr[i].length;j++)
this.posMap[this.idArr[i][j]]=new PIXI.Point(i,j);}};BetArea.prototype.initSplitBtns=function(){var arr=['autoSplitBtn','autoCornerBtn','autoStreetBtn'];var txts=[game.GameText.AUTO_SPLIT,game.GameText.AUTO_CORNER,game.GameText.AUTO_STREET];var textures=[PIXI.Texture.fromFrame("icon_auto_split_on.png"),PIXI.Texture.fromFrame("icon_auto_corner_on.png"),PIXI.Texture.fromFrame("icon_auto_street_on.png")];var texturesOff=[PIXI.Texture.fromFrame("icon_auto_split_off.png"),PIXI.Texture.fromFrame("icon_auto_corner_off.png"),PIXI.Texture.fromFrame("icon_auto_street_off.png")];var posX=20;var posY=325;for(var i=0;i<textures.length;i++){var bg=new PIXI.Graphics();bg.lineStyle(0,0,0);bg.beginFill(0x282622);bg.drawRoundedRect(0,0,125,18,10);bg.endFill;var spOn=new PIXI.Sprite(textures[i]);spOn.anchor.x=0.5;var spOff=new PIXI.Sprite(texturesOff[i]);spOff.anchor.x=0.5;var btn=new component.VToggleButton(spOff,spOn,this.onSplitBtnToggle.bind(this));btn.addChildAt(bg,0);var tf=component.VComponentUtils.createNormalText(txts[i],10);tf.anchor.y=0.5;var txt=new game.FixedSizeText(105,tf);txt.x=12;txt.y=5;btn.addChild(txt);bg.x=-14;bg.y=-4;btn.x=posX;btn.y=posY;posY+=23;this.gameModel.overlay.addChildAt(btn,0);btn.buttonMode=true;this[arr[i]]=btn;}};BetArea.prototype.onSplitBtnToggle=function(btn){this.autoSplit=this.autoSplitBtn.currentFrame==1;this.autoCorner=this.autoCornerBtn.currentFrame==1;this.autoStreet=this.autoStreetBtn.currentFrame==1;this.updateBetAttributes();};BetArea.prototype.initBetSettings=function(){var settings=[{id:"voisinsduzero",x:1093.45,y:555.05},{id:"orphelins",x:1081.05,y:490.8},{id:"tier",x:1057.35,y:433.05},{id:"arc24",x:1091.55,y:450.05},{id:"arc5",x:1084.3,y:424.95},{id:"arc10",x:1064.05,y:414.05},{id:"arc23",x:1035.7,y:414.05},{id:"arc8",x:1029.1,y:424.95},{id:"arc34",x:1054.85,y:528.05},{id:"arc17",x:1058.65,y:541.05},{id:"arc25",x:1062.4,y:554.05},{id:"arc2",x:1066.2,y:567.05},{id:"arc21",x:1070,y:580.05},{id:"arc4",x:1073.8,y:593.05},{id:"arc19",x:1077.6,y:606.05},{id:"arc15",x:1081.4,y:619.05},{id:"arc32",x:1085.2,y:632.05},{id:"arc0",x:1090.05,y:645.05},{id:"arc26",x:1117.35,y:660.05},{id:"arc6",x:1051.05,y:515.05},{id:"arc27",x:1047.25,y:502.05},{id:"arc13",x:1043.45,y:489.05},{id:"arc36",x:1039.65,y:476.05},{id:"arc11",x:1035.85,y:463.05},{id:"arc30",x:1032.1,y:450.05},{id:"arc3",x:1156.65,y:645.05},{id:"arc35",x:1152.65,y:632.05},{id:"arc12",x:1148.25,y:619.05},{id:"arc28",x:1143.9,y:606.05},{id:"arc7",x:1139.55,y:593.05},{id:"arc29",x:1135.15,y:580.05},{id:"arc18",x:1130.8,y:567.05},{id:"arc22",x:1126.45,y:554.05},{id:"arc9",x:1122.1,y:541.05},{id:"arc14",x:1113.35,y:515.05},{id:"arc31",x:1117.7,y:528.05},{id:"arc20",x:1109,y:502.05},{id:"arc1",x:1104.6,y:489.05},{id:"arc33",x:1100.25,y:476.05},{id:"arc16",x:1095.9,y:463.05},{id:"D2",x:446.2,y:610},{id:"D3",x:738.85,y:610},{id:"D1",x:153.9,y:610},{id:"C2",x:139.85,y:656},{id:"B2",x:290.25,y:656},{id:"A2",x:438,y:653.5},{id:"A1",x:588.35,y:653.5},{id:"B1",x:741.75,y:656},{id:"C1",x:889.55,y:656},{id:"E3",x:981.9,y:417},{id:"E2",x:997.65,y:480},{id:"E1",x:1013.15,y:542},{id:"F0",x:106.4,y:416.45},{id:"K1",x:219.65,y:583.4},{id:"H4",x:253.2,y:583.4},{id:"K2",x:292.3,y:583.4},{id:"H5",x:323,y:583.4},{id:"K3",x:363.75,y:583.4},{id:"H6",x:395.35,y:583.4},{id:"K4",x:434.5,y:583.4},{id:"H7",x:467.25,y:583.4},{id:"K5",x:505.6,y:583.4},{id:"H8",x:537.9,y:583.4},{id:"K6",x:573.9,y:583.4},{id:"H9",x:608.85,y:583.4},{id:"K7",x:647.55,y:583.4},{id:"H10",x:678,y:583.9},{id:"K8",x:719.3,y:583.4},{id:"H11",x:750.3,y:583.4},{id:"K9",x:788.85,y:582.4},{id:"H12",x:821.75,y:582.9},{id:"K10",x:861.7,y:580.9},{id:"H13",x:890.3,y:583.4},{id:"K11",x:929.85,y:583.4},{id:"F3",x:222.5,y:417.55},{id:"G6",x:264.1,y:417.95},{id:"F6",x:289.55,y:416.9},{id:"G9",x:329.3,y:416.55},{id:"F9",x:352.35,y:416.95},{id:"G12",x:394.45,y:418},{id:"F12",x:416.35,y:416.25},{id:"G15",x:457.95,y:417.3},{id:"F15",x:479.55,y:416.45},{id:"G18",x:521.8,y:416.65},{id:"F18",x:545.2,y:417.1},{id:"G21",x:585.8,y:417.85},{id:"F21",x:607.05,y:417.1},{id:"G24",x:650.35,y:417.25},{id:"F24",x:674.8,y:417.1},{id:"G27",x:715.45,y:416.6},{id:"F27",x:740.15,y:417.1},{id:"G30",x:779.45,y:416.6},{id:"F30",x:804.4,y:417.1},{id:"G33",x:843.4,y:417.95},{id:"F33",x:869.3,y:417.1},{id:"G36",x:907.95,y:417.25},{id:"F36",x:931.45,y:417.1},{id:"G38",x:214.75,y:459.95},{id:"J2",x:253.9,y:461.25},{id:"G40",x:282.7,y:461.25},{id:"J4",x:318.35,y:461.2},{id:"G42",x:346.25,y:460.7},{id:"J6",x:383.9,y:460.7},{id:"G44",x:411.6,y:461.2},{id:"J8",x:449.9,y:461.75},{id:"G46",x:477.4,y:461.7},{id:"J10",x:513.65,y:460.7},{id:"G48",x:543.65,y:461.2},{id:"J12",x:579.7,y:460.25},{id:"G50",x:608.4,y:461.7},{id:"J14",x:647.45,y:460.95},{id:"G52",x:674.3,y:460.45},{id:"J16",x:712.5,y:460.45},{id:"G54",x:741.9,y:460.45},{id:"J18",x:779.2,y:460.45},{id:"G56",x:806.8,y:460.45},{id:"J20",x:846.1,y:459.95},{id:"G58",x:874.9,y:460.95},{id:"J22",x:910.65,y:460.45},{id:"G60",x:939.6,y:460.45},{id:"F2",x:206.2,y:489.95},{id:"G5",x:246.1,y:491.05},{id:"F5",x:272.8,y:488.55},{id:"G8",x:313.85,y:489.5},{id:"F8",x:337.2,y:488.55},{id:"G11",x:381.05,y:489},{id:"F11",x:405.25,y:489.1},{id:"G14",x:445.55,y:489},{id:"F14",x:472.35,y:489.25},{id:"G17",x:512.8,y:489.5},{id:"F17",x:539.6,y:489.25},{id:"G20",x:579.45,y:490.5},{id:"F20",x:607.05,y:489.25},{id:"G23",x:646.85,y:490.5},{id:"F23",x:675.75,y:489.25},{id:"G26",x:715.6,y:490},{id:"F26",x:744.3,y:489.25},{id:"G29",x:783.1,y:489.5},{id:"F29",x:809.45,y:489.25},{id:"G32",x:849.7,y:490.5},{id:"F32",x:877.2,y:489.25},{id:"G35",x:915.75,y:491},{id:"F35",x:943.4,y:489.25},{id:"G37",x:199.55,y:523},{id:"J1",x:238,y:522.7},{id:"G39",x:265,y:523.65},{id:"J3",x:306.85,y:523.15},{id:"G41",x:335.5,y:523.65},{id:"J5",x:375.25,y:523.65},{id:"G43",x:401.2,y:523.65},{id:"J7",x:441.25,y:523.15},{id:"G45",x:472.75,y:522.7},{id:"J9",x:511.65,y:522.15},{id:"G47",x:539.35,y:521.65},{id:"J11",x:576.6,y:521.65},{id:"G49",x:608.55,y:522.65},{id:"J13",x:646.1,y:521.65},{id:"G51",x:676.65,y:522.65},{id:"J15",x:715.15,y:521.65},{id:"G53",x:746.65,y:522.65},{id:"J17",x:784.8,y:522.15},{id:"G55",x:814.9,y:523.15},{id:"J19",x:854.3,y:522.15},{id:"G57",x:882.5,y:522.65},{id:"J21",x:921.75,y:521.65},{id:"G59",x:952.5,y:522.65},{id:"F1",x:185.85,y:549.15},{id:"G4",x:230.75,y:550.2},{id:"F4",x:256.4,y:548.8},{id:"G7",x:298.75,y:549.7},{id:"F7",x:325.65,y:548.8},{id:"G10",x:368.9,y:549.75},{id:"F10",x:397.55,y:549.8},{id:"G13",x:438.2,y:550.2},{id:"F13",x:467.95,y:549.95},{id:"G16",x:507.7,y:551.65},{id:"F16",x:537.05,y:549.95},{id:"G19",x:575.6,y:551.2},{id:"F19",x:606.95,y:549.95},{id:"G22",x:646.3,y:550.7},{id:"F22",x:677.7,y:549.95},{id:"G25",x:716.6,y:551.7},{id:"F25",x:747.4,y:549.95},{id:"G28",x:787.15,y:551.7},{id:"F28",x:817.3,y:549.95},{id:"G31",x:857.15,y:552.2},{id:"F31",x:886.1,y:549.95},{id:"G34",x:926,y:551.7},{id:"F34",x:958.45,y:549.95},{id:"H1",x:174.65,y:522.15},{id:"H2",x:191.85,y:460.2},{id:"G1",x:163.65,y:550.7},{id:"G2",x:181.95,y:492},{id:"H14",x:963.2,y:583.4},{id:"G3",x:201.15,y:420.65},{id:"H3",x:179.05,y:583.4},{id:"J23",x:147,y:583.4}];this.hlSetting=[{id:"voisinsduzero",x:1093.45,y:555.05},{id:"orphelins",x:1081.05,y:490.8},{id:"tier",x:1057.35,y:433.05},{id:"arc24",x:1091.55,y:450.05},{id:"arc5",x:1084.3,y:424.95},{id:"arc10",x:1064.05,y:414.05},{id:"arc23",x:1035.7,y:414.05},{id:"arc8",x:1029.1,y:424.95},{id:"arc34",x:1054.85,y:528.05},{id:"arc17",x:1058.65,y:541.05},{id:"arc25",x:1062.4,y:554.05},{id:"arc2",x:1066.2,y:567.05},{id:"arc21",x:1070,y:580.05},{id:"arc4",x:1073.8,y:593.05},{id:"arc19",x:1077.6,y:606.05},{id:"arc15",x:1081.4,y:619.05},{id:"arc32",x:1085.2,y:632.05},{id:"arc0",x:1090.05,y:645.05},{id:"arc26",x:1117.35,y:660.05},{id:"arc6",x:1051.05,y:515.05},{id:"arc27",x:1047.25,y:502.05},{id:"arc13",x:1043.45,y:489.05},{id:"arc36",x:1039.65,y:476.05},{id:"arc11",x:1035.85,y:463.05},{id:"arc30",x:1032.1,y:450.05},{id:"arc3",x:1156.65,y:645.05},{id:"arc35",x:1152.65,y:632.05},{id:"arc12",x:1148.25,y:619.05},{id:"arc28",x:1143.9,y:606.05},{id:"arc7",x:1139.55,y:593.05},{id:"arc29",x:1135.15,y:580.05},{id:"arc18",x:1130.8,y:567.05},{id:"arc22",x:1126.45,y:554.05},{id:"arc9",x:1122.1,y:541.05},{id:"arc14",x:1113.35,y:515.05},{id:"arc31",x:1117.7,y:528.05},{id:"arc20",x:1109,y:502.05},{id:"arc1",x:1104.6,y:489.05},{id:"arc33",x:1100.25,y:476.05},{id:"arc16",x:1095.9,y:463.05},{id:"F3",x:205.45,y:415},{id:"F6",x:270.5,y:415},{id:"F9",x:335.55,y:415},{id:"F12",x:400.6,y:415},{id:"F15",x:465.6,y:415},{id:"F18",x:530.65,y:415},{id:"F21",x:596.6,y:415},{id:"F24",x:661.8,y:415},{id:"F27",x:724.7,y:415},{id:"F30",x:787.6,y:415},{id:"F33",x:850.55,y:415},{id:"F36",x:913.4,y:415},{id:"F2",x:186.15,y:478},{id:"F5",x:254.1,y:478},{id:"F11",x:389.95,y:478},{id:"F8",x:322.05,y:478},{id:"F14",x:457.9,y:478},{id:"F17",x:525.85,y:478},{id:"F20",x:594.7,y:478},{id:"F23",x:662.85,y:478},{id:"F26",x:728.65,y:478},{id:"F29",x:794.45,y:478},{id:"F32",x:860.3,y:478},{id:"F35",x:926.05,y:478},{id:"F1",x:167.15,y:540},{id:"F4",x:237.95,y:540},{id:"F7",x:308.75,y:540},{id:"F10",x:379.5,y:540},{id:"F13",x:450.3,y:540},{id:"F16",x:521.05,y:540},{id:"F19",x:592.85,y:540},{id:"F22",x:663.85,y:540},{id:"F25",x:732.55,y:540},{id:"F28",x:801.2,y:540},{id:"F31",x:869.85,y:540},{id:"F34",x:938.5,y:540},{id:"F0",x:106.9,y:415},{id:"D2",x:446.2,y:610},{id:"D3",x:738.85,y:610},{id:"D1",x:153.9,y:610},{id:"C2",x:139.85,y:656},{id:"B2",x:290.25,y:656},{id:"A2",x:438,y:653.5},{id:"A1",x:588.35,y:653.5},{id:"B1",x:741.75,y:656},{id:"C1",x:889.55,y:656},{id:"E3",x:981.9,y:417},{id:"E2",x:997.65,y:480},{id:"E1",x:1013.15,y:542}];var settingMap={};for(var i=0;i<settings.length;i++){if(settings[i].id.indexOf("arc")>=0||settings[i].id=="voisinsduzero"||settings[i].id=="orphelins"||settings[i].id=="tier"){settings[i]["isDummy"]=true;}
settingMap[settings[i].id]=settings[i];settings[i].url="R_"+settings[i].id+".png";}
this.bet2DSetting=settings;settings=[];this.bet3DSetting=settings;};BetArea.prototype.initHighLight=function(){var hit;var hl;var url;var id;var hlSettingMap={};for(var i=0;i<this.hlSetting.length;i++)
hlSettingMap[this.hlSetting[i].id]=this.hlSetting[i];for(var i=0;i<this.hitArr.length;i++){hit=this.hitArr[i];hit.alpha=0;id=hit.setting.id;if(!(id.indexOf("arc")>=0||id=="voisinsduzero"||id=="orphelins"||id=="tier"||"ABCDEF".indexOf(id.charAt(0))>=0)){continue;}
url=hit['url'].replace('.','_hl.');hl=new PIXI.Sprite(PIXI.Texture.fromFrame(url));this.highlightCon.addChild(hl);hl.visible=false;hl.x=hlSettingMap[id].x;hl.y=hlSettingMap[id].y;hl.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;hl.scale.y=hl.scale.x;hit.highlight=hl;hit.highlight.id=id;hl=new PIXI.Sprite(PIXI.Texture.fromFrame(url));this.highlightCon.addChild(hl);hl.visible=false;hl.x=hlSettingMap[id].x;hl.y=hlSettingMap[id].y;hl.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;hl.scale.y=hl.scale.x;hit["winHL"]=hl;hit["winHL"].id=id;}
for(var i=0;i<3;i++){this.betMap["D"+(i+1)].highlight=[this.betMap["D"+(i+1)].highlight];for(var j=i*12+1;j<=(i+1)*12;j++)
this.betMap["D"+(i+1)].highlight.push(this.betMap["F"+j].highlight);}
this.betMap["C2"].highlight=[this.betMap["C2"].highlight];for(var i=1;i<=18;i++)
this.betMap["C2"].highlight.push(this.betMap["F"+i].highlight);this.betMap["C1"].highlight=[this.betMap["C1"].highlight];for(var i=19;i<=36;i++)
this.betMap["C1"].highlight.push(this.betMap["F"+i].highlight);this.betMap["B2"].highlight=[this.betMap["B2"].highlight];for(var i=1;i<=18;i++)
this.betMap["B2"].highlight.push(this.betMap["F"+i*2].highlight);this.betMap["B1"].highlight=[this.betMap["B1"].highlight];for(var i=1;i<=18;i++)
this.betMap["B1"].highlight.push(this.betMap["F"+(i*2-1)].highlight);var blacks=[2,4,6,8,10,11,13,15,17,20,22,24,26,28,29,31,33,35];this.betMap["A2"].highlight=[this.betMap["A2"].highlight];for(var i=0;i<blacks.length;i++)
this.betMap["A2"].highlight.push(this.betMap["F"+blacks[i]].highlight);var reds=[1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];this.betMap["A1"].highlight=[this.betMap["A1"].highlight];for(var i=0;i<reds.length;i++)
this.betMap["A1"].highlight.push(this.betMap["F"+reds[i]].highlight);for(var i=1;i<=3;i++){this.betMap["E"+i].highlight=[this.betMap["E"+i].highlight];for(var j=i;j<=i+33;j+=3)
this.betMap["E"+i].highlight.push(this.betMap["F"+j].highlight);}
for(var i=1;i<=3;i++){for(var j=i;j<=i+33;j+=3)
this.betMap["G"+j].highlight=[this.betMap["F"+((j-3)>=0?(j-3):0)].highlight,this.betMap["F"+j].highlight];}
var i1=2,i2=3;for(var i=38;i<=60;i+=2){this.betMap["G"+i].highlight=[this.betMap["F"+i1].highlight,this.betMap["F"+i2].highlight];i1+=3;i2+=3;}
i1=1,i2=2;for(var i=37;i<=59;i+=2){this.betMap["G"+i].highlight=[this.betMap["F"+i1].highlight,this.betMap["F"+i2].highlight];i1+=3;i2+=3;}
i1=1;this.betMap["H1"].highlight=[this.betMap["F0"].highlight,this.betMap["F1"].highlight,this.betMap["F2"].highlight];this.betMap["H2"].highlight=[this.betMap["F0"].highlight,this.betMap["F2"].highlight,this.betMap["F3"].highlight];for(var i=3;i<=14;i++){this.betMap["H"+i].highlight=[this.betMap["F"+i1].highlight,this.betMap["F"+(i1+1)].highlight,this.betMap["F"+(i1+2)].highlight];i1+=3;}
i1=1;for(var i=1;i<=11;i++){this.betMap["K"+i].highlight=[];for(var j=0;j<6;j++)
this.betMap["K"+i].highlight.push(this.betMap["F"+(i1+j)].highlight);i1+=3;}
i1=2;for(var i=2;i<=22;i+=2){this.betMap["J"+i].highlight=[this.betMap["F"+i1].highlight,this.betMap["F"+(i1+1)].highlight,this.betMap["F"+(i1+3)].highlight,this.betMap["F"+(i1+4)].highlight];i1+=3;}
i1=1;for(var i=1;i<=21;i+=2){this.betMap["J"+i].highlight=[this.betMap["F"+i1].highlight,this.betMap["F"+(i1+1)].highlight,this.betMap["F"+(i1+3)].highlight,this.betMap["F"+(i1+4)].highlight];i1+=3;}
this.betMap["J23"].highlight=[this.betMap["F0"].highlight,this.betMap["F1"].highlight,this.betMap["F2"].highlight,this.betMap["F3"].highlight];var arcs=[23,10,5,24,16,33,1,20,14,31,9,22,18,29,7,28,12,35,3,26,0,32,15,19,4,21,2,25,17,34,6,27,13,36,11,30,8];var i1,i2,i3,i4;var hlMap={};for(var i=0,l=arcs.length;i<l;i++)
hlMap["arc"+arcs[i]]=this.betMap["arc"+arcs[i]].highlight;for(var i=0,l=arcs.length;i<l;i++){i1=i-1>=0?i-1:l+i-1;i2=i-2>=0?i-2:l+i-2;i3=i+1<l?i+1:i+1-l;i4=i+2<l?i+2:i+2-l;this.betMap["arc"+arcs[i]].highlight=[hlMap["arc"+arcs[i]],hlMap["arc"+arcs[i1]],hlMap["arc"+arcs[i2]],hlMap["arc"+arcs[i3]],hlMap["arc"+arcs[i4]],this.betMap["F"+arcs[i]].highlight,this.betMap["F"+arcs[i1]].highlight,this.betMap["F"+arcs[i2]].highlight,this.betMap["F"+arcs[i3]].highlight,this.betMap["F"+arcs[i4]].highlight];this.betMap["arc"+arcs[i]].setting.referBetplaces=["F"+arcs[i],"F"+arcs[i1],"F"+arcs[i2],"F"+arcs[i3],"F"+arcs[i4]];}
var tier=[27,13,36,11,30,8,23,10,5,24,16,33];var tier2=[8,43,16,52,30,36];this.betMap["tier"].setting.referBetplaces=[];this.betMap["tier"].highlight=[this.betMap["tier"].highlight];for(var i=0;i<tier.length;i++){this.betMap["tier"].highlight.push(hlMap["arc"+tier[i]]);this.betMap["tier"].highlight.push(this.betMap["F"+tier[i]].highlight);}
for(var i=0;i<tier2.length;i++)
this.betMap["tier"].setting.referBetplaces.push("G"+tier2[i]);var orphelins=[9,31,14,20,1,17,34,6];var orphelins2=["F1","G9","G17","G20","G34"];this.betMap["orphelins"].highlight=[this.betMap["orphelins"].highlight];this.betMap["orphelins"].setting.referBetplaces=[];for(var i=0;i<orphelins.length;i++){this.betMap["orphelins"].highlight.push(hlMap["arc"+orphelins[i]]);this.betMap["orphelins"].highlight.push(this.betMap["F"+orphelins[i]].highlight);}
for(var i=0;i<orphelins2.length;i++)
this.betMap["orphelins"].setting.referBetplaces.push(orphelins2[i]);var voisinsduzero=[22,18,29,7,28,12,35,3,26,0,32,15,19,4,21,2,25];var voisinsduzero2=["H2","H2","G7","G15","G21","G22","J17","J17","G35"];this.betMap["voisinsduzero"].highlight=[this.betMap["voisinsduzero"].highlight];this.betMap["voisinsduzero"].setting.referBetplaces=[];for(var i=0;i<voisinsduzero.length;i++){this.betMap["voisinsduzero"].highlight.push(hlMap["arc"+voisinsduzero[i]]);this.betMap["voisinsduzero"].highlight.push(this.betMap["F"+voisinsduzero[i]].highlight);}
for(var i=0;i<voisinsduzero2.length;i++)
this.betMap["voisinsduzero"].setting.referBetplaces.push(voisinsduzero2[i]);};BetArea.prototype.initJson=function(){var url=game.GlobalVals.viewMode==game.ViewMode.MODE_2D||game.GlobalVals.viewMode==game.ViewMode.MODE_7S?"assets/roulette/2d/bet_area.json":"";this.updateJson(url);};BetArea.prototype.getBetPlace=function(id,seatId){if(seatId===void 0){seatId=0;}
return this.betPlaceMap[id];};BetArea.prototype.getBetPlaceWithType=function(betType,seatId){if(seatId===void 0){seatId=0;}
return this.betPlaceMap[betType];};BetArea.prototype.getBetTypeFromId=function(id){return id;};BetArea.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}};BetArea.prototype.initBetCon=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D||game.GlobalVals.viewMode==game.ViewMode.MODE_7S?this.bet2DSetting:this.bet3DSetting;_super.prototype.initBetCon.call(this,vSetting);};BetArea.prototype.updateText=function(){var viewMode=game.GlobalVals.viewMode;var betAreaText=this.betAreaText;betAreaText.texture=this.gameModel.resources[game.GlobalVals.viewMode==game.ViewMode.MODE_2D||game.GlobalVals.viewMode==game.ViewMode.MODE_7S?'bet_area_text_'+game.GameUtils.getColor(this.gameModel.TABLE_ID):'bet_area_text_'+game.GameUtils.getColor(this.gameModel.TABLE_ID)].texture;betAreaText.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;betAreaText.scale.y=betAreaText.scale.x;switch(viewMode){case game.ViewMode.MODE_2D:case game.ViewMode.MODE_7S:betAreaText.x=98;betAreaText.y=409;break;case game.ViewMode.MODE_3D:break;}};BetArea.prototype.changeView=function(){_super.prototype.changeView.call(this);};BetArea.prototype.getBetName=function(betType){var gameName="Roulette_";if(betType.charAt(0)=="F")
return game.GameText.Roulette_F+' '+betType.substr(1,betType.length-1);if("GKJH".indexOf(betType.charAt(0))>=0){var hit=this.betMap[betType];var betName=game.GameText["Roulette_"+betType.charAt(0)];for(var i=0;i<hit.highlight.length;i++)
betName+=' '+hit.highlight[i].id.substr(1,hit.highlight[i].id.length-1);return betName;}
return game.GameText[gameName+betType];};BetArea.prototype.setHighlight=function(hit,visi){_super.prototype.setHighlight.call(this,hit,visi);var rl=this.idArr.length;var cl=this.idArr[0].length;if(hit.id=='F0'&&(this.autoSplit||this.autoCorner||this.autoStreet)){_super.prototype.setHighlight.call(this,this.betMap['F1'],visi);_super.prototype.setHighlight.call(this,this.betMap['F2'],visi);_super.prototype.setHighlight.call(this,this.betMap['F3'],visi);return;}
if(hit.id.charAt(0)=='F'){var p=this.posMap[hit.id];if(this.autoSplit){_super.prototype.setHighlight.call(this,this.betMap[this.idArr[p.x][p.y-1]],visi);if(p.y+1<cl)
_super.prototype.setHighlight.call(this,this.betMap[this.idArr[p.x][p.y+1]],visi);if(p.x>0)
_super.prototype.setHighlight.call(this,this.betMap[this.idArr[p.x-1][p.y]],visi);if(p.x<rl-2)
_super.prototype.setHighlight.call(this,this.betMap[this.idArr[p.x+1][p.y]],visi);}
if(this.autoCorner){var tl,bl,tr,br;if(p.x>0)
tl=this.idArr[p.x-1][p.y-1];if(tl=='H2'||tl=='H1')
tl='J23';if(tl)
_super.prototype.setHighlight.call(this,this.betMap[tl],visi);if(tl!='J23'&&p.x<rl-2)
bl=this.idArr[p.x+1][p.y-1];if(bl=='H2'||bl=='H1')
bl='J23';if(bl)
_super.prototype.setHighlight.call(this,this.betMap[bl],visi);if(p.x>0&&p.y<cl)
tr=this.idArr[p.x-1][p.y+1];if(tr)
_super.prototype.setHighlight.call(this,this.betMap[tr],visi);if(p.x<rl-2&&p.y<cl)
br=this.idArr[p.x+1][p.y+1];if(br)
_super.prototype.setHighlight.call(this,this.betMap[br],visi);}
if(this.autoStreet){if(hit.id=='F0'||hit.id=='F1'||hit.id=='F2'||hit.id=='F3'){_super.prototype.setHighlight.call(this,this.betMap['F1'],visi);_super.prototype.setHighlight.call(this,this.betMap['F2'],visi);_super.prototype.setHighlight.call(this,this.betMap['F3'],visi);_super.prototype.setHighlight.call(this,this.betMap['F0'],visi);return;}
_super.prototype.setHighlight.call(this,this.betMap['H'+(3+(p.y-1)/2)],visi);}}};BetArea.prototype.updateBetAttributes=function(){for(var i=0;i<=36;i++)
this.updateHitAttributes(this.betMap['F'+i]);};BetArea.prototype.updateHitAttributes=function(hit){var hitArr=[];var betplaceArr=[];var rl=this.idArr.length;var cl=this.idArr[0].length;if(hit.id=='F0'){var arr;hit.referBetplaces=[];if(this.autoSplit){arr=['G1','G2','G3'];for(var i=0;i<arr.length;i++)
hit.referBetplaces.push(this.getBetPlace(arr[i]));}
if(this.autoCorner){hit.referBetplaces.push(this.getBetPlace('J23'));}
if(this.autoStreet){arr=['H1','H2'];for(var i=0;i<arr.length;i++)
hit.referBetplaces.push(this.getBetPlace(arr[i]));}
return;}
if(hit.id.charAt(0)=='F'){var p=this.posMap[hit.id];if(this.autoSplit){hitArr.push(this.betMap[this.idArr[p.x][p.y-1]]);if(p.y+1<cl)
hitArr.push(this.betMap[this.idArr[p.x][p.y+1]]);if(p.x>0)
hitArr.push(this.betMap[this.idArr[p.x-1][p.y]]);if(p.x<rl-2)
hitArr.push(this.betMap[this.idArr[p.x+1][p.y]]);}
if(this.autoCorner){var tl,bl,tr,br;if(p.x>0)
tl=this.idArr[p.x-1][p.y-1];if(tl=='H2'||tl=='H1')
tl='J23';if(tl)
hitArr.push(this.betMap[tl]);if(tl!='J23'&&p.x<rl-2)
bl=this.idArr[p.x+1][p.y-1];if(bl=='H2'||bl=='H1')
bl='J23';if(bl)
hitArr.push(this.betMap[bl]);if(p.x>0&&p.y<cl)
tr=this.idArr[p.x-1][p.y+1];if(tr)
hitArr.push(this.betMap[tr]);if(p.x<rl-2&&p.y<cl)
br=this.idArr[p.x+1][p.y+1];if(br)
hitArr.push(this.betMap[br]);}
if(this.autoStreet){if(hit.id=='F0'){hitArr.push(this.betMap['H1']);hitArr.push(this.betMap['H2']);}
else if(hit.id=='F1'){hitArr.push(this.betMap['H1']);hitArr.push(this.betMap['H3']);}
else if(hit.id=='F2'){hitArr.push(this.betMap['H1']);hitArr.push(this.betMap['H2']);hitArr.push(this.betMap['H3']);}
else if(hit.id=='F3'){hitArr.push(this.betMap['H2']);hitArr.push(this.betMap['H3']);}
else
hitArr.push(this.betMap['H'+(3+(p.y-1)/2)]);}}
for(var i=0;i<hitArr.length;i++)
betplaceArr.push(this.getBetPlace(hitArr[i].id));hit.referBetplaces=betplaceArr;};BetArea.prototype.getAmounts=function(){var arr=[];var val=0;for(var i=0,l=this.betPlaceArr.length;i<l;i++){if(this.betPlaceArr[i].seatId>0&&this.betPlaceArr[i].seatId!=this.seatId)
continue;var betType=this.betPlaceArr[i].betHit.betType;val=this.betPlaceArr[i].getAmount()-this.betPlaceArr[i].getConfirmedAmount();if(val==0)
continue;if("A1A2B1B2C1C2D1D2D3E1E2E3".indexOf(betType)>=0&&roundFloat(this.betPlaceArr[i].getAmount())<this.getBetMin(this.betPlaceArr[i].betHit.betType)){}
arr.push(val);}
return arr;};return BetArea;}(game.BaseBetArea));roulette.BetArea=BetArea;})(roulette||(roulette={}));var roulette;(function(roulette){var ChipControl=(function(_super){__extends(ChipControl,_super);function ChipControl(gameModel){return _super.call(this,gameModel)||this;}
ChipControl.prototype.initChipPos=function(){this.updateChipPos(null);};ChipControl.prototype.initChips=function(schips,shownRange){_super.prototype.initChips.call(this,schips,shownRange);this.updateLeftRight();};ChipControl.prototype.updateLeftRight=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:case game.ViewMode.MODE_7S:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y-7;this.rightArrow.rotation=-10*Math.PI/180;break;case game.ViewMode.MODE_3D:break;}};ChipControl.prototype.updateChipPos=function(chipsPos){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:case game.ViewMode.MODE_7S:this.chipsPos=[new PIXI.Point(-52.35,1.85),new PIXI.Point(0.05,0.65),new PIXI.Point(51.05,-1.55),new PIXI.Point(102.15,-5.2),new PIXI.Point(154.85,-10.95),new PIXI.Point(207.4,-19.4),new PIXI.Point(257.55,-28.45),new PIXI.Point(305.95,-38.85)];break;case game.ViewMode.MODE_3D:break;}
_super.prototype.updateChipPos.call(this,this.chipsPos);};ChipControl.prototype.changeView=function(){this.updateChipPos(null);this.updateLeftRight();this.drawMasker();_super.prototype.changeView.call(this);};return ChipControl;}(game.BaseChipControl));roulette.ChipControl=ChipControl;})(roulette||(roulette={}));var roulette;(function(roulette){var GameHUD=(function(_super){__extends(GameHUD,_super);function GameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameHUD.prototype.initView=function(){_super.prototype.initView.call(this);this.settingCon=new game.SettingContainer(this.gameModel);this.settingCon.saveBetBtn.visible=true;this.settingCon.x=0;this.settingCon.y=581;this.addChild(this.settingCon);this.gameInfoCon=new roulette.GameInfoCon(this.gameModel);this.addChild(this.gameInfoCon);};GameHUD.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:case game.ViewMode.MODE_7S:this.settingCon.x=12;this.settingCon.y=730;this.gameInfoCon.expand();this.gameInfoCon.resizeBtn.visible=false;this.settingCon.livePoolBtn.visible=false;break;case game.ViewMode.MODE_3D:break;}};GameHUD.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameHUD;}(game.BaseGameHUD));roulette.GameHUD=GameHUD;})(roulette||(roulette={}));var roulette;(function(roulette){var GenGameDetailCon=(function(_super){__extends(GenGameDetailCon,_super);function GenGameDetailCon(gameModel){var _this=_super.call(this,gameModel)||this;_this.initView();return _this;}
GenGameDetailCon.prototype.destructor=function(){_super.prototype.destructor.call(this);};GenGameDetailCon.prototype.initView=function(){this.viewW=379;this.viewH=157;this.contentY=27;var w=this.viewW;var h=this.viewH;var contentY=this.contentY;var limitBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('limit_icon0001.png'),PIXI.Texture.fromFrame('limit_icon0002.png')]);var resultBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('info_game_result_icon0001.png'),PIXI.Texture.fromFrame('info_game_result_icon0002.png')]);var stateBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('info_state_icon0001.png'),PIXI.Texture.fromFrame('info_state_icon0002.png')]);game.GameUtils.resizeNodeH(limitBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(resultBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(stateBtn,game.StyleMng.INFO_TAB_BTN_SIZE);this.gameModel.toolTip.addToolTip(limitBtn,game.GameText.LIMITS);this.gameModel.toolTip.addToolTip(resultBtn,game.GameText.RESULTS);this.gameModel.toolTip.addToolTip(stateBtn,game.GameText.STATISTICS);var btns=[limitBtn,resultBtn,stateBtn];for(var i=0;i<btns.length;i++){this.addChild(btns[i]);btns[i].buttonMode=true;btns[i].gotoAndStop(1);btns[i].x=(btns[i].width+1)*i;}
this.limitDetail=new roulette.GenLimitDetail(this.gameModel,w,h);this.limitDetail.y=contentY;this.addChild(this.limitDetail);this.infoTrendDetail=new roulette.InfoTrendDetail(this.gameModel,w,h);this.infoTrendDetail.y=contentY;this.addChild(this.infoTrendDetail);this.statsDetail=new roulette.StatsDetail(this.gameModel,w,h);this.statsDetail.y=contentY;this.addChild(this.statsDetail);var contents=[this.limitDetail,this.infoTrendDetail,this.statsDetail];var tabMng=new component.VTabMng();tabMng.initialize(btns,contents);this.tabMng=tabMng;var expandBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_expand0001.png'),PIXI.Texture.fromFrame('info_pane_expand0002.png')],this.onExpand.bind(this));expandBtn.x=this.viewW-expandBtn.width;var conllapseBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_collapse0001.png'),PIXI.Texture.fromFrame('info_pane_collapse0002.png')],this.onCollapse.bind(this));conllapseBtn.x=this.viewW-conllapseBtn.width;var resizeBtn=new component.VToggleButton(expandBtn,conllapseBtn);this.addChild(resizeBtn);resizeBtn.y=this.contentY+this.viewH-resizeBtn.height;this.resizeBtn=resizeBtn;};GenGameDetailCon.prototype.onExpand=function(){var addedSize=40;this.limitDetail.resize(this.viewW,this.viewH+addedSize);this.infoTrendDetail.resize(this.viewW,this.viewH+addedSize);this.statsDetail.resize(this.viewW,this.viewH+addedSize);this.resizeBtn.y=this.contentY+this.viewH-this.resizeBtn.height+addedSize;};GenGameDetailCon.prototype.onCollapse=function(){this.limitDetail.resize(this.viewW,this.viewH);this.infoTrendDetail.resize(this.viewW,this.viewH);this.statsDetail.resize(this.viewW,this.viewH);this.resizeBtn.y=this.contentY+this.viewH-this.resizeBtn.height;};GenGameDetailCon.prototype.updateTrends=function(table){this.infoTrendDetail.updateTrends(table);this.statsDetail.updateTrends(table);};return GenGameDetailCon;}(game.GameObject));roulette.GenGameDetailCon=GenGameDetailCon;})(roulette||(roulette={}));var roulette;(function(roulette){var GenLimitDetail=(function(_super){__extends(GenLimitDetail,_super);function GenLimitDetail(gameModel,viewW,viewH){return _super.call(this,gameModel,viewW,viewH)||this;}
GenLimitDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLimitDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.MIN_PER_BET,game.GameText.MAX_BET_PER_HAND_ALERT,game.GameText.MAX_BET_PER_BET_TYPE+': ',game.GameText.Roulette_F,game.GameText.Roulette_G,game.GameText.Roulette_H,game.GameText.Roulette_J,game.GameText.LINE,game.GameText.DOZEN_OR_COLUMN,game.GameText.RED+' / '+game.GameText.BLACK,game.GameText.EVEN+' / '+game.GameText.ODD,'1 - 18, 19 - 36'];this.ids=[0,1,2,10301,10302,10303,10304,10305,10306,10311,10307,10308];var posX=12;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;for(var i=0;i<texts.length;i++){tf=game.GameUtils.createText(texts[i],style);tf.x=posX;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this['tf_'+this.ids[i]]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};GenLimitDetail.prototype.setData=function(data){for(var i=0;i<data.content.length;i++){var item=data.content[i];if(this['tf_'+item.code])
this['tf_'+item.code].text=component.VComponentUtils.getNumInFormat(item.min)+' - '+component.VComponentUtils.getNumInFormat(item.max);}
this['tf_0'].text=component.VComponentUtils.getNumInFormat(this.gameModel.betSettings['10301'].min);this['tf_1'].text=component.VComponentUtils.getNumInFormat(this.gameModel.betSettings['10301'].max*50);};return GenLimitDetail;}(game.BaseGameDetail));roulette.GenLimitDetail=GenLimitDetail;})(roulette||(roulette={}));var roulette;(function(roulette){var TrendDettailIcon=(function(_super){__extends(TrendDettailIcon,_super);function TrendDettailIcon(size,textSize,border){if(size===void 0){size=18;}
if(textSize===void 0){textSize=11;}
if(border===void 0){border=0;}
var _this=_super.call(this)||this;_this.border=border;_this.size=size;_this.textSize=textSize;_this.initView();return _this;}
TrendDettailIcon.prototype.initView=function(){this.bg=new PIXI.Graphics();this.addChild(this.bg);this.tf=game.GameUtils.createNormalText('',this.textSize,0xffffff,'bold');this.tf.anchor.x=0.5;this.tf.anchor.y=this.tf.anchor.x;this.addChild(this.tf);};TrendDettailIcon.prototype.setData=function(info){this.bg.clear();this.border?this.bg.lineStyle(this.border,0xffffff):this.bg.lineStyle(0,0,0);this.bg.beginFill(info.cards=='0'?game.TrendIconUtils.GREEN:info.result.charAt(roulette.ResultType.RED)=='1'?game.TrendIconUtils.RED:0x111111);this.bg.drawRoundedRect(0,0,this.size,this.size,3);this.bg.endFill();this.tf.text=info.cards.toString();this.tf.x=this.bg.width*0.5;this.tf.y=this.bg.height*0.5;};TrendDettailIcon.prototype.setNum=function(num){var result=roulette.ResultType.getResultFromData(num);this.bg.clear();this.border?this.bg.lineStyle(this.border,0xffffff):this.bg.lineStyle(0,0,0);this.bg.beginFill(result.charAt(roulette.ResultType.RED)=='1'?game.TrendIconUtils.RED:0x111111);this.bg.drawRoundedRect(0,0,this.size,this.size,3);this.bg.endFill();this.tf.text=num.toString();this.tf.x=this.bg.width*0.5;this.tf.y=this.bg.height*0.5;};return TrendDettailIcon;}(PIXI.Container));roulette.TrendDettailIcon=TrendDettailIcon;var InfoTrendDetail=(function(_super){__extends(InfoTrendDetail,_super);function InfoTrendDetail(gameModel,viewW,viewH){return _super.call(this,gameModel,viewW,viewH)||this;}
InfoTrendDetail.prototype.initView=function(){_super.prototype.initView.call(this);};InfoTrendDetail.prototype.initContent=function(){this.items=[];this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var posX=5;var posY=5;var dis=10;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;var icon;this.maxItem=16;var item;for(var i=0;i<this.maxItem;i++){item=new PIXI.Graphics();content.addChild(item);tf=game.GameUtils.createText('2 - 30',style);tf.x=5;tf.y=0;item.addChild(tf);item['tf1']=tf;icon=new TrendDettailIcon();item.addChild(icon);icon.x=70;icon.y=-1;item['icon']=icon;tf=game.GameUtils.createText('Even',style);tf.x=150;tf.anchor.x=1;tf.y=0;item.addChild(tf);item['tf2']=tf;item.lineStyle(1,0xcdcdcd);item.moveTo(10,20);item.lineTo(160,20);item.x=posX;item.y=posY;posY+=tf.height+dis;if(i==this.maxItem/2-1){posX=190;posY=5;}
this.items.push(item);}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();};InfoTrendDetail.prototype.updateTrends=function(tableId){if(tableId!=this.gameModel.TABLE_ID||!game.GlobalVals.trendDataMap[this.gameModel.TABLE_ID])
return;var values=game.GlobalVals.trendDataMap[this.gameModel.TABLE_ID].trendHis100Arr;for(var i=0;i<this.maxItem;i++)
this.items[i].visible=false;for(var i=0,l=Math.min(values.length,this.maxItem);i<l;i++){var info=values[values.length-1-i];this.items[i].visible=true;this.items[i]['tf1'].text=info.shoe+' - '+info.round;this.items[i]['icon'].setData(info);if(info.result.charAt(roulette.ResultType.TIE)=='1')
this.items[i]['tf2'].text="";else
this.items[i]['tf2'].text=info.result.charAt(roulette.ResultType.EVEN)=='1'?game.GameText.EVEN.toUpperCase():game.GameText.ODD.toUpperCase();}};return InfoTrendDetail;}(game.BaseGameDetail));roulette.InfoTrendDetail=InfoTrendDetail;})(roulette||(roulette={}));var roulette;(function(roulette){var StatsDetail=(function(_super){__extends(StatsDetail,_super);function StatsDetail(gameModel,viewW,viewH){return _super.call(this,gameModel,viewW,viewH)||this;}
StatsDetail.prototype.initView=function(){_super.prototype.initView.call(this);};StatsDetail.prototype.initContent=function(){this.numCount=[];for(var i=0;i<37;i++){this.numCount[i]={};}
this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,this.viewH+20);this.bg.endFill();this.graph=new PIXI.Graphics();content.addChild(this.graph);var txts=['redTxt','blackTxt','zero1Txt','evenTxt','oddTxt','coldTxt','hotTxt'];var pos=[new PIXI.Point(0,8),new PIXI.Point(0,8),new PIXI.Point(0,8),new PIXI.Point(0,45),new PIXI.Point(0,45),new PIXI.Point(9,78),new PIXI.Point(100,78)];for(var i=0;i<txts.length;i++){var tf=game.GameUtils.createNormalText('',12,0x000000);tf.x=pos[i].x;tf.y=pos[i].y;content.addChild(tf);this[txts[i]]=tf;}
this.hotTxt.anchor.x=1;this.blackTxt.anchor.x=1;this.evenTxt.anchor.x=1;this.zero1Txt.anchor.x=0.5;this.coldTxt.text=game.GameText.COLD_NUM;this.hotTxt.text=game.GameText.HOT_NUM;for(i=0;i<10;i++){var tf=game.GameUtils.createNormalText('',12,0x000000);content.addChild(tf);tf.anchor.x=0.5;this['tf_'+i]=tf;}};StatsDetail.prototype.updateTrends=function(tableId){if(tableId!=this.gameModel.TABLE_ID)
return;var values=game.GlobalVals.trendDataMap[this.gameModel.TABLE_ID].trendHis100Arr;var g=this.graph;var w=this.viewW-40;g.x=10;this.hotTxt.x=g.x+w;this.blackTxt.x=g.x+w;this.evenTxt.x=g.x+w;this.zero1Txt.x=g.x+w*0.5;this.redTxt.x=g.x;this.oddTxt.x=g.x;var thick=10;var red=0,zero=0,black=0;var odd=0,even=0;for(var i=0;i<37;i++){this.numCount[i].num=i;this.numCount[i].count=0;}
var total=values.length;for(var i=0;i<values.length;i++){if(values[i].result.charAt(roulette.ResultType.TIE)=='1')
zero++;else{if(values[i].result.charAt(roulette.ResultType.RED)=='1')
red++;else
black++;}
if(values[i].result.charAt(roulette.ResultType.EVEN)=='1')
even++;if(values[i].result.charAt(roulette.ResultType.ODD)=='1')
odd++;this.numCount[parseInt(values[i].cards)].count++;}
component.VComponentUtils.sort(this.numCount,function(a,b){return a.count>b.count;});g.clear();this.redTxt.text=game.GameText.RED+' ('+component.VComponentUtils.getNumInFormat((red/values.length)*100,1)+'%)';this.blackTxt.text=game.GameText.BLACK+' ('+component.VComponentUtils.getNumInFormat((black/values.length)*100,1)+'%)';this.evenTxt.text=game.GameText.EVEN+' ('+component.VComponentUtils.getNumInFormat((even/values.length)*100,1)+'%)';this.oddTxt.text=game.GameText.ODD+' ('+component.VComponentUtils.getNumInFormat((odd/values.length)*100,1)+'%)';this.zero1Txt.text=game.GameText.ZERO+' ('+component.VComponentUtils.getNumInFormat((zero/values.length)*100,1)+'%)';var posY=25;var posX=0;g.beginFill(game.TrendIconUtils.RED);g.drawRect(posX,posY,(red/values.length)*w,thick);posX+=(red/values.length)*w;g.beginFill(game.TrendIconUtils.GREEN);g.drawRect(posX,posY,(zero/values.length)*w,thick);posX+=(zero/values.length)*w;g.beginFill(game.TrendIconUtils.BLACK);g.drawRect(posX,posY,(black/values.length)*w,thick);g.endFill();posX=0;posY=60;g.beginFill(0xF9D100);g.drawRect(posX,posY,(odd/(odd+even))*w,thick);posX+=(odd/(odd+even))*w;g.beginFill(0x0997E9);g.drawRect(posX,posY,(even/(odd+even))*w,thick);g.endFill();posX=30;posY=130;var maxCount=this.numCount[this.numCount.length-1].count;var c=0x0098E0;var h=40*total/maxCount;var dis=30;var count=0;for(var i=0;i<5;i++){if(i>=this.numCount.length)
break;this['tf_'+count].x=g.x+posX+thick*0.5;this['tf_'+count].y=posY+5;this['tf_'+count].text=this.numCount[i].num.toString();count++;g.beginFill(c);g.drawRect(posX,posY,thick,-(7+7*(i+1)));posX+=dis;c+=0x070707;}
c=0x9C0318;var arr=[];for(var i=0;i<5;i++){arr[i]=c;c+=0x070707;}
for(var i=this.numCount.length-1;i>this.numCount.length-5-1;i--){if(i<0)
break;this['tf_'+count].x=g.x+posX+thick*0.5;this['tf_'+count].y=posY+5;this['tf_'+count].text=this.numCount[i].num.toString();g.beginFill(arr[i-(this.numCount.length-5-1)-1]);g.drawRect(posX,posY,thick,-(7+7*(i-(this.numCount.length-5-1))));posX+=dis;count++;}};return StatsDetail;}(game.BaseGameDetail));roulette.StatsDetail=StatsDetail;})(roulette||(roulette={}));var roulette;(function(roulette){var GameInfoCon=(function(_super){__extends(GameInfoCon,_super);function GameInfoCon(gameModel){return _super.call(this,gameModel)||this;}
GameInfoCon.prototype.initGameDetailCon=function(){this.gameDetailCon=new roulette.GenGameDetailCon(this.gameModel);this.addChild(this.gameDetailCon);this.gameDetailCon.y=90;};return GameInfoCon;}(game.BaseGameInfoCon));roulette.GameInfoCon=GameInfoCon;})(roulette||(roulette={}));var roulette;(function(roulette){var GameResult=(function(_super){__extends(GameResult,_super);function GameResult(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameResult.prototype.initialize=function(){var numCon=new PIXI.Container();numCon.x=0;numCon.y=90;this.numCon=numCon;this.gameModel.overlay.addChildAt(numCon,0);var bg=new PIXI.Graphics();bg.beginFill(0x000000,0.8);bg.drawRect(0,0,377,190);numCon.addChild(bg);var icon=new roulette.TrendDettailIcon(60,30);numCon.addChild(icon);this.icon=icon;icon.x=(bg.width-icon.size)*0.5;icon.y=(bg.height-icon.size)*0.5;this.numCon.visible=false;};GameResult.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:break;case game.ViewMode.MODE_3D:break;}};GameResult.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};GameResult.prototype.showResult=function(data){this.numCon.visible=true;var item=new game.netdata.TrendsItem();item.roundid=data.content.roundid;item.shoe=data.content.shoe;item.round=data.content.round;item.result=roulette.ResultType.getResultFromData(parseInt(data.content.result));this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_num"+data.content.cards);if(item.result.charAt(roulette.ResultType.RED)=='1')
this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_red");if(item.result.charAt(roulette.ResultType.BLACK)=='1')
this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_black");item.cards=data.content.cards;this.icon.setData(item);};GameResult.prototype.reset=function(){this.numCon.visible=false;};return GameResult;}(game.BaseGameResult));roulette.GameResult=GameResult;})(roulette||(roulette={}));var roulette;(function(roulette){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.initialize=function(){_super.prototype.initialize.call(this);this.vodBg=new PIXI.Graphics();this.vodBg.beginFill(0x000000);this.vodBg.drawRect(0,0,512,309);this.vodBg.x=this.gameModel.VOD_X;this.vodBg.y=this.gameModel.VOD_Y;this.vodBg.endFill();this.chipControl=new roulette.ChipControl(this.gameModel);this.chipControl.dissable();this.gameModel.chipControl=this.chipControl;this.betArea=new roulette.BetArea(this.gameModel,this.betInput);this.betArea.dissable();this.addChild(this.betArea);this.trendMng=new roulette.TrendMng(this.gameModel);this.trendMng.visible=false;this.overlay.addChildAt(this.trendMng,this.overlay.children.length-2);this.overlay.setChildIndex(this.trendMng.trendInfoPanel,this.overlay.children.length-1);this.betControl=new game.BetControl(this.gameModel);this.betControl.x=477;this.betControl.y=580;this.betControl.hide();this.addChild(this.betControl);this.addChild(this.chipControl);_super.prototype.initCountDown.call(this);this.countdown.x=640;this.countdown.y=383;if(this.tipCon)
this.tipCon.y=390;this.gameResult=(new roulette.GameResult(this.gameModel));this.addChild(this.gameResult);this.gameHUD=new roulette.GameHUD(this.gameModel);this.addChild(this.gameHUD);this.updateView();};GameView.prototype.activeSuperHand=function(isSupper){if(this.bonusBg)
this.bonusBg.gotoAndStop(isSupper?1:0);};GameView.prototype.updateVodView=function(){if(!this.vodInited)
return;var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.gameModel.VOD_WIDTH=511;this.gameModel.VOD_HEIGHT=311;this.gameModel.VOD_X=386;this.gameModel.VOD_Y=3;this.processVodLoadMediaData();break;case game.ViewMode.MODE_3D:break;}
this.sizeHandler();};GameView.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;this.updateVodView();switch(viewMode){case game.ViewMode.MODE_2D:this.chipControl.x=915.95;this.chipControl.y=741;this.betControl.x=483;this.betControl.y=730;this.betArea.collectWinPos.x=115;this.betArea.collectWinPos.y=722;this.betInput.x=507;this.betInput.y=732;this.countdown.scale.x=0.9;this.countdown.scale.y=0.9;this.countdown.y=375;break;case game.ViewMode.MODE_3D:break;}};GameView.prototype.changeView=function(){this.updateView();this.gameResult.changeView();_super.prototype.changeView.call(this);};GameView.prototype.confirmBet=function(){if(this.betArea.getTotalBet()==0)
return false;if(this.betArea.getTotalBet()>this.gameModel.betSettings["10301"].max*50){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.MAX_BET_PER_HAND_ALERT);return false;}
if(this.betArea.getPendingAmount()<this.gameModel.betSettings["10301"].min){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.MIN_BET_PER_HAND_ALERT.replace('{0}',this.gameModel.betSettings["10301"].min));return false;}
return _super.prototype.confirmBet.call(this);};return GameView;}(game.BaseGameView));roulette.GameView=GameView;})(roulette||(roulette={}));var roulette;(function(roulette){var GenIconCount=(function(_super){__extends(GenIconCount,_super);function GenIconCount(gameModel){return _super.call(this,gameModel)||this;}
GenIconCount.prototype.destructor=function(){this.tfs=[];this.icons=[];_super.prototype.destructor.call(this);};GenIconCount.prototype.initialize=function(){this.tfs=[];this.icons=[];var results=[];results.push(roulette.ResultType.getResult(roulette.ResultType.BIG));results.push(roulette.ResultType.getResult(roulette.ResultType.SMALL));results.push(roulette.ResultType.getResult(roulette.ResultType.TIE));results.push(roulette.ResultType.getResult(roulette.ResultType.EVEN));results.push(roulette.ResultType.getResult(roulette.ResultType.ODD));results.push(roulette.ResultType.getResult(roulette.ResultType.RED));results.push(roulette.ResultType.getResult(roulette.ResultType.BLACK));var dis=20;var posX=0;var icon;for(var i=0;i<results.length;i++){icon=new roulette.GenPearlRoadIcon().setData(16);icon.x=posX;posX+=dis;if(i==0||i==1)
icon.setType(game.TrendType.BIG_SMALL);if(i==3||i==4)
icon.setType(game.TrendType.EVEN_ODD);if(i==5||i==6)
icon.setType(game.TrendType.RED_BLACK);icon.draw(new game.netdata.TrendsItem().setData(results[i]));var tf=game.GameUtils.createText('0',{fontFamily:"Arial",fontSize:12,fill:0xffffff,align:'center'});tf.anchor.x=0.5;tf.x=icon.x;tf.y=icon.y+8;this.tfs[i]=tf;this.icons[i]=icon;this.addChild(icon);this.addChild(tf);}
this.clear();};GenIconCount.prototype.clear=function(){for(var i=0;i<this.tfs.length;i++){this.tfs[i].text='0';}};GenIconCount.prototype.addTrend=function(item,isAnim){if(isAnim===void 0){isAnim=false;}
var ind=-1;if(item.result.charAt(roulette.ResultType.BIG)=='1')
ind=0;if(item.result.charAt(roulette.ResultType.SMALL)=='1')
ind=1;if(item.result.charAt(roulette.ResultType.TIE)=='1')
ind=2;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(roulette.ResultType.EVEN)=='1')
ind=3;if(item.result.charAt(roulette.ResultType.ODD)=='1')
ind=4;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(roulette.ResultType.RED)=='1')
ind=5;if(item.result.charAt(roulette.ResultType.BLACK)=='1')
ind=6;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}};GenIconCount.prototype.updateTrends=function(values){for(var i=0;i<values.length;i++)
this.addTrend(values[i]);};return GenIconCount;}(game.IconCount));roulette.GenIconCount=GenIconCount;})(roulette||(roulette={}));var roulette;(function(roulette){var GenPearlRoad=(function(_super){__extends(GenPearlRoad,_super);function GenPearlRoad(gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem){if(name===void 0){name="";}
if(isHoverIcon===void 0){isHoverIcon=false;}
if(minItem===void 0){minItem=250;}
if(maxItem===void 0){maxItem=300;}
var _this=_super.call(this,gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem)||this;_this.type=game.TrendType.BIG_SMALL;_this.underlay.alpha=0.6;return _this;}
return GenPearlRoad;}(game.PearlRoad));roulette.GenPearlRoad=GenPearlRoad;})(roulette||(roulette={}));var roulette;(function(roulette){var GenPredict=(function(_super){__extends(GenPredict,_super);function GenPredict(gameModel){return _super.call(this,gameModel)||this;}
GenPredict.prototype.destructor=function(){_super.prototype.destructor.call(this);};GenPredict.prototype.initialize=function(){this.banker=new PIXI.Container();this.player=new PIXI.Container();this.gameModel.toolTip.addToolTip(this.banker,game.GameText.PREDICT.replace('{0}',game.GameText.BIG));this.gameModel.toolTip.addToolTip(this.player,game.GameText.PREDICT.replace('{0}',game.GameText.SMALL));this.player.y=45+2;this.addChild(this.banker);this.addChild(this.player);var btns=[this.banker,this.player];var results=['10000','01000'];var names=[game.GameText.BIG.toUpperCase(),game.GameText.SMALL.toUpperCase()];for(var i=0;i<btns.length;i++){var size=18;var posX=12;var posY=32;var dis=22;var bg=new PIXI.Graphics();bg.lineStyle(0,0,0);bg.beginFill(0xffffff);bg.drawRect(0,0,92,45);btns[i]['bg']=bg;btns[i].addChild(bg);var icon1=new roulette.GenPearlRoadIcon().setData(size);icon1.setType(game.TrendType.BIG_SMALL);icon1.draw(new game.netdata.TrendsItem().setData(results[i]));icon1.x=posX;icon1.y=posY;posX+=dis;btns[i].addChild(icon1);var icon2=new roulette.GenTrendIcon().setData(size);icon2.setType(game.TrendType.BIG_SMALL);icon2.draw(new game.netdata.TrendsItem().setData(results[i]));icon2.x=posX;icon2.y=posY;posX+=dis;btns[i].addChild(icon2);var icon3=new roulette.GenSmallRoadIcon().setData(size);icon3.setType(game.TrendType.BIG_SMALL);icon3.draw(new game.netdata.TrendsItem().setData(results[i]));icon3.x=posX;icon3.y=posY;posX+=dis;btns[i].addChild(icon3);var icon4=new roulette.GenCockRoachIcon().setData(size);icon4.setType(game.TrendType.BIG_SMALL);icon4.draw(new game.netdata.TrendsItem().setData(results[i]));icon4.x=posX;icon4.y=posY;posX+=dis;btns[i].addChild(icon4);btns[i]['icon1']=icon1;btns[i]['icon2']=icon2;btns[i]['icon3']=icon3;btns[i]['icon4']=icon4;var tf=game.GameUtils.createText(names[i],{fontFamily:"dinbold",fontSize:16,fontStyle:'bold',fill:0x000000,align:'center'});tf.anchor.x=0.5;tf.x=bg.width*0.5;tf.y=0;btns[i].addChild(tf);btns[i]['tf']=tf;btns[i].buttonMode=true;component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_OVER,this.onOver,this);component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_OUT,this.onOut,this);}};GenPredict.prototype.onOver=function(e){e.target['bg'].alpha=0.8;};GenPredict.prototype.onOut=function(e){e.target['bg'].alpha=1;};;return GenPredict;}(game.Predict));roulette.GenPredict=GenPredict;})(roulette||(roulette={}));var roulette;(function(roulette){var GenTrendInfoPanel=(function(_super){__extends(GenTrendInfoPanel,_super);function GenTrendInfoPanel(gameModel){return _super.call(this,gameModel)||this;}
GenTrendInfoPanel.prototype.initView=function(){this.bg=new PIXI.Graphics();this.addChild(this.bg);this.tf=game.GameUtils.createNormalText('',18,0xffffff,'bold');this.tf.anchor.x=0.5;this.tf.anchor.y=this.tf.anchor.x;this.addChild(this.tf);};GenTrendInfoPanel.prototype.onShow=function(target){this.visible=true;this.bg.clear();this.bg.lineStyle(2,0x000000);this.bg.beginFill(target.info.result.charAt(roulette.ResultType.RED)=='1'?game.TrendIconUtils.RED:0x222222);this.bg.drawRoundedRect(0,0,30,30,3);this.bg.endFill();this.tf.text=target.info.cards.toString();this.tf.x=this.bg.width*0.5-1;this.tf.y=this.bg.height*0.5-1;var p=new PIXI.Point(target.x,target.y);p=target.parent.toGlobal(p);p=this.gameModel.overlay.toLocal(p);p.y+=target.size;if(p.x+this.width>this.gameModel.GAME_WIDTH-game.GameSettings.TABLE_SMALL_VIEW_WIDTH)
p.x=this.gameModel.GAME_WIDTH-this.width-game.GameSettings.TABLE_SMALL_VIEW_WIDTH;if(p.y+this.height>this.gameModel.GAME_HEIGHT)
p.y-=(this.height+target.size*2);this.x=p.x;this.y=p.y;};return GenTrendInfoPanel;}(game.TrendInfoPanel));roulette.GenTrendInfoPanel=GenTrendInfoPanel;})(roulette||(roulette={}));var roulette;(function(roulette){var GenTrendRoad=(function(_super){__extends(GenTrendRoad,_super);function GenTrendRoad(gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem){if(name===void 0){name="";}
if(isHoverIcon===void 0){isHoverIcon=false;}
if(minItem===void 0){minItem=250;}
if(maxItem===void 0){maxItem=300;}
var _this=_super.call(this,gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem)||this;_this.type=game.TrendType.BIG_SMALL;_this.underlay.alpha=0.6;return _this;}
GenTrendRoad.prototype.onExpandBtn=function(e){_super.prototype.onExpandBtn.call(this,e);var btn=e.target;this.underlay.alpha=btn.currentFrame==1?1:0.6;};return GenTrendRoad;}(game.TrendRoad));roulette.GenTrendRoad=GenTrendRoad;})(roulette||(roulette={}));var roulette;(function(roulette){var GenCockRoachIcon=(function(_super){__extends(GenCockRoachIcon,_super);function GenCockRoachIcon(){return _super.call(this)||this;}
return GenCockRoachIcon;}(game.CockRoachIcon));roulette.GenCockRoachIcon=GenCockRoachIcon;})(roulette||(roulette={}));var roulette;(function(roulette){var GenPearlRoadIcon=(function(_super){__extends(GenPearlRoadIcon,_super);function GenPearlRoadIcon(){return _super.call(this)||this;}
GenPearlRoadIcon.prototype.draw=function(info){this.info=info;this.clear();if(info.result.charAt(roulette.ResultType.TIE)=='1'){this.createImg("trend_solid_zero");return;}
var iconType="";switch(this.type){case game.TrendType.BIG_SMALL:iconType=info.result.charAt(roulette.ResultType.BIG)=='1'?"result_red_b":"result_blue_s";break;case game.TrendType.EVEN_ODD:iconType=info.result.charAt(roulette.ResultType.EVEN)=='1'?"result_red_e":"result_blue_o";break;case game.TrendType.RED_BLACK:iconType=info.result.charAt(roulette.ResultType.RED)=='1'?"trend_solid_red":"trend_solid_black";break;}
this.createImg(iconType);};return GenPearlRoadIcon;}(game.PearlRoadIcon));roulette.GenPearlRoadIcon=GenPearlRoadIcon;})(roulette||(roulette={}));var roulette;(function(roulette){var GenSmallRoadIcon=(function(_super){__extends(GenSmallRoadIcon,_super);function GenSmallRoadIcon(){return _super.call(this)||this;}
return GenSmallRoadIcon;}(game.SmallRoadIcon));roulette.GenSmallRoadIcon=GenSmallRoadIcon;})(roulette||(roulette={}));var roulette;(function(roulette){var GenTrendIcon=(function(_super){__extends(GenTrendIcon,_super);function GenTrendIcon(){return _super.call(this)||this;}
GenTrendIcon.prototype.draw=function(info){this.info=info;var type;switch(this.type){case game.TrendType.BIG_SMALL:type=info.result.charAt(roulette.ResultType.BIG)=='1'?0:1;break;case game.TrendType.EVEN_ODD:type=info.result.charAt(roulette.ResultType.EVEN)=='1'?0:1;break;case game.TrendType.RED_BLACK:type=info.result.charAt(roulette.ResultType.RED)=='1'?0:1;break;}
this.clear();this.createImg(type==0?"result_circle_0":"result_circle_1");};return GenTrendIcon;}(game.TrendIcon));roulette.GenTrendIcon=GenTrendIcon;})(roulette||(roulette={}));var roulette;(function(roulette){var NormalTrendContainer=(function(_super){__extends(NormalTrendContainer,_super);function NormalTrendContainer(gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem){if(name===void 0){name="";}
if(isHoverIcon===void 0){isHoverIcon=false;}
if(minItem===void 0){minItem=250;}
if(maxItem===void 0){maxItem=300;}
var _this=_super.call(this,gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem)||this;_this.type=game.TrendType.BIG_SMALL;_this.underlay.alpha=0.6;return _this;}
NormalTrendContainer.prototype.changeWinner=function(item1,item2){if(item1==null||item2==null)
return true;switch(this.type){case game.TrendType.BIG_SMALL:return item1.result.charAt(roulette.ResultType.BIG)!=item2.result.charAt(roulette.ResultType.BIG);case game.TrendType.EVEN_ODD:return item1.result.charAt(roulette.ResultType.EVEN)!=item2.result.charAt(roulette.ResultType.EVEN);case game.TrendType.RED_BLACK:return item1.result.charAt(roulette.ResultType.RED)!=item2.result.charAt(roulette.ResultType.RED);}};NormalTrendContainer.prototype.onExpandBtn=function(e){_super.prototype.onExpandBtn.call(this,e);var btn=e.target;this.underlay.alpha=btn.currentFrame==1?1:0.6;};return NormalTrendContainer;}(game.TrendContainer));roulette.NormalTrendContainer=NormalTrendContainer;})(roulette||(roulette={}));var roulette;(function(roulette){var ResultType=(function(){function ResultType(){}
ResultType.initialize=function(){ResultType.blackMap={};for(var i=0;i<ResultType.blacks.length;i++)
ResultType.blackMap[ResultType.blacks[i]]=true;ResultType.redMap={};for(var i=0;i<ResultType.reds.length;i++)
ResultType.redMap[ResultType.reds[i]]=true;};ResultType.getResult=function(type,src){if(src===void 0){src='0000000';}
return src.substring(0,type)+'1'+src.substring(type+1,7);};ResultType.getResultFromData=function(num){var str='';if(num==0){return'0010000';}
str+=num>18?'1':'0';str+=num<=18?'1':'0';str+='0';str+=num%2==0?'1':'0';str+=num%2==1?'1':'0';str+=ResultType.redMap[num]?'1':'0';str+=ResultType.blackMap[num]?'1':'0';return str;};ResultType.blacks=[2,4,6,8,10,11,13,15,17,20,22,24,26,28,29,31,33,35];ResultType.reds=[1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];ResultType.BIG=0;ResultType.SMALL=1;ResultType.TIE=2;ResultType.EVEN=3;ResultType.ODD=4;ResultType.RED=5;ResultType.BLACK=6;return ResultType;}());roulette.ResultType=ResultType;ResultType.initialize();})(roulette||(roulette={}));var roulette;(function(roulette){var TrendMng=(function(_super){__extends(TrendMng,_super);function TrendMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.pearlViewlTypes=[game.TrendType.BIG_SMALL,game.TrendType.EVEN_ODD,game.TrendType.RED_BLACK];_this.updateView();return _this;}
TrendMng.prototype.destructor=function(){component.VMouseUtils.off(game.GlobalVals.stage,component.VMouseUtils.MOUSE_UP,this.onStageUp,this);component.VMouseUtils.off(this.bg,component.VMouseUtils.MOUSE_DOWN,this.onMouseDown,this);component.VMouseUtils.on(this.expandBtn,component.VMouseUtils.MOUSE_UP,this.onPanelExpand,this);TweenMax.killTweensOf(this);_super.prototype.destructor.call(this);};TrendMng.prototype.getBigBoardName=function(){return game.GameText.BIG_ROAD;};TrendMng.prototype.initView=function(){this.bg=new PIXI.Graphics();this.addChild(this.bg);this.bg.alpha=0.9;this.contentW=1067;this.startY=460;this.isExpanded=false;this.normalTrend=new roulette.NormalTrendContainer(this.gameModel,roulette.GenTrendIcon,765,92,6,this.getBigBoardName(),true);this.normalTrend.myid_='test_id';this.addChild(this.normalTrend);this.bigEyeTrend=new roulette.GenTrendRoad(this.gameModel,roulette.GenTrendIcon,285,46,6,game.GameText.BIG_EYE_ROAD.toUpperCase());this.addChild(this.bigEyeTrend);this.smallTrend=new roulette.GenTrendRoad(this.gameModel,roulette.GenSmallRoadIcon,285,46,6,game.GameText.SMALL_ROAD.toUpperCase());this.addChild(this.smallTrend);this.cockRoachTrend=new roulette.GenTrendRoad(this.gameModel,roulette.GenCockRoachIcon,285,46,6,game.GameText.COCK_ROACH_ROAD.toUpperCase());this.addChild(this.cockRoachTrend);this.pearlRoadTrend=new roulette.GenPearlRoad(this.gameModel,roulette.GenPearlRoadIcon,300,92,6,game.GameText.PEARL_ROAD.toUpperCase(),true);this.addChild(this.pearlRoadTrend);for(var i=0;i<305;i++){this.gameModel.vObjectPool.release(new roulette.GenSmallRoadIcon(),roulette.GenSmallRoadIcon);this.gameModel.vObjectPool.release(new roulette.GenCockRoachIcon(),roulette.GenCockRoachIcon);this.gameModel.vObjectPool.release(new roulette.GenPearlRoadIcon(),roulette.GenPearlRoadIcon);}
for(var i=0;i<605;i++){this.gameModel.vObjectPool.release(new roulette.GenTrendIcon(),roulette.GenTrendIcon);}
this.iconCount=new roulette.GenIconCount(this.gameModel);this.addChild(this.iconCount);this.predict=new roulette.GenPredict(this.gameModel);this.addChild(this.predict);this.predictBankerObj=new game.netdata.TrendsItem().setData('1001010');this.predictPlayerObj=new game.netdata.TrendsItem().setData('0100101');component.VMouseUtils.on(this.predict.player,component.VMouseUtils.MOUSE_DOWN,this.onPredict,this);component.VMouseUtils.on(this.predict.banker,component.VMouseUtils.MOUSE_DOWN,this.onPredict,this);this.maxTrendIndex=this.children.length-1;this.initPearViewBtns();this.initTableBtns();this.initChangeColorBtn();this.initSelectTrendBtns();this.trendInfoPanel=new roulette.GenTrendInfoPanel(this.gameModel);this.trendInfoPanel.hide();this.gameModel.overlay.addChildAt(this.trendInfoPanel,this.gameModel.overlay.children.length-1);this.gameModel.overlay.setChildIndex(this.trendInfoPanel,this.gameModel.overlay.children.length-1);this.expandBtn=new PIXI.Container();this.gameModel.overlay.addChild(this.expandBtn);this.expandBtn.y=this.startY;this.x=-this.contentW;this.visible=false;var bg=new PIXI.Graphics();bg.beginFill(0x26231E);bg.drawRect(0,0,23,151);bg.endFill();this.expandBtn.addChild(bg);var sp=new PIXI.Sprite(PIXI.Texture.fromFrame("trend_icon.png"));sp.anchor.x=0.5;sp.anchor.y=0.5;sp.x=bg.width*0.5;sp.y=bg.height*0.5;game.GameUtils.resizeNodeH(sp,18);this.expandBtn.addChild(sp);this.expandBtn.buttonMode=true;component.VMouseUtils.on(this.expandBtn,component.VMouseUtils.MOUSE_UP,this.onPanelExpand,this);this.gameModel.dispatcher.addEventListener(GameEvent.GAME_TREND_INFO,this.onTrendInfo,this);this.gameModel.dispatcher.addEventListener(GameEvent.GAME_HIDE_TREND_INFO,this.onHideTrendInfo,this);component.VMouseUtils.on(this.normalTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.on(this.bigEyeTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.on(this.smallTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.on(this.cockRoachTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.on(game.GlobalVals.stage,component.VMouseUtils.MOUSE_UP,this.onStageUp,this);component.VMouseUtils.on(this.bg,component.VMouseUtils.MOUSE_DOWN,this.onMouseDown,this);this.visible=false;};TrendMng.prototype.onStageUp=function(){component.VComponentUtils.stopDrag(this);};TrendMng.prototype.onMouseDown=function(){component.VComponentUtils.startDrag(this,new PIXI.Rectangle(0,-this.startY,0,this.gameModel.GAME_HEIGHT-this.height));};TrendMng.prototype.onPanelExpand=function(e){this.isExpanded=!this.isExpanded;TweenMax.killTweensOf(this);this.visible=true;if(this.isExpanded)
this.show();else
this.hide();};TrendMng.prototype.hide=function(){TweenMax.to(this,0.5,{x:-this.contentW,onComplete:function(){this.y=0;this.visible=false;}.bind(this)});};TrendMng.prototype.show=function(){TweenMax.to(this,0.5,{x:0,onUpdate:function(){this.expandBtn.x=this.x+this.contentW;}.bind(this)});};TrendMng.prototype.initSelectTrendBtns=function(trendTypes,txts){if(trendTypes===void 0){trendTypes=null;}
if(txts===void 0){txts=null;}
var trendTypes=[game.TrendType.BIG_SMALL,game.TrendType.EVEN_ODD,game.TrendType.RED_BLACK];var txts=["B/S","E/O","R/B"];_super.prototype.initSelectTrendBtns.call(this,trendTypes,txts);this.trendTypeBtnCon.x=278;this.trendTypeBtnCon.y=465;};TrendMng.prototype.initTableBtns=function(){};TrendMng.prototype.updateTrends=function(tableId,values){if(tableId!=this.gameModel.TABLE_ID)
return;this.activeTableId=this.gameModel.TABLE_ID;this.updateTrendsGame(tableId,values);};TrendMng.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:case game.ViewMode.MODE_7S:var maxView=new PIXI.Rectangle(304,464,758,141);this.normalTrend.setSmallView(new PIXI.Rectangle(maxView.x,maxView.y,661,92));this.normalTrend.setMaxView(maxView);this.bigEyeTrend.setSmallView(new PIXI.Rectangle(maxView.x,559,250,46));this.bigEyeTrend.setMaxView(maxView);this.smallTrend.setSmallView(new PIXI.Rectangle(559,this.bigEyeTrend.y,250,46));this.smallTrend.setMaxView(maxView);this.cockRoachTrend.setSmallView(new PIXI.Rectangle(812,this.bigEyeTrend.y,250,46));this.cockRoachTrend.setMaxView(maxView);this.pearlRoadTrend.setSmallView(new PIXI.Rectangle(25,maxView.y,242,92));this.pearlRoadTrend.setMaxView(maxView);this.pearViewBtn.x=4;this.pearViewBtn.y=464;this.changeColorBtn.x=284;this.changeColorBtn.y=588;this.iconCount.x=34;this.iconCount.y=585;this.predict.x=969;this.predict.y=maxView.y;this.predict.banker.x=0;this.predict.banker.y=0;this.predict.player.x=0;this.predict.player.y=47;this.predict.resizeBtns(93,44);this.bg.clear();this.bg.lineStyle(1,0x26231E);this.bg.beginFill(0x26231E);this.bg.drawRect(0,0,1086,151);this.bg.endFill();this.bg.y=this.startY;this.bg.lineStyle(1,0x777777);this.bg.moveTo(274,5);this.bg.lineTo(274,5+90);this.iconCount.scale.x=1;this.iconCount.scale.y=this.iconCount.scale.x;break;case game.ViewMode.MODE_3D:break;}};TrendMng.prototype.update=function(){_super.prototype.update.call(this);this.expandBtn.x=this.x+this.contentW;this.expandBtn.y=this.y+this.startY;};TrendMng.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return TrendMng;}(game.BaseTrendMng));roulette.TrendMng=TrendMng;})(roulette||(roulette={}));var roulette_7s;(function(roulette_7s){var Game=(function(_super){__extends(Game,_super);function Game(){return _super.call(this)||this;}
Game.prototype.initialize=function(tableId,resources){this.resetGameResultDelay=1500;_super.prototype.initialize.call(this,tableId,resources);return this;};Game.prototype.startGame=function(){_super.prototype.startGame.call(this);};Game.prototype.initView=function(){this.gameView=new roulette_7s.GameView(this.gameModel);this.addChild(this.gameView);};Game.prototype.onAuthSuccess=function(){_super.prototype.onAuthSuccess.call(this);};Game.prototype.onWSOpenHdl=function(){_super.prototype.onWSOpenHdl.call(this);};Game.prototype.onWSCloseHdl=function(){_super.prototype.onWSCloseHdl.call(this);};Game.prototype.onGameEvent=function(e){_super.prototype.onGameEvent.call(this,e);};return Game;}(roulette.Game));roulette_7s.Game=Game;})(roulette_7s||(roulette_7s={}));var roulette_7s;(function(roulette_7s){var BetArea=(function(_super){__extends(BetArea,_super);function BetArea(gameModel,input){return _super.call(this,gameModel,input)||this;}
BetArea.prototype.initChipCon=function(){_super.prototype.initChipCon.call(this);this.playerBetMap={};var betPlace;for(var i=0;i<this.betPlaceArr.length;i++){betPlace=this.betPlaceArr[i];var playerBet=new game.PlayerBetPlace(this.gameModel);this.chipCon.addChildAt(playerBet,this.chipCon.getChildIndex(betPlace));playerBet.betHit=betPlace.betHit;playerBet.x=betPlace.x;playerBet.y=betPlace.y;playerBet.scale.x=betPlace.scale.x;playerBet.scale.y=betPlace.scale.y;this.playerBetMap[betPlace.betHit.id]=playerBet;}};BetArea.prototype.addPlayerChip=function(hit,playerSeat,amount){var playerBet=this.playerBetMap[hit.id];playerBet.addChip(playerSeat,amount);this.getBetPlace(hit.id).y=playerBet.y-5*playerBet.chipStack.length;if(playerBet.chipStack.length){this.getBetPlace(hit.id).hideShadow();this.getBetPlace(hit.id).hasShadow=false;}};BetArea.prototype.onOverHit=function(hit){_super.prototype.onOverHit.call(this,hit);this.gameModel.notify(game.GameEvent.PLAYER_BET_INFO,hit);};BetArea.prototype.onOutHit=function(hit){_super.prototype.onOutHit.call(this,hit);var playerBet=this.playerBetMap[hit.id]?this.playerBetMap[hit.id]:null;var betPlace=this.getBetPlaceWithType(hit.id);if(playerBet)
playerBet.hideSelector();if(betPlace)
betPlace.hideSelector();};BetArea.prototype.reset=function(){_super.prototype.reset.call(this);for(var i=0;i<this.hitArr.length;i++){var hit=this.hitArr[i];var playerBet=this.playerBetMap[hit.id];if(!playerBet)
continue;playerBet.clearChips();this.getBetPlace(hit.id).y=playerBet.y;this.getBetPlace(hit.id).showShadow();this.getBetPlace(hit.id).hasShadow=true;}};BetArea.prototype.onRoomBetSucceed=function(data){if(data.content.seat==this.gameModel.SEAT_ID)
return;var betPlace;for(var i=0;i<data.content.cats.length;i++){betPlace=this.getBetPlace(data.content.cats[i]);if(!betPlace)
continue;this.addPlayerChip(betPlace.betHit,data.content.seat,data.content.amounts[i]);}};BetArea.prototype.onRoomBetInfo=function(data){var seatId;var betType;var betPlace;for(var i=0;i<this.hitArr.length;i++){var hit=this.hitArr[i];var playerBet=this.playerBetMap[hit.id];if(!playerBet)
continue;playerBet.clearChips();}
for(var i=0;i<data.content.seats.length;i++){seatId=data.content.seats[i];if(seatId==this.gameModel.SEAT_ID)
continue;var cats=data.content.cats[i];for(var j=0;j<cats.length;j++){betType=cats[j];betPlace=this.getBetPlace(betType);if(!betPlace)
continue;this.addPlayerChip(betPlace.betHit,seatId,data.content.amounts[i][j]);}}
this.restorePendingBet();};return BetArea;}(roulette.BetArea));roulette_7s.BetArea=BetArea;})(roulette_7s||(roulette_7s={}));var roulette_7s;(function(roulette_7s){var GameHUD=(function(_super){__extends(GameHUD,_super);function GameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameHUD.prototype.initView=function(){_super.prototype.initStatusMsgs.call(this);this.settingCon=new roulette_7s.GenSettingContainer(this.gameModel);this.settingCon.saveBetBtn.visible=true;this.settingCon.x=0;this.settingCon.y=581;this.addChild(this.settingCon);this.gameInfoCon=new roulette.GameInfoCon(this.gameModel);this.addChild(this.gameInfoCon);};return GameHUD;}(roulette.GameHUD));roulette_7s.GameHUD=GameHUD;})(roulette_7s||(roulette_7s={}));var roulette_7s;(function(roulette_7s){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.initialize=function(){_super.prototype.initialize.call(this);this.vodBg=new PIXI.Graphics();this.vodBg.beginFill(0x000000);this.vodBg.drawRect(0,0,512,309);this.vodBg.x=this.gameModel.VOD_X;this.vodBg.y=this.gameModel.VOD_Y;this.vodBg.endFill();this.chipControl=new roulette.ChipControl(this.gameModel);this.chipControl.dissable();this.gameModel.chipControl=this.chipControl;this.betArea=new roulette_7s.BetArea(this.gameModel,this.betInput);this.betArea.dissable();this.addChild(this.betArea);this.playerBetInfo=new game.PlayerBetInfo(this.gameModel,330,242);this.playerBetInfo.x=900;this.playerBetInfo.y=35;this.addChild(this.playerBetInfo);this.trendMng=new roulette.TrendMng(this.gameModel);this.trendMng.visible=false;this.gameModel.overlay.addChildAt(this.trendMng,this.gameModel.overlay.children.length-2);this.overlay.setChildIndex(this.trendMng.trendInfoPanel,this.overlay.children.length-1);this.betControl=new game.BetControl(this.gameModel);this.betControl.x=477;this.betControl.y=580;this.betControl.hide();this.addChild(this.betControl);this.addChild(this.chipControl);this.seatControl=new roulette_7s.SeatControl(this.gameModel);this.addChild(this.seatControl);_super.prototype.initCountDown.call(this);this.countdown.x=640;this.countdown.y=383;this.tipCon.y=370;this.gameResult=(new roulette.GameResult(this.gameModel));this.addChild(this.gameResult);this.gameHUD=new roulette_7s.GameHUD(this.gameModel);this.addChild(this.gameHUD);this.updateView();};GameView.prototype.activeSuperHand=function(isSupper){if(this.bonusBg)
this.bonusBg.gotoAndStop(isSupper?1:0);};GameView.prototype.updateVodView=function(){if(!this.vodInited)
return;var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:this.gameModel.VOD_WIDTH=511;this.gameModel.VOD_HEIGHT=311;this.gameModel.VOD_X=386;this.gameModel.VOD_Y=3;this.processVodLoadMediaData();break;case game.ViewMode.MODE_7S_3D:break;}
this.sizeHandler();};GameView.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;this.updateVodView();switch(viewMode){case game.ViewMode.MODE_7S:this.chipControl.x=915.95;this.chipControl.y=741;this.betControl.x=483;this.betControl.y=730;this.betArea.collectWinPos.x=115;this.betArea.collectWinPos.y=722+50;this.betInput.x=507;this.betInput.y=732;this.betArea.scale.y=0.89;this.betArea.y=20;this.countdown.scale.x=0.9;this.countdown.scale.y=this.countdown.scale.x;this.countdown.y=355;break;case game.ViewMode.MODE_7S_3D:break;}};GameView.prototype.changeView=function(){this.updateView();this.gameResult.changeView();_super.prototype.changeView.call(this);};GameView.prototype.confirmBet=function(){if(this.betArea.getTotalBet()>this.gameModel.betSettings["10301"].max*50){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.MAX_BET_PER_HAND_ALERT);return false;}
if(this.betArea.getPendingAmount()<this.gameModel.betSettings["10301"].min){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.MIN_BET_PER_HAND_ALERT.replace('{0}',this.gameModel.betSettings["10301"].min));return false;}
return _super.prototype.confirmBet.call(this);};return GameView;}(game.BaseGameView));roulette_7s.GameView=GameView;})(roulette_7s||(roulette_7s={}));var roulette_7s;(function(roulette_7s){var GenSettingContainer=(function(_super){__extends(GenSettingContainer,_super);function GenSettingContainer(gameModel){var _this=_super.call(this,gameModel)||this;_this.btn7s.visible=false;_this.roomCon=new game.SelectRoomCon(_this.gameModel);_this.roomCon.x=_this.btn7s.x;_this.addChild(_this.roomCon);_this.roomCon.initialize(7);return _this;}
GenSettingContainer.prototype.destructor=function(){_super.prototype.destructor.call(this);};return GenSettingContainer;}(game.SettingContainer));roulette_7s.GenSettingContainer=GenSettingContainer;})(roulette_7s||(roulette_7s={}));var roulette_7s;(function(roulette_7s){var SeatControl=(function(_super){__extends(SeatControl,_super);function SeatControl(gameModel){return _super.call(this,gameModel)||this;}
SeatControl.prototype.initialize=function(playerInfoW,playerInfoH){if(playerInfoW===void 0){playerInfoW=120;}
if(playerInfoH===void 0){playerInfoH=40;}
_super.prototype.initialize.call(this,playerInfoW,playerInfoH);var settings=[{x:955,y:669.5},{x:735,y:675.1},{x:520,y:675.1},{x:300,y:675.1},{x:72,y:610},{x:72,y:445},{x:273,y:348.2}];this.updateView(settings);};return SeatControl;}(game.BaseSeatControl));roulette_7s.SeatControl=SeatControl;})(roulette_7s||(roulette_7s={}));var dragon_tiger;(function(dragon_tiger){var Game=(function(_super){__extends(Game,_super);function Game(){return _super.call(this)||this;}
Game.prototype.destructor=function(){_super.prototype.destructor.call(this);};Game.prototype.initialize=function(tableId,resources){this.resetGameResultDelay=1500;this.clearTimeoutIds=[];this.dealTimeoutIds=[];this.gameModel.GAME_ID=game.GameID.DRAGON_TIGER;_super.prototype.initialize.call(this,tableId,resources);var str="1 10101,2 10102,3 10103,4 10104,5 10105,6 10106,7 10107";var arr=str.split(',');var betLimitIdMap={};for(var i=0;i<arr.length;i++){var arr2=arr[i].split(' ');betLimitIdMap[arr2[0]]=arr2[1];}
this.gameModel.betLimitIdMap=betLimitIdMap;return this;};Game.prototype.onBetCountDownComplete=function(){_super.prototype.onBetCountDownComplete.call(this);this.gameView.showStatus(game.GameText.WAIT_CARD_DEAL);};Game.prototype.onStopBet=function(){_super.prototype.onStopBet.call(this);this.gameView.gameResult.banker.visible=true;this.gameView.gameResult.player.visible=true;};Game.prototype.resetGameResult=function(){_super.prototype.resetGameResult.call(this);this.gameView.gameResult.banker.visible=false;this.gameView.gameResult.player.visible=false;};Game.prototype.startGame=function(){_super.prototype.startGame.call(this);};Game.prototype.initView=function(){this.gameView=new dragon_tiger.GameView(this.gameModel);this.addChild(this.gameView);};Game.prototype.onAuthSuccess=function(){_super.prototype.onAuthSuccess.call(this);};Game.prototype.onWSOpenHdl=function(){_super.prototype.onWSOpenHdl.call(this);};Game.prototype.onWSCloseHdl=function(){_super.prototype.onWSCloseHdl.call(this);};Game.prototype.onGameEvent=function(e){_super.prototype.onGameEvent.call(this,e);};return Game;}(game.BaseGame));dragon_tiger.Game=Game;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var BetArea=(function(_super){__extends(BetArea,_super);function BetArea(gameModel,input){return _super.call(this,gameModel,input)||this;}
BetArea.prototype.initSettings=function(){_super.prototype.initSettings.call(this);this.initLiveChipSettings();this.initBetSettings();};BetArea.prototype.initLiveChipSettings=function(){var settings={};settings['1']={totalPos:new PIXI.Point(436.9,470.9),arr:[new PIXI.Point(402.25,501.9),new PIXI.Point(416.75,497.4),new PIXI.Point(405,487.95),new PIXI.Point(420.15,485.2),new PIXI.Point(431.1,491.2)]};settings['2']={totalPos:new PIXI.Point(813.4,471.45),arr:[new PIXI.Point(866.75,498.7),new PIXI.Point(881.5,503.7),new PIXI.Point(877.5,490),new PIXI.Point(853.85,492.15),new PIXI.Point(863.85,486.5)]};settings['3']={totalPos:new PIXI.Point(697.55,476.2),arr:[new PIXI.Point(666.4,507.45),new PIXI.Point(682.4,510.95),new PIXI.Point(673.15,500.75),new PIXI.Point(687.5,499.5),new PIXI.Point(697.15,505.95)]};this.liveChip2DSetting=settings;};BetArea.prototype.initBetSettings=function(){var settings=[{id:"A1",x:367.95,y:484.9},{id:"A3",x:570.6,y:496.05},{id:"A2",x:709.2,y:484.9},{id:"A5",x:885,y:466.3},{id:"A7",x:898.5,y:499.4},{id:"A4",x:217.9,y:466.25},{id:"A6",x:198.95,y:499.3}];for(var i=0;i<settings.length;i++){settings[i].id=settings[i].id;settings[i].url="DRA_"+settings[i].id+".png";}
this.bet2DSetting=settings;};BetArea.prototype.initJson=function(){var url=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?"assets/dragon_tiger/2d/bet_area.json":(game.GlobalVals.viewMode==game.ViewMode.MODE_3D?"assets/dragon_tiger/3d/bet_area.json":"assets/dragon_tiger/7s/bet_area.json");this.updateJson(url);};BetArea.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:this.liveChip3DSetting;_super.prototype.initLiveChip.call(this,vSetting);};BetArea.prototype.initBetCon=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.initBetCon.call(this,vSetting);};BetArea.prototype.updateText=function(){var viewMode=game.GlobalVals.viewMode;var betAreaText=this.betAreaText;betAreaText.texture=this.gameModel.resources[(viewMode!=game.ViewMode.MODE_2D?viewMode+"_":"")+'bet_area_text'].texture;betAreaText.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;betAreaText.scale.y=betAreaText.scale.x;switch(viewMode){case game.ViewMode.MODE_2D:betAreaText.x=199;betAreaText.y=393;break;case game.ViewMode.MODE_3D:break;}};BetArea.prototype.changeView=function(){var viewMode=game.GlobalVals.viewMode;var url=viewMode==game.ViewMode.MODE_2D?"assets/dragon_tiger/2d/bet_area.json":(viewMode==game.ViewMode.MODE_3D?"assets/dragon_tiger/3d/bet_area.json":"assets/dragon_tiger/7s/bet_area.json");this.updateJson(url);var vSetting=viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.updateBetConSettings.call(this,vSetting);vSetting=viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:this.liveChip3DSetting;this.liveChipMng.updateView(vSetting);this.updateText();_super.prototype.changeView.call(this);};BetArea.prototype.onBetClick=function(hit){var id=hit['id'];if('A4A5A6A7'.indexOf(id)>=0){if(this.gameModel.game.getLastRound()>game.GameSettings.ODD_EVEN_MAX_ROUND){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.ODD_EVEN_MAX_ROUND_ALERT.replace('{0}',game.GameSettings.ODD_EVEN_MAX_ROUND.toString()));return;}}
_super.prototype.onBetClick.call(this,hit);};BetArea.prototype.rebet=function(){for(var i=0;i<this.savedBets.length;i++){var info=this.savedBets[i];var id='A'+info.betType;if('A4A5A6A7'.indexOf(id)>=0){if(this.gameModel.game.getLastRound()>game.GameSettings.ODD_EVEN_MAX_ROUND){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.ODD_EVEN_MAX_ROUND_ALERT.replace('{0}',game.GameSettings.ODD_EVEN_MAX_ROUND.toString()));return;}}}
_super.prototype.rebet.call(this);};BetArea.prototype.getBetName=function(betType){return game.GameText["DragonTiger_"+betType];};return BetArea;}(game.BaseBetArea));dragon_tiger.BetArea=BetArea;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var CardControl=(function(_super){__extends(CardControl,_super);function CardControl(gameModel){return _super.call(this,gameModel)||this;}
CardControl.prototype.initialize=function(){this.cardConfigs=new Array();var c0=new game.CardConfig();c0.x=510.2;c0.y=384.05;c0.vertices=[-0.2,0,71.4,0,67.2,76.8,-12.2,76.8];this.cardConfigs[0]=c0;var c1=new game.CardConfig();c1.x=694;c1.y=384.2;c1.vertices=[-0.2,0,71.4,0,83.1,76.8,3.95,76.8];this.cardConfigs[1]=c1;var c2=new game.CardConfig();c2.x=434.55;c2.y=384.05;c2.vertices=[0,0,71.4,0,59.7,76.8,-18,76.8];this.cardConfigs[2]=c2;var c3=new game.CardConfig();c3.x=768.7;c3.y=384.05;c3.vertices=[0,0,71.4,0,91.7,76.8,11.6,76.8];this.cardConfigs[3]=c3;var c4=new game.CardConfig();c4.x=324.6;c4.y=385.55;c4.vertices=[-0.2,0,104,0,91.6,50.95,-18.6,50.95];this.cardConfigs[4]=c4;var c5=new game.CardConfig();c5.x=846.35;c5.y=385.55;c5.vertices=[-0.2,0,108.2,0,127.8,51.95,12.2,51.95];this.cardConfigs[5]=c5;c0.uvs=[0,0,1,0,1,1,0,1];c1.uvs=c0.uvs.slice();c2.uvs=c0.uvs.slice();c3.uvs=c0.uvs.slice();c4.uvs=[1,0,1,1,0,1,0,0];c5.uvs=c4.uvs.slice();for(var i=0;i<this.cardConfigs.length;i++){this.cardConfigs[i].vertices=new Float32Array(this.cardConfigs[i].vertices);this.cardConfigs[i].uvs=new Float32Array(this.cardConfigs[i].uvs);}
this.cards=[null,null,null,null,null,null];};CardControl.prototype.dealCard=function(cardId,cardPos,animated){if(animated===void 0){animated=true;}
_super.prototype.dealCard.call(this,cardId,cardPos,animated);this.updateCardVals();};CardControl.prototype.clearCard=function(carPos){_super.prototype.clearCard.call(this,carPos);this.updateCardVals();};CardControl.prototype.clearAllCards=function(){_super.prototype.clearAllCards.call(this);this.updateCardVals();};CardControl.prototype.updateCardVals=function(){var gameResult=this.gameModel.gameView.gameResult;var dcards="";var tcards="";for(var i=0;i<this.cards.length;i++){if(!this.cards[i])
continue;if(i%2==0)
dcards+=this.cards[i]['cardId'];else
tcards+=this.cards[i]['cardId'];}
gameResult.setPlayerCard(gameResult.getCardVal(tcards));gameResult.setBankerCard(gameResult.getCardVal(dcards));};return CardControl;}(game.BaseCardControl));dragon_tiger.CardControl=CardControl;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var ChipControl=(function(_super){__extends(ChipControl,_super);function ChipControl(gameModel){return _super.call(this,gameModel)||this;}
ChipControl.prototype.initChipPos=function(){this.updateChipPos(null);};ChipControl.prototype.initChips=function(schips,shownRange){_super.prototype.initChips.call(this,schips,shownRange);this.updateLeftRight();};ChipControl.prototype.updateLeftRight=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y-7;this.rightArrow.rotation=-10*Math.PI/180;break;case game.ViewMode.MODE_3D:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y;this.rightArrow.rotation=0;break;}};ChipControl.prototype.updateChipPos=function(chipsPos){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.chipsPos=[new PIXI.Point(-52.35,1.85),new PIXI.Point(0.05,0.65),new PIXI.Point(51.05,-1.55),new PIXI.Point(102.15,-5.2),new PIXI.Point(154.85,-10.95),new PIXI.Point(207.4,-19.4),new PIXI.Point(257.55,-28.45),new PIXI.Point(305.95,-38.85)];break;case game.ViewMode.MODE_3D:this.chipsPos=[new PIXI.Point(-52.25,0.55),new PIXI.Point(-0.6,0.55),new PIXI.Point(51.05,0.55),new PIXI.Point(102.7,0.55),new PIXI.Point(154.35,0.55),new PIXI.Point(206,0.55),new PIXI.Point(257.65,0.55),new PIXI.Point(309.3,0.55)];break;}
_super.prototype.updateChipPos.call(this,this.chipsPos);};ChipControl.prototype.changeView=function(){this.updateChipPos(null);this.updateLeftRight();this.drawMasker();_super.prototype.changeView.call(this);};return ChipControl;}(game.BaseChipControl));dragon_tiger.ChipControl=ChipControl;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var DBetType=(function(){function DBetType(){}
DBetType.getResult=function(type,src){if(src===void 0){src='0000000';}
return src.substring(0,type-1)+'1'+src.substring(type,7);};DBetType.DRAGON=1;DBetType.TIGER=2;DBetType.TIE=3;DBetType.DRAGON_ODD=4;DBetType.TIGER_ODD=5;DBetType.DRAGON_EVEN=6;DBetType.TIGER_EVEN=7;return DBetType;}());dragon_tiger.DBetType=DBetType;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var GameHUD=(function(_super){__extends(GameHUD,_super);function GameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameHUD.prototype.initView=function(){_super.prototype.initView.call(this);this.settingCon=new game.SettingContainer(this.gameModel);this.settingCon.x=0;this.settingCon.y=581;this.addChild(this.settingCon);this.gameInfoCon=new dragon_tiger.GameInfoCon(this.gameModel);this.addChild(this.gameInfoCon);};GameHUD.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.settingCon.x=0;this.settingCon.y=580;this.gameInfoCon.expand();this.gameInfoCon.resizeBtn.visible=false;break;case game.ViewMode.MODE_3D:this.settingCon.x=0;this.settingCon.y=632;this.gameInfoCon.collapse();this.gameInfoCon.resizeBtn.visible=true;break;}};GameHUD.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameHUD;}(game.BaseGameHUD));dragon_tiger.GameHUD=GameHUD;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var GenGameDetailCon=(function(_super){__extends(GenGameDetailCon,_super);function GenGameDetailCon(){return _super!==null&&_super.apply(this,arguments)||this;}
GenGameDetailCon.prototype.initLimitDetail=function(){this.limitDetail=new dragon_tiger.GenLimitDetail(this.gameModel,this.viewW,this.viewH);};GenGameDetailCon.prototype.initLivePoolDetail=function(){this.livePoolDetail=new dragon_tiger.GenLivePoolDetail(this.gameModel,this.viewW,this.viewH);};return GenGameDetailCon;}(game.GameDetailCon));dragon_tiger.GenGameDetailCon=GenGameDetailCon;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var GenLimitDetail=(function(_super){__extends(GenLimitDetail,_super);function GenLimitDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
GenLimitDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLimitDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();this.tfs=[];var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.DRAGON+' / '+game.GameText.TIGER,game.GameText.TIE,game.GameText.DRAGON+" "+game.GameText.ODD+'/'+game.GameText.EVEN,game.GameText.TIGER+" "+game.GameText.ODD+'/'+game.GameText.EVEN];var posX=12;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;for(var i=0;i<texts.length;i++){tf=game.GameUtils.createText(texts[i],style);tf.x=posX;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};GenLimitDetail.prototype.setData=function(data){this.tfs[0].text=component.VComponentUtils.getNumInFormat(data.content[0].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[0].max);this.tfs[1].text=component.VComponentUtils.getNumInFormat(data.content[2].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[2].max);this.tfs[2].text=component.VComponentUtils.getNumInFormat(data.content[3].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[3].max);this.tfs[3].text=component.VComponentUtils.getNumInFormat(data.content[4].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[4].max);};return GenLimitDetail;}(game.LimitDetail));dragon_tiger.GenLimitDetail=GenLimitDetail;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var GenLivePoolDetail=(function(_super){__extends(GenLivePoolDetail,_super);function GenLivePoolDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
GenLivePoolDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLivePoolDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.DRAGON,game.GameText.TIGER,game.GameText.TIE,game.GameText.DRAGON_ODD,game.GameText.TIGER_ODD,game.GameText.DRAGON_EVEN,game.GameText.TIGER_EVEN];var results=[];results.push([dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.DRAGON),game.TrendType.NORMAL]);results.push([dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.TIGER),game.TrendType.NORMAL]);results.push([dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.TIE),game.TrendType.NORMAL]);results.push([dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.DRAGON_ODD,dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.DRAGON)),game.TrendType.DRAGON]);results.push([dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.TIGER_ODD,dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.TIGER)),game.TrendType.TIGER]);results.push([dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.DRAGON_EVEN,dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.DRAGON)),game.TrendType.DRAGON]);results.push([dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.TIGER_EVEN,dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.TIGER)),game.TrendType.TIGER]);this.tfs=[];var posX=5;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;var icon;for(var i=0;i<texts.length;i++){icon=new dragon_tiger.DraPearlIcon().setData(game.TrendIconUtils.NORMAL_SIZE);content.addChild(icon);icon.x=posX+icon.size*0.5;icon.y=posY+icon.size*0.5;icon.setType(results[i][1]);icon.drawResult(results[i][0]);tf=game.GameUtils.createText(texts[i],style);tf.x=posX+20;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};return GenLivePoolDetail;}(game.LivePoolDetail));dragon_tiger.GenLivePoolDetail=GenLivePoolDetail;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var GameInfoCon=(function(_super){__extends(GameInfoCon,_super);function GameInfoCon(gameModel){return _super.call(this,gameModel)||this;}
GameInfoCon.prototype.initGameDetailCon=function(){this.gameDetailCon=new dragon_tiger.GenGameDetailCon(this.gameModel);this.addChild(this.gameDetailCon);this.gameDetailCon.y=90;};return GameInfoCon;}(game.BaseGameInfoCon));dragon_tiger.GameInfoCon=GameInfoCon;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var GameResult=(function(_super){__extends(GameResult,_super);function GameResult(gameModel){var _this=_super.call(this,gameModel,'dragon','tiger')||this;_this.updateView();return _this;}
GameResult.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:case game.ViewMode.MODE_7S:this.playerCardVal.x=920;this.playerCardVal.y=324;this.bankerCardVal.x=306;this.bankerCardVal.y=324;this.result1Tf.y=360;this.result2Tf.y=380+30;this.player.x=784;this.player.y=320;this.banker.x=400;this.banker.y=this.player.y;break;case game.ViewMode.MODE_3D:break;}};GameResult.prototype.showResult=function(data){var results=data.content.result;var cards=data.content.cards;if(results.charAt(dragon_tiger.DBetType.DRAGON-1)=='1')
this.banker.gotoAndStop(1);if(results.charAt(dragon_tiger.DBetType.TIGER-1)=='1')
this.player.gotoAndStop(1);var arr=cards.split('#');var val;val=this.getCardVal(arr[1]);this.setPlayerCard(val);val=this.getCardVal(arr[0]);this.setBankerCard(val);if(results.charAt(dragon_tiger.DBetType.DRAGON-1)=='1'){this.result1Tf.text=game.GameText.DRAGON;this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.DRAGON_WIN);}
else if(results.charAt(dragon_tiger.DBetType.TIGER-1)=='1'){this.result1Tf.text=game.GameText.TIGER;this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.TIGER_WIN);}
else{this.result1Tf.text=game.GameText.TIE;this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.TIE);}};GameResult.prototype.getCardVal=function(cards){var card;var val=0;for(var i=0;i<cards.length/2;i++){card=cards[i*2+1];val+='TJQK'.indexOf(card)>=0?10+'TJQK'.indexOf(card):(card=='A'?1:parseInt(card));}
return val;};GameResult.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameResult;}(game.BaseGameResult));dragon_tiger.GameResult=GameResult;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.initialize=function(){_super.prototype.initialize.call(this);this.bg.texture=this.gameModel.resources['table_bg_red'].texture;this.vodBg=new PIXI.Graphics();this.vodBg.beginFill(0x000000);this.vodBg.drawRect(0,0,512,309);this.vodBg.x=this.gameModel.VOD_X;this.vodBg.y=this.gameModel.VOD_Y;this.vodBg.endFill();this.initTrends();this.chipControl=new dragon_tiger.ChipControl(this.gameModel);this.chipControl.x=907;this.chipControl.y=591;this.chipControl.dissable();this.gameModel.chipControl=this.chipControl;this.betArea=new dragon_tiger.BetArea(this.gameModel,this.betInput);this.betArea.dissable();this.addChild(this.betArea);this.betControl=new game.BetControl(this.gameModel);this.betControl.x=477;this.betControl.y=580;this.betControl.hide();this.cardControl=new dragon_tiger.CardControl(this.gameModel);this.addChild(this.cardControl);this.addChild(this.betControl);this.addChild(this.chipControl);_super.prototype.initCountDown.call(this);this.countdown.x=640;this.countdown.y=383;this.gameResult=(new dragon_tiger.GameResult(this.gameModel));this.addChild(this.gameResult);this.gameHUD=new dragon_tiger.GameHUD(this.gameModel);this.addChild(this.gameHUD);this.updateView();};GameView.prototype.activeSuperHand=function(isSupper){};GameView.prototype.updateVodView=function(){if(!this.vodInited)
return;var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.gameModel.VOD_WIDTH=511;this.gameModel.VOD_HEIGHT=311;this.gameModel.VOD_X=386;this.gameModel.VOD_Y=3;this.processVodLoadMediaData();break;case game.ViewMode.MODE_3D:this.gameModel.VOD_X=0;this.gameModel.VOD_Y=-140;this.gameModel.VOD_WIDTH=this.gameModel.GAME_WIDTH-2*this.gameModel.VOD_X;this.gameModel.VOD_HEIGHT=this.gameModel.GAME_HEIGHT;this.processVodLoadMediaData();break;}
this.sizeHandler();};GameView.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;this.updateVodView();switch(viewMode){case game.ViewMode.MODE_2D:this.chipControl.x=907;this.chipControl.y=591;this.betControl.x=477;this.betControl.y=580;this.cardControl.visible=true;this.bg.y=0;this.betArea.collectWinPos.x=138;this.betArea.collectWinPos.y=572;this.betInput.x=497+6;this.betInput.y=583;break;case game.ViewMode.MODE_3D:break;}};GameView.prototype.changeView=function(){this.updateView();this.gameResult.changeView();_super.prototype.changeView.call(this);};return GameView;}(game.BaseGameViewGroup1));dragon_tiger.GameView=GameView;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var DraIconCount=(function(_super){__extends(DraIconCount,_super);function DraIconCount(gameModel){return _super.call(this,gameModel)||this;}
DraIconCount.prototype.initialize=function(){this.tfs=[];this.icons=[];var results=[];results.push([dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.DRAGON),game.TrendType.NORMAL]);results.push([dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.TIGER),game.TrendType.NORMAL]);results.push([dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.TIE),game.TrendType.NORMAL]);results.push([dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.DRAGON_EVEN,dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.DRAGON)),game.TrendType.DRAGON]);results.push([dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.DRAGON_ODD,dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.DRAGON)),game.TrendType.DRAGON]);results.push([dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.TIGER_EVEN,dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.TIGER)),game.TrendType.TIGER]);results.push([dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.TIGER_ODD,dragon_tiger.DBetType.getResult(dragon_tiger.DBetType.TIGER)),game.TrendType.TIGER]);var dis=20;var posX=0;var icon;for(var i=0;i<results.length;i++){icon=new dragon_tiger.DraPearlIcon().setData(16);icon.x=posX;posX+=dis;icon.setType(results[i][1]);icon.draw(new game.netdata.TrendsItem().setData(results[i][0]));var tf=game.GameUtils.createText('0',{fontFamily:"Arial",fontSize:12,fill:0xffffff,align:'center'});tf.anchor.x=0.5;tf.x=icon.x;tf.y=icon.y+8;this.tfs[i]=tf;this.icons[i]=icon;this.addChild(icon);this.addChild(tf);}
this.clear();};DraIconCount.prototype.clear=function(){for(var i=0;i<this.tfs.length;i++){this.tfs[i].text='0';}};DraIconCount.prototype.addTrend=function(item,isAnim){if(isAnim===void 0){isAnim=false;}
var ind=-1;if(item.result.charAt(dragon_tiger.DBetType.DRAGON-1)=='1')
ind=0;if(item.result.charAt(dragon_tiger.DBetType.TIGER-1)=='1')
ind=1;if(item.result.charAt(dragon_tiger.DBetType.TIE-1)=='1')
ind=2;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(dragon_tiger.DBetType.DRAGON_ODD-1)=='1')
ind=3;if(item.result.charAt(dragon_tiger.DBetType.DRAGON_EVEN-1)=='1')
ind=5;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(dragon_tiger.DBetType.TIGER_ODD-1)=='1')
ind=4;if(item.result.charAt(dragon_tiger.DBetType.TIGER_EVEN-1)=='1')
ind=6;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}};return DraIconCount;}(game.IconCount));dragon_tiger.DraIconCount=DraIconCount;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var DraPredict=(function(_super){__extends(DraPredict,_super);function DraPredict(gameModel){return _super.call(this,gameModel)||this;}
DraPredict.prototype.destructor=function(){_super.prototype.destructor.call(this);};DraPredict.prototype.initialize=function(){this.banker=new PIXI.Container();this.player=new PIXI.Container();this.gameModel.toolTip.addToolTip(this.banker,game.GameText.PREDICT.replace('{0}',game.GameText.DRAGON));this.gameModel.toolTip.addToolTip(this.player,game.GameText.PREDICT.replace('{0}',game.GameText.TIGER));this.player.y=45+2;this.addChild(this.banker);this.addChild(this.player);var btns=[this.banker,this.player];var results=['1000000','0100000'];var names=[game.GameText.DRAGON.toUpperCase(),game.GameText.TIGER.toUpperCase()];for(var i=0;i<btns.length;i++){var size=18;var posX=12;var posY=32;var dis=22;var bg=new PIXI.Graphics();bg.lineStyle(0,0,0);bg.beginFill(0xffffff);bg.drawRect(0,0,92,45);btns[i]['bg']=bg;btns[i].addChild(bg);var icon1=new dragon_tiger.DraPearlIcon().setData(size);icon1.setType(game.TrendType.NORMAL);icon1.draw(new game.netdata.TrendsItem().setData(results[i]));icon1.x=posX;icon1.y=posY;posX+=dis;btns[i].addChild(icon1);var icon2=new dragon_tiger.DraTrendIcon().setData(size);icon2.setType(game.TrendType.NORMAL);icon2.draw(new game.netdata.TrendsItem().setData(results[i]));icon2.x=posX;icon2.y=posY;posX+=dis;btns[i].addChild(icon2);var icon3=new game.SmallRoadIcon().setData(size);icon3.setType(game.TrendType.NORMAL);icon3.draw(new game.netdata.TrendsItem().setData(results[i]));icon3.x=posX;icon3.y=posY;posX+=dis;btns[i].addChild(icon3);var icon4=new game.CockRoachIcon().setData(size);icon4.setType(game.TrendType.NORMAL);icon4.draw(new game.netdata.TrendsItem().setData(results[i]));icon4.x=posX;icon4.y=posY;posX+=dis;btns[i].addChild(icon4);btns[i]['icon1']=icon1;btns[i]['icon2']=icon2;btns[i]['icon3']=icon3;btns[i]['icon4']=icon4;var tf=game.GameUtils.createText(names[i],{fontFamily:"dinbold",fontSize:16,fontStyle:'bold',fill:0x000000,align:'center'});tf.anchor.x=0.5;tf.x=bg.width*0.5;tf.y=0;btns[i].addChild(tf);btns[i]['tf']=tf;btns[i].buttonMode=true;component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_OVER,this.onOver,this);component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_OUT,this.onOut,this);}};DraPredict.prototype.onOver=function(e){e.target['bg'].alpha=0.8;};DraPredict.prototype.onOut=function(e){e.target['bg'].alpha=1;};;return DraPredict;}(game.Predict));dragon_tiger.DraPredict=DraPredict;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var DraTrendInfoPanel=(function(_super){__extends(DraTrendInfoPanel,_super);function DraTrendInfoPanel(gameModel){return _super.call(this,gameModel)||this;}
DraTrendInfoPanel.prototype.initView=function(){_super.prototype.initView.call(this);this.bg.clear();this.bg.beginFill(0x000000);this.bg.drawRoundedRect(0,0,140,55,5);this.bg.endFill();this.bg.lineStyle(1,0xDDDDDD);this.bg.moveTo(70,4);this.bg.lineTo(70,4+48);this.cards[0].x=36;this.cards[3].x=75;this.bankerTf.x=14;this.bankerTf.y=27;this.playerTf.x=125;this.playerTf.y=27;};DraTrendInfoPanel.prototype.initIcons=function(){this.playerIcon=new dragon_tiger.DraPearlIcon();this.playerIcon.drawResult(game.BetType.getResult(dragon_tiger.DBetType.DRAGON));this.playerIcon.x=14;this.playerIcon.y=15;this.playerIcon.width=18;this.playerIcon.scale.y=this.playerIcon.scale.x;this.addChild(this.playerIcon);this.bankerIcon=new dragon_tiger.DraPearlIcon();this.bankerIcon.drawResult(game.BetType.getResult(dragon_tiger.DBetType.TIGER));this.bankerIcon.x=125;this.bankerIcon.y=15;this.bankerIcon.width=18;this.bankerIcon.scale.y=this.bankerIcon.scale.x;this.addChild(this.bankerIcon);};DraTrendInfoPanel.prototype.onShow=function(target){trace("target.info.result = "+target.info.result);this.setData(target.info);var p=new PIXI.Point(target.x,target.y);p=target.parent.toGlobal(p);p=this.gameModel.overlay.toLocal(p);p.y+=target.size;if(p.x+this.width>this.gameModel.GAME_WIDTH-50)
p.x=this.gameModel.GAME_WIDTH-this.width-50;if(p.y+this.height>this.gameModel.GAME_HEIGHT)
p.y-=(this.height+target.size*2);this.x=p.x;this.y=p.y;};DraTrendInfoPanel.prototype.setData=function(data){var cards=data.cards;for(var i=0;i<this.cards.length;i++)
this.cards[i].visible=false;this.visible=true;var arr=cards.split('#');var val=0;var card;var key;var str="";for(var i=0;i<arr[0].length/2;i++)
str+=arr[0].substr(arr[0].length-i*2-2,2);arr[0]=str;for(var i=0;i<arr[0].length/2;i++){key='smallcard_'+arr[0].substr(i*2,2)+".png";this.cards[i].visible=true;this.cards[i].texture=PIXI.Texture.fromFrame(key);card=arr[0][i*2+1];val+='TJQK'.indexOf(card)>=0?10+'TJQK'.indexOf(card):(card=='A'?1:parseInt(card));}
this.bankerTf.text=val.toString();val=0;for(var i=0;i<arr[1].length/2;i++){key='smallcard_'+arr[1].substr(i*2,2)+".png";this.cards[3+i].visible=true;this.cards[3+i].texture=PIXI.Texture.fromFrame(key);card=arr[1][i*2+1];val+='TJQK'.indexOf(card)>=0?10+'TJQK'.indexOf(card):(card=='A'?1:parseInt(card));}
this.playerTf.text=val.toString();};return DraTrendInfoPanel;}(game.TrendInfoPanel));dragon_tiger.DraTrendInfoPanel=DraTrendInfoPanel;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var DraPearlIcon=(function(_super){__extends(DraPearlIcon,_super);function DraPearlIcon(){return _super.call(this)||this;}
DraPearlIcon.prototype.drawResult=function(result){this.clear();var results=result.split('');var win;if(results[dragon_tiger.DBetType.DRAGON-1]=='1')
win=1;if(results[dragon_tiger.DBetType.TIGER-1]=='1')
win=2;if(results[dragon_tiger.DBetType.TIE-1]=='1')
win=3;var iconType=iconType=win==3?"result_solid_2":(win==1?"result_red_d":"result_blue_t");switch(this.type){case game.TrendType.DRAGON:if(results[dragon_tiger.DBetType.DRAGON_ODD-1]=='1')
iconType="result_red_o";if(results[dragon_tiger.DBetType.DRAGON_EVEN-1]=='1')
iconType="result_red_e";break;case game.TrendType.TIGER:if(results[dragon_tiger.DBetType.TIGER_ODD-1]=='1')
iconType="result_blue_o";if(results[dragon_tiger.DBetType.TIGER_EVEN-1]=='1')
iconType="result_blue_e";break;}
this.createImg(iconType);};return DraPearlIcon;}(game.PearlRoadIcon));dragon_tiger.DraPearlIcon=DraPearlIcon;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var DraTrendIcon=(function(_super){__extends(DraTrendIcon,_super);function DraTrendIcon(){return _super.call(this)||this;}
DraTrendIcon.prototype.draw=function(info){this.info=info;var results=info.result.split('');var type;if(results[dragon_tiger.DBetType.DRAGON-1]=='1')
type=1;if(results[dragon_tiger.DBetType.TIGER-1]=='1')
type=2;this.clear();this.createImg(type==1?"result_circle_0":"result_circle_1");};return DraTrendIcon;}(game.TrendIcon));dragon_tiger.DraTrendIcon=DraTrendIcon;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger;(function(dragon_tiger){var TrendMng=(function(_super){__extends(TrendMng,_super);function TrendMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
TrendMng.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:var maxView=new PIXI.Rectangle(366,622,859,140);this.normalTrend.setSmallView(new PIXI.Rectangle(maxView.x,maxView.y,765,92));this.normalTrend.setMaxView(maxView);this.bigEyeTrend.setSmallView(new PIXI.Rectangle(maxView.x,716,285,46));this.bigEyeTrend.setMaxView(maxView);this.smallTrend.setSmallView(new PIXI.Rectangle(653,this.bigEyeTrend.y,285,46));this.smallTrend.setMaxView(maxView);this.cockRoachTrend.setSmallView(new PIXI.Rectangle(940,this.bigEyeTrend.y,285,46));this.cockRoachTrend.setMaxView(maxView);this.pearlRoadTrend.setSmallView(new PIXI.Rectangle(25,maxView.y,300,92));this.pearlRoadTrend.setMaxView(maxView);this.pearViewBtn.x=4;this.pearViewBtn.y=623;this.iconCount.x=25+8;this.iconCount.y=735+8;this.predict.x=1133;this.predict.y=maxView.y;this.predict.banker.x=0;this.predict.banker.y=0;this.predict.player.x=0;this.predict.player.y=47;this.bg.clear();this.bg.lineStyle(1,0x26231E);this.bg.beginFill(0x26231E);this.bg.drawRect(0,0,this.gameModel.GAME_WIDTH,151);this.bg.endFill();this.bg.y=617;this.tableBtnCon.x=328;this.tableBtnCon.y=622;this.iconCount.scale.x=1;this.iconCount.scale.y=this.iconCount.scale.x;break;case game.ViewMode.MODE_3D:break;}};TrendMng.prototype.getBigBoardName=function(){return game.GameSettings.TABLE_INFOS[this.activeTableId].hint.toUpperCase();};TrendMng.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};TrendMng.prototype.initIconCount=function(){this.iconCount=new dragon_tiger.DraIconCount(this.gameModel);};TrendMng.prototype.initNormmalContainer=function(){this.normalTrend=new game.TrendContainer(this.gameModel,dragon_tiger.DraTrendIcon,765,92,6,game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].hint.toUpperCase(),true);};TrendMng.prototype.initPearlRoad=function(){this.pearlRoadTrend=new game.PearlRoad(this.gameModel,dragon_tiger.DraPearlIcon,300,92,6,game.GameText.PEARL_ROAD.toUpperCase(),true);};TrendMng.prototype.initPredict=function(){this.predict=new dragon_tiger.DraPredict(this.gameModel);this.predictBankerObj=new game.netdata.TrendsItem().setData('1001010');this.predictPlayerObj=new game.netdata.TrendsItem().setData('0100101');};TrendMng.prototype.initView=function(){this.pearlViewlTypes=[game.TrendType.NORMAL,game.TrendType.DRAGON,game.TrendType.TIGER];_super.prototype.initView.call(this);};TrendMng.prototype.initTrendInfoPanel=function(){this.trendInfoPanel=new dragon_tiger.DraTrendInfoPanel(this.gameModel);};TrendMng.prototype.onTableBtn=function(e){};TrendMng.prototype.superOnTableBtn=function(e){_super.prototype.onTableBtn.call(this,e);};return TrendMng;}(game.BaseTrendMng));dragon_tiger.TrendMng=TrendMng;})(dragon_tiger||(dragon_tiger={}));var dragon_tiger_7s;(function(dragon_tiger_7s){var Game=(function(_super){__extends(Game,_super);function Game(){return _super.call(this)||this;}
Game.prototype.destructor=function(){_super.prototype.destructor.call(this);};Game.prototype.initialize=function(tableId,resources){_super.prototype.initialize.call(this,tableId,resources);return this;};Game.prototype.startGame=function(){_super.prototype.startGame.call(this);};Game.prototype.initView=function(){this.gameView=new dragon_tiger_7s.GameView(this.gameModel);this.addChild(this.gameView);};Game.prototype.onGameEvent=function(e){_super.prototype.onGameEvent.call(this,e);};return Game;}(dragon_tiger.Game));dragon_tiger_7s.Game=Game;})(dragon_tiger_7s||(dragon_tiger_7s={}));var dragon_tiger_7s;(function(dragon_tiger_7s){var BetArea=(function(_super){__extends(BetArea,_super);function BetArea(gameModel,input){return _super.call(this,gameModel,input)||this;}
BetArea.prototype.initSettings=function(){_super.prototype.initSettings.call(this);this.initBetSettings();};BetArea.prototype.initLiveChipSettings=function(){var settings={};};BetArea.prototype.initBetSettings=function(){var settings=[{id:"A6",x:179.35,y:430.75},{id:"A4",x:406.35,y:463.3},{id:"A5",x:641.75,y:463.3},{id:"A7",x:861.95,y:430.75},{id:"A3",x:143.85,y:467.05,arr:[{x:1060.3,y:504.2},{x:921.35,y:523.9},{x:780.55,y:536.45},{x:639.1,y:540.75},{x:497.9,y:538.75},{x:357.1,y:524.05},{x:217.9,y:504.25}]},{id:"A2_1",x:999.45,y:515.1},{id:"A2_2",x:855.4,y:539.1},{id:"A2_3",x:711.35,y:555.9},{id:"A2_5",x:561.5,y:564.2},{id:"A2_6",x:406.9,y:555.7},{id:"A2_7",x:253.2,y:538.6},{id:"A2_8",x:101.25,y:515.1},{id:"A1_1",x:1025.1,y:562.6},{id:"A1_2",x:871,y:589.4},{id:"A1_3",x:716.35,y:607.4},{id:"A1_5",x:556.35,y:616.25},{id:"A1_6",x:391.55,y:607.2},{id:"A1_7",x:227.4,y:589.1},{id:"A1_8",x:69.2,y:562.25}];for(var i=0;i<settings.length;i++){settings[i].url="DRA_7s_"+settings[i].id+".png";}
this.bet2DSetting=settings;};BetArea.prototype.onBetClick=function(hit){var id=hit['id'];if('A4A5A6A7'.indexOf(id)>=0){trace("this.gameModel.game.getLastRound() "+this.gameModel.game.getLastRound());if(this.gameModel.game.getLastRound()>=game.GameSettings.ODD_EVEN_MAX_ROUND){this.gameModel.notify(game.GameEvent.STATUS_MSG,game.GameText.ODD_EVEN_MAX_ROUND_ALERT.replace('{0}',game.GameSettings.ODD_EVEN_MAX_ROUND.toString()));return;}}
if(hit['seatId']>0&&hit['seatId']!=this.seatId)
return;_super.prototype.onBetClick.call(this,hit);};BetArea.prototype.onBetRightClick=function(hit){if(hit['seatId']>0&&hit['seatId']!=this.seatId)
return;_super.prototype.onBetRightClick.call(this,hit);};BetArea.prototype.initJson=function(){var url=game.GlobalVals.viewMode==game.ViewMode.MODE_7S?"assets/dragon_tiger/7s/bet_area.json":"assets/dragon_tiger/7s_3d/bet_area.json";this.updateJson(url);};BetArea.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}};BetArea.prototype.initBetCon=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_7S?this.bet2DSetting:this.bet3DSetting;_super.prototype.initBetCon.call(this,vSetting);};BetArea.prototype.initChipCon=function(){_super.prototype.initChipCon.call(this);for(var i=1;i<=8;i++){if(i==4)
continue;this.betPlaceMap['A1_'+i].seatId=i;this.betPlaceMap['A2_'+i].seatId=i;this.betPlaceMap['A1_'+i].betHit.seatId=i;this.betPlaceMap['A2_'+i].betHit.seatId=i;}
for(var s in this.betPlaceMap){if(this.betPlaceMap[s]instanceof Array){for(var j=0;j<this.betPlaceMap[s].length;j++){this.betPlaceMap[s][j].scale.x=0.9;this.betPlaceMap[s][j].scale.y=this.betPlaceMap[s][j].scale.x;}}
else{this.betPlaceMap[s].scale.x=0.9;this.betPlaceMap[s].scale.y=this.betPlaceMap[s].scale.x;}}};BetArea.prototype.updateText=function(){var viewMode=game.GlobalVals.viewMode;var betAreaText=this.betAreaText;betAreaText.texture=this.gameModel.resources[(viewMode!=game.ViewMode.MODE_2D?viewMode+"_":"")+'bet_area_text_'+game.GameUtils.getColor(this.gameModel.TABLE_ID)].texture;betAreaText.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;betAreaText.scale.y=betAreaText.scale.x;switch(viewMode){case game.ViewMode.MODE_7S:betAreaText.x=69;betAreaText.y=393;break;case game.ViewMode.MODE_7S_3D:break;}};BetArea.prototype.changeView=function(){var viewMode=game.GlobalVals.viewMode;var url=viewMode==game.ViewMode.MODE_7S?"assets/dragon_tiger/7s/bet_area.json":"assets/dragon_tiger/7s_3d/bet_area.json";this.updateJson(url);var vSetting=viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.updateBetConSettings.call(this,vSetting);this.updateText();_super.prototype.changeView.call(this);};BetArea.prototype.getBetName=function(betType){return game.GameText["DragonTiger_"+betType];};return BetArea;}(game.BaseBetArea));dragon_tiger_7s.BetArea=BetArea;})(dragon_tiger_7s||(dragon_tiger_7s={}));var dragon_tiger_7s;(function(dragon_tiger_7s){var CardControl=(function(_super){__extends(CardControl,_super);function CardControl(gameModel){return _super.call(this,gameModel)||this;}
return CardControl;}(dragon_tiger.CardControl));dragon_tiger_7s.CardControl=CardControl;})(dragon_tiger_7s||(dragon_tiger_7s={}));var dragon_tiger_7s;(function(dragon_tiger_7s){var ChipControl=(function(_super){__extends(ChipControl,_super);function ChipControl(gameModel){return _super.call(this,gameModel)||this;}
return ChipControl;}(baccarat_7s.ChipControl));dragon_tiger_7s.ChipControl=ChipControl;})(dragon_tiger_7s||(dragon_tiger_7s={}));var dragon_tiger_7s;(function(dragon_tiger_7s){var Dra7sDetailCon=(function(_super){__extends(Dra7sDetailCon,_super);function Dra7sDetailCon(gameModel){return _super.call(this,gameModel)||this;}
Dra7sDetailCon.prototype.destructor=function(){this.tabMng.removeEventListener(component.VTabMng.CHANGE,this.onChange,this);_super.prototype.destructor.call(this);};Dra7sDetailCon.prototype.initView=function(){this.viewW=379;this.viewH=157;this.contentY=27;var w=this.viewW;var h=this.viewH;var contentY=this.contentY;var limitBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('limit_icon0001.png'),PIXI.Texture.fromFrame('limit_icon0002.png')]);var livePoolBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('livepool_icon0001.png'),PIXI.Texture.fromFrame('livepool_icon0002.png')]);var trendBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('trend_icon0001.png'),PIXI.Texture.fromFrame('trend_icon0002.png')]);game.GameUtils.resizeNodeH(limitBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(livePoolBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(trendBtn,game.StyleMng.INFO_TAB_BTN_SIZE);this.gameModel.toolTip.addToolTip(limitBtn,game.GameText.LIMITS);this.gameModel.toolTip.addToolTip(livePoolBtn,game.GameText.LIVE_POOL);this.gameModel.toolTip.addToolTip(trendBtn,game.GameText.TREND_CHANGE_TABLE_TOOLTIP.replace('{0} ','').replace('{0}',''));this.trendBtn=trendBtn;var btns=[limitBtn,livePoolBtn,trendBtn];this.btns=btns;for(var i=0;i<btns.length;i++){this.addChild(btns[i]);btns[i].buttonMode=true;btns[i].gotoAndStop(1);btns[i].x=(btns[i].width+1)*i;}
this.limitDetail=new dragon_tiger.GenLimitDetail(this.gameModel,w,h);this.limitDetail.y=contentY;this.addChild(this.limitDetail);this.livePoolDetail=new dragon_tiger.GenLivePoolDetail(this.gameModel,w,h);this.livePoolDetail.y=contentY;this.addChild(this.livePoolDetail);this.trendDetail=new dragon_tiger_7s.TrendDetail(this.gameModel,w,h);this.trendDetail.y=-90;this.addChild(this.trendDetail);var contents=[this.limitDetail,this.livePoolDetail,this.trendDetail];var tabMng=new component.VTabMng();tabMng.initialize(btns,contents);tabMng.addEventListener(component.VTabMng.CHANGE,this.onChange,this);this.tabMng=tabMng;var expandBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_expand0001.png'),PIXI.Texture.fromFrame('info_pane_expand0002.png')],this.onExpand.bind(this));expandBtn.x=this.viewW-expandBtn.width;var conllapseBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_collapse0001.png'),PIXI.Texture.fromFrame('info_pane_collapse0002.png')],this.onCollapse.bind(this));conllapseBtn.x=this.viewW-conllapseBtn.width;var resizeBtn=new component.VToggleButton(expandBtn,conllapseBtn);this.addChild(resizeBtn);resizeBtn.y=this.contentY+this.viewH-resizeBtn.height;this.resizeBtn=resizeBtn;};Dra7sDetailCon.prototype.onChange=function(e){this.resizeBtn.visible=e.data!=this.trendBtn;};Dra7sDetailCon.prototype.onTableLimit=function(){};return Dra7sDetailCon;}(game.GameDetailCon));dragon_tiger_7s.Dra7sDetailCon=Dra7sDetailCon;})(dragon_tiger_7s||(dragon_tiger_7s={}));var dragon_tiger_7s;(function(dragon_tiger_7s){var Dra7sSettingContainer=(function(_super){__extends(Dra7sSettingContainer,_super);function Dra7sSettingContainer(gameModel){var _this=_super.call(this,gameModel)||this;_this.btn7s.visible=false;_this.roomCon=new game.SelectRoomCon(_this.gameModel);_this.roomCon.x=_this.btn7s.x;_this.addChild(_this.roomCon);_this.roomCon.initialize(7);return _this;}
Dra7sSettingContainer.prototype.destructor=function(){_super.prototype.destructor.call(this);};return Dra7sSettingContainer;}(game.SettingContainer));dragon_tiger_7s.Dra7sSettingContainer=Dra7sSettingContainer;})(dragon_tiger_7s||(dragon_tiger_7s={}));var dragon_tiger_7s;(function(dragon_tiger_7s){var GameHUD=(function(_super){__extends(GameHUD,_super);function GameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameHUD.prototype.initView=function(){_super.prototype.initView.call(this);this.settingCon=new dragon_tiger_7s.Dra7sSettingContainer(this.gameModel);this.settingCon.x=0;this.settingCon.y=581;this.addChild(this.settingCon);this.gameInfoCon=new dragon_tiger_7s.GameInfoCon(this.gameModel);this.addChild(this.gameInfoCon);};GameHUD.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:this.settingCon.x=12;this.settingCon.y=730;this.gameInfoCon.expand();this.gameInfoCon.resizeBtn.visible=false;this.settingCon.livePoolBtn.visible=false;break;case game.ViewMode.MODE_7S_3D:break;}};GameHUD.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameHUD;}(game.BaseGameHUD));dragon_tiger_7s.GameHUD=GameHUD;})(dragon_tiger_7s||(dragon_tiger_7s={}));var dragon_tiger_7s;(function(dragon_tiger_7s){var GameInfoCon=(function(_super){__extends(GameInfoCon,_super);function GameInfoCon(gameModel){return _super.call(this,gameModel)||this;}
GameInfoCon.prototype.initGameDetailCon=function(){this.gameDetailCon=new dragon_tiger_7s.Dra7sDetailCon(this.gameModel);this.addChild(this.gameDetailCon);this.gameDetailCon.y=90;};return GameInfoCon;}(game.BaseGameInfoCon));dragon_tiger_7s.GameInfoCon=GameInfoCon;})(dragon_tiger_7s||(dragon_tiger_7s={}));var dragon_tiger_7s;(function(dragon_tiger_7s){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.initialize=function(){_super.prototype.initialize.call(this);this.bg.texture=this.gameModel.resources['table_bg_blue'].texture;this.vodBg=new PIXI.Graphics();this.vodBg.beginFill(0x000000);this.vodBg.drawRect(0,0,512,309);this.vodBg.x=this.gameModel.VOD_X;this.vodBg.y=this.gameModel.VOD_Y;this.vodBg.endFill();this.initTrends();this.chipControl=new dragon_tiger_7s.ChipControl(this.gameModel);this.chipControl.x=907;this.chipControl.y=591;this.chipControl.dissable();this.gameModel.chipControl=this.chipControl;this.betArea=new dragon_tiger_7s.BetArea(this.gameModel,this.betInput);this.betArea.dissable();this.addChild(this.betArea);this.seatControl=new dragon_tiger_7s.SeatControl(this.gameModel);this.addChild(this.seatControl);this.betControl=new game.BetControl(this.gameModel);this.betControl.x=477;this.betControl.y=580;this.betControl.hide();this.cardControl=new dragon_tiger_7s.CardControl(this.gameModel);this.addChild(this.cardControl);this.addChild(this.betControl);this.addChild(this.chipControl);_super.prototype.initCountDown.call(this);this.countdown.x=640;this.countdown.y=383;this.gameResult=(new dragon_tiger.GameResult(this.gameModel));this.addChild(this.gameResult);this.gameHUD=new dragon_tiger_7s.GameHUD(this.gameModel);this.addChild(this.gameHUD);this.setChildIndex(this.overlay,this.children.length-1);this.updateView();this.gameModel.dispatcher.addEventListener(GameEvent.TREND_EXPAND,this.onTrendExpand,this);};GameView.prototype.onTrendExpand=function(e){var trend=e.data;};GameView.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}};GameView.prototype.activeSuperHand=function(isSupper){};GameView.prototype.updateVodView=function(){if(!this.vodInited)
return;var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:this.gameModel.VOD_WIDTH=511;this.gameModel.VOD_HEIGHT=311;this.gameModel.VOD_X=386;this.gameModel.VOD_Y=3;this.processVodLoadMediaData();break;case game.ViewMode.MODE_7S_3D:break;}
this.sizeHandler();};GameView.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;this.updateVodView();switch(viewMode){case game.ViewMode.MODE_7S:this.chipControl.x=915.95;this.chipControl.y=741;this.betControl.x=483;this.betControl.y=730;this.cardControl.visible=true;this.bg.y=0;if(this.gameModel.TABLE_ID)
this.bg.texture=this.gameModel.resources['table_bg_'+game.GameUtils.getColor(this.gameModel.TABLE_ID)].texture;this.betArea.collectWinPos.x=115;this.betArea.collectWinPos.y=722;this.betInput.x=507;this.betInput.y=732;break;case game.ViewMode.MODE_7S_3D:break;}};GameView.prototype.changeView=function(){this.updateView();this.gameResult.changeView();_super.prototype.changeView.call(this);};return GameView;}(game.BaseGameViewGroup1));dragon_tiger_7s.GameView=GameView;})(dragon_tiger_7s||(dragon_tiger_7s={}));var dragon_tiger_7s;(function(dragon_tiger_7s){var SeatControl=(function(_super){__extends(SeatControl,_super);function SeatControl(gameModel){return _super.call(this,gameModel)||this;}
SeatControl.prototype.initialize=function(playerInfoW,playerInfoH){if(playerInfoW===void 0){playerInfoW=120;}
if(playerInfoH===void 0){playerInfoH=40;}
_super.prototype.initialize.call(this,playerInfoW,playerInfoH);var settings=[{x:1128.7,y:641.7},{x:957.3,y:668.9},{x:785.85,y:683},{x:612.65,y:687.35},{x:440.35,y:681.6},{x:268.35,y:667.05},{x:97,y:642.6}];this.updateView(settings);};return SeatControl;}(game.BaseSeatControl));dragon_tiger_7s.SeatControl=SeatControl;})(dragon_tiger_7s||(dragon_tiger_7s={}));var dragon_tiger_7s;(function(dragon_tiger_7s){var TrendDetail=(function(_super){__extends(TrendDetail,_super);function TrendDetail(gameModel,viewW,viewH){var _this=_super.call(this,gameModel)||this;var bg=new PIXI.Graphics();bg.beginFill(0xFFF5E9);bg.drawRect(0,117,viewW,viewH);bg.endFill();_this.addChild(bg);var content=new PIXI.Container();_this.addChild(content);_this.content=content;_this.gameModel.dispatcher.addEventListener(game.GameEvent.TREND_EXPAND,_this.onTrendExpand,_this);return _this;}
TrendDetail.prototype.addTrends=function(trendMng){var content=this.content;content.addChild(trendMng.bigEyeTrend);content.addChild(trendMng.smallTrend);content.addChild(trendMng.cockRoachTrend);};TrendDetail.prototype.onTrendExpand=function(e){var trend=e.data;if(trend.expandBtn.currentFrame==0){trend.setBgAlpha(0.7);if(this.expandedTrend){this.expandedTrend.collapse();this.expandedTrend.setBgAlpha(1);}
this.expandedTrend=trend;}
else{trend.setBgAlpha(1);this.expandedTrend=null;}};return TrendDetail;}(game.GameObject));dragon_tiger_7s.TrendDetail=TrendDetail;})(dragon_tiger_7s||(dragon_tiger_7s={}));var dragon_tiger_7s;(function(dragon_tiger_7s){var TrendMng=(function(_super){__extends(TrendMng,_super);function TrendMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
TrendMng.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_7S:var maxView=new PIXI.Rectangle(384.6,129.55,511,138);this.normalTrend.setSmallView(new PIXI.Rectangle(923+18,34,270-18,92));this.normalTrend.setMaxView(maxView);this.pearlRoadTrend.setSmallView(new PIXI.Rectangle(923+18,130,270-18,92));this.pearlRoadTrend.setMaxView(maxView);this.bigEyeTrend.setSmallView(new PIXI.Rectangle(3,120,372,50));this.bigEyeTrend.setMaxView(maxView);this.removeChild(this.bigEyeTrend);this.smallTrend.setSmallView(new PIXI.Rectangle(3,this.bigEyeTrend.y+this.bigEyeTrend.viewH+1,372,50));this.smallTrend.setMaxView(maxView);this.removeChild(this.smallTrend);this.cockRoachTrend.setSmallView(new PIXI.Rectangle(3,this.smallTrend.y+this.smallTrend.viewH+1,372,50));this.cockRoachTrend.setMaxView(maxView);this.removeChild(this.cockRoachTrend);this.pearViewBtn.x=902;this.pearViewBtn.y=this.pearlRoadTrend.y+4+52;this.iconCount.x=932+18;this.iconCount.y=248;this.predict.x=0;this.predict.y=0;this.predict.banker.x=1200;this.predict.banker.y=this.normalTrend.y;this.predict.player.x=1200;this.predict.player.y=this.pearlRoadTrend.y;this.predict.resizeBtns(22,this.normalTrend.viewH);this.bg.clear();this.bg.lineStyle(1,0x1F1F1F);this.bg.beginFill(0x1F1F1F);this.bg.drawRect(0,0,330,250);this.bg.endFill();this.bg.x=900;this.bg.y=30;this.tableBtnCon.x=902;this.tableBtnCon.y=33;this.iconCount.scale.x=1;this.iconCount.scale.y=this.iconCount.scale.x;this.changeColorBtn.x=902;this.changeColorBtn.y=156.05+52;break;case game.ViewMode.MODE_7S_3D:break;}};TrendMng.prototype.onExpandBtn=function(e){};TrendMng.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};TrendMng.prototype.initIconCount=function(){this.iconCount=new dragon_tiger.DraIconCount(this.gameModel);};TrendMng.prototype.initNormmalContainer=function(){this.normalTrend=new game.TrendContainer(this.gameModel,dragon_tiger.DraTrendIcon,765,92,6,game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].hint.toUpperCase(),true);};TrendMng.prototype.initPearlRoad=function(){this.pearlRoadTrend=new game.PearlRoad(this.gameModel,dragon_tiger.DraPearlIcon,300,92,6,game.GameText.PEARL_ROAD.toUpperCase(),true);};TrendMng.prototype.initPredict=function(){this.predict=new dragon_tiger.DraPredict(this.gameModel);this.predictBankerObj=new game.netdata.TrendsItem().setData('1001010');this.predictPlayerObj=new game.netdata.TrendsItem().setData('0100101');};TrendMng.prototype.initView=function(){this.pearlViewlTypes=[game.TrendType.NORMAL,game.TrendType.DRAGON,game.TrendType.TIGER];_super.prototype.initView.call(this);};TrendMng.prototype.initTrendInfoPanel=function(){this.trendInfoPanel=new dragon_tiger.DraTrendInfoPanel(this.gameModel);};TrendMng.prototype.onTableBtn=function(e){};TrendMng.prototype.superOnTableBtn=function(e){_super.prototype.onTableBtn.call(this,e);};return TrendMng;}(game.BaseTrendMng));dragon_tiger_7s.TrendMng=TrendMng;})(dragon_tiger_7s||(dragon_tiger_7s={}));var lucky_baccarat;(function(lucky_baccarat){var Game=(function(_super){__extends(Game,_super);function Game(){return _super.call(this)||this;}
Game.prototype.destructor=function(){_super.prototype.destructor.call(this);};Game.prototype.initialize=function(tableId,resources){this.resetGameResultDelay=1500;this.clearTimeoutIds=[];this.dealTimeoutIds=[];this.gameModel.GAME_ID=game.GameID.LUCKY_BACCARAT;_super.prototype.initialize.call(this,tableId,resources);var str="A 10001,B 10002,C 10003,T 10023,S 10022,R 10021,F 10018,E 10017,H 10020,G 10019,O 10027,P 10028,Q 10029,L 10024,M 10025,N 10026,X 10030,Y 10031,Z 10032";var arr=str.split(',');var betLimitIdMap={};for(var i=0;i<arr.length;i++){var arr2=arr[i].split(' ');betLimitIdMap[arr2[0]]=arr2[1];}
this.gameModel.betLimitIdMap=betLimitIdMap;return this;};Game.prototype.onBetCountDownComplete=function(){_super.prototype.onBetCountDownComplete.call(this);this.gameView.showStatus(game.GameText.WAIT_CARD_DEAL);};Game.prototype.onStopBet=function(){_super.prototype.onStopBet.call(this);this.gameView.gameResult.banker.visible=true;this.gameView.gameResult.player.visible=true;};Game.prototype.resetGameResult=function(){_super.prototype.resetGameResult.call(this);this.gameView.gameResult.banker.visible=false;this.gameView.gameResult.player.visible=false;};Game.prototype.startGame=function(){_super.prototype.startGame.call(this);};Game.prototype.initView=function(){_super.prototype.initView.call(this);this.gameView=new lucky_baccarat.GameView(this.gameModel);this.addChild(this.gameView);};Game.prototype.onAuthSuccess=function(){_super.prototype.onAuthSuccess.call(this);};Game.prototype.onWSOpenHdl=function(){_super.prototype.onWSOpenHdl.call(this);};Game.prototype.onWSCloseHdl=function(){_super.prototype.onWSCloseHdl.call(this);};Game.prototype.onGameEvent=function(e){_super.prototype.onGameEvent.call(this,e);};return Game;}(game.BaseGame));lucky_baccarat.Game=Game;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var BetArea=(function(_super){__extends(BetArea,_super);function BetArea(gameModel,input){return _super.call(this,gameModel,input)||this;}
BetArea.prototype.initSettings=function(){_super.prototype.initSettings.call(this);this.initLiveChipSettings();this.initBetSettings();};BetArea.prototype.initLiveChipSettings=function(){var settings={};settings['B']={totalPos:new PIXI.Point(267.4,439.45),arr:[new PIXI.Point(232.75,470.45),new PIXI.Point(247.25,465.95),new PIXI.Point(235.5,456.5),new PIXI.Point(250.65,453.75),new PIXI.Point(261.6,459.75)]};settings['A']={totalPos:new PIXI.Point(981.9,437.45),arr:[new PIXI.Point(1035.25,464.7),new PIXI.Point(1050,469.7),new PIXI.Point(1046,456),new PIXI.Point(1022.35,458.15),new PIXI.Point(1032.35,452.5)]};settings['C']={totalPos:new PIXI.Point(704.9,464.7),arr:[new PIXI.Point(673.75,495.95),new PIXI.Point(689.75,499.45),new PIXI.Point(680.5,489.25),new PIXI.Point(694.85,488),new PIXI.Point(704.5,494.45)]};this.liveChip2DSetting=settings;};BetArea.prototype.initBetSettings=function(){var settings=[{id:"B",x:199.25,y:452.2},{id:"S",x:373.6,y:473.5},{id:"C",x:571.9,y:486.1},{id:"T",x:714.7,y:473.5},{id:"R",x:569.05,y:522.05},{id:"A",x:909.4,y:452.2},{id:"H",x:360.3,y:506.2},{id:"G",x:462.7,y:515.7},{id:"F",x:715,y:515.7},{id:"E",x:815.65,y:506.5},{id:"L",x:175.3,y:548.65},{id:"M",x:276.95,y:563.65},{id:"N",x:379.1,y:574.9},{id:"X",x:489.1,y:582.75},{id:"Y",x:591.45,y:586.1},{id:"Z",x:693,y:582.8},{id:"O",x:800.9,y:574.95},{id:"P",x:901,y:563.75},{id:"Q",x:1000.95,y:548.8}];for(var i=0;i<settings.length;i++){settings[i].id=settings[i].id;settings[i].url="LUCK_"+settings[i].id+".png";}
this.bet2DSetting=settings;};BetArea.prototype.initJson=function(){var url=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?"assets/lucky_baccarat/2d/bet_area.json":(game.GlobalVals.viewMode==game.ViewMode.MODE_3D?"assets/lucky_baccarat/3d/bet_area.json":"assets/lucky_baccarat/7s/bet_area.json");this.updateJson(url);};BetArea.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:this.liveChip3DSetting;_super.prototype.initLiveChip.call(this,vSetting);};BetArea.prototype.initBetCon=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.initBetCon.call(this,vSetting);};BetArea.prototype.updateText=function(){var viewMode=game.GlobalVals.viewMode;var betAreaText=this.betAreaText;betAreaText.texture=this.gameModel.resources[(viewMode!=game.ViewMode.MODE_2D?viewMode+"_":"")+'bet_area_text'].texture;betAreaText.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;betAreaText.scale.y=betAreaText.scale.x;switch(viewMode){case game.ViewMode.MODE_2D:betAreaText.x=47;betAreaText.y=373+2;break;case game.ViewMode.MODE_3D:break;}};BetArea.prototype.changeView=function(){var viewMode=game.GlobalVals.viewMode;var url=viewMode==game.ViewMode.MODE_2D?"assets/lucky_baccarat/2d/bet_area.json":(viewMode==game.ViewMode.MODE_3D?"assets/lucky_baccarat/3d/bet_area.json":"assets/lucky_baccarat/7s/bet_area.json");this.updateJson(url);var vSetting=viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.updateBetConSettings.call(this,vSetting);vSetting=viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:this.liveChip3DSetting;this.liveChipMng.updateView(vSetting);this.updateText();_super.prototype.changeView.call(this);};BetArea.prototype.checkRestrict=function(betType){if('TS'.indexOf(betType)>=0){if(this.gameModel.game.getLastRound()>game.GameSettings.LUCKY_PAIR_MAX_ROUND){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.lucky_pairs_not_available.replace('{0}',game.GameSettings.LUCKY_PAIR_MAX_ROUND.toString()));return true;}}
if('EFGH'.indexOf(betType)>=0){if(this.gameModel.game.getLastRound()>game.GameSettings.LUCKY_PAIR_MAX_ROUND){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.generic_not_available.replace('{0}',"'"+this.getBetName(betType)+"'").replace('{1}',game.GameSettings.LUCKY_PAIR_MAX_ROUND.toString()));return true;}}
if('ROPQLMNXYZ'.indexOf(betType)>=0){if(this.gameModel.game.getLastRound()>game.GameSettings.LUCKY_COMMON_MAX_ROUND){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.generic_not_available.replace('{0}',"'"+this.getBetName(betType)+"'").replace('{1}',game.GameSettings.LUCKY_COMMON_MAX_ROUND.toString()));return true;}}
return false;};BetArea.prototype.onBetClick=function(hit){if(this.checkRestrict(hit.betType))
return;_super.prototype.onBetClick.call(this,hit);};BetArea.prototype.rebet=function(){for(var i=0;i<this.savedBets.length;i++){var info=this.savedBets[i];if(this.checkRestrict(info.betType))
return;}
_super.prototype.rebet.call(this);};BetArea.prototype.getBetName=function(bettype){return BetArea.sGetBetName(bettype);};BetArea.sGetBetName=function(bettype){if(!BetArea.betNamesMap){BetArea.betNamesMap={};BetArea.betNamesMap['A']=game.GameText.BANKER;BetArea.betNamesMap['B']=game.GameText.PLAYER;BetArea.betNamesMap['C']=game.GameText.TIE;BetArea.betNamesMap['T']=game.GameText.banker_lucky_pairs;BetArea.betNamesMap['S']=game.GameText.player_lucky_pairs;BetArea.betNamesMap['R']=game.GameText.lucky_6;BetArea.betNamesMap['F']=game.GameText.banker_red;BetArea.betNamesMap['E']=game.GameText.banker_black;BetArea.betNamesMap['H']=game.GameText.player_red;BetArea.betNamesMap['G']=game.GameText.player_black;BetArea.betNamesMap['O']=game.GameText.banker_wins_on_123;BetArea.betNamesMap['P']=game.GameText.banker_wins_on_456;BetArea.betNamesMap['Q']=game.GameText.banker_wins_on_789;BetArea.betNamesMap['L']=game.GameText.player_wins_on_123;BetArea.betNamesMap['M']=game.GameText.player_wins_on_456;BetArea.betNamesMap['N']=game.GameText.player_wins_on_789;BetArea.betNamesMap['X']=game.GameText.tie_on_0123;BetArea.betNamesMap['Y']=game.GameText.tie_on_456;BetArea.betNamesMap['Z']=game.GameText.tie_on_789;}
return BetArea.betNamesMap[bettype];};BetArea.prototype.getBetTypeFromId=function(id){return id;};BetArea.prototype.getBetPlaceWithType=function(betType,seatId){if(seatId===void 0){seatId=0;}
if(seatId==0)
seatId=this.seatId;var obj=this.betPlaceMap[betType]?this.betPlaceMap[betType]:this.betPlaceMap[betType+"_"+seatId];if(!obj)
return null;if(!(obj instanceof Array)){if(obj.seatId>0)
return seatId==obj.seatId?obj:null;else
return seatId==this.seatId?obj:null;}
return obj[seatId>4?seatId-2:seatId-1];};BetArea.prototype.showResult=function(data){this.hideHighlight();var results=data.content.result;var bet;var hit;for(var i=0;i<this.hitArr.length;i++){hit=this.hitArr[i];if(results.charAt(lucky_baccarat.LuckBetResultId.getBetResultId(hit.betType))=='0')
continue;hit['winHL'].visible=true;}};return BetArea;}(game.BaseBetArea));lucky_baccarat.BetArea=BetArea;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var CardControl=(function(_super){__extends(CardControl,_super);function CardControl(gameModel){return _super.call(this,gameModel)||this;}
CardControl.prototype.initialize=function(){this.cardConfigs=new Array();var c0=new game.CardConfig();c0.x=510.2;c0.y=384.05;c0.vertices=[-0.2,0,71.4,0,67.2,76.8,-12.2,76.8];this.cardConfigs[0]=c0;var c1=new game.CardConfig();c1.x=694;c1.y=384.2;c1.vertices=[-0.2,0,71.4,0,83.1,76.8,3.95,76.8];this.cardConfigs[1]=c1;var c2=new game.CardConfig();c2.x=434.55;c2.y=384.05;c2.vertices=[0,0,71.4,0,59.7,76.8,-18,76.8];this.cardConfigs[2]=c2;var c3=new game.CardConfig();c3.x=768.7;c3.y=384.05;c3.vertices=[0,0,71.4,0,91.7,76.8,11.6,76.8];this.cardConfigs[3]=c3;var c4=new game.CardConfig();c4.x=324.6;c4.y=385.55;c4.vertices=[-0.2,0,104,0,91.6,50.95,-18.6,50.95];this.cardConfigs[4]=c4;var c5=new game.CardConfig();c5.x=846.35;c5.y=385.55;c5.vertices=[-0.2,0,108.2,0,127.8,51.95,12.2,51.95];this.cardConfigs[5]=c5;c0.uvs=[0,0,1,0,1,1,0,1];c1.uvs=c0.uvs.slice();c2.uvs=c0.uvs.slice();c3.uvs=c0.uvs.slice();c4.uvs=[1,0,1,1,0,1,0,0];c5.uvs=c4.uvs.slice();for(var i=0;i<this.cardConfigs.length;i++){this.cardConfigs[i].vertices=new Float32Array(this.cardConfigs[i].vertices);this.cardConfigs[i].uvs=new Float32Array(this.cardConfigs[i].uvs);}
this.cards=[null,null,null,null,null,null];};CardControl.prototype.dealCard=function(cardId,cardPos,animated){if(animated===void 0){animated=true;}
_super.prototype.dealCard.call(this,cardId,cardPos,animated);this.updateCardVals();};CardControl.prototype.clearCard=function(carPos){_super.prototype.clearCard.call(this,carPos);this.updateCardVals();};CardControl.prototype.clearAllCards=function(){_super.prototype.clearAllCards.call(this);this.updateCardVals();};CardControl.prototype.updateCardVals=function(){var gameResult=this.gameModel.gameView.gameResult;var bcards="";var pcards="";for(var i=0;i<this.cards.length;i++){if(!this.cards[i])
continue;if(i%2==0)
pcards+=this.cards[i]['cardId'];else
bcards+=this.cards[i]['cardId'];}
gameResult.setPlayerCard(gameResult.getCardVal(pcards));gameResult.setBankerCard(gameResult.getCardVal(bcards));};return CardControl;}(game.BaseCardControl));lucky_baccarat.CardControl=CardControl;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var ChipControl=(function(_super){__extends(ChipControl,_super);function ChipControl(gameModel){return _super.call(this,gameModel)||this;}
ChipControl.prototype.initChipPos=function(){this.updateChipPos(null);};ChipControl.prototype.initChips=function(schips,shownRange){_super.prototype.initChips.call(this,schips,shownRange);this.updateLeftRight();};ChipControl.prototype.updateLeftRight=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y-7;this.rightArrow.rotation=-10*Math.PI/180;break;case game.ViewMode.MODE_3D:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y;this.rightArrow.rotation=0;break;}};ChipControl.prototype.updateChipPos=function(chipsPos){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.chipsPos=[new PIXI.Point(-52.35,1.85),new PIXI.Point(0.05,0.65),new PIXI.Point(51.05,-1.55),new PIXI.Point(102.15,-5.2),new PIXI.Point(154.85,-10.95),new PIXI.Point(207.4,-19.4),new PIXI.Point(257.55,-28.45),new PIXI.Point(305.95,-38.85)];break;case game.ViewMode.MODE_3D:this.chipsPos=[new PIXI.Point(-52.25,0.55),new PIXI.Point(-0.6,0.55),new PIXI.Point(51.05,0.55),new PIXI.Point(102.7,0.55),new PIXI.Point(154.35,0.55),new PIXI.Point(206,0.55),new PIXI.Point(257.65,0.55),new PIXI.Point(309.3,0.55)];break;}
_super.prototype.updateChipPos.call(this,this.chipsPos);};ChipControl.prototype.changeView=function(){this.updateChipPos(null);this.updateLeftRight();this.drawMasker();_super.prototype.changeView.call(this);};return ChipControl;}(game.BaseChipControl));lucky_baccarat.ChipControl=ChipControl;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var CLuckGameView=(function(_super){__extends(CLuckGameView,_super);function CLuckGameView(gameModel){return _super.call(this,gameModel)||this;}
CLuckGameView.prototype.onShowInfo=function(e){this.activePopup=this.infoPopups[e.target.tag];this.activePopup.show();this.activePopup.x=e.target.x-this.activePopup.viewW*0.5+2;this.activePopup.y=e.target.y-this.activePopup.viewH-3;};CLuckGameView.prototype.createLuckyBankerPopup=function(){var popup=new lucky_baccarat.BankerPopup(null);popup.hide();this.gameModel.overlay.addChild(popup);return popup;};CLuckGameView.prototype.createLuckyPlayerPopup=function(){var popup=new lucky_baccarat.BankerPopup(null);popup.titleTf.text=game.GameText.player_lucky_pairs;popup.hide();this.gameModel.overlay.addChild(popup);return popup;};CLuckGameView.prototype.onHideInfo=function(){if(this.activePopup)
this.activePopup.hide();};return CLuckGameView;}(game.BaseGameViewGroup1));lucky_baccarat.CLuckGameView=CLuckGameView;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var GameHUD=(function(_super){__extends(GameHUD,_super);function GameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameHUD.prototype.initView=function(){_super.prototype.initView.call(this);this.settingCon=new game.SettingContainer(this.gameModel);this.settingCon.x=0;this.settingCon.y=581+48;this.addChild(this.settingCon);this.gameInfoCon=new lucky_baccarat.GameInfoCon(this.gameModel);this.addChild(this.gameInfoCon);};GameHUD.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.settingCon.x=0;this.settingCon.y=580+48;this.gameInfoCon.expand();this.gameInfoCon.resizeBtn.visible=false;break;case game.ViewMode.MODE_3D:this.settingCon.x=0;this.settingCon.y=632;this.gameInfoCon.collapse();this.gameInfoCon.resizeBtn.visible=true;break;}};GameHUD.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameHUD;}(game.BaseGameHUD));lucky_baccarat.GameHUD=GameHUD;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var GenGameDetailCon=(function(_super){__extends(GenGameDetailCon,_super);function GenGameDetailCon(){return _super!==null&&_super.apply(this,arguments)||this;}
GenGameDetailCon.prototype.initLimitDetail=function(){this.limitDetail=new lucky_baccarat.GenLimitDetail(this.gameModel,this.viewW,this.viewH);};GenGameDetailCon.prototype.initLivePoolDetail=function(){this.livePoolDetail=new lucky_baccarat.GenLivePoolDetail(this.gameModel,this.viewW,this.viewH);};return GenGameDetailCon;}(game.GameDetailCon));lucky_baccarat.GenGameDetailCon=GenGameDetailCon;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var GenLimitDetail=(function(_super){__extends(GenLimitDetail,_super);function GenLimitDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
GenLimitDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLimitDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();this.tfs=[];var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.BANKER+' / '+game.GameText.PLAYER,game.GameText.TIE,game.GameText.banker_lucky_pairs,game.GameText.player_lucky_pairs,game.GameText.lucky_6,game.GameText.banker_red,game.GameText.banker_black,game.GameText.player_red,game.GameText.player_black,game.GameText.banker_wins_on_123,game.GameText.banker_wins_on_456,game.GameText.banker_wins_on_789,game.GameText.player_wins_on_123,game.GameText.player_wins_on_456,game.GameText.player_wins_on_789,game.GameText.tie_on_0123,game.GameText.tie_on_456,game.GameText.tie_on_789];var posX=12;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;for(var i=0;i<texts.length;i++){tf=game.GameUtils.createText(texts[i],style);tf.x=posX;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};GenLimitDetail.prototype.setData=function(data){var limit=game.GameUtils.getBetLimit(data,10001);var str="10001,10003,10023,10022,10021,10018,10017,10020,10019,10027,10028,10029,10024,10025,10026,10030,10031,10032";var limitIds=str.split(',');for(var i=0;i<limitIds.length;i++){limit=game.GameUtils.getBetLimit(data,parseInt(limitIds[i]));this.tfs[i].text=component.VComponentUtils.getNumInFormat(limit.min)+" - "+component.VComponentUtils.getNumInFormat(limit.max);}};return GenLimitDetail;}(game.LimitDetail));lucky_baccarat.GenLimitDetail=GenLimitDetail;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var GenLivePoolDetail=(function(_super){__extends(GenLivePoolDetail,_super);function GenLivePoolDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
GenLivePoolDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLivePoolDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;this.tfCatMap={};var texts=[game.GameText.BANKER,game.GameText.PLAYER,game.GameText.TIE,game.GameText.banker_lucky_pairs,game.GameText.player_lucky_pairs,game.GameText.lucky_6,game.GameText.banker_red,game.GameText.banker_black,game.GameText.player_red,game.GameText.player_black];var cats=['A','B','C','T','S','R','F','E','H','G'];var results=[];results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.BANKER),game.TrendType.NORMAL]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.PLAYER),game.TrendType.NORMAL]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.TIE),game.TrendType.NORMAL]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.BANKER_LUCKY_PAIR,lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.BANKER)),game.TrendType.NORMAL]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.PLAYER_LUCKY_PAIR,lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.PLAYER)),game.TrendType.NORMAL]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.LUCKY_6),game.TrendType.LUCKY_BACCARAT_6]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.BANKER_RED),game.TrendType.LUCKY_BACCARAT_6]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.BANKER_BLACK),game.TrendType.LUCKY_BACCARAT_6]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.PLAYER_RED),game.TrendType.LUCKY_BACCARAT_6]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.PLAYER_BLACK),game.TrendType.LUCKY_BACCARAT_6]);this.tfs=[];var posX=5;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;var icon;for(var i=0;i<texts.length;i++){icon=new lucky_baccarat.LuckPearlIcon().setData(game.TrendIconUtils.NORMAL_SIZE);content.addChild(icon);icon.x=posX+icon.size*0.5;icon.y=posY+icon.size*0.5;icon.setType(results[i][1]);icon.drawResult(results[i][0]);tf=game.GameUtils.createText(texts[i],style);tf.x=posX+20;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;this.tfCatMap[cats[i]]=tf;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};GenLivePoolDetail.prototype.setData=function(data){this.clearData();for(var i=0;i<data.content.cat.length;i++){if(!this.tfCatMap[data.content.cat[i]]){continue;}
this.tfCatMap[data.content.cat[i]].text=component.VComponentUtils.getNumInFormat(data.content.amount[i]);}};return GenLivePoolDetail;}(game.LivePoolDetail));lucky_baccarat.GenLivePoolDetail=GenLivePoolDetail;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var GameInfoCon=(function(_super){__extends(GameInfoCon,_super);function GameInfoCon(gameModel){return _super.call(this,gameModel)||this;}
GameInfoCon.prototype.initGameDetailCon=function(){this.gameDetailCon=new lucky_baccarat.GenGameDetailCon(this.gameModel);this.addChild(this.gameDetailCon);this.gameDetailCon.y=90;};return GameInfoCon;}(game.BaseGameInfoCon));lucky_baccarat.GameInfoCon=GameInfoCon;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var GameResult=(function(_super){__extends(GameResult,_super);function GameResult(gameModel){var _this=_super.call(this,gameModel,'banker','player')||this;_this.updateView();return _this;}
GameResult.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.bankerCardVal.x=920;this.bankerCardVal.y=324;this.playerCardVal.x=306;this.playerCardVal.y=324;this.result1Tf.y=360;this.result2Tf.y=380+30;break;case game.ViewMode.MODE_3D:this.removeChild(this.banker);this.removeChild(this.player);this.bankerCardVal.x=920+50;this.bankerCardVal.y=450;this.playerCardVal.x=306-50;this.playerCardVal.y=450;this.result1Tf.y=360+100;this.result2Tf.y=380+30+100;break;}};GameResult.prototype.showResult=function(data){this.reset();var results=data.content.result;var cards=data.content.cards;if(results.charAt(game.BetType.BANKER-1)=='1')
this.banker.gotoAndStop(1);if(results.charAt(game.BetType.PLAYER-1)=='1')
this.player.gotoAndStop(1);var arr=cards.split('#');var bVal;var pVal;pVal=this.getCardVal(arr[0]);this.setPlayerCard(pVal);bVal=this.getCardVal(arr[1]);this.setBankerCard(bVal);if(results.charAt(lucky_baccarat.LuckBetResultId.BANKER)=='1')
this.result1Tf.text=game.GameText.BANKER;else if(results.charAt(lucky_baccarat.LuckBetResultId.PLAYER)=='1')
this.result1Tf.text=game.GameText.PLAYER;else if(results.charAt(lucky_baccarat.LuckBetResultId.TIE)=='1')
this.result1Tf.text=game.GameText.TIE;if(results.charAt(lucky_baccarat.LuckBetResultId.BANKER)=='1'){this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.BANKER_WIN_ON);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_point"+bVal);}
else if(results.charAt(lucky_baccarat.LuckBetResultId.PLAYER)=='1'){this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.PLAYER_WIN_ON);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_point"+pVal);}
else{this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.TIE_ON);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_point"+bVal);}};GameResult.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameResult;}(game.BaseGameResult));lucky_baccarat.GameResult=GameResult;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.initialize=function(){_super.prototype.initialize.call(this);this.bg.texture=this.gameModel.resources['table_bg_yellow'].texture;this.vodBg=new PIXI.Graphics();this.vodBg.beginFill(0x000000);this.vodBg.drawRect(0,0,512,309);this.vodBg.x=this.gameModel.VOD_X;this.vodBg.y=this.gameModel.VOD_Y;this.vodBg.endFill();this.noCommission=new PIXI.Container();this.addChild(this.noCommission);var gp=new PIXI.Graphics();gp.lineStyle(0,0,0);gp.beginFill(0x000000,0.2);gp.drawRoundedRect(0,0,186,44,8);gp.endFill();this.noCommission.addChild(gp);var tf1=component.VComponentUtils.createText(game.GameText.NO_COMMISSION,{fontFamily:"Arial",fontSize:16,fill:0xffffff});tf1.anchor.x=0.5;tf1.x=gp.width*0.5;tf1.y=5;this.noCommission.addChild(tf1);var tf2=component.VComponentUtils.createText(game.GameText.BANKER_WIN_ON_6_PAY,{fontFamily:"Arial",fontSize:12,fill:0xffffff});if(tf2.width>gp.width){tf2.scale.x=tf2['orgScaleX']*(gp.width/tf2.width);tf2.scale.y=tf2.scale.x;}
tf2.anchor.x=0.5;tf2.x=gp.width*0.5;tf2.y=26;this.noCommission.addChild(tf2);this.noCommission.x=40;this.noCommission.y=322;this.initTrends();this.trendMng.updateSmallView();this.chipControl=new lucky_baccarat.ChipControl(this.gameModel);this.chipControl.x=907;this.chipControl.y=591;this.chipControl.dissable();this.gameModel.chipControl=this.chipControl;this.betArea=new lucky_baccarat.BetArea(this.gameModel,this.betInput);this.betArea.dissable();this.addChild(this.betArea);this.createInfoPopups();this.betControl=new game.BetControl(this.gameModel);this.betControl.x=477;this.betControl.y=580;this.betControl.hide();this.cardControl=new lucky_baccarat.CardControl(this.gameModel);this.addChild(this.cardControl);this.addChild(this.betControl);this.addChild(this.chipControl);_super.prototype.initCountDown.call(this);this.countdown.x=640;this.countdown.y=383;this.gameResult=(new lucky_baccarat.GameResult(this.gameModel));this.addChild(this.gameResult);this.gameHUD=new lucky_baccarat.GameHUD(this.gameModel);this.addChild(this.gameHUD);this.updateView();};GameView.prototype.createInfoPopups=function(){var pos=[new PIXI.Point(553.75,485),new PIXI.Point(890.75,474)];this.infoPopups=[this.createLuckyPlayerPopup(),this.createLuckyBankerPopup()];for(var i=0;i<pos.length;i++){var btn=new PIXI.Graphics();btn.buttonMode=true;this.addChild(btn);btn.beginFill(0x0000ff);btn.drawRect(0,0,16,16);btn.endFill();btn.alpha=0;btn['tag']=i;btn.x=pos[i].x;btn.y=pos[i].y;if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(btn,component.VMouseUtils.MOUSE_OVER,this.onShowInfo,this);else
component.VMouseUtils.on(btn,component.VMouseUtils.MOUSE_UP,this.onShowInfo,this);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(btn,component.VMouseUtils.MOUSE_OUT,this.onHideInfo,this);else
component.VMouseUtils.on(btn,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.onHideInfo,this);}};GameView.prototype.activeSuperHand=function(isSupper){};GameView.prototype.updateVodView=function(){if(!this.vodInited)
return;var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.gameModel.VOD_WIDTH=511;this.gameModel.VOD_HEIGHT=311;this.gameModel.VOD_X=386;this.gameModel.VOD_Y=3;this.processVodLoadMediaData();break;case game.ViewMode.MODE_3D:this.gameModel.VOD_X=0;this.gameModel.VOD_Y=-140;this.gameModel.VOD_WIDTH=this.gameModel.GAME_WIDTH-2*this.gameModel.VOD_X;this.gameModel.VOD_HEIGHT=this.gameModel.GAME_HEIGHT;this.processVodLoadMediaData();break;}
this.sizeHandler();};GameView.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;this.updateVodView();switch(viewMode){case game.ViewMode.MODE_2D:this.chipControl.x=907;this.chipControl.y=591+48;this.betControl.x=477;this.betControl.y=580+48;this.cardControl.visible=true;this.bg.y=0;this.betArea.collectWinPos.x=138;this.betArea.collectWinPos.y=572;this.betInput.x=497+6;this.betInput.y=583+48;break;case game.ViewMode.MODE_3D:break;}};GameView.prototype.changeView=function(){this.updateView();this.gameResult.changeView();_super.prototype.changeView.call(this);};GameView.prototype.onTableBtn=function(e){_super.prototype.onTableBtn.call(this,e);this.trendMng.updateSmallView();};return GameView;}(lucky_baccarat.CLuckGameView));lucky_baccarat.GameView=GameView;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var BankerPopup=(function(_super){__extends(BankerPopup,_super);function BankerPopup(main){var _this=_super.call(this,main,280,240)||this;_this.closeBtn.visible=false;_this.titleTf.text=game.GameText.banker_lucky_pairs;_this.hasUnderlay=false;var table=new component.VTable(279,45,4,["",""],[4.7/6,1.3/6],"left",{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12},{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12,wordWrap:true},0x25221D,0x25221D,0x25221D);table.titleCon.visible=false;_this.addChild(table);table.setData(0,[game.GameText.luckybaccarat_pair_diamond_4,LANG=='cs'?"130":"30:1"]);table.setData(1,[game.GameText.luckybaccarat_pair_other_4,LANG=='cs'?"115":"15:1"]);table.setData(2,[game.GameText.luckybaccarat_pair_diamond,LANG=='cs'?"112":"12:1"]);table.setData(3,[game.GameText.luckybaccarat_pair_other,LANG=='cs'?"19":"9:1"]);return _this;}
return BankerPopup;}(game.BasePopup));lucky_baccarat.BankerPopup=BankerPopup;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var LuckBetResultId=(function(){function LuckBetResultId(){}
LuckBetResultId.getResult=function(id,src){if(src===void 0){src='0000000000000000000';}
return src.substring(0,id)+'1'+src.substring(id+1);};LuckBetResultId.getBetResultId=function(bettype){return LuckBetResultId.resultTypeMap.indexOf(bettype);};LuckBetResultId.BANKER=0;LuckBetResultId.PLAYER=1;LuckBetResultId.TIE=2;LuckBetResultId.BANKER_BLACK=3;LuckBetResultId.BANKER_RED=4;LuckBetResultId.PLAYER_BLACK=5;LuckBetResultId.PLAYER_RED=6;LuckBetResultId.LUCKY_6=7;LuckBetResultId.BANKER_LUCKY_PAIR=8;LuckBetResultId.PLAYER_LUCKY_PAIR=9;LuckBetResultId.BANKER_WIN_123=10;LuckBetResultId.BANKER_WIN_456=11;LuckBetResultId.BANKER_WIN_789=12;LuckBetResultId.PLAYER_WIN_123=13;LuckBetResultId.PLAYER_WIN_456=14;LuckBetResultId.PLAYER_WIN_789=15;LuckBetResultId.TIE_ON_0123=16;LuckBetResultId.TIE_ON_456=17;LuckBetResultId.TIE_ON_789=18;LuckBetResultId.resultTypeMap='ABCEFGHRTSOPQLMNXYZ';return LuckBetResultId;}());lucky_baccarat.LuckBetResultId=LuckBetResultId;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var LuckPearlIcon=(function(_super){__extends(LuckPearlIcon,_super);function LuckPearlIcon(){return _super.call(this)||this;}
LuckPearlIcon.prototype.drawPair=function(result){if(this['index']>game.GameSettings.LUCKY_PAIR_MAX_ROUND-1)
return;var thickness=this.size/7;var r=this.size*0.5-thickness*0.5;var dis=r*0.7;if(result.charAt(lucky_baccarat.LuckBetResultId.BANKER_LUCKY_PAIR)=='1'){this.bPair=game.TrendIconPool.get("result_circle_3");this.addChild(this.bPair);this.bPair.x=-dis;this.bPair.y=-dis;this.bPair.scale.x=this.img.scale.x;this.bPair.scale.y=this.bPair.scale.x;}
if(result.charAt(lucky_baccarat.LuckBetResultId.PLAYER_LUCKY_PAIR)=='1'){this.pPair=game.TrendIconPool.get("result_circle_4");this.addChild(this.pPair);this.pPair.x=dis;this.pPair.y=dis;this.pPair.scale.x=this.img.scale.x;this.pPair.scale.y=this.pPair.scale.x;}};LuckPearlIcon.prototype.getCardVal=function(cards){var card;var val=0;for(var i=0;i<cards.length/2;i++){card=cards[i*2+1];val+='TJQK'.indexOf(card)>=0?0:(card=='A'?1:parseInt(card));}
val=val%10;return val;};LuckPearlIcon.prototype.drawScore=function(score){while(this.txt.children.length){var d=(this.txt.removeChildAt(0));game.TrendIconPool.release(d);}
this.txt.scale.x=1;this.txt.scale.y=1;var tieStr=score.toString();var txtH;for(var i=0;i<tieStr.length;i++){d=game.TrendIconPool.get('white_num_000'+(parseInt(tieStr.charAt(i))+1));txtH=d.height;d.anchor.x=0.3;d.anchor.y=0.5;d.x=-(tieStr.length-1)*15/2+i*15;this.txt.addChild(d);}
this.txt.scale.y=this.size*0.9/txtH;this.txt.scale.x=this.txt.scale.y;};LuckPearlIcon.prototype.drawResult=function(result){this.clear();var results=result.split('');var win;if(results[lucky_baccarat.LuckBetResultId.BANKER]=='1')
win=1;if(results[lucky_baccarat.LuckBetResultId.PLAYER]=='1')
win=2;if(results[lucky_baccarat.LuckBetResultId.TIE]=='1')
win=3;var iconType="";if(this.type==game.TrendType.LUCKY_BACCARAT_NUM){if(results[lucky_baccarat.LuckBetResultId.BANKER_WIN_123]=='1')
iconType='luck_b_123';if(results[lucky_baccarat.LuckBetResultId.BANKER_WIN_456]=='1')
iconType='luck_b_456';if(results[lucky_baccarat.LuckBetResultId.BANKER_WIN_789]=='1')
iconType='luck_b_789';if(results[lucky_baccarat.LuckBetResultId.PLAYER_WIN_123]=='1')
iconType='luck_p_123';if(results[lucky_baccarat.LuckBetResultId.PLAYER_WIN_456]=='1')
iconType='luck_p_456';if(results[lucky_baccarat.LuckBetResultId.PLAYER_WIN_789]=='1')
iconType='luck_p_789';this.createImg(iconType);}
else if(this.type==game.TrendType.NORMAL||this['index']>game.GameSettings.LUCKY_COMMON_MAX_ROUND-1){iconType=win==3?"result_solid_2":(win==1?"result_solid_0":"result_solid_1");this.createImg(iconType);this.drawPair(result);}
else if(this.type==game.TrendType.LUCKY_BACCARAT_6){if(results[lucky_baccarat.LuckBetResultId.LUCKY_6]=='1'){iconType='trend_super6';this.createImg(iconType);}
else{if(results[lucky_baccarat.LuckBetResultId.BANKER_RED]=='1'||results[lucky_baccarat.LuckBetResultId.PLAYER_RED]=='1')
iconType='trend_solid_red';else if(results[lucky_baccarat.LuckBetResultId.BANKER_BLACK]=='1'||results[lucky_baccarat.LuckBetResultId.PLAYER_BLACK]=='1')
iconType='trend_solid_black';else
iconType=win==3?"result_solid_2":(win==1?"result_solid_0":"result_solid_1");this.createImg(iconType);this.drawPair(result);}}
else{iconType=win==3?"trend_green_filled_cirle":(win==1?"trend_red_filled_circle":"trend_blue_filled_circle");this.createImg(iconType);var cards=this.info.cards;var arr=cards.split('#');var bVal;var pVal;pVal=this.getCardVal(arr[0]);bVal=this.getCardVal(arr[1]);if(win==1)
this.drawScore(bVal);else
this.drawScore(pVal);}};return LuckPearlIcon;}(game.PearlRoadIcon));lucky_baccarat.LuckPearlIcon=LuckPearlIcon;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var LuckTrendIcon=(function(_super){__extends(LuckTrendIcon,_super);function LuckTrendIcon(){return _super.call(this)||this;}
LuckTrendIcon.prototype.drawPair=function(result){var thickness=this.size/7;var r=this.size*0.5-thickness*0.5;var dis=r*0.7;if(result.charAt(lucky_baccarat.LuckBetResultId.BANKER_LUCKY_PAIR)=='1'){this.bPair=game.TrendIconPool.get("result_circle_3");this.addChild(this.bPair);this.bPair.x=-dis;this.bPair.y=-dis;this.bPair.scale.x=this.img.scale.x;this.bPair.scale.y=this.bPair.scale.x;}
if(result.charAt(lucky_baccarat.LuckBetResultId.PLAYER_LUCKY_PAIR)=='1'){this.pPair=game.TrendIconPool.get("result_circle_4");this.addChild(this.pPair);this.pPair.x=dis;this.pPair.y=dis;this.pPair.scale.x=this.img.scale.x;this.pPair.scale.y=this.pPair.scale.x;}};return LuckTrendIcon;}(game.TrendIcon));lucky_baccarat.LuckTrendIcon=LuckTrendIcon;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var LuckIconCount=(function(_super){__extends(LuckIconCount,_super);function LuckIconCount(gameModel){return _super.call(this,gameModel)||this;}
LuckIconCount.prototype.initialize=function(){this.tfs=[];this.icons=[];var results=[];results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.BANKER),game.TrendType.NORMAL]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.PLAYER),game.TrendType.NORMAL]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.TIE),game.TrendType.NORMAL]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.BANKER_LUCKY_PAIR,lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.BANKER)),game.TrendType.NORMAL]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.PLAYER_LUCKY_PAIR,lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.PLAYER)),game.TrendType.NORMAL]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.LUCKY_6),game.TrendType.LUCKY_BACCARAT_6]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.PLAYER_WIN_123),game.TrendType.LUCKY_BACCARAT_NUM]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.PLAYER_WIN_456),game.TrendType.LUCKY_BACCARAT_NUM]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.PLAYER_WIN_789),game.TrendType.LUCKY_BACCARAT_NUM]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.BANKER_WIN_123),game.TrendType.LUCKY_BACCARAT_NUM]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.BANKER_WIN_456),game.TrendType.LUCKY_BACCARAT_NUM]);results.push([lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.BANKER_WIN_789),game.TrendType.LUCKY_BACCARAT_NUM]);var dis=19.5;var posX=0;var icon;for(var i=0;i<results.length;i++){icon=new lucky_baccarat.LuckPearlIcon().setData(16);icon.x=posX;posX+=dis;icon.setType(results[i][1]);icon.draw(new game.netdata.TrendsItem().setData(results[i][0]));var tf=game.GameUtils.createText('0',{fontFamily:"Arial",fontSize:12,fill:0xffffff,align:'center'});tf.anchor.x=0.6;tf.x=icon.x;tf.y=icon.y+8;this.tfs[i]=tf;this.icons[i]=icon;this.addChild(icon);this.addChild(tf);}
this.clear();};LuckIconCount.prototype.clear=function(){for(var i=0;i<this.tfs.length;i++){this.tfs[i].text='0';}};LuckIconCount.prototype.addTrend=function(item,isAnim){if(isAnim===void 0){isAnim=false;}
var ind=-1;if(item.result.charAt(lucky_baccarat.LuckBetResultId.BANKER)=='1')
ind=0;if(item.result.charAt(lucky_baccarat.LuckBetResultId.PLAYER)=='1')
ind=1;if(item.result.charAt(lucky_baccarat.LuckBetResultId.TIE)=='1')
ind=2;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(lucky_baccarat.LuckBetResultId.BANKER_LUCKY_PAIR)=='1')
ind=3;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(lucky_baccarat.LuckBetResultId.PLAYER_LUCKY_PAIR)=='1')
ind=4;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(lucky_baccarat.LuckBetResultId.LUCKY_6)=='1')
ind=5;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(lucky_baccarat.LuckBetResultId.PLAYER_WIN_123)=='1')
ind=6;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(lucky_baccarat.LuckBetResultId.PLAYER_WIN_456)=='1')
ind=7;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(lucky_baccarat.LuckBetResultId.PLAYER_WIN_789)=='1')
ind=8;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(lucky_baccarat.LuckBetResultId.BANKER_WIN_123)=='1')
ind=9;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(lucky_baccarat.LuckBetResultId.BANKER_WIN_456)=='1')
ind=10;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(lucky_baccarat.LuckBetResultId.BANKER_WIN_789)=='1')
ind=11;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}};return LuckIconCount;}(game.IconCount));lucky_baccarat.LuckIconCount=LuckIconCount;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var LuckTrendInfoPanel=(function(_super){__extends(LuckTrendInfoPanel,_super);function LuckTrendInfoPanel(gameModel){return _super.call(this,gameModel)||this;}
LuckTrendInfoPanel.prototype.initIcons=function(){this.playerIcon=new lucky_baccarat.LuckPearlIcon();this.playerIcon.drawResult(lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.PLAYER));this.playerIcon.x=14;this.playerIcon.y=15;this.playerIcon.width=18;this.playerIcon.scale.y=this.playerIcon.scale.x;this.addChild(this.playerIcon);this.bankerIcon=new lucky_baccarat.LuckPearlIcon();this.bankerIcon.drawResult(lucky_baccarat.LuckBetResultId.getResult(lucky_baccarat.LuckBetResultId.BANKER));this.bankerIcon.x=258;this.bankerIcon.y=15;this.bankerIcon.width=18;this.bankerIcon.scale.y=this.bankerIcon.scale.x;this.addChild(this.bankerIcon);};return LuckTrendInfoPanel;}(game.TrendInfoPanel));lucky_baccarat.LuckTrendInfoPanel=LuckTrendInfoPanel;})(lucky_baccarat||(lucky_baccarat={}));var lucky_baccarat;(function(lucky_baccarat){var TrendMng=(function(_super){__extends(TrendMng,_super);function TrendMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
TrendMng.prototype.getBigBoardName=function(){return game.GameSettings.TABLE_INFOS[this.activeTableId].hint.toUpperCase();};TrendMng.prototype.changeView=function(){_super.prototype.changeView.call(this);};TrendMng.prototype.initIconCount=function(){this.iconCount=new lucky_baccarat.LuckIconCount(this.gameModel);};TrendMng.prototype.initNormmalContainer=function(){this.normalTrend=new game.TrendContainer(this.gameModel,lucky_baccarat.LuckTrendIcon,765,92,6,game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].hint.toUpperCase(),true);};TrendMng.prototype.initPearlRoad=function(){this.pearlRoadTrend=new game.PearlRoad(this.gameModel,lucky_baccarat.LuckPearlIcon,300,62,6,game.GameText.PEARL_ROAD.toUpperCase(),true);};TrendMng.prototype.initPredict=function(){_super.prototype.initPredict.call(this);};TrendMng.prototype.initView=function(){this.pearlViewlTypes=[game.TrendType.NORMAL,game.TrendType.LUCKY_BACCARAT];_super.prototype.initView.call(this);};TrendMng.prototype.initTrendInfoPanel=function(){this.trendInfoPanel=new lucky_baccarat.LuckTrendInfoPanel(this.gameModel);};TrendMng.prototype.onTableBtn=function(e){};TrendMng.prototype.superOnTableBtn=function(e){_super.prototype.onTableBtn.call(this,e);};return TrendMng;}(game.BaseTrendMng));lucky_baccarat.TrendMng=TrendMng;})(lucky_baccarat||(lucky_baccarat={}));var squeeze_baccarat;(function(squeeze_baccarat){var Game=(function(_super){__extends(Game,_super);function Game(){return _super.call(this)||this;}
Game.prototype.initialize=function(tableId,resources){this.dealCardDelay=2500;this.resetGameResultDelay=1500;_super.prototype.initialize.call(this,tableId,resources);var str="1 10001,2 10002,3 10003,4 10004,5 10005,6 10006,7 10007,8 10008,9 10009,10 10010,11 10011,12 10012";var arr=str.split(',');var betLimitIdMap={};for(var i=0;i<arr.length;i++){var arr2=arr[i].split(' ');betLimitIdMap[arr2[0]]=arr2[1];}
this.gameModel.betLimitIdMap=betLimitIdMap;return this;};Game.prototype.initGameId=function(tableId){this.gameModel.GAME_ID=game.GameID.SQUEEZE_BACCARAT;if(!game.GameUtils.checkCommision(tableId))
this.gameModel.GAME_ID=game.GameID.SQUEEZE_BACCARAT_NONCOMMISSION;};Game.prototype.initView=function(){this.view=new squeeze_baccarat.GameView(this.gameModel);this.gameView=this.view;this.addChild(this.view);};Game.prototype.onWSMessageHdl=function(e){var data=e.data;_super.prototype.onWSMessageHdl.call(this,e);if(data.content&&data.content.table&&data.content.table!=this.gameModel.TABLE_ID)
return;switch(data.kind){case game.GameCMD.ACTION_DOWN:this.onActionDown(data);break;}};Game.prototype.onStartBet=function(data){_super.prototype.onStartBet.call(this,data);this.view.hideFlipCon();this.isShowingSqueeze=false;};Game.prototype.onActionDown=function(data){var tick=data.content.tick;var time=tick;if(time>0&&!this.isShowingSqueeze)
this.showSqueeze(tick,0);if(this.view.actCountdown.getTotal()==0)
this.view.actCountdown.setTotal(time);this.view.actCountdown.setTime(tick>0?time:0);if(time==0){this.view.actCountdown.hide();this.view.actCountdown.setTotal(0);this.view['flipTimeout']();this.isShowingSqueeze=false;}};Game.prototype.showSqueeze=function(tick,playerPos){if(this.isShowingSqueeze)
return;var cardControl=this.view.cardControl;var hasBackCard=false;for(var i=0;i<cardControl.cards.length;i++){if(!cardControl.cards[i])
continue;if(cardControl.cards[i]['cardId']=='CB'){hasBackCard=true;break;}}
if(!hasBackCard)
return;if(cardControl.isAnimating())
return;if(!this.startAutoFlip())
return;this.isShowingSqueeze=true;};Game.prototype.startAutoFlip=function(){var cardControl=this.view.cardControl;var bm=this.view.betArea.getBetPlaceWithType(game.BetType.BANKER).getConfirmedAmount();var pm=this.view.betArea.getBetPlaceWithType(game.BetType.PLAYER).getConfirmedAmount();var isAuto=bm+pm==0||this.view.autoFlipBtn.currentFrame==1;var playerPos=pm>=bm?1:0;if(!cardControl.cards[4]&&!cardControl.cards[5]){this.view.show2FlipCard(playerPos,isAuto);}
else{if(playerPos==0&&(!cardControl.cards[5]||cardControl.cards[5]['cardId']!='CB'))
return false;if(playerPos==1&&(!cardControl.cards[4]||cardControl.cards[4]['cardId']!='CB'))
return false;this.view.show1FlipCard(playerPos,isAuto);}
return true;};Game.prototype.onDeal=function(dealRes){this.view.cardControl.animatingMap[dealRes.content.pos-1]=true;var id=setTimeout(function(){component.VComponentUtils.removeElementFromArray(this.dealTimeoutIds,id);if(this.view.cardControl)
this.view.cardControl.dealCard(dealRes.content.card,dealRes.content.pos-1,true,true,0.15);}.bind(this),this.dealCardDelay);this.dealTimeoutIds.push(id);};return Game;}(baccarat.Game));squeeze_baccarat.Game=Game;})(squeeze_baccarat||(squeeze_baccarat={}));var squeeze_baccarat;(function(squeeze_baccarat){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.destructor=function(){clearTimeout(this.timeoutId1);clearTimeout(this.timeoutId2);TweenMax.killTweensOf(this.flipCon);clearInterval(this.blinkInterval);_super.prototype.destructor.call(this);};GameView.prototype.initialize=function(){_super.prototype.initialize.call(this);var temp=this.cardControl.cardConfigs[0];this.cardControl.cardConfigs[0]=this.cardControl.cardConfigs[2];this.cardControl.cardConfigs[2]=temp;var flipMatrixData="A__white lady__default__fast__fast;A__2 sides__2nd__slowx1__normal slow;A__3 sides__1st__slowx1__slowx2;A__4 sides__default__fast__fast;A__Pic__2nd__fast__fast;2__white lady__default__fast__fast;2__2 sides__2nd__slowx1__normal slow;2__3 sides__1st__slowx1__slowx2;2__4 sides__default__fast__fast;2__Pic__2nd__fast__fast;3__white lady__default__fast__fast;3__2 sides__2nd__slowx1__normal slow;3__3 sides__1st__slowx1__slowx2;3__4 sides__default__fast__fast;3__Pic__2nd__fast__fast;4__white lady__1st__slowx1__normal slow;4__2 sides__default__slowx1__slowx2;4__3 sides__default__fast__fast;4__4 sides__default__fast__fast;4__Pic__2nd__fast__fast;5__white lady__1st__slowx1__normal slow;5__2 sides__default__slowx1__slowx2;5__3 sides__default__fast__fast;5__4 sides__default__fast__fast;5__Pic__2nd__fast__fast;6__white lady__2nd__slowx1__slowx2;6__2 sides__default__fast__fast;6__3 sides__default__fast__fast;6__4 sides__2nd__slowx1__normal slow;6__Pic__2nd__fast__normal slow;7__white lady__2nd__slowx1__slowx2;7__2 sides__default__fast__fast;7__3 sides__default__fast__fast;7__4 sides__2nd__slowx1__normal slow;7__Pic__2nd__fast__slowx2;8__white lady__2nd__slowx1__slowx2;8__2 sides__default__fast__fast;8__3 sides__default__fast__fast;8__4 sides__2nd__slowx1__fast;8__Pic__2nd__fast__slowx2;9__white lady__default__fast__fast;9__2 sides__default__fast__fast;9__3 sides__1st__slowx1__normal slow;9__4 sides__default__fast__normal slow;9__Pic__2nd__fast__normal slow;T__white lady__default__fast__fast;T__2 sides__default__fast__fast;T__3 sides__1st__slowx1__normal slow;T__4 sides__default__fast__normal slow;T__Pic__2nd__fast__normal slow;Pic__white lady__1st__fast__fast;Pic__2 sides__1st__fast__fast;Pic__3 sides__1st__fast__slowx2;Pic__4 sides__1st__fast__normal slow;Pic__Pic__1st__fast__fast;";var tb=flipMatrixData.split(';');this.flipDataMap={};for(var i=0;i<tb.length;i++){var record=tb[i].split('__');this.flipDataMap[record[0]+'_'+record[1]]=record;}
this.cardTypeMap={};this.cardTypeMap['A']=this.cardTypeMap['2']=this.cardTypeMap['3']='white lady';this.cardTypeMap['4']=this.cardTypeMap['5']='2 sides';this.cardTypeMap['6']=this.cardTypeMap['7']=this.cardTypeMap['8']='3 sides';this.cardTypeMap['9']=this.cardTypeMap['T']='4 sides';this.cardTypeMap['Pic']='Pic';this.timeMap={};this.timeMap['fast']=1.0;this.timeMap['normal slow']=this.timeMap['slowx1']=this.timeMap['slowx2']=3.5;this.flipCon=new PIXI.Container();this.addChild(this.flipCon);var bg=new PIXI.Sprite(this.gameModel.resources['squeeze_overlay'].texture);this.flipCon.addChild(bg);bg.anchor.x=0.5;bg.anchor.y=0.5;bg.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;bg.scale.y=bg.scale.x;bg.x=game.GameSettings.CANVAS_WIDTH/2;bg.y=game.GameSettings.CANVAS_HEIGHT-bg.height/2;var arr=['flipPage1','flipPage2'];var w=162*0.95,h=240*0.95;this.pageW=w;this.pageH=h;for(var i=0;i<arr.length;i++){var flipPage=new component.fage_flip.PageCon();flipPage.y=bg.y-this.pageH*0.5;this[arr[i]]=flipPage;this.flipCon.addChild(flipPage);}
this.flipPage1.initialize(w,h,this.gameModel.resources['C8'].texture,this.gameModel.resources['CB'].texture,this.onFlipCompleteHdl.bind(this));this.flipPage2.initialize(w,h,this.gameModel.resources['C8'].texture,this.gameModel.resources['CB'].texture,this.onFlipCompleteHdl.bind(this));this.flipCon.visible=false;this.flipCon.alpha=0;this.actCountdown=new game.CountDown(2,0xE0C955);this.actCountdown.setTotal(0);this.addChild(this.actCountdown);this.actCountdown.hide();this.actCountdown.x=this.countdown.x;this.actCountdown.y=this.countdown.y;this.actCountdown.scale.x=this.countdown.scale.x;this.actCountdown.scale.y=this.countdown.scale.y;var frames=[PIXI.Texture.fromFrame('toggle_squeeze_off.png'),PIXI.Texture.fromFrame('toggle_squeeze_on.png')];this.autoFlipBtn=new PIXI.extras.MovieClip(frames);this.gameModel.toolTip.addToolTip(this.autoFlipBtn,game.GameText.squeeze_toggle_tip);this.autoFlipBtn.buttonMode=true;this.autoFlipBtn.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;this.autoFlipBtn.scale.y=this.autoFlipBtn.scale.x;this.autoFlipBtn.gotoAndStop(0);this.gameHUD.settingCon.addChild(this.autoFlipBtn);this.autoFlipBtn.x=this.gameHUD.settingCon.btn7s.x;this.autoFlipBtn.y=this.gameHUD.settingCon.btn7s.y;var f=game.CookiesMng.hasCookie("squeeze_baccarat_auto_flip")?game.CookiesMng.getCookie("squeeze_baccarat_auto_flip"):0;this.autoFlipBtn.gotoAndStop(f);component.VMouseUtils.on(this.autoFlipBtn,component.VMouseUtils.MOUSE_UP,function(){this.autoFlipBtn.gotoAndStop(this.autoFlipBtn.currentFrame==0?1:0);this.autoIcon.gotoAndStop(this.autoFlipBtn.currentFrame);this.flipTf.text=this.autoFlipBtn.currentFrame==0?game.GameText.manual_squeeze:game.GameText.auto_squeeze;game.CookiesMng.saveCookie("squeeze_baccarat_auto_flip",this.autoFlipBtn.currentFrame);}.bind(this),this);var flipMode=new PIXI.Container();flipMode.buttonMode=true;this.flipMode=flipMode;component.VMouseUtils.on(this.flipMode,component.VMouseUtils.MOUSE_UP,function(){this.autoFlipBtn.gotoAndStop(this.autoFlipBtn.currentFrame==0?1:0);this.autoIcon.gotoAndStop(this.autoFlipBtn.currentFrame);this.flipTf.text=this.autoFlipBtn.currentFrame==0?game.GameText.manual_squeeze:game.GameText.auto_squeeze;game.CookiesMng.saveCookie("squeeze_baccarat_auto_flip",this.autoFlipBtn.currentFrame);if(this.autoFlipBtn.currentFrame==1)
this.gameModel.game.startAutoFlip();}.bind(this),this);var w=300;var h=27;flipMode.x=game.GameSettings.CANVAS_WIDTH/2-w/2;flipMode.y=game.GameSettings.CANVAS_HEIGHT-h*1.1;var bg2=new PIXI.Graphics();flipMode.addChild(bg2);bg2.lineStyle(0);bg2.beginFill(0x26231E);bg2.drawRoundedRect(0,0,w,h,4);bg2.endFill();var autoIcon=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('icon_auto_squeeze_off.png'),PIXI.Texture.fromFrame('icon_auto_squeeze_on.png')]);this.autoIcon=autoIcon;autoIcon.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;autoIcon.scale.y=autoIcon.scale.x;flipMode.addChild(autoIcon);var tf=game.GameUtils.createText("",{align:"center",fontSize:14,fill:0xffffff});this.flipTf=tf;this.autoIcon.gotoAndStop(this.autoFlipBtn.currentFrame);this.flipTf.text=this.autoFlipBtn.currentFrame==0?game.GameText.manual_squeeze:game.GameText.auto_squeeze;tf.anchor.x=0.5;tf.anchor.y=0.5;tf.x=(w-autoIcon.width*1.4)/2;tf.y=h/2;autoIcon.anchor.x=0;autoIcon.anchor.y=0.5;autoIcon.x=w-autoIcon.width*1.2;autoIcon.y=h/2;flipMode.addChild(tf);this.flipCon.addChild(flipMode);var tip=new PIXI.Container();this.gameModel.overlay.addChild(tip);var arrow=new PIXI.Sprite(this.gameModel.resources['menu_arrow'].texture);tf=game.GameUtils.createText("",{align:"center",fontSize:14,fill:0xffffff});tf.style.wordWrap=true;tf.style.wordWrapWidth=300;tf.text=game.GameText.squeeze_toggle_instruction;var bg2=new PIXI.Graphics();tip.addChild(bg2);tip.addChild(tf);bg2.beginFill(0x000000,0.6);bg2.drawRoundedRect(0,0,tf.width+2*5,tf.height+2*5,5);bg2.endFill();tip.addChild(arrow);arrow.x=tip.width-this.autoFlipBtn.width/2-3;arrow.y=tip.height+2;tf.x=5;tf.y=5;var p=new PIXI.Point(this.autoFlipBtn.x,this.autoFlipBtn.y);p=this.autoFlipBtn.parent.toGlobal(p);tip.x=p.x+this.autoFlipBtn.width-tip.width;tip.y=p.y+this.autoFlipBtn.y-tip.height-7;var lineW=3;var bg3=new PIXI.Graphics();this.autoFlipBtn.parent.addChild(bg3);bg3.x=this.autoFlipBtn.x;bg3.y=this.autoFlipBtn.y;bg3.lineStyle(lineW,0xffff00);bg3.drawRoundedRect(0,0,this.autoFlipBtn.width,this.autoFlipBtn.height,3);bg3.endFill();var blinkCount=0;var fCount=0;var step=-1/20;this.blinkInterval=setInterval(function(){fCount++;if(fCount%16==0){blinkCount++;step=-step;}
bg3.alpha+=step;if(blinkCount==10){clearTimeout(this.blinkInterval);bg3.visible=false;tip.visible=false;}}.bind(this),1000/25);};GameView.prototype.onFlipCompleteHdl=function(page){var card=this.cardControl.cards[page['cardIndex']];card['cardId']=card['orgCardId'];this.cardControl.updateCardVals();};GameView.prototype.hideFlipCon=function(){TweenMax.killTweensOf(this.flipCon);this.flipCon.visible=false;this.flipCon.alpha=0;};GameView.prototype.showAllCards=function(){for(var i=0;i<this.cardControl.cards.length;i++){var card=this.cardControl.cards[i];if(card){card['mesh'].texture=null;card['mesh'].texture=this.gameModel.resources[card['orgCardId']].texture;card['cardId']=card['orgCardId'];card.visible=true;}}
this.cardControl.updateCardVals();};GameView.prototype.flipTimeout=function(){clearTimeout(this.timeoutId1);clearTimeout(this.timeoutId2);TweenMax.to(this.flipCon,0.3,{alpha:0,onComplete:function(){this.flipCon.visible=false;}.bind(this)});this.showAllCards();};GameView.prototype.show2FlipCard=function(playerPos,isAuto){this.flipPage1.corner.visible=!isAuto;this.flipPage2.corner.visible=!isAuto;TweenMax.to(this.flipCon,0.5,{alpha:1});this.flipPage1.visible=true;if(playerPos==0){this.cardControl.cards[1].visible=false;this.cardControl.cards[3].visible=false;var cardId1=this.cardControl.cards[1]['orgCardId'];var cardId2=this.cardControl.cards[3]['orgCardId'];this.flipPage1['cardIndex']=1;this.flipPage2['cardIndex']=3;}
else{this.cardControl.cards[0].visible=false;this.cardControl.cards[2].visible=false;var cardId1=this.cardControl.cards[0]['orgCardId'];var cardId2=this.cardControl.cards[2]['orgCardId'];this.flipPage1['cardIndex']=0;this.flipPage2['cardIndex']=2;}
this.flipCon.visible=true;this.flipPage1.reset();this.flipPage2.reset();this.flipPage1.x=game.GameSettings.CANVAS_WIDTH/2-this.pageW*1.3;this.flipPage2.x=game.GameSettings.CANVAS_WIDTH/2+this.pageW*0.3;this.flipPage1.setFrontTexture(this.gameModel.resources[cardId1].texture);this.flipPage2.setFrontTexture(this.gameModel.resources[cardId2].texture);if(isAuto){this.flipPage1.lock();this.flipPage2.lock();clearTimeout(this.timeoutId1);clearTimeout(this.timeoutId2);var state1Dur=1.5;var card2ndState1Delay=2.0;var card1stState2Delay=card2ndState1Delay+state1Dur+1.5;var card2ndState2Delay=state1Dur+1.5;var c1=cardId1.charAt(1);if(c1=="J"||c1=="Q"||c1=="K")
c1='Pic';var c2=cardId2.charAt(1);if(c2=="J"||c2=="Q"||c2=="K")
c2='Pic';var data=this.flipDataMap[c1+'_'+this.cardTypeMap[c2]];if(!data){card2ndState2Delay+=1.0;this.timeoutId1=setTimeout(this.flipPage1.autoFlip.bind(this.flipPage1,card1stState2Delay*1000),1000);this.timeoutId2=setTimeout(this.flipPage2.autoFlip.bind(this.flipPage2,card2ndState2Delay*1000),1000+card2ndState1Delay*1000);}
else{if(data[2]=='default'||data[2]=='1st'){var c1Speed=this.timeMap[data[3]];var c2Speed=this.timeMap[data[4]];card2ndState2Delay+=c1Speed*0.6;}
else{var c1Speed=this.timeMap[data[4]];var c2Speed=this.timeMap[data[3]];card1stState2Delay+=c2Speed*0.6;}
trace("data "+data);trace("c1Speed "+c1Speed+" c2Speed "+c2Speed);this.timeoutId1=setTimeout(this.flipPage1.autoFlip.bind(this.flipPage1,card1stState2Delay*1000,1.5,c1Speed),1000);this.timeoutId2=setTimeout(this.flipPage2.autoFlip.bind(this.flipPage2,card2ndState2Delay*1000,1.5,c2Speed),1000+card2ndState1Delay*1000);}}
else{this.flipPage1.unlock();this.flipPage2.unlock();}};GameView.prototype.show1FlipCard=function(playerPos,isAuto){this.flipPage1.corner.visible=!isAuto;this.flipPage2.corner.visible=!isAuto;this.flipCon.visible=true;TweenMax.to(this.flipCon,0.5,{alpha:1});if(playerPos==0){this.cardControl.cards[5].visible=false;var cardId=this.cardControl.cards[5]['orgCardId'];this.flipPage2['cardIndex']=5;}
else{this.cardControl.cards[4].visible=false;var cardId=this.cardControl.cards[4]['orgCardId'];this.flipPage2['cardIndex']=4;}
this.flipPage2.reset();this.flipPage1.visible=false;this.flipPage2.x=game.GameSettings.CANVAS_WIDTH/2-this.pageW*0.5;this.flipPage2.setFrontTexture(this.gameModel.resources[cardId].texture);if(isAuto){this.flipPage2.lock();this.timeoutId1=setTimeout(this.flipPage2.autoFlip.bind(this.flipPage2,2500),1000);}
else{this.flipPage2.unlock();}};return GameView;}(baccarat.GameView));squeeze_baccarat.GameView=GameView;})(squeeze_baccarat||(squeeze_baccarat={}));var reveal_baccarat;(function(reveal_baccarat){var Game=(function(_super){__extends(Game,_super);function Game(){return _super!==null&&_super.apply(this,arguments)||this;}
Game.prototype.initialize=function(tableId,completeHdl){_super.prototype.initialize.call(this,tableId,completeHdl);this.hideCardSide=0;this.resetGameResultDelay=2500;this.cardTimeoutIds=[];return this;};Game.prototype.destructor=function(){for(var i=0;i<this.cardTimeoutIds.length;i++)
clearTimeout(this.cardTimeoutIds[i]);_super.prototype.destructor.call(this);};Game.prototype.startGame=function(){_super.prototype.startGame.call(this);var temp=this.gameView.cardControl.cardConfigs[0];this.gameView.cardControl.cardConfigs[0]=this.gameView.cardControl.cardConfigs[2];this.gameView.cardControl.cardConfigs[2]=temp;this.actCountdown=new game.CountDown();this.actCountdown.setTotal(0);this.gameView.addChild(this.actCountdown);this.actCountdown.hide();this.actCountdown.x=this.gameView.countdown.x;this.actCountdown.y=this.gameView.countdown.y;};Game.prototype.onWSMessageHdl=function(e){_super.prototype.onWSMessageHdl.call(this,e);};Game.prototype.onStartBet=function(data){_super.prototype.onStartBet.call(this,data);this.actCountdown.hide();for(var i=0;i<this.cardTimeoutIds.length;i++)
clearTimeout(this.cardTimeoutIds[i]);};Game.prototype.onNotice=function(data){var _this=this;_super.prototype.onNotice.call(this,data);if(data.content.value.indexOf('squeezetimer')==0){var id=setTimeout(function(){component.VComponentUtils.removeElementFromArray(_this.cardTimeoutIds,id);var arr=data.content.value.split(',');if(!_this.hideCardSide)
_this.hideCardSide='513'.indexOf(arr[1])>=0?game.BetType.PLAYER:game.BetType.BANKER;var cardPos=arr[1];var time=arr[2];if(time<0)
time=0;_this.actCountdown.setTotal(time);_this.actCountdown.setTime(time,false);if(time==0){_this.actCountdown.hide();_this.showAllCards();}
_this.gameView.cardControl.updateCardVals();},this.dealCardDelay+2000);this.cardTimeoutIds.push(id);}};Game.prototype.initCards=function(cardsRes){for(var i=0;i<cardsRes.content.value.length;i++){var isDealCardBack=false;var cardInfo=cardsRes.content.value[i];if(cardsRes.content.value.length<=3)
isDealCardBack=false;else if(cardsRes.content.value.length==4)
isDealCardBack=(cardInfo.pos==3||cardInfo.pos==4);else
isDealCardBack=(cardInfo.pos==5||cardInfo.pos==6);this.gameView.cardControl.dealCard(cardsRes.content.value[i].card,cardsRes.content.value[i].pos-1,false,isDealCardBack);}};Game.prototype.onDeal=function(dealRes){var _this=this;this.gameView.cardControl.animatingMap[dealRes.content.pos-1]=true;var cpos=dealRes.content.pos;var id=setTimeout(function(){component.VComponentUtils.removeElementFromArray(_this.cardTimeoutIds,id);var cardOrder=_this.gameView.cardControl.getTotalCard()+1;trace("cardOrder ========= "+cardOrder+" this.hideCardSide == "+_this.hideCardSide);var isDealCardBack=false;if(_this.hideCardSide){var sidePos=_this.hideCardSide==game.BetType.PLAYER?'513':'246';if(sidePos.indexOf(cpos.toString())>=0)
isDealCardBack=true;}
else{if(cardOrder<4)
isDealCardBack=false;else if(cardOrder==4){isDealCardBack=true;_this.hideCardSide=cpos==3?game.BetType.PLAYER:game.BetType.BANKER;}
else{if(cardOrder==5)
_this.showAllCards();if(cardOrder==6&&!_this.hideCardSide)
_this.showAllCards();isDealCardBack=true;}}
if(_this.gameView.cardControl)
_this.gameView.cardControl.dealCard(dealRes.content.card,dealRes.content.pos-1,true,isDealCardBack,0.15);_this.gameView.cardControl.updateCardVals();},this.dealCardDelay+1000);this.cardTimeoutIds.push(id);};Game.prototype.showAllCards=function(){for(var i=0;i<this.gameView.cardControl.cards.length;i++){var card=this.gameView.cardControl.cards[i];if(card){card['mesh'].texture=null;card['mesh'].texture=this.gameModel.resources[card['orgCardId']].texture;card['cardId']=card['orgCardId'];card.visible=true;}}
this.gameView.cardControl.updateCardVals();};Game.prototype.onStopBet=function(){_super.prototype.onStopBet.call(this);this.hideCardSide=0;};Game.prototype.onCommitSucceedAll=function(data){_super.prototype.onCommitSucceedAll.call(this,data);if(data.content.table!=this.gameModel.TABLE_ID)
return;this.hideCardSide=0;var tid=setTimeout(function(){component.VComponentUtils.removeElementFromArray(this.clearTimeoutIds,tid);this.showAllCards();}.bind(this),1000);this.clearTimeoutIds.push(tid);};return Game;}(baccarat.Game));reveal_baccarat.Game=Game;})(reveal_baccarat||(reveal_baccarat={}));var reveal_baccarat_7s;(function(reveal_baccarat_7s){var Game=(function(_super){__extends(Game,_super);function Game(){return _super!==null&&_super.apply(this,arguments)||this;}
Game.prototype.initialize=function(tableId,completeHdl){_super.prototype.initialize.call(this,tableId,completeHdl);return this;};Game.prototype.initView=function(){this.gameView=new baccarat_7s.GameView(this.gameModel);this.addChild(this.gameView);};Game.prototype.destructor=function(){_super.prototype.destructor.call(this);};return Game;}(reveal_baccarat.Game));reveal_baccarat_7s.Game=Game;})(reveal_baccarat_7s||(reveal_baccarat_7s={}));var bull_fight;(function(bull_fight){var BullBetResultId=(function(){function BullBetResultId(){}
BullBetResultId.getResult=function(id,src){if(src===void 0){src='0000000000000000000';}
return src.substring(0,id)+'1'+src.substring(id+1);};BullBetResultId.getBetType=function(id){return BullBetResultId.resultTypeMap[id];};BullBetResultId.getBetResultId=function(bettype){return BullBetResultId.resultTypeMap.indexOf(bettype);};BullBetResultId.getBullNameFromRank=function(rank){if(!BullBetResultId.bullNamesRankMap){BullBetResultId.bullNamesRankMap={};BullBetResultId.bullNamesRankMap[0]='';BullBetResultId.bullNamesRankMap[1]=game.GameText.bull_five_calf;BullBetResultId.bullNamesRankMap[2]=game.GameText.bull_bomb;BullBetResultId.bullNamesRankMap[3]=game.GameText.gold_bull;BullBetResultId.bullNamesRankMap[4]=game.GameText.silver_bull;BullBetResultId.bullNamesRankMap[5]=game.GameText.bull_bull;BullBetResultId.bullNamesRankMap[15]=game.GameText.no_bull;BullBetResultId.bullNamesRankMap[6]=game.GameText.single_bull.replace('{0}','9');BullBetResultId.bullNamesRankMap[7]=game.GameText.single_bull.replace('{0}','8');BullBetResultId.bullNamesRankMap[8]=game.GameText.single_bull.replace('{0}','7');BullBetResultId.bullNamesRankMap[9]=game.GameText.single_bull.replace('{0}','6');BullBetResultId.bullNamesRankMap[10]=game.GameText.single_bull.replace('{0}','5');BullBetResultId.bullNamesRankMap[11]=game.GameText.single_bull.replace('{0}','4');BullBetResultId.bullNamesRankMap[12]=game.GameText.single_bull.replace('{0}','3');BullBetResultId.bullNamesRankMap[13]=game.GameText.single_bull.replace('{0}','2');BullBetResultId.bullNamesRankMap[14]=game.GameText.single_bull.replace('{0}','1');}
return BullBetResultId.bullNamesRankMap[rank];};BullBetResultId.RED_BULL=0;BullBetResultId.BLUE_BULL=1;BullBetResultId.TIE_BULL=2;BullBetResultId.BULL_1=3;BullBetResultId.BULL_2=4;BullBetResultId.BULL_3=5;BullBetResultId.BULL_4=6;BullBetResultId.BULL_5=7;BullBetResultId.BULL_6=8;BullBetResultId.BULL_7=9;BullBetResultId.BULL_8=10;BullBetResultId.BULL_9=11;BullBetResultId.BULL_10=12;BullBetResultId.DOUBLE_BULL=13;BullBetResultId.SUPER_BULL=14;BullBetResultId.NO_BULL=15;BullBetResultId.resultTypeMap='ABCDEFGHJKMNOPX';return BullBetResultId;}());bull_fight.BullBetResultId=BullBetResultId;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var BullGame=(function(_super){__extends(BullGame,_super);function BullGame(){return _super!==null&&_super.apply(this,arguments)||this;}
BullGame.prototype.initialize=function(tableId,resources){this.gameModel.GAME_ID=game.GameID.BULL_FIGHT;this.resetGameResultDelay=1500;_super.prototype.initialize.call(this,tableId,resources);var str="A 11301,B 11301,C 11302,D 11303,E 11303,F 11303,G 11303,H 11303,J 11303,K 11303,M 11303,N 11303,O 11303,P 11314,X 11315";var arr=str.split(',');var betLimitIdMap={};for(var i=0;i<arr.length;i++){var arr2=arr[i].split(' ');betLimitIdMap[arr2[0]]=arr2[1];}
this.gameModel.betLimitIdMap=betLimitIdMap;return this;};BullGame.prototype.initView=function(){this.gameView=new bull_fight.GameView(this.gameModel);this.view=this.gameView;this.addChild(this.gameView);};BullGame.prototype.onBetCountDownComplete=function(){_super.prototype.onBetCountDownComplete.call(this);this.gameView.showStatus(game.GameText.WAIT_CARD_DEAL);};BullGame.prototype.onStopBet=function(){_super.prototype.onStopBet.call(this);};BullGame.prototype.resetGameResult=function(){_super.prototype.resetGameResult.call(this);};BullGame.prototype.startGame=function(){_super.prototype.startGame.call(this);};BullGame.prototype.onWSMessageHdl=function(e){_super.prototype.onWSMessageHdl.call(this,e);var data=e.data;if(data.content&&data.content.table&&data.content.table!=this.gameModel.TABLE_ID)
return;switch(data.kind){case game.GameCMD.BULL_RESULT:if(this.startBetInfo){if(data.content.round!=this.startBetInfo.roundid)
break;}
else if(this.lastRound&&data.content.round!=this.lastRound.roundid)
break;var cardControl=this.gameView.cardControl;var bull1=bull_fight.BullBetResultId.getBullNameFromRank(data.content.blueRank);var bull2=bull_fight.BullBetResultId.getBullNameFromRank(data.content.redRank);this.gameView.gameResult.setBlueBull(bull1);this.gameView.gameResult.setRedBull(bull2);this.gameView.gameResult.setBullResult(bull1,bull2);this.gameView.cardControl.markBullCards(data.content.blueCards,data.content.redCards);break;}};BullGame.prototype.onChangeLimit=function(e){_super.prototype.onChangeLimit.call(this,e);var data=e.data;if(data.table!=this.gameModel.TABLE_ID){this.view.cardControl.clearAllCards();}};BullGame.prototype.initCards=function(cardsRes){for(var i=0;i<cardsRes.content.value.length;i++){this.view.cardControl.dealCard(cardsRes.content.value[i].card,cardsRes.content.value[i].pos-1,false);}};BullGame.prototype.enterGame=function(limitID){_super.prototype.enterGame.call(this,limitID);};BullGame.prototype.onAuthSuccess=function(){_super.prototype.onAuthSuccess.call(this);};BullGame.prototype.onWSOpenHdl=function(){_super.prototype.onWSOpenHdl.call(this);};BullGame.prototype.onWSCloseHdl=function(){_super.prototype.onWSCloseHdl.call(this);};BullGame.prototype.onGameEvent=function(e){_super.prototype.onGameEvent.call(this,e);};BullGame.prototype.onStartBet=function(data){_super.prototype.onStartBet.call(this,data);};return BullGame;}(game.BaseGame));bull_fight.BullGame=BullGame;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var BetArea=(function(_super){__extends(BetArea,_super);function BetArea(gameModel,input){return _super.call(this,gameModel,input)||this;}
BetArea.prototype.initSettings=function(){_super.prototype.initSettings.call(this);this.initLiveChipSettings();this.initBetSettings();};BetArea.prototype.initLiveChipSettings=function(){var settings={};settings['B']={totalPos:new PIXI.Point(525.85,471.1),arr:[new PIXI.Point(487.5,496.95),new PIXI.Point(502,492.45),new PIXI.Point(490.25,483),new PIXI.Point(505.4,480.25),]};settings['A']={totalPos:new PIXI.Point(721,466.34999999999997),arr:[new PIXI.Point(774.35,493.59999999999997),new PIXI.Point(789.1,498.59999999999997),new PIXI.Point(785.1,484.9),new PIXI.Point(761.45,487.04999999999995),]};settings['C']={totalPos:new PIXI.Point(631.25,464.95),arr:[new PIXI.Point(600.1,496.2),new PIXI.Point(616.1,499.7),new PIXI.Point(606.85,489.5),new PIXI.Point(621.2,488.25),]};this.liveChip2DSetting=settings;};BetArea.prototype.initBetSettings=function(){var settings=[{id:"D",x:222.95,y:454.95},{id:"E",x:272.45,y:462.55},{id:"F",x:322,y:469.2},{id:"G",x:371.6,y:474.8},{id:"H",x:421.25,y:479.5},{id:"J",x:204,y:485.6},{id:"K",x:255.7,y:493.55},{id:"M",x:307.5,y:500.5},{id:"N",x:359.4,y:506.4},{id:"O",x:411.3,y:511.25},{id:"B",x:464.45,y:483.45},{id:"C",x:592.25,y:487.95},{id:"A",x:683.8,y:483.45},{id:"P",x:800.5,y:475.3},{id:"X",x:897.4,y:454.15}];for(var i=0;i<settings.length;i++){settings[i].id=settings[i].id;settings[i].url="BULL_"+settings[i].id+".png";}
this.bet2DSetting=settings;};BetArea.prototype.initJson=function(){var url=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?"assets/bull_fight/2d/share/bet_area.json":(game.GlobalVals.viewMode==game.ViewMode.MODE_3D?"assets/bull_fight/3d/share/bet_area.json":"assets/bull_fight/7s/share/bet_area.json");this.updateJson(url);};BetArea.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:this.liveChip3DSetting;_super.prototype.initLiveChip.call(this,vSetting);};BetArea.prototype.initBetCon=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.initBetCon.call(this,vSetting);};BetArea.prototype.updateText=function(){var viewMode=game.GlobalVals.viewMode;var betAreaText=this.betAreaText;betAreaText.texture=this.gameModel.resources[(viewMode!=game.ViewMode.MODE_2D?viewMode+"_":"")+'bet_area_text_'+game.GameUtils.getStudioColorName(this.gameModel.STUDIO)].texture;betAreaText.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;betAreaText.scale.y=betAreaText.scale.x;switch(viewMode){case game.ViewMode.MODE_2D:betAreaText.x=53;betAreaText.y=353;break;case game.ViewMode.MODE_3D:break;}};BetArea.prototype.changeView=function(){var viewMode=game.GlobalVals.viewMode;var url=viewMode==game.ViewMode.MODE_2D?"assets/bull_fight/2d/bet_area.json":(viewMode==game.ViewMode.MODE_3D?"assets/bull_fight/3d/bet_area.json":"assets/bull_fight/7s/bet_area.json");this.updateJson(url);var vSetting=viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.updateBetConSettings.call(this,vSetting);vSetting=viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:this.liveChip3DSetting;this.liveChipMng.updateView(vSetting);this.updateText();_super.prototype.changeView.call(this);};BetArea.prototype.getBetName=function(bettype){return BetArea.sGetBetName(bettype);};BetArea.sGetBetName=function(bettype){if(!BetArea.betNamesMap){BetArea.betNamesMap={};BetArea.betNamesMap['A']=game.GameText.red_bull;BetArea.betNamesMap['B']=game.GameText.blue_bull;BetArea.betNamesMap['C']=game.GameText.TIE;BetArea.betNamesMap['D']=game.GameText.single_bull.replace('{0}','1');BetArea.betNamesMap['E']=game.GameText.single_bull.replace('{0}','2');BetArea.betNamesMap['F']=game.GameText.single_bull.replace('{0}','3');BetArea.betNamesMap['G']=game.GameText.single_bull.replace('{0}','4');BetArea.betNamesMap['H']=game.GameText.single_bull.replace('{0}','5');BetArea.betNamesMap['J']=game.GameText.single_bull.replace('{0}','6');BetArea.betNamesMap['K']=game.GameText.single_bull.replace('{0}','7');BetArea.betNamesMap['M']=game.GameText.single_bull.replace('{0}','8');BetArea.betNamesMap['N']=game.GameText.single_bull.replace('{0}','9');BetArea.betNamesMap['O']=game.GameText.bull_bull;BetArea.betNamesMap['P']=game.GameText.double_bull;BetArea.betNamesMap['X']=game.GameText.super_bull;}
return BetArea.betNamesMap[bettype];};BetArea.prototype.getBetTypeFromId=function(id){return id;};BetArea.prototype.getBetPlaceWithType=function(betType,seatId){if(seatId===void 0){seatId=0;}
if(seatId==0)
seatId=this.seatId;var obj=this.betPlaceMap[betType]?this.betPlaceMap[betType]:this.betPlaceMap[betType+"_"+seatId];if(!obj)
return null;if(!(obj instanceof Array)){if(obj.seatId>0)
return seatId==obj.seatId?obj:null;else
return seatId==this.seatId?obj:null;}
return obj[seatId>4?seatId-2:seatId-1];};BetArea.prototype.showResult=function(data){this.hideHighlight();var results=data.content.result;var hit;var betType;for(var i=0;i<this.hitArr.length;i++){hit=this.hitArr[i];betType=hit.betType;if(results.charAt(bull_fight.BullBetResultId.getBetResultId(hit.betType))=='0')
continue;hit['winHL'].visible=true;}};return BetArea;}(game.BaseBetArea));bull_fight.BetArea=BetArea;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var CardControl=(function(_super){__extends(CardControl,_super);function CardControl(gameModel){return _super.call(this,gameModel)||this;}
CardControl.prototype.initialize=function(){this.blueCards='';this.redCards='';this.cardConfigs=new Array();var c0=new game.CardConfig();c0.x=278.5;c0.y=388.25;c0.vertices=[-0.2,0,62.2,0,40.2,66.65,-26.85,66.65];this.cardConfigs[0]=c0;var c1=new game.CardConfig();c1.x=346.1;c1.y=388.25;c1.vertices=[-0.2,0,62.2,0,44.65,66.65,-21.8,66.65];this.cardConfigs[1]=c1;var c2=new game.CardConfig();c2.x=412.95;c2.y=388.25;c2.vertices=[-0.2,0,62.2,0,50.15,66.65,-16.9,66.65];this.cardConfigs[2]=c2;var c3=new game.CardConfig();c3.x=480.7;c3.y=388.25;c3.vertices=[-0.2,0,62.2,0,55.9,66.65,-11.9,66.65];this.cardConfigs[3]=c3;var c4=new game.CardConfig();c4.x=548.7;c4.y=388.25;c4.vertices=[-0.2,0,62.2,0,60.4,66.65,-6.65,66.65];this.cardConfigs[4]=c4;var c5=new game.CardConfig();c5.x=666.15;c5.y=388.25;c5.vertices=[0,0,62.2,0,68.8,66.65,1.6,66.65];this.cardConfigs[5]=c5;var c6=new game.CardConfig();c6.x=734;c6.y=388.25;c6.vertices=[0,0,62.2,0,74.35,66.65,5.95,66.65];this.cardConfigs[6]=c6;var c7=new game.CardConfig();c7.x=800.9;c7.y=388.25;c7.vertices=[-0.2,0,62.2,0,79.6,66.65,12.1,66.65];this.cardConfigs[7]=c7;var c8=new game.CardConfig();c8.x=868.8;c8.y=388.25;c8.vertices=[-0.2,0,62.2,0,84.1,66.65,16.6,66.65];this.cardConfigs[8]=c8;var c9=new game.CardConfig();c9.x=936.65;c9.y=388.25;c9.vertices=[-0.2,0,62.2,0,88.9,66.65,21.85,66.65];this.cardConfigs[9]=c9;var uvs=[0,0,1,0,1,1,0,1];for(var i=0;i<this.cardConfigs.length;i++){this.cardConfigs[i].vertices=new Float32Array(this.cardConfigs[i].vertices);this.cardConfigs[i].uvs=new Float32Array(uvs);}
this.cards=[null,null,null,null,null,null];};CardControl.prototype.dealCard=function(cardId,cardPos,animated,isDealCardBack,duration){if(animated===void 0){animated=true;}
if(isDealCardBack===void 0){isDealCardBack=false;}
if(duration===void 0){duration=0.3;}
var orgCardId=cardId;if(isDealCardBack)
cardId='CB';this.clearCard(cardPos);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,true,game.SoundMng.CARD_SWIPE);var cardConfig=this.cardConfigs[cardPos];var mesh=new PIXI.mesh.Mesh(this.gameModel.resources[cardId].texture,cardConfig.vertices,cardConfig.uvs,[0,1,2,0,2,3],PIXI.DRAW_MODES.TRIANGLES);var card=new PIXI.Container();var b=mesh.getLocalBounds();mesh.x=-(b.x+b.width/2);mesh.y=-(b.y+b.height/2);if(!game.GameSettings.IS_WEBGL){var backMesh=new PIXI.mesh.Mesh(this.gameModel.resources[cardId].texture,cardConfig.vertices,cardConfig.uvs,[0,1,3,3,1,2],PIXI.DRAW_MODES.TRIANGLES);card.addChild(backMesh);backMesh.x=mesh.x;backMesh.y=mesh.y;}
card.addChild(mesh);card['mesh']=mesh;var px,py;px=cardConfig.x-mesh.x;py=cardConfig.y-mesh.y;if(animated){if(cardPos<5)
card.x=px+5;else
card.x=px-5;card.y=py-50;this.animatingMap[cardPos]=true;TweenMax.to(card,duration,{x:px,y:py,onComplete:function(){this.animatingMap[cardPos]=false;}.bind(this)});}
else{card.x=px;card.y=py;}
this.addChild(card);this.cards[cardPos]=card;card['cardId']=cardId;card['orgCardId']=orgCardId;this.markBullCards(this.blueCards,this.redCards);this.updateCardVals();return card;};CardControl.prototype.clearCard=function(carPos){_super.prototype.clearCard.call(this,carPos);this.updateCardVals();};CardControl.prototype.clearAllCards=function(){_super.prototype.clearAllCards.call(this);this.updateCardVals();};CardControl.prototype.updateCardVals=function(){};CardControl.prototype.setMarkerVisible=function(cardPos,visi){var card=this.cards[cardPos];var cardConfig=this.cardConfigs[cardPos];var vt=cardConfig.vertices;var p1=new PIXI.Point((vt[3*2]-vt[0*2])*0.25,(vt[3*2+1]-vt[0*2+1])*0.25);var p2=new PIXI.Point(vt[1*2]+(vt[2*2]-vt[1*2])*0.25,vt[1*2+1]+(vt[2*2+1]-vt[1*2+1])*0.25);var vt2=[vt[2]*0.6,vt[3],vt[2]*0.9,vt[3],p1.x+(p2.x-p1.x)*0.9,p1.y,p1.x+(p2.x-p1.x)*0.6,p1.y];vt2=new Float32Array(vt2);if(!card['marker']){var mesh=new PIXI.mesh.Mesh(this.gameModel.resources["icon_lobby_new"].texture,vt2,cardConfig.uvs,[0,1,2,0,2,3],PIXI.DRAW_MODES.TRIANGLES);card.addChild(mesh);card['marker']=mesh;mesh.x=card['mesh'].x;mesh.y=card['mesh'].y;card['marker'].anchorX=0;card['marker'].anchorY=0;card.addChild(card['marker']);}
card['marker'].visible=visi;};CardControl.prototype.markBullCards=function(blueCards,redCards){if(!blueCards)
blueCards='';if(!redCards)
redCards='';this.blueCards=blueCards;this.redCards=redCards;for(var i=0;i<5;i++){var card=this.cards[i];if(!card)
continue;if(blueCards.substr(0,6).indexOf(card['cardId'])>=0){this.setMarkerVisible(i,true);}
else
this.setMarkerVisible(i,false);}
for(var i=5;i<10;i++){var card=this.cards[i];if(!card)
continue;if(redCards.substr(0,6).indexOf(card['cardId'])>=0){this.setMarkerVisible(i,true);}
else
this.setMarkerVisible(i,false);}};return CardControl;}(game.BaseCardControl));bull_fight.CardControl=CardControl;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var ChipControl=(function(_super){__extends(ChipControl,_super);function ChipControl(gameModel){return _super.call(this,gameModel)||this;}
ChipControl.prototype.initChipPos=function(){this.updateChipPos(null);};ChipControl.prototype.initChips=function(schips,shownRange){_super.prototype.initChips.call(this,schips,shownRange);this.updateLeftRight();};ChipControl.prototype.updateLeftRight=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y-7;this.rightArrow.rotation=-10*Math.PI/180;break;case game.ViewMode.MODE_3D:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y;this.rightArrow.rotation=0;break;}};ChipControl.prototype.updateChipPos=function(chipsPos){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.chipsPos=[new PIXI.Point(-52.35,1.85),new PIXI.Point(0.05,0.65),new PIXI.Point(51.05,-1.55),new PIXI.Point(102.15,-5.2),new PIXI.Point(154.85,-10.95),new PIXI.Point(207.4,-19.4),new PIXI.Point(257.55,-28.45),new PIXI.Point(305.95,-38.85)];break;case game.ViewMode.MODE_3D:this.chipsPos=[new PIXI.Point(-52.25,0.55),new PIXI.Point(-0.6,0.55),new PIXI.Point(51.05,0.55),new PIXI.Point(102.7,0.55),new PIXI.Point(154.35,0.55),new PIXI.Point(206,0.55),new PIXI.Point(257.65,0.55),new PIXI.Point(309.3,0.55)];break;}
_super.prototype.updateChipPos.call(this,this.chipsPos);};ChipControl.prototype.changeView=function(){this.updateChipPos(null);this.updateLeftRight();this.drawMasker();_super.prototype.changeView.call(this);};return ChipControl;}(game.BaseChipControl));bull_fight.ChipControl=ChipControl;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var GameHUD=(function(_super){__extends(GameHUD,_super);function GameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameHUD.prototype.initView=function(){_super.prototype.initView.call(this);this.settingCon=new game.SettingContainer(this.gameModel);this.settingCon.x=0;this.settingCon.y=581;this.addChild(this.settingCon);this.gameInfoCon=new bull_fight.GameInfoCon(this.gameModel);this.addChild(this.gameInfoCon);};GameHUD.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.settingCon.x=0;this.settingCon.y=580;this.gameInfoCon.expand();this.gameInfoCon.resizeBtn.visible=false;break;case game.ViewMode.MODE_3D:this.settingCon.x=0;this.settingCon.y=632;this.gameInfoCon.collapse();this.gameInfoCon.resizeBtn.visible=true;break;}};GameHUD.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameHUD;}(game.BaseGameHUD));bull_fight.GameHUD=GameHUD;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var GenGameDetailCon=(function(_super){__extends(GenGameDetailCon,_super);function GenGameDetailCon(){return _super!==null&&_super.apply(this,arguments)||this;}
GenGameDetailCon.prototype.initView=function(){this.viewW=379;this.viewH=157;this.contentY=27;var w=this.viewW;var h=this.viewH;var contentY=this.contentY;var limitBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('limit_icon0001.png'),PIXI.Texture.fromFrame('limit_icon0002.png')]);var livePoolBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('livepool_icon0001.png'),PIXI.Texture.fromFrame('livepool_icon0002.png')]);var resultBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('info_game_result_icon0001.png'),PIXI.Texture.fromFrame('info_game_result_icon0002.png')]);game.GameUtils.resizeNodeH(limitBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(livePoolBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(resultBtn,game.StyleMng.INFO_TAB_BTN_SIZE);this.gameModel.toolTip.addToolTip(limitBtn,game.GameText.LIMITS);this.gameModel.toolTip.addToolTip(livePoolBtn,game.GameText.LIVE_POOL);this.gameModel.toolTip.addToolTip(resultBtn,game.GameText.RESULTS);var btns=[limitBtn,livePoolBtn,resultBtn];this.btns=btns;for(var i=0;i<btns.length;i++){this.addChild(btns[i]);btns[i].buttonMode=true;btns[i].gotoAndStop(1);btns[i].x=(btns[i].width+1)*i;}
this.initLimitDetail();this.initLivePoolDetail();this.resultInfo=new bull_fight.ResultsInfo(this.gameModel,w,h);var contents=[this.limitDetail,this.livePoolDetail,this.resultInfo];for(var i=0;i<contents.length;i++){this.addChild(contents[i]);contents[i].y=contentY;}
var tabMng=new component.VTabMng();tabMng.initialize(btns,contents);this.tabMng=tabMng;var expandBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_expand0001.png'),PIXI.Texture.fromFrame('info_pane_expand0002.png')],this.onExpand.bind(this));expandBtn.x=this.viewW-expandBtn.width;var conllapseBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_collapse0001.png'),PIXI.Texture.fromFrame('info_pane_collapse0002.png')],this.onCollapse.bind(this));conllapseBtn.x=this.viewW-conllapseBtn.width;var resizeBtn=new component.VToggleButton(expandBtn,conllapseBtn);this.addChild(resizeBtn);resizeBtn.y=this.contentY+this.viewH-resizeBtn.height;this.resizeBtn=resizeBtn;};GenGameDetailCon.prototype.initLimitDetail=function(){this.limitDetail=new bull_fight.GenLimitDetail(this.gameModel,this.viewW,this.viewH);};GenGameDetailCon.prototype.initLivePoolDetail=function(){this.livePoolDetail=new bull_fight.GenLivePoolDetail(this.gameModel,this.viewW,this.viewH);};GenGameDetailCon.prototype.updateTrends=function(table){this.resultInfo.updateTrends(table);};GenGameDetailCon.prototype.onExpand=function(){_super.prototype.onExpand.call(this);var addedSize=40;this.resultInfo.resize(this.viewW,this.viewH+addedSize);};GenGameDetailCon.prototype.onCollapse=function(){_super.prototype.onCollapse.call(this);this.resultInfo.resize(this.viewW,this.viewH);};return GenGameDetailCon;}(game.GameDetailCon));bull_fight.GenGameDetailCon=GenGameDetailCon;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var GenLimitDetail=(function(_super){__extends(GenLimitDetail,_super);function GenLimitDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
GenLimitDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLimitDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();this.tfs=[];var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.red_bull,game.GameText.blue_bull,game.GameText.TIE,game.GameText.single_bull.replace('{0}','1'),game.GameText.single_bull.replace('{0}','2'),game.GameText.single_bull.replace('{0}','3'),game.GameText.single_bull.replace('{0}','4'),game.GameText.single_bull.replace('{0}','5'),game.GameText.single_bull.replace('{0}','6'),game.GameText.single_bull.replace('{0}','7'),game.GameText.single_bull.replace('{0}','8'),game.GameText.single_bull.replace('{0}','9'),game.GameText.bull_bull,game.GameText.double_bull,game.GameText.super_bull];var ids=[];var str="A 11301,B 11301,C 11302,D 11303,E 11303,F 11303,G 11303,H 11303,J 11303,K 11303,M 11303,N 11303,O 11303,P 11314,X 11315";var arr=str.split(',');for(var i=0;i<arr.length;i++){var arr2=arr[i].split(' ');ids[i]=arr2[1];}
var posX=12;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};if(LANG=='jp')
style.fontSize*=0.9;var tf;for(var i=0;i<texts.length;i++){tf=game.GameUtils.createText(texts[i],style);tf.x=posX;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf['limitId']=ids[i];tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};GenLimitDetail.prototype.setData=function(data){if(!data)
return;for(var i=0;i<this.tfs.length;i++){var tf=this.tfs[i];tf.text=component.VComponentUtils.getNumInFormat(this.gameModel.betSettings[tf['limitId']].min)+'-'+
component.VComponentUtils.getNumInFormat(this.gameModel.betSettings[tf['limitId']].max);}};return GenLimitDetail;}(game.LimitDetail));bull_fight.GenLimitDetail=GenLimitDetail;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var GenLivePoolDetail=(function(_super){__extends(GenLivePoolDetail,_super);function GenLivePoolDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
GenLivePoolDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLivePoolDetail.prototype.initContent=function(){this.tfMap={};this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.red_bull,game.GameText.blue_bull,game.GameText.TIE];var results=[];results.push([bull_fight.BullBetResultId.getResult(bull_fight.BullBetResultId.RED_BULL),game.TrendType.NORMAL,bull_fight.BullBetResultId.getBetType(bull_fight.BullBetResultId.RED_BULL)]);results.push([bull_fight.BullBetResultId.getResult(bull_fight.BullBetResultId.BLUE_BULL),game.TrendType.NORMAL,bull_fight.BullBetResultId.getBetType(bull_fight.BullBetResultId.BLUE_BULL)]);results.push([bull_fight.BullBetResultId.getResult(bull_fight.BullBetResultId.TIE_BULL),game.TrendType.NORMAL,bull_fight.BullBetResultId.getBetType(bull_fight.BullBetResultId.TIE_BULL)]);this.tfs=[];var posX=5;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;var icon;for(var i=0;i<texts.length;i++){icon=new bull_fight.GenPearlIcon().setData(game.TrendIconUtils.NORMAL_SIZE);content.addChild(icon);icon.x=posX+icon.size*0.5;icon.y=posY+icon.size*0.5;icon.setType(results[i][1]);icon.drawResult(results[i][0]);tf=game.GameUtils.createText(texts[i],style);tf.x=posX+20;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;this.tfMap[results[i][2]]=tf;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};GenLivePoolDetail.prototype.setData=function(data){this.clearData();for(var i=0;i<data.content.cat.length;i++){if(!this.tfMap[data.content.cat[i]])
continue;this.tfMap[data.content.cat[i]].text=component.VComponentUtils.getNumInFormat(data.content.amount[i]);}};return GenLivePoolDetail;}(game.LivePoolDetail));bull_fight.GenLivePoolDetail=GenLivePoolDetail;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var ResultsInfo=(function(_super){__extends(ResultsInfo,_super);function ResultsInfo(gameModel,viewW,viewH){return _super.call(this,gameModel,viewW,viewH)||this;}
ResultsInfo.prototype.initView=function(){_super.prototype.initView.call(this);};ResultsInfo.prototype.initContent=function(){this.items=[];this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var posX=5;var posY=5;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;var item;this.maxItem=20;var h=32;for(var i=0;i<this.maxItem;i++){item=new PIXI.Graphics();content.addChild(item);tf=game.GameUtils.createText('',style);tf.x=5;tf.y=5;item.addChild(tf);item['roundTf']=tf;var icon=new bull_fight.GenTrendInfoPanel(this.gameModel);icon.playerIcon.visible=false;icon.bankerIcon.visible=false;item.addChild(icon);icon.x=50;icon.y=-3;icon.height=30;icon.scale.x=icon.scale.y;icon.bg.clear();icon.bg.lineStyle(2,0xDDDDDD);icon.bg.moveTo(136.25,4);icon.bg.lineTo(136.25,4+48);item['icon']=icon;tf=game.GameUtils.createText('',{fontFamily:"Arial",fontSize:12,fill:0x000000,align:'right'});tf.anchor.x=1;tf.x=this.viewW-40;tf.y=5;item.addChild(tf);item['bullTf']=tf;item.lineStyle(1,0xcdcdcd);item.moveTo(10,28);item.lineTo(350,28);item.x=posX;item.y=posY;posY+=h;this.items.push(item);}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();};ResultsInfo.prototype.updateTrends=function(tableId){if(tableId!=this.gameModel.TABLE_ID)
return;var values=game.GlobalVals.trendDataMap[this.gameModel.TABLE_ID].trendHis100Arr;for(var i=0;i<this.maxItem;i++)
this.items[i].visible=false;for(var i=0,l=Math.min(values.length,this.maxItem);i<l;i++){var info=values[values.length-1-i];this.items[i].visible=true;this.items[i]['icon'].setData(info);this.items[i]['roundTf'].text=info.shoe+'-'+info.round;var color;if(info.result[0]=='1'){this.items[i]['bullTf'].text=game.GameText.red_bull;color=game.StyleMng.RED;}
else if(info.result[1]=='1'){this.items[i]['bullTf'].text=game.GameText.blue_bull;color=game.StyleMng.BLUE;}
else{this.items[i]['bullTf'].text=game.GameText.TIE;color=game.StyleMng.GREEN;}
this.items[i]['bullTf'].style.fill=color;}};return ResultsInfo;}(game.BaseGameDetail));bull_fight.ResultsInfo=ResultsInfo;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var GameInfoCon=(function(_super){__extends(GameInfoCon,_super);function GameInfoCon(gameModel){return _super.call(this,gameModel)||this;}
GameInfoCon.prototype.initGameDetailCon=function(){this.gameDetailCon=new bull_fight.GenGameDetailCon(this.gameModel);this.addChild(this.gameDetailCon);this.gameDetailCon.y=90;};return GameInfoCon;}(game.BaseGameInfoCon));bull_fight.GameInfoCon=GameInfoCon;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var GameResult=(function(_super){__extends(GameResult,_super);function GameResult(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameResult.prototype.initialize=function(){this.bankerCardVal=new PIXI.Container();var bg=new PIXI.Graphics();bg.beginFill(0x000000,0.3);bg.drawRoundedRect(0,0,152,42,4);bg.endFill();this.bankerCardVal.addChild(bg);this.addChild(this.bankerCardVal);var tf=game.GameUtils.createText('0',{fontFamily:"dinbold",fontSize:28,fontStyle:'bold',fill:0xD70300,align:'center'});tf.anchor.x=0.5;tf.anchor.y=0.5;tf.x=bg.width*0.5;tf.y=bg.height*0.5;this.bankerCardVal.x=900;this.bankerCardVal.y=324;this.bankerCardVal.addChild(tf);this.bankerCardVal['tf']=tf;this.playerCardVal=new PIXI.Container();bg=new PIXI.Graphics();bg.beginFill(0x000000,0.3);bg.drawRoundedRect(0,0,152,42,4);bg.endFill();this.playerCardVal.addChild(bg);this.addChild(this.playerCardVal);tf=game.GameUtils.createText('0',{fontFamily:"dinbold",fontSize:28,fontStyle:'bold',fill:0x2A8FBD,align:'center'});tf.anchor.x=0.5;tf.anchor.y=0.5;tf.x=bg.width*0.5;tf.y=bg.height*0.5;this.playerCardVal.x=226.5;this.playerCardVal.y=324;this.playerCardVal.addChild(tf);this.playerCardVal['tf']=tf;this.reset();};GameResult.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:case game.ViewMode.MODE_7S:break;case game.ViewMode.MODE_3D:break;}};GameResult.prototype.setRedBull=function(val){this.bankerCardVal['tf'].text=val;};GameResult.prototype.setBlueBull=function(val){this.playerCardVal['tf'].text=val;};GameResult.prototype.showResult=function(data){var results=data.content.result;var cards=data.content.cards;var cardControl=this.gameModel.gameView.cardControl;this.showBullResult();};GameResult.prototype.hideBullResult=function(){this.playerCardVal.visible=false;this.bankerCardVal.visible=false;};GameResult.prototype.showBullResult=function(){this.playerCardVal.visible=true;this.bankerCardVal.visible=true;};GameResult.prototype.setBullResult=function(redBull,blueBull){this.playerCardVal['tf'].text=redBull;this.bankerCardVal['tf'].text=blueBull;};GameResult.prototype.reset=function(){this.setBullResult('','');this.hideBullResult();};GameResult.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameResult;}(game.BaseGameResult));bull_fight.GameResult=GameResult;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.initialize=function(){_super.prototype.initialize.call(this);this.bg.texture=this.gameModel.resources['table_bg_'+game.GameUtils.getColor(this.gameModel.TABLE_ID)].texture;this.vodBg=new PIXI.Graphics();this.vodBg.beginFill(0x000000);this.vodBg.drawRect(0,0,512,309);this.vodBg.x=this.gameModel.VOD_X;this.vodBg.y=this.gameModel.VOD_Y;this.vodBg.endFill();this.initTrends();this.chipControl=new bull_fight.ChipControl(this.gameModel);this.chipControl.x=907;this.chipControl.y=591;this.chipControl.dissable();this.gameModel.chipControl=this.chipControl;this.betArea=new bull_fight.BetArea(this.gameModel,this.betInput);this.betArea.dissable();this.addChild(this.betArea);this.registerTip(1029,453,15,15,new game.BaseTipPopup(null,game.GameText.super_bull,game.GameText.super_bull_tip));this.registerTip(874,474,15,15,new game.BaseTipPopup(null,game.GameText.double_bull,game.GameText.double_bull_tip));this.registerTip(437.85,541,15,15,new game.BaseTipPopup(null,game.GameText.single_bull.replace('{0}',''),game.GameText.bull_tip));this.registerTip(200.15,392,18,15,new bull_fight.BullRankTipPopup(null),new PIXI.Point(225.7,102));this.betControl=new game.BetControl(this.gameModel);this.betControl.x=477;this.betControl.y=580;this.betControl.hide();this.cardControl=new bull_fight.CardControl(this.gameModel);this.addChild(this.cardControl);this.addChild(this.betControl);this.addChild(this.chipControl);_super.prototype.initCountDown.call(this);this.countdown.x=640;this.countdown.y=383;this.gameResult=(new bull_fight.GameResult(this.gameModel));this.addChild(this.gameResult);this.gameHUD=new bull_fight.GameHUD(this.gameModel);this.addChild(this.gameHUD);this.updateView();};GameView.prototype.initTrends=function(){this.trendMng=new bull_fight.TrendMng(this.gameModel);this.addChild(this.trendMng);};GameView.prototype.activeSuperHand=function(isSupper){};GameView.prototype.updateVodView=function(){if(!this.vodInited)
return;var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.gameModel.VOD_WIDTH=511;this.gameModel.VOD_HEIGHT=311;this.gameModel.VOD_X=386;this.gameModel.VOD_Y=3;this.processVodLoadMediaData();break;case game.ViewMode.MODE_3D:this.gameModel.VOD_X=0;this.gameModel.VOD_Y=-140;this.gameModel.VOD_WIDTH=this.gameModel.GAME_WIDTH-2*this.gameModel.VOD_X;this.gameModel.VOD_HEIGHT=this.gameModel.GAME_HEIGHT;this.processVodLoadMediaData();break;}
this.sizeHandler();};GameView.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;this.updateVodView();switch(viewMode){case game.ViewMode.MODE_2D:this.chipControl.x=907;this.chipControl.y=591;this.betControl.x=477;this.betControl.y=580;this.cardControl.visible=true;this.bg.y=0;this.betArea.collectWinPos.x=138;this.betArea.collectWinPos.y=572;this.betInput.x=497+6;this.betInput.y=583;break;case game.ViewMode.MODE_3D:break;}};GameView.prototype.changeView=function(){this.updateView();this.gameResult.changeView();_super.prototype.changeView.call(this);};return GameView;}(game.BaseGameView));bull_fight.GameView=GameView;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var BullRankTipPopup=(function(_super){__extends(BullRankTipPopup,_super);function BullRankTipPopup(main){var _this=_super.call(this,main,300,430)||this;_this.closeBtn.visible=false;_this.titleTf.text=game.GameText['rank_list'];_this.hasUnderlay=false;var table=new component.VTable(300,25,15,["",""],[8.5/10,1.5/10],"left",{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12},{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12,wordWrap:true},0x25221D,0x25221D,0x25221D);table.y=10;table.titleCon.visible=false;_this.addChild(table);for(var i=0;i<15;i++){table.setData(i,[game.GameText['bull_rank_'+(i+1)],i+1]);}
return _this;}
return BullRankTipPopup;}(game.BasePopup));bull_fight.BullRankTipPopup=BullRankTipPopup;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var GenIconCount=(function(_super){__extends(GenIconCount,_super);function GenIconCount(gameModel){return _super.call(this,gameModel)||this;}
GenIconCount.prototype.initialize=function(){this.tfs=[];this.icons=[];var results=[];results.push([bull_fight.BullBetResultId.getResult(bull_fight.BullBetResultId.RED_BULL),game.TrendType.NORMAL]);results.push([bull_fight.BullBetResultId.getResult(bull_fight.BullBetResultId.BLUE_BULL),game.TrendType.NORMAL]);results.push([bull_fight.BullBetResultId.getResult(bull_fight.BullBetResultId.TIE_BULL),game.TrendType.NORMAL]);var dis=20;var posX=0;var icon;for(var i=0;i<results.length;i++){icon=new bull_fight.GenPearlIcon().setData(16);icon.x=posX;posX+=dis;icon.setType(results[i][1]);icon.draw(new game.netdata.TrendsItem().setData(results[i][0]));var tf=game.GameUtils.createText('0',{fontFamily:"Arial",fontSize:12,fill:0xffffff,align:'center'});tf.anchor.x=0.5;tf.x=icon.x;tf.y=icon.y+8;this.tfs[i]=tf;this.icons[i]=icon;this.addChild(icon);this.addChild(tf);}
this.clear();};GenIconCount.prototype.clear=function(){for(var i=0;i<this.tfs.length;i++){this.tfs[i].text='0';}};GenIconCount.prototype.addTrend=function(item,isAnim){if(isAnim===void 0){isAnim=false;}
var ind=-1;if(item.result.charAt(bull_fight.BullBetResultId.RED_BULL)=='1')
ind=0;if(item.result.charAt(bull_fight.BullBetResultId.BLUE_BULL)=='1')
ind=1;if(item.result.charAt(bull_fight.BullBetResultId.TIE_BULL)=='1')
ind=2;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}};return GenIconCount;}(game.IconCount));bull_fight.GenIconCount=GenIconCount;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var GenPredict=(function(_super){__extends(GenPredict,_super);function GenPredict(gameModel){return _super.call(this,gameModel)||this;}
GenPredict.prototype.destructor=function(){_super.prototype.destructor.call(this);};GenPredict.prototype.initialize=function(){this.banker=new PIXI.Container();this.player=new PIXI.Container();this.gameModel.toolTip.addToolTip(this.banker,game.GameText.PREDICT.replace('{0}',game.GameText.red_bull));this.gameModel.toolTip.addToolTip(this.player,game.GameText.PREDICT.replace('{0}',game.GameText.blue_bull));this.player.y=45+2;this.addChild(this.banker);this.addChild(this.player);var btns=[this.banker,this.player];var results=[bull_fight.BullBetResultId.getResult(bull_fight.BullBetResultId.RED_BULL),bull_fight.BullBetResultId.getResult(bull_fight.BullBetResultId.BLUE_BULL)];var names=[game.GameText.red_bull.toUpperCase(),game.GameText.blue_bull.toUpperCase()];for(var i=0;i<btns.length;i++){var size=18;var posX=12;var posY=32;var dis=22;var bg=new PIXI.Graphics();bg.lineStyle(0,0,0);bg.beginFill(0xffffff);bg.drawRect(0,0,92,45);btns[i]['bg']=bg;btns[i].addChild(bg);var icon1=new bull_fight.GenPearlIcon().setData(size);icon1.setType(game.TrendType.NORMAL);icon1.draw(new game.netdata.TrendsItem().setData(results[i]));icon1.x=posX;icon1.y=posY;posX+=dis;btns[i].addChild(icon1);var icon2=new game.TrendIcon().setData(size);icon2.setType(game.TrendType.NORMAL);icon2.draw(new game.netdata.TrendsItem().setData(results[i]));icon2.x=posX;icon2.y=posY;posX+=dis;btns[i].addChild(icon2);var icon3=new game.SmallRoadIcon().setData(size);icon3.setType(game.TrendType.NORMAL);icon3.draw(new game.netdata.TrendsItem().setData(results[i]));icon3.x=posX;icon3.y=posY;posX+=dis;btns[i].addChild(icon3);var icon4=new game.CockRoachIcon().setData(size);icon4.setType(game.TrendType.NORMAL);icon4.draw(new game.netdata.TrendsItem().setData(results[i]));icon4.x=posX;icon4.y=posY;posX+=dis;btns[i].addChild(icon4);btns[i]['icon1']=icon1;btns[i]['icon2']=icon2;btns[i]['icon3']=icon3;btns[i]['icon4']=icon4;var tf=game.GameUtils.createText(names[i],{fontFamily:"dinbold",fontSize:16,fontStyle:'bold',fill:0x000000,align:'center'});tf.anchor.x=0.5;tf.x=bg.width*0.5;tf.y=0;btns[i].addChild(tf);btns[i]['tf']=tf;btns[i].buttonMode=true;component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_OVER,this.onOver,this);component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_OUT,this.onOut,this);}};GenPredict.prototype.onOver=function(e){e.target['bg'].alpha=0.8;};GenPredict.prototype.onOut=function(e){e.target['bg'].alpha=1;};;return GenPredict;}(game.Predict));bull_fight.GenPredict=GenPredict;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var GenTrendInfoPanel=(function(_super){__extends(GenTrendInfoPanel,_super);function GenTrendInfoPanel(gameModel){return _super.call(this,gameModel)||this;}
GenTrendInfoPanel.prototype.initView=function(){this.showTimoutId=0;this.cardsPosX=[25,25+30*1,25+30*2,25+30*3,25+30*4,185,185+30*1,185+30*2,185+30*3,185+30*4];this.cardPosY=6;this.bg=new PIXI.Graphics();this.bg.beginFill(0x000000);this.bg.drawRoundedRect(0,0,358,53,5);this.bg.endFill();this.bg.lineStyle(1,0xDDDDDD);this.bg.moveTo(178.4,4);this.bg.lineTo(178.4,4+41);this.addChild(this.bg);var cardsFrame=[];var arr=['A',2,3,4,5,6,7,8,9,'T','J','Q','K'];var key="";for(var c=0;c<10;c++){var card=new PIXI.Sprite();card.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;card.scale.y=card.scale.x;card.x=this.cardsPosX[c];card.y=this.cardPosY;this.addChild(card);this.cards.push(card);}
this.initIcons();};GenTrendInfoPanel.prototype.initIcons=function(){this.playerIcon=new bull_fight.GenPearlIcon();this.playerIcon.drawResult(bull_fight.BullBetResultId.getResult(bull_fight.BullBetResultId.BLUE_BULL));this.playerIcon.x=14;this.playerIcon.y=15;this.playerIcon.width=18;this.playerIcon.scale.y=this.playerIcon.scale.x;this.addChild(this.playerIcon);this.bankerIcon=new bull_fight.GenPearlIcon();this.bankerIcon.drawResult(bull_fight.BullBetResultId.getResult(bull_fight.BullBetResultId.RED_BULL));this.bankerIcon.x=345;this.bankerIcon.y=15;this.bankerIcon.width=18;this.bankerIcon.scale.y=this.bankerIcon.scale.x;this.addChild(this.bankerIcon);};GenTrendInfoPanel.prototype.setData=function(data){var cards=data.cards;this.visible=true;var arr=cards.split('#');var card;var key;var str="";for(var i=0;i<arr[1].length/2;i++){key='smallcard_'+arr[1].substr(arr[1].length-(i+1)*2,2)+".png";this.cards[i].texture=PIXI.Texture.fromFrame(key);}
for(var i=0;i<arr[0].length/2;i++){key='smallcard_'+arr[0].substr(arr[0].length-(i+1)*2,2)+".png";this.cards[i+5].texture=PIXI.Texture.fromFrame(key);}};return GenTrendInfoPanel;}(game.TrendInfoPanel));bull_fight.GenTrendInfoPanel=GenTrendInfoPanel;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var GenPearlIcon=(function(_super){__extends(GenPearlIcon,_super);function GenPearlIcon(){return _super.call(this)||this;}
GenPearlIcon.prototype.drawResult=function(result){this.clear();var win;if(result[bull_fight.BullBetResultId.RED_BULL]=='1')
win=1;if(result[bull_fight.BullBetResultId.BLUE_BULL]=='1')
win=2;if(result[bull_fight.BullBetResultId.TIE_BULL]=='1')
win=3;var iconType=iconType=win==3?"result_solid_2":(win==1?"pearl-redbull":"pearl-bull");this.createImg(iconType);};return GenPearlIcon;}(game.PearlRoadIcon));bull_fight.GenPearlIcon=GenPearlIcon;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var GenTrendIcon=(function(_super){__extends(GenTrendIcon,_super);function GenTrendIcon(){return _super.call(this)||this;}
GenTrendIcon.prototype.drawPair=function(result){};return GenTrendIcon;}(game.TrendIcon));bull_fight.GenTrendIcon=GenTrendIcon;})(bull_fight||(bull_fight={}));var bull_fight;(function(bull_fight){var TrendMng=(function(_super){__extends(TrendMng,_super);function TrendMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
TrendMng.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:var maxView=new PIXI.Rectangle(366,622,859,140);this.normalTrend.setSmallView(new PIXI.Rectangle(maxView.x,maxView.y,765,92));this.normalTrend.setMaxView(maxView);this.bigEyeTrend.setSmallView(new PIXI.Rectangle(maxView.x,716,285,46));this.bigEyeTrend.setMaxView(maxView);this.smallTrend.setSmallView(new PIXI.Rectangle(653,this.bigEyeTrend.y,285,46));this.smallTrend.setMaxView(maxView);this.cockRoachTrend.setSmallView(new PIXI.Rectangle(940,this.bigEyeTrend.y,285,46));this.cockRoachTrend.setMaxView(maxView);this.pearlRoadTrend.setSmallView(new PIXI.Rectangle(25,maxView.y,300,92));this.pearlRoadTrend.setMaxView(maxView);this.pearViewBtn.x=4;this.pearViewBtn.y=623;this.iconCount.x=25+8;this.iconCount.y=735+8;this.predict.x=1133;this.predict.y=maxView.y;this.predict.banker.x=0;this.predict.banker.y=0;this.predict.player.x=0;this.predict.player.y=47;this.bg.clear();this.bg.lineStyle(1,0x26231E);this.bg.beginFill(0x26231E);this.bg.drawRect(0,0,this.gameModel.GAME_WIDTH,151);this.bg.endFill();this.bg.y=617;this.tableBtnCon.x=328;this.tableBtnCon.y=622;this.iconCount.scale.x=1;this.iconCount.scale.y=this.iconCount.scale.x;break;case game.ViewMode.MODE_3D:break;}};TrendMng.prototype.getBigBoardName=function(){return game.GameSettings.TABLE_INFOS[this.activeTableId].hint.toUpperCase();};TrendMng.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};TrendMng.prototype.initIconCount=function(){this.iconCount=new bull_fight.GenIconCount(this.gameModel);};TrendMng.prototype.initNormmalContainer=function(){this.normalTrend=new game.TrendContainer(this.gameModel,bull_fight.GenTrendIcon,765,92,6,game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].hint.toUpperCase(),true);};TrendMng.prototype.initPearlRoad=function(){this.pearlRoadTrend=new game.PearlRoad(this.gameModel,bull_fight.GenPearlIcon,300,92,6,game.GameText.PEARL_ROAD.toUpperCase(),true);};TrendMng.prototype.initPredict=function(){this.predict=new bull_fight.GenPredict(this.gameModel);this.predictBankerObj=new game.netdata.TrendsItem().setData(bull_fight.BullBetResultId.getResult(bull_fight.BullBetResultId.RED_BULL));this.predictPlayerObj=new game.netdata.TrendsItem().setData(bull_fight.BullBetResultId.getResult(bull_fight.BullBetResultId.BLUE_BULL));};TrendMng.prototype.initView=function(){this.pearlViewlTypes=[game.TrendType.NORMAL];_super.prototype.initView.call(this);};TrendMng.prototype.initTrendInfoPanel=function(){this.trendInfoPanel=new bull_fight.GenTrendInfoPanel(this.gameModel);};TrendMng.prototype.onTableBtn=function(e){};TrendMng.prototype.superOnTableBtn=function(e){_super.prototype.onTableBtn.call(this,e);};TrendMng.prototype.initTableBtns=function(){this.setActiveTableId(this.gameModel.TABLE_ID);};return TrendMng;}(game.BaseTrendMng));bull_fight.TrendMng=TrendMng;})(bull_fight||(bull_fight={}));var sicbo;(function(sicbo){var Game=(function(_super){__extends(Game,_super);function Game(){return _super.call(this)||this;}
Game.prototype.initialize=function(tableId,resources){this.resetGameResultDelay=1500;this.gameModel.GAME_ID=game.GameID.SICBO;_super.prototype.initialize.call(this,tableId,resources);var str="10201 A1,10202 A2,10214 A3,10215 A4,10206 B4,10207 B5,10208 B6,10209 B7,10210 B8,10211 B9,10211 B10,10211 B11,10211 B12,10210 B13,10209 B14,10208 B15,10207 B16,10206 B17,10213 C1,10213 C2,10213 C3,10213 C4,10213 C5,10213 C6,10204 D1,10204 D2,10204 D3,10204 D4,10204 D5,10204 D6,10205 E1,10203 F1,10203 F2,10203 F3,10203 F4,10203 F5,10203 F6,10212 G1,10212 G2,10212 G3,10212 G4,10212 G5,10212 G6,10212 G7,10212 G8,10212 G9,10212 G10,10212 G11,10212 G12,10212 G13,10212 G14,10212 G15";var arr=str.split(',');var betLimitIdMap={};for(var i=0;i<arr.length;i++){var arr2=arr[i].split(' ');betLimitIdMap[arr2[1]]=arr2[0];}
this.gameModel.betLimitIdMap=betLimitIdMap;return this;};Game.prototype.onBetCountDownComplete=function(){_super.prototype.onBetCountDownComplete.call(this);this.gameView.showStatus(game.GameText.WAIT_DICE_TO_ROLL);};Game.prototype.onCurrentBets=function(data){if(data.content.value.length==0)
return;this.gameView.betArea.updateBet(data,true);this.gameView.gameHUD.gameInfoCon.betInfo.confirmedTf.text=component.VComponentUtils.getNumInFormat(this.gameView.betArea.getConfirmedAmount(),1);};Game.prototype.startGame=function(){_super.prototype.startGame.call(this);};Game.prototype.initView=function(){this.gameView=new sicbo.GameView(this.gameModel);this.addChild(this.gameView);};Game.prototype.onAuthSuccess=function(){_super.prototype.onAuthSuccess.call(this);};Game.prototype.onWSOpenHdl=function(){_super.prototype.onWSOpenHdl.call(this);};Game.prototype.onWSCloseHdl=function(){_super.prototype.onWSCloseHdl.call(this);};Game.prototype.onGameEvent=function(e){_super.prototype.onGameEvent.call(this,e);};return Game;}(game.BaseGame));sicbo.Game=Game;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var BetArea=(function(_super){__extends(BetArea,_super);function BetArea(gameModel,input){return _super.call(this,gameModel,input)||this;}
BetArea.prototype.initSettings=function(){_super.prototype.initSettings.call(this);this.nameArr=[];for(var i=1;i<=6;i++)
for(var j=i+1;j<=6;j++)
this.nameArr.push(i+","+j);this.initLiveChipSettings();this.initBetSettings();};BetArea.prototype.initLiveChipSettings=function(){var settings={};settings['A2']={totalPos:new PIXI.Point(181.05,354.8),arr:[new PIXI.Point(140.1,390.4),new PIXI.Point(154.6,385.9),new PIXI.Point(142.85,376.45),new PIXI.Point(158,373.7),new PIXI.Point(168.95,379.7)]};settings['A4']={totalPos:new PIXI.Point(880.44,362.8),arr:[new PIXI.Point(933.8,390.05),new PIXI.Point(948.55,395.05),new PIXI.Point(944.55,381.35),new PIXI.Point(920.9,383.5),new PIXI.Point(930.9,377.85)]};settings['A3']={totalPos:new PIXI.Point(342.4,357.597),arr:[new PIXI.Point(311.25,388.847),new PIXI.Point(327.25,392.347),new PIXI.Point(318,382.15),new PIXI.Point(332.35,380.9),new PIXI.Point(342,387.347)]};settings['A1']={totalPos:new PIXI.Point(1056.45,357.8),arr:[new PIXI.Point(1109.8,385.05),new PIXI.Point(1124.55,390.05),new PIXI.Point(1120.55,376.35),new PIXI.Point(1096.89,378.5),new PIXI.Point(1106.89,372.85)]};this.liveChip2DSetting=settings;};BetArea.prototype.initBetSettings=function(){var settings=[{id:"A2",x:105.25,y:373.3},{id:"A3",x:234.75,y:379.75},{id:"F1",x:350.3,y:410.6},{id:"F2",x:397.6,y:411.95},{id:"F3",x:444.8,y:413.05},{id:"F4",x:777.9,y:413.05},{id:"F5",x:822.9,y:411.95},{id:"F6",x:867.9,y:410.6},{id:"D1",x:512.6,y:414.15},{id:"D2",x:510.15,y:433.75},{id:"D3",x:507.65,y:453.3},{id:"D4",x:695.05,y:414.15},{id:"D5",x:696.25,y:433.75},{id:"D6",x:697.4,y:453.3},{id:"A4",x:914.5,y:379.75},{id:"A1",x:1015.4,y:373.3},{id:"E1",x:589,y:415.95},{id:"B4",x:102.95,y:467},{id:"B5",x:180.05,y:471.15},{id:"B6",x:257.2,y:474.6},{id:"B7",x:334.35,y:477.4},{id:"B8",x:411.45,y:479.6},{id:"B9",x:488.6,y:481.1},{id:"B10",x:565.7,y:481.95},{id:"B11",x:642.6,y:481.95},{id:"B12",x:715.65,y:481.1},{id:"B13",x:788.65,y:479.6},{id:"B14",x:861.65,y:477.4},{id:"B15",x:934.6,y:474.6},{id:"B16",x:1007.5,y:471.15},{id:"B17",x:1080.3,y:467},{id:"G1",x:185.3,y:562.45},{id:"G2",x:246.3,y:565.4},{id:"G3",x:307.3,y:567.95},{id:"G4",x:368.3,y:570.05},{id:"G5",x:429.3,y:571.7},{id:"G6",x:490.3,y:572.9},{id:"G7",x:551.3,y:573.7},{id:"G8",x:613.65,y:574.05},{id:"G9",x:671.6,y:573.7},{id:"G10",x:729.45,y:572.9},{id:"G11",x:787.25,y:571.7},{id:"G12",x:845.1,y:570.05},{id:"G13",x:902.85,y:567.95},{id:"G14",x:960.65,y:565.4},{id:"G15",x:1018.4,y:562.45},{id:"C1",x:259.1,y:656.4},{id:"C2",x:386.7,y:662.7},{id:"C3",x:514.4,y:666.4},{id:"C4",x:642,y:666.4},{id:"C5",x:767,y:662.7},{id:"C6",x:891.9,y:656.4}];for(var i=0;i<settings.length;i++){settings[i].id=settings[i].id;settings[i].url="SIC_"+settings[i].id+".png";}
this.bet2DSetting=settings;};BetArea.prototype.initHighLight=function(){_super.prototype.initHighLight.call(this);var hit;for(var i=0;i<this.hitArr.length;i++){hit=this.hitArr[i];hit["winHL"].x-=2;hit["winHL"].y-=2;}};BetArea.prototype.getBetTypeFromId=function(id){return id;};BetArea.prototype.initChipCon=function(){_super.prototype.initChipCon.call(this);var betPlace;for(var i in this.betPlaceMap){betPlace=this.betPlaceMap[i];betPlace.scale.x="D1D2D3D4D5D6".indexOf(betPlace.betHit.betType)>=0?0.65:0.85;betPlace.scale.y=betPlace.scale.x;}};BetArea.prototype.getAmounts=function(){var arr=[];var val=0;for(var i=0,l=this.betPlaceArr.length;i<l;i++){if(this.betPlaceArr[i].seatId>0&&this.betPlaceArr[i].seatId!=this.seatId)
continue;var betType=this.betPlaceArr[i].betHit.betType;val=this.betPlaceArr[i].getAmount()-this.betPlaceArr[i].getConfirmedAmount();if(val==0)
continue;arr.push(val);}
return arr;};BetArea.prototype.initJson=function(){var url=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?"assets/sicbo/2d/bet_area.json":(game.GlobalVals.viewMode==game.ViewMode.MODE_3D?"assets/sicbo/3d/bet_area.json":"assets/sicbo/7s/bet_area.json");this.updateJson(url);};BetArea.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:this.liveChip3DSetting;_super.prototype.initLiveChip.call(this,vSetting);};BetArea.prototype.initBetCon=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.initBetCon.call(this,vSetting);};BetArea.prototype.updateText=function(){var viewMode=game.GlobalVals.viewMode;var betAreaText=this.betAreaText;betAreaText.texture=this.gameModel.resources[(viewMode!=game.ViewMode.MODE_2D?viewMode+"_":"")+'bet_area_text_'+game.GameUtils.getColor(this.gameModel.TABLE_ID)].texture;betAreaText.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;betAreaText.scale.y=betAreaText.scale.x;switch(viewMode){case game.ViewMode.MODE_2D:betAreaText.x=102;betAreaText.y=373;break;case game.ViewMode.MODE_3D:break;}};BetArea.prototype.changeView=function(){var viewMode=game.GlobalVals.viewMode;var url=viewMode==game.ViewMode.MODE_2D?"assets/sicbo/2d/bet_area.json":(viewMode==game.ViewMode.MODE_3D?"assets/sicbo/3d/bet_area.json":"assets/sicbo/7s/bet_area.json");this.updateJson(url);var vSetting=viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.updateBetConSettings.call(this,vSetting);vSetting=viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:this.liveChip3DSetting;this.liveChipMng.updateView(vSetting);this.updateText();_super.prototype.changeView.call(this);};BetArea.prototype.getBetName=function(betType){var gameName="SicBo_";if(betType.charAt(0)=="B")
return game.GameText.SicBo_B.replace('{0}',betType.substr(1,betType.length-1));if(betType.charAt(0)=="C")
return game.GameText.SicBo_C+' '+betType.substr(1,betType.length-1);if(betType.charAt(0)=="D"){var n=betType.substr(1,betType.length-1);return game.GameText.SicBo_D+' '+n+','+n+','+n;}
if(betType.charAt(0)=="F"){var n=betType.substr(1,betType.length-1);return game.GameText.SicBo_F+' '+n+','+n;}
if(betType.charAt(0)=="G"){var n=betType.substr(1,betType.length-1);return game.GameText.SicBo_G.replace('{0}',this.nameArr[parseInt(n)-1]);}
return game.GameText[gameName+betType];};BetArea.prototype.getBetPlaceWithType=function(betType,seatId){if(seatId===void 0){seatId=0;}
return this.betPlaceMap[betType];};BetArea.prototype.showResult=function(data){var arr=data.content.cards.split("");arr.sort();var num=parseInt(arr[0])+parseInt(arr[1])+parseInt(arr[2]);this.hideHighlight();var betPlace;var hit;if(arr[0]==arr[1]&&arr[1]==arr[2]){this.betMap["E1"].winHL.visible=true;this.betMap["D"+arr[0]].winHL.visible=true;}
else{if(num>10)
this.betMap["A1"].winHL.visible=true;else
this.betMap["A2"].winHL.visible=true;if(num%2==0)
this.betMap["A4"].winHL.visible=true;else
this.betMap["A3"].winHL.visible=true;}
if(arr[0]==arr[1]||arr[1]==arr[2]){this.betMap["F"+arr[1]].winHL.visible=true;}
if(this.betMap["B"+num])
this.betMap["B"+num].winHL.visible=true;var str=arr[0]+','+arr[1]+","+arr[2];for(var i=1;i<=6;i++){if(str.indexOf(i.toString())>=0)
this.betMap["C"+i].winHL.visible=true;}
str=arr[0]+','+arr[1]+','+arr[2]+';'+arr[0]+','+arr[2];for(var i=0;i<this.nameArr.length;i++){if(str.indexOf(this.nameArr[i])>=0)
this.betMap["G"+(i+1)].winHL.visible=true;}};return BetArea;}(game.BaseBetArea));sicbo.BetArea=BetArea;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var ChipControl=(function(_super){__extends(ChipControl,_super);function ChipControl(gameModel){return _super.call(this,gameModel)||this;}
ChipControl.prototype.initChipPos=function(){this.updateChipPos(null);};ChipControl.prototype.initChips=function(schips,shownRange){_super.prototype.initChips.call(this,schips,shownRange);this.updateLeftRight();};ChipControl.prototype.updateLeftRight=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:case game.ViewMode.MODE_7S:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y-7;this.rightArrow.rotation=-10*Math.PI/180;break;case game.ViewMode.MODE_3D:break;}};ChipControl.prototype.updateChipPos=function(chipsPos){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:case game.ViewMode.MODE_7S:this.chipsPos=[new PIXI.Point(-52.35,1.85),new PIXI.Point(0.05,0.65),new PIXI.Point(51.05,-1.55),new PIXI.Point(102.15,-5.2),new PIXI.Point(154.85,-10.95),new PIXI.Point(207.4,-19.4),new PIXI.Point(257.55,-28.45),new PIXI.Point(305.95,-38.85)];break;case game.ViewMode.MODE_3D:break;}
_super.prototype.updateChipPos.call(this,this.chipsPos);};ChipControl.prototype.changeView=function(){this.updateChipPos(null);this.updateLeftRight();this.drawMasker();_super.prototype.changeView.call(this);};return ChipControl;}(game.BaseChipControl));sicbo.ChipControl=ChipControl;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var GameHUD=(function(_super){__extends(GameHUD,_super);function GameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameHUD.prototype.initView=function(){_super.prototype.initView.call(this);this.settingCon=new game.SettingContainer(this.gameModel);this.settingCon.saveBetBtn.visible=true;this.settingCon.saveBetBtn.x=this.settingCon.btn7s.x;this.settingCon.x=0;this.settingCon.y=581;this.addChild(this.settingCon);this.gameInfoCon=new sicbo.GameInfoCon(this.gameModel);this.addChild(this.gameInfoCon);};GameHUD.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:case game.ViewMode.MODE_7S:this.settingCon.x=12;this.settingCon.y=730;this.gameInfoCon.expand();this.gameInfoCon.resizeBtn.visible=false;break;case game.ViewMode.MODE_3D:break;}};GameHUD.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameHUD;}(game.BaseGameHUD));sicbo.GameHUD=GameHUD;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var GenGameDetailCon=(function(_super){__extends(GenGameDetailCon,_super);function GenGameDetailCon(gameModel){var _this=_super.call(this,gameModel)||this;_this.initView();return _this;}
GenGameDetailCon.prototype.destructor=function(){_super.prototype.destructor.call(this);};GenGameDetailCon.prototype.initView=function(){this.viewW=379;this.viewH=157;this.contentY=27;var w=this.viewW;var h=this.viewH;var contentY=this.contentY;var limitBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('limit_icon0001.png'),PIXI.Texture.fromFrame('limit_icon0002.png')]);var livePoolBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('livepool_icon0001.png'),PIXI.Texture.fromFrame('livepool_icon0002.png')]);var resultBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('info_game_result_icon0001.png'),PIXI.Texture.fromFrame('info_game_result_icon0002.png')]);game.GameUtils.resizeNodeH(limitBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(livePoolBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(resultBtn,game.StyleMng.INFO_TAB_BTN_SIZE);this.gameModel.toolTip.addToolTip(limitBtn,game.GameText.LIMITS);this.gameModel.toolTip.addToolTip(livePoolBtn,game.GameText.LIVE_POOL);this.gameModel.toolTip.addToolTip(resultBtn,game.GameText.RESULTS);var btns=[limitBtn,livePoolBtn,resultBtn];for(var i=0;i<btns.length;i++){this.addChild(btns[i]);btns[i].buttonMode=true;btns[i].gotoAndStop(1);btns[i].x=(btns[i].width+1)*i;}
this.limitDetail=new sicbo.GenLimitDetail(this.gameModel,w,h);this.limitDetail.y=contentY;this.addChild(this.limitDetail);this.infoTrendDetail=new sicbo.InfoTrendDetail(this.gameModel,w,h);this.infoTrendDetail.y=contentY;this.addChild(this.infoTrendDetail);this.livePoolDetail=new sicbo.GenLivePoolDetail(this.gameModel,w,h);this.livePoolDetail.y=contentY;this.addChild(this.livePoolDetail);var contents=[this.limitDetail,this.livePoolDetail,this.infoTrendDetail,];var tabMng=new component.VTabMng();tabMng.initialize(btns,contents);this.tabMng=tabMng;var expandBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_expand0001.png'),PIXI.Texture.fromFrame('info_pane_expand0002.png')],this.onExpand.bind(this));expandBtn.x=this.viewW-expandBtn.width;var conllapseBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_collapse0001.png'),PIXI.Texture.fromFrame('info_pane_collapse0002.png')],this.onCollapse.bind(this));conllapseBtn.x=this.viewW-conllapseBtn.width;var resizeBtn=new component.VToggleButton(expandBtn,conllapseBtn);this.addChild(resizeBtn);resizeBtn.y=this.contentY+this.viewH-resizeBtn.height;this.resizeBtn=resizeBtn;};GenGameDetailCon.prototype.onExpand=function(){var addedSize=40;this.limitDetail.resize(this.viewW,this.viewH+addedSize);this.infoTrendDetail.resize(this.viewW,this.viewH+addedSize);this.livePoolDetail.resize(this.viewW,this.viewH+addedSize);this.resizeBtn.y=this.contentY+this.viewH-this.resizeBtn.height+addedSize;};GenGameDetailCon.prototype.onCollapse=function(){this.limitDetail.resize(this.viewW,this.viewH);this.infoTrendDetail.resize(this.viewW,this.viewH);this.livePoolDetail.resize(this.viewW,this.viewH);this.resizeBtn.y=this.contentY+this.viewH-this.resizeBtn.height;};GenGameDetailCon.prototype.updateTrends=function(table){this.infoTrendDetail.updateTrends(table);};return GenGameDetailCon;}(game.GameObject));sicbo.GenGameDetailCon=GenGameDetailCon;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var GenLimitDetail=(function(_super){__extends(GenLimitDetail,_super);function GenLimitDetail(gameModel,viewW,viewH){return _super.call(this,gameModel,viewW,viewH)||this;}
GenLimitDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLimitDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.MIN_PER_BET,game.GameText.MAX_BET_PER_BET_TYPE+': ',game.GameText.BIG+' / '+game.GameText.SMALL,game.GameText.EVEN+' / '+game.GameText.ODD,game.GameText.SINGLE_DICE,game.GameText.TWO_DICE_COMBINATION,"4 "+game.GameText.OR+" 17","5 "+game.GameText.OR+" 16","6 "+game.GameText.OR+" 15","7 "+game.GameText.OR+" 14","8 "+game.GameText.OR+" 13","9, 10, 11 "+game.GameText.OR+" 12",game.GameText.SicBo_E1,game.GameText.SicBo_F,game.GameText.SicBo_D];this.ids=[0,1,10201,10214,10213,10212,10206,10207,10208,10209,10210,10211,10205,10203,10204];var posX=12;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;for(var i=0;i<texts.length;i++){tf=game.GameUtils.createText(texts[i],style);tf.x=posX;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this['tf_'+this.ids[i]]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};GenLimitDetail.prototype.setData=function(data){var min=0;for(var i=0;i<data.content.length;i++){var item=data.content[i];if(min==0)
min=item.min;if(min>item.min)
min=item.min;if(this['tf_'+item.code])
this['tf_'+item.code].text=component.VComponentUtils.getNumInFormat(item.max);}
this['tf_0'].text=component.VComponentUtils.getNumInFormat(min);};return GenLimitDetail;}(game.BaseGameDetail));sicbo.GenLimitDetail=GenLimitDetail;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var GenLivePoolDetail=(function(_super){__extends(GenLivePoolDetail,_super);function GenLivePoolDetail(gameModel,viewW,viewH){return _super.call(this,gameModel,viewW,viewH)||this;}
GenLivePoolDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLivePoolDetail.prototype.initContent=function(){this.items=[];this.tfMap={};this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var posX=5;var posY=5;var dis=15;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;var icon;var item;var betTypes=["A2","A3","C1","C2","C3","A1","A4","C4","C5","C6"];var diceNames=['s','o','1','2','3','b','e','4','5','6'];this.maxItem=betTypes.length;for(var i=0;i<this.maxItem;i++){item=new PIXI.Graphics();content.addChild(item);tf=game.GameUtils.createText('',style);tf.x=100;tf.y=5;tf.anchor.x=0.5;item.addChild(tf);item['tf']=tf;icon=new PIXI.Sprite(PIXI.Texture.fromFrame("sic_live_dice_"+diceNames[i]+".png"));item.addChild(icon);icon.x=10;icon.y=2;icon.scale.x=0.3;icon.scale.y=0.3;item['icon']=icon;item.lineStyle(1,0xcdcdcd);item.moveTo(10,25);item.lineTo(160,25);item.lineStyle(2,0xcdcdcd);item.drawRoundedRect(icon.x,icon.y,icon.width,icon.height,2);item.x=posX;item.y=posY;posY+=tf.height+dis;if(i==this.maxItem/2-1){posX=190;posY=5;}
this.tfMap[betTypes[i]]=tf;this.items.push(item);}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();};GenLivePoolDetail.prototype.clearData=function(){for(var i in this.tfMap)
this.tfMap[i].text='0';};GenLivePoolDetail.prototype.setData=function(data){this.clearData();for(var i=0;i<data.content.cat.length;i++){if(this.tfMap[data.content.cat[i]])
this.tfMap[data.content.cat[i]].text=component.VComponentUtils.getNumInFormat(data.content.amount[i],0);}};return GenLivePoolDetail;}(game.LivePoolDetail));sicbo.GenLivePoolDetail=GenLivePoolDetail;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var InfoTrendDetail=(function(_super){__extends(InfoTrendDetail,_super);function InfoTrendDetail(gameModel,viewW,viewH){return _super.call(this,gameModel,viewW,viewH)||this;}
InfoTrendDetail.prototype.initView=function(){_super.prototype.initView.call(this);};InfoTrendDetail.prototype.initContent=function(){this.items=[];this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var posX=5;var posY=5;var dis=15;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;var icon;var item;this.maxItem=20;var w=PIXI.Texture.fromFrame("sic_live_dice_1.png").frame.width;var h=PIXI.Texture.fromFrame("sic_live_dice_1.png").frame.height;for(var i=0;i<this.maxItem;i++){item=new PIXI.Graphics();content.addChild(item);for(var j=0;j<3;j++){tf=game.GameUtils.createText('',style);tf.x=140+70*j;tf.y=5;tf.anchor.x=0.5;item.addChild(tf);item['tf'+j]=tf;icon=new PIXI.Sprite();item.addChild(icon);icon.x=10+27*j;icon.y=2;icon.scale.x=0.3;icon.scale.y=icon.scale.x;item['icon'+j]=icon;item.lineStyle(2,0xcdcdcd);item.drawRoundedRect(icon.x,icon.y,w*icon.scale.x,h*icon.scale.y,2);}
item.lineStyle(1,0xcdcdcd);item.moveTo(10,25);item.lineTo(320,25);item.x=posX;item.y=posY;posY+=tf.height+dis;this.items.push(item);}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();};InfoTrendDetail.prototype.updateTrends=function(tableId){if(tableId!=this.gameModel.TABLE_ID)
return;var values=game.GlobalVals.trendDataMap[this.gameModel.TABLE_ID].trendHis100Arr;for(var i=0;i<this.maxItem;i++)
this.items[i].visible=false;for(var i=0,l=Math.min(values.length,this.maxItem);i<l;i++){var info=values[values.length-1-i];var arr=info.cards.split("");var num=parseInt(arr[0])+parseInt(arr[1])+parseInt(arr[2]);this.items[i].visible=true;this.items[i]['icon0'].texture=PIXI.Texture.fromFrame("sic_live_dice_"+arr[0]+".png");this.items[i]['icon1'].texture=PIXI.Texture.fromFrame("sic_live_dice_"+arr[1]+".png");this.items[i]['icon2'].texture=PIXI.Texture.fromFrame("sic_live_dice_"+arr[2]+".png");if(arr[0]==arr[1]&&arr[1]==arr[2]){this.items[i]['tf0'].text=num.toString();this.items[i]['tf0'].style.fill=game.TrendIconUtils.GREEN;for(var j=1;j<3;j++){this.items[i]['tf'+j].style.fill=game.TrendIconUtils.GREEN;this.items[i]['tf'+j].text=game.GameText.TRIPLE;}
continue;}
this.items[i]['tf0'].text=num.toString();this.items[i]['tf0'].style.fill=num>10?game.TrendIconUtils.RED:game.TrendIconUtils.BLUE;this.items[i]['tf1'].text=num>10?game.GameText.BIG:game.GameText.SMALL;this.items[i]['tf1'].style.fill=num>10?game.TrendIconUtils.RED:game.TrendIconUtils.BLUE;this.items[i]['tf2'].text=num%2==0?game.GameText.EVEN:game.GameText.ODD;this.items[i]['tf2'].style.fill=0x000000;}};return InfoTrendDetail;}(game.BaseGameDetail));sicbo.InfoTrendDetail=InfoTrendDetail;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var GameInfoCon=(function(_super){__extends(GameInfoCon,_super);function GameInfoCon(gameModel){return _super.call(this,gameModel)||this;}
GameInfoCon.prototype.initGameDetailCon=function(){this.gameDetailCon=new sicbo.GenGameDetailCon(this.gameModel);this.addChild(this.gameDetailCon);this.gameDetailCon.y=90;};return GameInfoCon;}(game.BaseGameInfoCon));sicbo.GameInfoCon=GameInfoCon;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var GameResult=(function(_super){__extends(GameResult,_super);function GameResult(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameResult.prototype.initialize=function(){var numCon=new PIXI.Container();numCon.x=0;numCon.y=90;this.numCon=numCon;this.gameModel.overlay.addChildAt(numCon,0);var bg=new PIXI.Graphics();bg.beginFill(0x000000,0.8);bg.drawRect(0,0,377,190);numCon.addChild(bg);var icon=new sicbo.GenTrendInfoPanel(this.gameModel);numCon.addChild(icon);this.icon=icon;icon.scale.x=1.4;icon.scale.y=icon.scale.x;icon.x=(bg.width-icon.width)*0.5;icon.y=(bg.height-icon.height)*0.5-25;this.numTf=game.GameUtils.createNormalText("",40);this.numTf.anchor.x=0.5;this.numTf.anchor.y=0.5;this.numTf.x=bg.width*0.5;this.numTf.y=bg.height*0.5+40;numCon.addChild(this.numTf);this.numCon.visible=false;this.dices=new game.MultiDicesAnim(this.gameModel);this.dices.x=300;this.dices.y=200;this.addChild(this.dices);this.dices.visible=false;};GameResult.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:break;case game.ViewMode.MODE_3D:break;}};GameResult.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};GameResult.prototype.showResult=function(data){this.numCon.visible=true;this.icon.setData(data.content);this.dices.visible=true;this.dices.showDices(data.content.cards);var arr=data.content.cards.split('');var num=parseInt(arr[0])+parseInt(arr[1])+parseInt(arr[2]);this.numTf.text=num.toString();if(arr[0]==arr[1]&&arr[1]==arr[2]){this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_triple"+arr[0]);}
else{this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_point"+arr[0]);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_point"+arr[1]);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_point"+arr[2]);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,num>10?game.SoundMng.BIG:game.SoundMng.SMALL);}};GameResult.prototype.reset=function(){this.numCon.visible=false;this.dices.visible=false;};return GameResult;}(game.BaseGameResult));sicbo.GameResult=GameResult;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.initialize=function(){_super.prototype.initialize.call(this);this.vodBg=new PIXI.Graphics();this.vodBg.beginFill(0x000000);this.vodBg.drawRect(0,0,512,309);this.vodBg.x=this.gameModel.VOD_X;this.vodBg.y=this.gameModel.VOD_Y;this.vodBg.endFill();this.chipControl=new sicbo.ChipControl(this.gameModel);this.chipControl.dissable();this.gameModel.chipControl=this.chipControl;this.betArea=new sicbo.BetArea(this.gameModel,this.betInput);this.betArea.dissable();this.addChild(this.betArea);this.trendMng=new sicbo.TrendMng(this.gameModel);this.trendMng.visible=false;this.overlay.addChildAt(this.trendMng,this.overlay.children.length-2);this.overlay.setChildIndex(this.trendMng.trendInfoPanel,this.overlay.children.length-1);this.betControl=new game.BetControl(this.gameModel);this.betControl.x=477;this.betControl.y=580;this.betControl.hide();this.addChild(this.betControl);this.addChild(this.chipControl);_super.prototype.initCountDown.call(this);this.countdown.x=640;this.countdown.y=383;this.tipCon.x=120;this.tipCon.y=712;this.gameResult=(new sicbo.GameResult(this.gameModel));this.addChild(this.gameResult);this.gameHUD=new sicbo.GameHUD(this.gameModel);this.addChild(this.gameHUD);this.updateView();};GameView.prototype.activeSuperHand=function(isSupper){if(this.bonusBg)
this.bonusBg.gotoAndStop(isSupper?1:0);};GameView.prototype.updateVodView=function(){if(!this.vodInited)
return;var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.gameModel.VOD_WIDTH=511;this.gameModel.VOD_HEIGHT=311;this.gameModel.VOD_X=386;this.gameModel.VOD_Y=3;this.processVodLoadMediaData();break;case game.ViewMode.MODE_3D:break;}
this.sizeHandler();};GameView.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;this.updateVodView();switch(viewMode){case game.ViewMode.MODE_2D:this.chipControl.x=915.95;this.chipControl.y=741;this.betControl.x=483;this.betControl.y=730;this.betArea.collectWinPos.x=115;this.betArea.collectWinPos.y=722;this.betInput.x=507;this.betInput.y=732;this.countdown.scale.x=0.9;this.countdown.scale.y=0.9;this.countdown.y=375;break;case game.ViewMode.MODE_3D:break;}};GameView.prototype.changeView=function(){this.updateView();this.gameResult.changeView();_super.prototype.changeView.call(this);};GameView.prototype.confirmBet=function(){if(this.betArea.getTotalBet()<this.gameModel.betSettings["10201"].min){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.MIN_BET_PER_HAND_ALERT.replace('{0}',this.gameModel.betSettings["10201"].min));return false;}
return _super.prototype.confirmBet.call(this);};return GameView;}(game.BaseGameView));sicbo.GameView=GameView;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var GenIconCount=(function(_super){__extends(GenIconCount,_super);function GenIconCount(gameModel){return _super.call(this,gameModel)||this;}
GenIconCount.prototype.destructor=function(){this.tfs=[];this.icons=[];_super.prototype.destructor.call(this);};GenIconCount.prototype.initialize=function(){this.tfs=[];this.icons=[];var results=[];results.push([sicbo.ResultType.getResult(sicbo.ResultType.BIG),game.TrendType.BIG_SMALL]);results.push([sicbo.ResultType.getResult(sicbo.ResultType.SMALL),game.TrendType.BIG_SMALL]);results.push([sicbo.ResultType.getResult(sicbo.ResultType.EVEN),game.TrendType.EVEN_ODD]);results.push([sicbo.ResultType.getResult(sicbo.ResultType.ODD),game.TrendType.EVEN_ODD]);var dis=20;var posX=0;var icon;for(var i=0;i<results.length;i++){icon=new sicbo.GenPearlRoadIcon().setData(16);icon.x=posX;posX+=dis;icon.setType(results[i][1]);icon.draw(new game.netdata.TrendsItem().setData(results[i][0]));var tf=game.GameUtils.createText('0',{fontFamily:"Arial",fontSize:12,fill:0xffffff,align:'center'});tf.anchor.x=0.5;tf.x=icon.x;tf.y=icon.y+8;this.tfs[i]=tf;this.icons[i]=icon;this.addChild(icon);this.addChild(tf);}
this.clear();};GenIconCount.prototype.clear=function(){for(var i=0;i<this.tfs.length;i++){this.tfs[i].text='0';}};GenIconCount.prototype.addTrend=function(item,isAnim){if(isAnim===void 0){isAnim=false;}
var ind=-1;if(item.result.charAt(sicbo.ResultType.BIG)=='1')
ind=0;if(item.result.charAt(sicbo.ResultType.SMALL)=='1')
ind=1;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(sicbo.ResultType.EVEN)=='1')
ind=2;if(item.result.charAt(sicbo.ResultType.ODD)=='1')
ind=3;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}};GenIconCount.prototype.updateTrends=function(values){for(var i=0;i<values.length;i++)
this.addTrend(values[i]);};return GenIconCount;}(game.IconCount));sicbo.GenIconCount=GenIconCount;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var GenPearlRoad=(function(_super){__extends(GenPearlRoad,_super);function GenPearlRoad(gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem){if(name===void 0){name="";}
if(isHoverIcon===void 0){isHoverIcon=false;}
if(minItem===void 0){minItem=250;}
if(maxItem===void 0){maxItem=300;}
var _this=_super.call(this,gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem)||this;_this.type=game.TrendType.BIG_SMALL;_this.underlay.alpha=0.6;return _this;}
return GenPearlRoad;}(game.PearlRoad));sicbo.GenPearlRoad=GenPearlRoad;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var GenPredict=(function(_super){__extends(GenPredict,_super);function GenPredict(gameModel){return _super.call(this,gameModel)||this;}
GenPredict.prototype.destructor=function(){_super.prototype.destructor.call(this);};GenPredict.prototype.initialize=function(){this.banker=new PIXI.Container();this.player=new PIXI.Container();this.gameModel.toolTip.addToolTip(this.banker,game.GameText.PREDICT.replace('{0}',game.GameText.BIG));this.gameModel.toolTip.addToolTip(this.player,game.GameText.PREDICT.replace('{0}',game.GameText.SMALL));this.player.y=45+2;this.addChild(this.banker);this.addChild(this.player);var btns=[this.banker,this.player];var results=['1000000','0100000'];var names=[game.GameText.BIG.toUpperCase(),game.GameText.SMALL.toUpperCase()];for(var i=0;i<btns.length;i++){var size=18;var posX=12;var posY=32;var dis=22;var bg=new PIXI.Graphics();bg.lineStyle(0,0,0);bg.beginFill(0xffffff);bg.drawRect(0,0,92,45);btns[i]['bg']=bg;btns[i].addChild(bg);var icon1=new sicbo.GenPearlRoadIcon().setData(size);icon1.setType(game.TrendType.BIG_SMALL);icon1.draw(new game.netdata.TrendsItem().setData(results[i]));icon1.x=posX;icon1.y=posY;posX+=dis;btns[i].addChild(icon1);var icon2=new sicbo.GenTrendIcon().setData(size);icon2.setType(game.TrendType.BIG_SMALL);icon2.draw(new game.netdata.TrendsItem().setData(results[i]));icon2.x=posX;icon2.y=posY;posX+=dis;btns[i].addChild(icon2);var icon3=new sicbo.GenSmallRoadIcon().setData(size);icon3.setType(game.TrendType.BIG_SMALL);icon3.draw(new game.netdata.TrendsItem().setData(results[i]));icon3.x=posX;icon3.y=posY;posX+=dis;btns[i].addChild(icon3);var icon4=new sicbo.GenCockRoachIcon().setData(size);icon4.setType(game.TrendType.BIG_SMALL);icon4.draw(new game.netdata.TrendsItem().setData(results[i]));icon4.x=posX;icon4.y=posY;posX+=dis;btns[i].addChild(icon4);btns[i]['icon1']=icon1;btns[i]['icon2']=icon2;btns[i]['icon3']=icon3;btns[i]['icon4']=icon4;var tf=game.GameUtils.createText(names[i],{fontFamily:"dinbold",fontSize:16,fontStyle:'bold',fill:0x000000,align:'center'});tf.anchor.x=0.5;tf.x=bg.width*0.5;tf.y=0;btns[i].addChild(tf);btns[i]['tf']=tf;btns[i].buttonMode=true;component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_OVER,this.onOver,this);component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_OUT,this.onOut,this);}};GenPredict.prototype.onOver=function(e){e.target['bg'].alpha=0.8;};GenPredict.prototype.onOut=function(e){e.target['bg'].alpha=1;};;return GenPredict;}(game.Predict));sicbo.GenPredict=GenPredict;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var GenTrendInfoPanel=(function(_super){__extends(GenTrendInfoPanel,_super);function GenTrendInfoPanel(gameModel){return _super.call(this,gameModel)||this;}
GenTrendInfoPanel.prototype.initView=function(){this.diceSize=40;this.dices=[];this.bg=new PIXI.Graphics();this.addChild(this.bg);this.bg.beginFill(0x222222);this.bg.drawRoundedRect(0,0,this.diceSize*3+4+4,this.diceSize+4,3);this.bg.endFill();for(var i=0;i<3;i++){var dice=new PIXI.Sprite();this.addChild(dice);this.dices.push(dice);dice.x=2+i*(this.diceSize+2);dice.y=2;}};GenTrendInfoPanel.prototype.setData=function(data){var cards=data.cards;this.visible=true;var nums=cards.split("");for(var i=0;i<nums.length;i++){this.dices[i].texture=PIXI.Texture.fromFrame('sic_live_dice_'+nums[i]+'.png');this.dices[i].width=this.diceSize;this.dices[i].scale.y=this.dices[i].scale.x;}};return GenTrendInfoPanel;}(game.TrendInfoPanel));sicbo.GenTrendInfoPanel=GenTrendInfoPanel;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var GenTrendRoad=(function(_super){__extends(GenTrendRoad,_super);function GenTrendRoad(gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem){if(name===void 0){name="";}
if(isHoverIcon===void 0){isHoverIcon=false;}
if(minItem===void 0){minItem=250;}
if(maxItem===void 0){maxItem=300;}
var _this=_super.call(this,gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem)||this;_this.type=game.TrendType.BIG_SMALL;_this.underlay.alpha=0.6;return _this;}
GenTrendRoad.prototype.onExpandBtn=function(e){_super.prototype.onExpandBtn.call(this,e);var btn=e.target;this.underlay.alpha=btn.currentFrame==1?1:0.6;};return GenTrendRoad;}(game.TrendRoad));sicbo.GenTrendRoad=GenTrendRoad;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var GenCockRoachIcon=(function(_super){__extends(GenCockRoachIcon,_super);function GenCockRoachIcon(){return _super.call(this)||this;}
return GenCockRoachIcon;}(game.CockRoachIcon));sicbo.GenCockRoachIcon=GenCockRoachIcon;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var GenPearlRoadIcon=(function(_super){__extends(GenPearlRoadIcon,_super);function GenPearlRoadIcon(){return _super.call(this)||this;}
GenPearlRoadIcon.prototype.draw=function(info){this.info=info;var iconType="";switch(this.type){case game.TrendType.BIG_SMALL:iconType=info.result.charAt(sicbo.ResultType.TIE)=='1'?"result_green_t":info.result.charAt(sicbo.ResultType.BIG)=='1'?"result_red_b":"result_blue_s";break;case game.TrendType.EVEN_ODD:iconType=info.result.charAt(sicbo.ResultType.TIE)=='1'?"result_green_t":info.result.charAt(sicbo.ResultType.EVEN)=='1'?"result_red_e":"result_blue_o";break;}
this.clear();this.createImg(iconType);};return GenPearlRoadIcon;}(game.PearlRoadIcon));sicbo.GenPearlRoadIcon=GenPearlRoadIcon;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var GenSmallRoadIcon=(function(_super){__extends(GenSmallRoadIcon,_super);function GenSmallRoadIcon(){return _super.call(this)||this;}
return GenSmallRoadIcon;}(game.SmallRoadIcon));sicbo.GenSmallRoadIcon=GenSmallRoadIcon;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var GenTrendIcon=(function(_super){__extends(GenTrendIcon,_super);function GenTrendIcon(){return _super.call(this)||this;}
GenTrendIcon.prototype.draw=function(info){this.info=info;var type;switch(this.type){case game.TrendType.BIG_SMALL:type=info.result.charAt(sicbo.ResultType.BIG)=='1'?0:1;break;case game.TrendType.EVEN_ODD:type=info.result.charAt(sicbo.ResultType.EVEN)=='1'?0:1;break;}
this.clear();this.createImg(type==0?"result_circle_0":"result_circle_1");};return GenTrendIcon;}(game.TrendIcon));sicbo.GenTrendIcon=GenTrendIcon;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var NormalTrendContainer=(function(_super){__extends(NormalTrendContainer,_super);function NormalTrendContainer(gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem){if(name===void 0){name="";}
if(isHoverIcon===void 0){isHoverIcon=false;}
if(minItem===void 0){minItem=250;}
if(maxItem===void 0){maxItem=300;}
var _this=_super.call(this,gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem)||this;_this.type=game.TrendType.BIG_SMALL;_this.underlay.alpha=0.6;return _this;}
NormalTrendContainer.prototype.changeWinner=function(item1,item2){if(item1==null||item2==null)
return true;switch(this.type){case game.TrendType.BIG_SMALL:return item1.result.charAt(sicbo.ResultType.BIG)!=item2.result.charAt(sicbo.ResultType.BIG);case game.TrendType.EVEN_ODD:return item1.result.charAt(sicbo.ResultType.EVEN)!=item2.result.charAt(sicbo.ResultType.EVEN);}};NormalTrendContainer.prototype.onExpandBtn=function(e){_super.prototype.onExpandBtn.call(this,e);var btn=e.target;this.underlay.alpha=btn.currentFrame==1?1:0.6;};return NormalTrendContainer;}(game.TrendContainer));sicbo.NormalTrendContainer=NormalTrendContainer;})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var ResultType=(function(){function ResultType(){}
ResultType.initialize=function(){};ResultType.getResult=function(type,src){if(src===void 0){src='00000';}
return src.substring(0,type)+'1'+src.substring(type+1,5);};ResultType.getResultFromData=function(cards){var num=parseInt(cards.charAt(0))+parseInt(cards.charAt(1))+parseInt(cards.charAt(2));var str='';str+=num>10?'1':'0';str+=num<=10?'1':'0';str+=(cards.charAt(0)==cards.charAt(1)&&cards.charAt(0)==cards.charAt(2))?'1':'0';str+=num%2==0?'1':'0';str+=num%2==1?'1':'0';return str;};ResultType.BIG=0;ResultType.SMALL=1;ResultType.TIE=2;ResultType.EVEN=3;ResultType.ODD=4;return ResultType;}());sicbo.ResultType=ResultType;ResultType.initialize();})(sicbo||(sicbo={}));var sicbo;(function(sicbo){var TrendMng=(function(_super){__extends(TrendMng,_super);function TrendMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
TrendMng.prototype.destructor=function(){component.VMouseUtils.off(game.GlobalVals.stage,component.VMouseUtils.MOUSE_UP,this.onStageUp,this);component.VMouseUtils.off(this.bg,component.VMouseUtils.MOUSE_DOWN,this.onMouseDown,this);component.VMouseUtils.on(this.expandBtn,component.VMouseUtils.MOUSE_UP,this.onPanelExpand,this);TweenMax.killTweensOf(this);_super.prototype.destructor.call(this);};TrendMng.prototype.initView=function(){this.pearlViewlTypes=[game.TrendType.BIG_SMALL,game.TrendType.EVEN_ODD];this.bg=new PIXI.Graphics();this.addChild(this.bg);this.bg.alpha=0.9;this.contentW=1067;this.startY=460;this.isExpanded=false;this.normalTrend=new sicbo.NormalTrendContainer(this.gameModel,sicbo.GenTrendIcon,765,92,6,game.GameText.BIG_ROAD,true);this.addChild(this.normalTrend);this.bigEyeTrend=new sicbo.GenTrendRoad(this.gameModel,sicbo.GenTrendIcon,285,46,6,game.GameText.BIG_EYE_ROAD.toUpperCase());this.addChild(this.bigEyeTrend);this.smallTrend=new sicbo.GenTrendRoad(this.gameModel,sicbo.GenSmallRoadIcon,285,46,6,game.GameText.SMALL_ROAD.toUpperCase());this.addChild(this.smallTrend);this.cockRoachTrend=new sicbo.GenTrendRoad(this.gameModel,sicbo.GenCockRoachIcon,285,46,6,game.GameText.COCK_ROACH_ROAD.toUpperCase());this.addChild(this.cockRoachTrend);this.pearlRoadTrend=new sicbo.GenPearlRoad(this.gameModel,sicbo.GenPearlRoadIcon,300,92,6,game.GameText.PEARL_ROAD.toUpperCase(),true);this.addChild(this.pearlRoadTrend);for(var i=0;i<305;i++){this.gameModel.vObjectPool.release(new sicbo.GenSmallRoadIcon(),sicbo.GenSmallRoadIcon);this.gameModel.vObjectPool.release(new sicbo.GenCockRoachIcon(),sicbo.GenCockRoachIcon);this.gameModel.vObjectPool.release(new sicbo.GenPearlRoadIcon(),sicbo.GenPearlRoadIcon);}
for(var i=0;i<605;i++){this.gameModel.vObjectPool.release(new sicbo.GenTrendIcon(),sicbo.GenTrendIcon);}
this.iconCount=new sicbo.GenIconCount(this.gameModel);this.addChild(this.iconCount);this.predict=new sicbo.GenPredict(this.gameModel);this.addChild(this.predict);this.predictBankerObj=new game.netdata.TrendsItem().setData('1001010');this.predictPlayerObj=new game.netdata.TrendsItem().setData('0100101');component.VMouseUtils.on(this.predict.player,component.VMouseUtils.MOUSE_DOWN,this.onPredict,this);component.VMouseUtils.on(this.predict.banker,component.VMouseUtils.MOUSE_DOWN,this.onPredict,this);this.maxTrendIndex=this.children.length-1;this.initPearViewBtns();this.initTableBtns();this.initChangeColorBtn();this.initSelectTrendBtns();this.trendInfoPanel=new sicbo.GenTrendInfoPanel(this.gameModel);this.trendInfoPanel.hide();this.gameModel.overlay.addChildAt(this.trendInfoPanel,this.gameModel.overlay.children.length-1);this.gameModel.overlay.setChildIndex(this.trendInfoPanel,this.gameModel.overlay.children.length-1);this.expandBtn=new PIXI.Container();this.gameModel.overlay.addChild(this.expandBtn);this.expandBtn.y=this.startY;this.x=-this.contentW;this.visible=false;var bg=new PIXI.Graphics();bg.beginFill(0x26231E);bg.drawRect(0,0,23,151);bg.endFill();this.expandBtn.addChild(bg);var sp=new PIXI.Sprite(PIXI.Texture.fromFrame("trend_icon.png"));sp.anchor.x=0.5;sp.anchor.y=0.5;sp.x=bg.width*0.5;sp.y=bg.height*0.5;game.GameUtils.resizeNodeH(sp,18);this.expandBtn.addChild(sp);this.expandBtn.buttonMode=true;component.VMouseUtils.on(this.expandBtn,component.VMouseUtils.MOUSE_UP,this.onPanelExpand,this);this.gameModel.dispatcher.addEventListener(GameEvent.GAME_TREND_INFO,this.onTrendInfo,this);this.gameModel.dispatcher.addEventListener(GameEvent.GAME_HIDE_TREND_INFO,this.onHideTrendInfo,this);component.VMouseUtils.on(this.normalTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.on(this.bigEyeTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.on(this.smallTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.on(this.cockRoachTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.on(game.GlobalVals.stage,component.VMouseUtils.MOUSE_UP,this.onStageUp,this);component.VMouseUtils.on(this.bg,component.VMouseUtils.MOUSE_DOWN,this.onMouseDown,this);this.visible=false;};TrendMng.prototype.onStageUp=function(){component.VComponentUtils.stopDrag(this);};TrendMng.prototype.onMouseDown=function(){component.VComponentUtils.startDrag(this,new PIXI.Rectangle(0,-this.startY,0,this.gameModel.GAME_HEIGHT-this.height));};TrendMng.prototype.update=function(){_super.prototype.update.call(this);this.expandBtn.x=this.x+this.contentW;this.expandBtn.y=this.y+this.startY;};TrendMng.prototype.onPanelExpand=function(e){this.isExpanded=!this.isExpanded;TweenMax.killTweensOf(this);this.visible=true;if(this.isExpanded)
this.show();else
this.hide();};TrendMng.prototype.hide=function(){TweenMax.to(this,0.5,{x:-this.contentW,onComplete:function(){this.y=0;this.visible=false;}.bind(this)});};TrendMng.prototype.show=function(){TweenMax.to(this,0.5,{x:0,onUpdate:function(){this.expandBtn.x=this.x+this.contentW;}.bind(this)});};TrendMng.prototype.initSelectTrendBtns=function(trendTypes,txts){if(trendTypes===void 0){trendTypes=null;}
if(txts===void 0){txts=null;}
var trendTypes=[game.TrendType.BIG_SMALL,game.TrendType.EVEN_ODD];var txts=["B/S","E/O"];_super.prototype.initSelectTrendBtns.call(this,trendTypes,txts);this.trendTypeBtnCon.x=278;this.trendTypeBtnCon.y=465;};TrendMng.prototype.initTableBtns=function(){};TrendMng.prototype.updateTrends=function(tableId,values){if(tableId!=this.gameModel.TABLE_ID)
return;this.activeTableId=this.gameModel.TABLE_ID;this.updateTrendsGame(tableId,values);};TrendMng.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:case game.ViewMode.MODE_7S:var maxView=new PIXI.Rectangle(304,464,758,141);this.normalTrend.setSmallView(new PIXI.Rectangle(maxView.x,maxView.y,661,92));this.normalTrend.setMaxView(maxView);this.bigEyeTrend.setSmallView(new PIXI.Rectangle(maxView.x,559,250,46));this.bigEyeTrend.setMaxView(maxView);this.smallTrend.setSmallView(new PIXI.Rectangle(559,this.bigEyeTrend.y,250,46));this.smallTrend.setMaxView(maxView);this.cockRoachTrend.setSmallView(new PIXI.Rectangle(812,this.bigEyeTrend.y,250,46));this.cockRoachTrend.setMaxView(maxView);this.pearlRoadTrend.setSmallView(new PIXI.Rectangle(25,maxView.y,242,92));this.pearlRoadTrend.setMaxView(maxView);this.pearViewBtn.x=4;this.pearViewBtn.y=464;this.changeColorBtn.x=284;this.changeColorBtn.y=588;this.iconCount.x=34;this.iconCount.y=585;this.predict.x=969;this.predict.y=maxView.y;this.predict.banker.x=0;this.predict.banker.y=0;this.predict.player.x=0;this.predict.player.y=47;this.predict.resizeBtns(93,44);this.bg.clear();this.bg.lineStyle(1,0x26231E);this.bg.beginFill(0x26231E);this.bg.drawRect(0,0,1086,151);this.bg.endFill();this.bg.y=this.startY;this.bg.lineStyle(1,0x777777);this.bg.moveTo(274,5);this.bg.lineTo(274,5+90);this.iconCount.scale.x=1;this.iconCount.scale.y=this.iconCount.scale.x;break;case game.ViewMode.MODE_3D:break;}};TrendMng.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return TrendMng;}(game.BaseTrendMng));sicbo.TrendMng=TrendMng;})(sicbo||(sicbo={}));var super_hi_lo;(function(super_hi_lo){var Game=(function(_super){__extends(Game,_super);function Game(){return _super.call(this)||this;}
Game.prototype.destructor=function(){_super.prototype.destructor.call(this);};Game.prototype.initialize=function(tableId,resources){this.resetGameResultDelay=1500;this.dealCardDelay=3700;this.clearTimeoutIds=[];this.dealTimeoutIds=[];this.gameModel.GAME_ID=game.GameID.SUPER_HI_LO;_super.prototype.initialize.call(this,tableId,resources);var str="B 11202,A 11201,C 11203,D 11204,X 11205";var arr=str.split(',');var betLimitIdMap={};for(var i=0;i<arr.length;i++){var arr2=arr[i].split(' ');betLimitIdMap[arr2[0]]=arr2[1];}
this.gameModel.betLimitIdMap=betLimitIdMap;return this;};Game.prototype.onBetCountDownComplete=function(){_super.prototype.onBetCountDownComplete.call(this);this.gameView.showStatus(game.GameText.WAIT_CARD_DEAL);};Game.prototype.resetGameResult=function(){this.gameView.gameResult.reset();this.gameView.activeSuperHand(false);};Game.prototype.onStopBet=function(){this.isBetting=false;this.gameView.betControl.hide();this.gameView.chipControl.dissable();this.gameView.betArea.dissable();var amount=this.gameView.betArea.getTotalBet();var confirm=this.gameView.betArea.getTotalConfirmedBet();this.gameView.countdown.hide();if(confirm<amount&&!this.isBetSending){this.gameView.showStatus(game.GameText.BET_CONFIRM_ALERT,true,true);}
if(!this.isBetSending)
this.gameView.betArea.clearBets();};Game.prototype.startGame=function(){_super.prototype.startGame.call(this);};Game.prototype.initView=function(){this.gameView=new super_hi_lo.GameView(this.gameModel);this.addChild(this.gameView);};Game.prototype.onWSMessageHdl=function(e){_super.prototype.onWSMessageHdl.call(this,e);};Game.prototype.onAuthSuccess=function(){_super.prototype.onAuthSuccess.call(this);};Game.prototype.onWSOpenHdl=function(){_super.prototype.onWSOpenHdl.call(this);};Game.prototype.onWSCloseHdl=function(){_super.prototype.onWSCloseHdl.call(this);};Game.prototype.onGameEvent=function(e){_super.prototype.onGameEvent.call(this,e);};Game.prototype.onNewShoeSucceedAll=function(data){if(this.gameView.gameHUD.gameInfoCon.gameDetailCon['bonusUpsDetail'])
this.gameView.gameHUD.gameInfoCon.gameDetailCon['bonusUpsDetail'].reset();if(data.content!=this.gameModel.TABLE_ID)
return;if(this.getLastRound()>=game.GameSettings.TABLE_INFOS[data.content].maxTrendIcon)
this.gameView.trendMng.resetShoe(data.content);this.gameView.gameHUD.gameInfoCon.roundTf.text=this.getLastShoe().toString()+' - '+this.getLastRound().toString();this.gameView.showStatus(game.GameText.NEW_SHOE_SUCCEED);this.resetGameResult();if(this.gameView.cardControl)
this.gameView.cardControl.clearAllCards();this.gameView.betArea.clearBets();this.gameView.betArea.reset();this.gameView.gameHUD.gameInfoCon.gameDetailCon.statisticsDetail.resetData();};Game.prototype.onPayouts=function(data){this.gameView.betArea.updatePayout(data.content.value);};Game.prototype.onHistory15=function(data){this.gameView.gameHUD.gameInfoCon.gameDetailCon.resultsDetail.setData(data);};Game.prototype.onCommitSucceedAll=function(data){_super.prototype.onCommitSucceedAll.call(this,data);if(data.content.table!=this.gameModel.TABLE_ID)
return;this.gameView.betArea.currentCards=data.content.cards;this.gameView.gameHUD.gameInfoCon.gameDetailCon.statisticsDetail.setData(data.content.cards);this.gameView.gameHUD.gameInfoCon.gameDetailCon.resultsDetail.addData(data.content);};Game.prototype.initCards=function(cardsRes){_super.prototype.initCards.call(this,cardsRes);var cardArr=cardsRes.content.value;var cards='';for(var i=0;i<cardArr.length;i++){cards=cards.concat(cardArr[i].card);}
this.gameView.betArea.currentCards=cards;this.gameView.gameHUD.gameInfoCon.gameDetailCon.statisticsDetail.setData(cards);};return Game;}(game.BaseGame));super_hi_lo.Game=Game;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var BetArea=(function(_super){__extends(BetArea,_super);function BetArea(gameModel,input){return _super.call(this,gameModel,input)||this;}
BetArea.prototype.initSettings=function(){_super.prototype.initSettings.call(this);this.initLiveChipSettings();this.initBetSettings();};BetArea.prototype.initialize=function(){_super.prototype.initialize.call(this);this.initPayoutTexts();};BetArea.prototype.initLiveChipSettings=function(){var settings={};settings['B']={totalPos:new PIXI.Point(434.9,481.9),arr:[new PIXI.Point(400.25,512.9),new PIXI.Point(414.75,508.4),new PIXI.Point(403,498.95),new PIXI.Point(418.15,496.2),new PIXI.Point(429.1,502.2)]};settings['A']={totalPos:new PIXI.Point(814.4,481.45),arr:[new PIXI.Point(867.75,508.7),new PIXI.Point(882.5,513.7),new PIXI.Point(878.5,500),new PIXI.Point(854.85,502.15),new PIXI.Point(864.85,496.5)]};settings['X']={totalPos:new PIXI.Point(616.55,484.2),arr:[new PIXI.Point(585.4,515.45),new PIXI.Point(601.4,518.95),new PIXI.Point(592.15,508.75),new PIXI.Point(606.5,507.5),new PIXI.Point(616.15,513.95)]};this.liveChip2DSetting=settings;};BetArea.prototype.initBetSettings=function(){var settings=[{id:"X",x:571.55,y:501.7},{id:"B",x:370.85,y:492.15},{id:"A",x:709.25,y:492.15},{id:"C",x:245.4,y:480.1},{id:"D",x:894.95,y:480.1}];for(var i=0;i<settings.length;i++){settings[i].id=settings[i].id;settings[i].url="HILO_"+settings[i].id+".png";}
this.bet2DSetting=settings;};BetArea.prototype.initPayoutTexts=function(){var style={fontFamily:"dinbold",fontSize:15,fontStyle:'bold',fill:0xF6D758,align:'center'};this.tfHiPayout=new PIXI.Text('1:1',style);this.tfHiPayout.anchor.set(0.5);this.tfHiPayout.skew.x=-0.21;this.tfHiPayout.skew.y=0.05;this.tfHiPayout.x=468.4;this.tfHiPayout.y=556;this.addChild(this.tfHiPayout);this.tfLoPayout=new PIXI.Text('1:1',style);this.tfLoPayout.anchor.set(0.5);this.tfLoPayout.skew.x=0.21;this.tfLoPayout.skew.y=-0.05;this.tfLoPayout.x=811.4;this.tfLoPayout.y=556;this.addChild(this.tfLoPayout);this.tfSevenPayout=new PIXI.Text('1:1',style);this.tfSevenPayout.anchor.set(0.5);this.tfSevenPayout.x=639.9;this.tfSevenPayout.y=560.45;this.addChild(this.tfSevenPayout);this.tfOddPayout=new PIXI.Text('1:1',style);this.tfOddPayout.anchor.set(0.5);this.tfOddPayout.skew.x=-0.42;this.tfOddPayout.skew.y=0.1;this.tfOddPayout.x=306;this.tfOddPayout.y=543;this.addChild(this.tfOddPayout);this.tfEvenPayout=new PIXI.Text('1:1',style);this.tfEvenPayout.anchor.set(0.5);this.tfEvenPayout.skew.x=0.42;this.tfEvenPayout.skew.y=-0.1;this.tfEvenPayout.x=972;this.tfEvenPayout.y=543;this.addChild(this.tfEvenPayout);};BetArea.prototype.initJson=function(){var url=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?"assets/super_hi_lo/2d/bet_area.json":(game.GlobalVals.viewMode==game.ViewMode.MODE_3D?"assets/super_hi_lo/3d/bet_area.json":"assets/super_hi_lo/7s/bet_area.json");this.updateJson(url);};BetArea.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:this.liveChip3DSetting;_super.prototype.initLiveChip.call(this,vSetting);};BetArea.prototype.initBetCon=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.initBetCon.call(this,vSetting);};BetArea.prototype.updateText=function(){var viewMode=game.GlobalVals.viewMode;var betAreaText=this.betAreaText;betAreaText.texture=this.gameModel.resources[(viewMode!=game.ViewMode.MODE_2D?viewMode+"_":"")+'bet_area_text_'+game.GameUtils.getStudioColorName(this.gameModel.STUDIO)].texture;betAreaText.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;betAreaText.scale.y=betAreaText.scale.x;switch(viewMode){case game.ViewMode.MODE_2D:betAreaText.x=83.6;betAreaText.y=316.85;break;}};BetArea.prototype.getBetTypeFromId=function(id){return id;};BetArea.prototype.changeView=function(){var viewMode=game.GlobalVals.viewMode;var url=viewMode==game.ViewMode.MODE_2D?"assets/super_hi_lo/2d/bet_area.json":(viewMode==game.ViewMode.MODE_3D?"assets/super_hi_lo/3d/bet_area.json":"assets/super_hi_lo/7s/bet_area.json");this.updateJson(url);var vSetting=viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.updateBetConSettings.call(this,vSetting);vSetting=viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:this.liveChip3DSetting;this.liveChipMng.updateView(vSetting);this.updateText();_super.prototype.changeView.call(this);};BetArea.prototype.getBetPlaceWithType=function(betType,seatId){if(seatId===void 0){seatId=0;}
if(seatId==0)
seatId=this.seatId;var obj=this.betPlaceMap[betType]?this.betPlaceMap[betType]:this.betPlaceMap[betType+"_"+seatId];if(!obj)
return null;if(!(obj instanceof Array)){if(obj.seatId>0)
return seatId==obj.seatId?obj:null;else
return seatId==this.seatId?obj:null;}
return obj[seatId>4?seatId-2:seatId-1];};BetArea.prototype.showResult=function(data){this.hideHighlight();var results=data.content.result;var hit;for(var i=0;i<this.hitArr.length;i++){hit=this.hitArr[i];if(results.charAt(super_hi_lo.BetType.getTypeByLetter(hit.betType)-1)=='0')
continue;hit['winHL'].visible=true;}};BetArea.prototype.updatePayout=function(data){var payoutStr;for(var i=0;i<data.length;i++){payoutStr=game.GameText.superhilo_payout.replace("{PAYOUT}",data[i].payout);switch(data[i].cat){case'A':this.tfLoPayout.text=payoutStr;break;case'B':this.tfHiPayout.text=payoutStr;break;case'C':this.tfOddPayout.text=payoutStr;break;case'D':this.tfEvenPayout.text=payoutStr;break;case'X':this.tfSevenPayout.text=payoutStr;break;}}};BetArea.prototype.onBetClick=function(hit){if(this.currentCards){var id=hit['id'];if(id=='X'&&this.currentCards.split('7').length-1==4){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.superhilo_7_bet_not_available);return;}}
var id=hit['id'];_super.prototype.onBetClick.call(this,hit);};BetArea.prototype.rebet=function(){if(this.currentCards){for(var i=0;i<this.savedBets.length;i++){var info=this.savedBets[i];var id=info.betType;if(id=='X'&&this.currentCards.split('7').length-1==4){this.gameModel.notify(game.GameEvent.ERROR_MSG,game.GameText.superhilo_7_bet_not_available);return;}}}
_super.prototype.rebet.call(this);};BetArea.prototype.getBetName=function(betType){var betNum=super_hi_lo.BetType.getTypeByLetter(betType);var result='';switch(betNum){case super_hi_lo.BetType.HI:result=game.GameText.superhilo_hi;break;case super_hi_lo.BetType.LO:result=game.GameText.superhilo_lo;break;case super_hi_lo.BetType.SEVEN:result=game.GameText.SEVEN;break;case super_hi_lo.BetType.ODD:result=game.GameText.ODD;break;case super_hi_lo.BetType.EVEN:result=game.GameText.EVEN;break;default:break;}
return result;};return BetArea;}(game.BaseBetArea));super_hi_lo.BetArea=BetArea;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var BetType=(function(){function BetType(){}
BetType.getResult=function(type,src){if(src===void 0){src='00000';}
return src.substring(0,type-1)+'1'+src.substring(type,5);};BetType.getName=function(type){if(!BetType.BET_MAP){BetType.BET_MAP={};BetType.BET_MAP['A']=game.GameText.superhilo_lo;BetType.BET_MAP['B']=game.GameText.superhilo_hi;BetType.BET_MAP['C']=game.GameText.ODD;BetType.BET_MAP['D']=game.GameText.EVEN;BetType.BET_MAP['X']=game.GameText.SEVEN;}
return BetType.BET_MAP[type];};BetType.getTypeByLetter=function(letter){switch(letter){case'A':return BetType.LO;case'B':return BetType.HI;case'C':return BetType.ODD;case'D':return BetType.EVEN;case'X':return BetType.SEVEN;default:return-1;}};BetType.HI=1;BetType.LO=2;BetType.ODD=3;BetType.EVEN=4;BetType.SEVEN=5;return BetType;}());super_hi_lo.BetType=BetType;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var CardControl=(function(_super){__extends(CardControl,_super);function CardControl(gameModel){return _super.call(this,gameModel)||this;}
CardControl.prototype.initialize=function(){this.cardConfigs=new Array();var c0=new game.CardConfig();c0.x=142.2;c0.y=86.95;c0.vertices=[17,5,73.5,5,66.25,68.3,5,68.3];this.cardConfigs[0]=c0;var c1=new game.CardConfig();c1.x=213.2;c1.y=86.95;c1.vertices=[12.2,5,69.2,5,67,68.3,5,68.3];this.cardConfigs[1]=c1;var c2=new game.CardConfig();c2.x=284.2;c2.y=86.95;c2.vertices=[6.5,5,64.75,5,66.25,68.3,5,68.3];this.cardConfigs[2]=c2;var c3=new game.CardConfig();c3.x=352.7;c3.y=86.95;c3.vertices=[5,5,62.5,5,68.5,68.3,6.75,68.3];this.cardConfigs[3]=c3;var c4=new game.CardConfig();c4.x=420.3;c4.y=86.95;c4.vertices=[5,5,62.7,5,72.85,68.3,11.9,68.3];this.cardConfigs[4]=c4;var c5=new game.CardConfig();c5.x=0;c5.y=0;c5.vertices=[23,5,73.2,5,57.7,55.25,5,55.25];this.cardConfigs[5]=c5;var c6=new game.CardConfig();c6.x=63.95;c6.y=0;c6.vertices=[19.5,5,69.9,5,58.4,55.25,5,55.25];this.cardConfigs[6]=c6;var c7=new game.CardConfig();c7.x=127.7;c7.y=0;c7.vertices=[16.5,5,66.8,5,59.3,55.25,5,55.25];this.cardConfigs[7]=c7;var c8=new game.CardConfig();c8.x=192.2;c8.y=0;c8.vertices=[12.25,5,62.65,5,58.9,55.25,5,55.25];this.cardConfigs[8]=c8;var c9=new game.CardConfig();c9.x=256;c9.y=0;c9.vertices=[8.5,5,59.3,5,59.3,55.25,5,55.25];this.cardConfigs[9]=c9;var c10=new game.CardConfig();c10.x=319.8;c10.y=0;c10.vertices=[5,5,56.3,5,60.05,55.25,5.75,55.25];this.cardConfigs[10]=c10;var c11=new game.CardConfig();c11.x=380.05;c11.y=0;c11.vertices=[5,5,56.3,5,64.3,55.25,9.25,55.25];this.cardConfigs[11]=c11;var c12=new game.CardConfig();c12.x=440.55;c12.y=0;c12.vertices=[5,5,56.1,5,68.1,55.25,14,55.25];this.cardConfigs[12]=c12;var c13=new game.CardConfig();c13.x=500.55;c13.y=0;c13.vertices=[5,5,55.2,5,72.2,55.25,19.5,55.25];this.cardConfigs[13]=c13;var c14=new game.CardConfig();c14.x=560.8;c14.y=0;c14.vertices=[5,5,55.1,5,76.6,55.25,24,55.25];this.cardConfigs[14]=c14;c0.uvs=[0,0,1,0,1,1,0,1];c1.uvs=c0.uvs.slice();c2.uvs=c0.uvs.slice();c3.uvs=c0.uvs.slice();c4.uvs=c0.uvs.slice();c5.uvs=c0.uvs.slice();c6.uvs=c0.uvs.slice();c7.uvs=c0.uvs.slice();c8.uvs=c0.uvs.slice();c9.uvs=c0.uvs.slice();c10.uvs=c0.uvs.slice();c11.uvs=c0.uvs.slice();c12.uvs=c0.uvs.slice();c13.uvs=c0.uvs.slice();c14.uvs=c0.uvs.slice();for(var i=0;i<this.cardConfigs.length;i++){this.cardConfigs[i].vertices=new Float32Array(this.cardConfigs[i].vertices);this.cardConfigs[i].uvs=new Float32Array(this.cardConfigs[i].uvs);}
this.cards=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];};CardControl.prototype.dealCard=function(cardId,cardPos,animated){if(animated===void 0){animated=true;}
_super.prototype.dealCard.call(this,cardId,cardPos,animated);this.updateCardVals();};CardControl.prototype.clearCard=function(carPos){_super.prototype.clearCard.call(this,carPos);this.updateCardVals();};CardControl.prototype.clearAllCards=function(){_super.prototype.clearAllCards.call(this);this.updateCardVals();};CardControl.prototype.updateCardVals=function(){var cards='';var cardObj;for(var i=0;i<this.cards.length;i++){cardObj=this.cards[i];if(cardObj)
cards=cards.concat(cardObj['cardId']);}
if(cards.length<=10)
this.gameModel.gameView.gameHUD.gameInfoCon.gameDetailCon.statisticsDetail.setData(cards);};return CardControl;}(game.BaseCardControl));super_hi_lo.CardControl=CardControl;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var ChipControl=(function(_super){__extends(ChipControl,_super);function ChipControl(gameModel){return _super.call(this,gameModel)||this;}
ChipControl.prototype.initChipPos=function(){this.updateChipPos(null);};ChipControl.prototype.initChips=function(schips,shownRange){_super.prototype.initChips.call(this,schips,shownRange);this.updateLeftRight();};ChipControl.prototype.updateLeftRight=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y-7;this.rightArrow.rotation=-10*Math.PI/180;break;}};ChipControl.prototype.updateChipPos=function(chipsPos){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.chipsPos=[new PIXI.Point(-52.35,1.85),new PIXI.Point(0.05,0.65),new PIXI.Point(51.05,-1.55),new PIXI.Point(102.15,-5.2),new PIXI.Point(154.85,-10.95),new PIXI.Point(207.4,-19.4),new PIXI.Point(257.55,-28.45),new PIXI.Point(305.95,-38.85)];break;}
_super.prototype.updateChipPos.call(this,this.chipsPos);};ChipControl.prototype.changeView=function(){this.updateChipPos(null);this.updateLeftRight();this.drawMasker();_super.prototype.changeView.call(this);};return ChipControl;}(game.BaseChipControl));super_hi_lo.ChipControl=ChipControl;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var GameHUD=(function(_super){__extends(GameHUD,_super);function GameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameHUD.prototype.initView=function(){_super.prototype.initView.call(this);this.settingCon=new game.SettingContainer(this.gameModel);this.settingCon.x=0;this.settingCon.y=581;this.addChild(this.settingCon);this.gameInfoCon=new super_hi_lo.GameInfoCon(this.gameModel);this.addChild(this.gameInfoCon);};GameHUD.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.settingCon.x=0;this.settingCon.y=580;this.gameInfoCon.expand();this.gameInfoCon.resizeBtn.visible=false;break;case game.ViewMode.MODE_3D:this.settingCon.x=0;this.settingCon.y=632;this.gameInfoCon.collapse();this.gameInfoCon.resizeBtn.visible=true;break;}};GameHUD.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameHUD;}(game.BaseGameHUD));super_hi_lo.GameHUD=GameHUD;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var GenGameDetailCon=(function(_super){__extends(GenGameDetailCon,_super);function GenGameDetailCon(){return _super!==null&&_super.apply(this,arguments)||this;}
GenGameDetailCon.prototype.initView=function(){this.viewW=379;this.viewH=157;this.contentY=27;var w=this.viewW;var h=this.viewH;var contentY=this.contentY;var limitBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('limit_icon0001.png'),PIXI.Texture.fromFrame('limit_icon0002.png')]);var livePoolBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('livepool_icon0001.png'),PIXI.Texture.fromFrame('livepool_icon0002.png')]);var resultsBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('info_game_result_icon0001.png'),PIXI.Texture.fromFrame('info_game_result_icon0002.png')]);var statisticsBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('info_state_icon0001.png'),PIXI.Texture.fromFrame('info_state_icon0002.png')]);game.GameUtils.resizeNodeH(limitBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(livePoolBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(resultsBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(statisticsBtn,game.StyleMng.INFO_TAB_BTN_SIZE);this.gameModel.toolTip.addToolTip(limitBtn,game.GameText.LIMITS);this.gameModel.toolTip.addToolTip(livePoolBtn,game.GameText.LIVE_POOL);this.gameModel.toolTip.addToolTip(resultsBtn,game.GameText.RESULTS);this.gameModel.toolTip.addToolTip(statisticsBtn,game.GameText.STATISTICS);var btns=[limitBtn,livePoolBtn,resultsBtn,statisticsBtn];this.btns=btns;for(var i=0;i<btns.length;i++){this.addChild(btns[i]);btns[i].buttonMode=true;btns[i].gotoAndStop(1);btns[i].x=(btns[i].width+1)*i;}
this.initLimitDetail();this.initLivePoolDetail();this.initResultsDetail();this.initStatisticsDetail();var contents=[this.limitDetail,this.livePoolDetail,this.resultsDetail,this.statisticsDetail];for(var i=0;i<contents.length;i++){this.addChild(contents[i]);contents[i].y=contentY;}
var tabMng=new component.VTabMng();tabMng.initialize(btns,contents);this.tabMng=tabMng;var expandBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_expand0001.png'),PIXI.Texture.fromFrame('info_pane_expand0002.png')],this.onExpand.bind(this));expandBtn.x=this.viewW-expandBtn.width;var conllapseBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_collapse0001.png'),PIXI.Texture.fromFrame('info_pane_collapse0002.png')],this.onCollapse.bind(this));conllapseBtn.x=this.viewW-conllapseBtn.width;var resizeBtn=new component.VToggleButton(expandBtn,conllapseBtn);this.addChild(resizeBtn);resizeBtn.y=this.contentY+this.viewH-resizeBtn.height;this.resizeBtn=resizeBtn;};GenGameDetailCon.prototype.initLimitDetail=function(){this.limitDetail=new super_hi_lo.GenLimitDetail(this.gameModel,this.viewW,this.viewH);};GenGameDetailCon.prototype.initLivePoolDetail=function(){this.livePoolDetail=new super_hi_lo.GenLivePoolDetail(this.gameModel,this.viewW,this.viewH);};GenGameDetailCon.prototype.initResultsDetail=function(){this.resultsDetail=new super_hi_lo.ResultsDetail(this.gameModel,this.viewW,this.viewH);};GenGameDetailCon.prototype.initStatisticsDetail=function(){this.statisticsDetail=new super_hi_lo.StatisticsDetail(this.gameModel,this.viewW,this.viewH);};GenGameDetailCon.prototype.onExpand=function(){var addedSize=40;this.limitDetail.resize(this.viewW,this.viewH+addedSize);this.livePoolDetail.resize(this.viewW,this.viewH+addedSize);this.resultsDetail.resize(this.viewW,this.viewH+addedSize);this.statisticsDetail.resize(this.viewW,this.viewH+addedSize);this.resizeBtn.y=this.contentY+this.viewH-this.resizeBtn.height+addedSize;};GenGameDetailCon.prototype.onCollapse=function(){this.limitDetail.resize(this.viewW,this.viewH);this.livePoolDetail.resize(this.viewW,this.viewH);this.resultsDetail.resize(this.viewW,this.viewH);this.statisticsDetail.resize(this.viewW,this.viewH);this.resizeBtn.y=this.contentY+this.viewH-this.resizeBtn.height;};return GenGameDetailCon;}(game.GameDetailCon));super_hi_lo.GenGameDetailCon=GenGameDetailCon;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var GenLimitDetail=(function(_super){__extends(GenLimitDetail,_super);function GenLimitDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
GenLimitDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLimitDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();this.tfs=[];var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.superhilo_hi,game.GameText.superhilo_lo,game.GameText.ODD,game.GameText.EVEN,game.GameText.SEVEN];var posX=12;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;for(var i=0;i<texts.length;i++){tf=game.GameUtils.createText(texts[i],style);tf.x=posX;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};GenLimitDetail.prototype.setData=function(data){this.tfs[0].text=component.VComponentUtils.getNumInFormat(data.content[0].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[0].max);this.tfs[1].text=component.VComponentUtils.getNumInFormat(data.content[1].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[1].max);this.tfs[2].text=component.VComponentUtils.getNumInFormat(data.content[2].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[2].max);this.tfs[3].text=component.VComponentUtils.getNumInFormat(data.content[3].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[3].max);this.tfs[4].text=component.VComponentUtils.getNumInFormat(data.content[4].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[4].max);};return GenLimitDetail;}(game.LimitDetail));super_hi_lo.GenLimitDetail=GenLimitDetail;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var GenLivePoolDetail=(function(_super){__extends(GenLivePoolDetail,_super);function GenLivePoolDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
GenLivePoolDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLivePoolDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.superhilo_hi,game.GameText.superhilo_lo,game.GameText.ODD,game.GameText.EVEN,game.GameText.SEVEN];var results=[];results.push([super_hi_lo.BetType.getResult(super_hi_lo.BetType.HI),game.TrendType.NORMAL]);results.push([super_hi_lo.BetType.getResult(super_hi_lo.BetType.LO),game.TrendType.NORMAL]);results.push([super_hi_lo.BetType.getResult(super_hi_lo.BetType.ODD),game.TrendType.EVEN_ODD]);results.push([super_hi_lo.BetType.getResult(super_hi_lo.BetType.EVEN),game.TrendType.EVEN_ODD]);results.push([super_hi_lo.BetType.getResult(super_hi_lo.BetType.SEVEN),game.TrendType.NORMAL]);this.tfs=[];var posX=5;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;var icon;for(var i=0;i<texts.length;i++){icon=new super_hi_lo.PearlIcon().setData(game.TrendIconUtils.NORMAL_SIZE);content.addChild(icon);icon.x=posX+icon.size*0.5;icon.y=posY+icon.size*0.5;icon.setType(results[i][1]);icon.drawResult(results[i][0]);tf=game.GameUtils.createText(texts[i],style);tf.x=posX+20;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};GenLivePoolDetail.prototype.setData=function(data){this.clearData();for(var i=0;i<data.content.cat.length;i++){var trendType=super_hi_lo.BetType.getTypeByLetter(data.content.cat[i]);if(trendType>-1){this.tfs[trendType-1].text=component.VComponentUtils.getNumInFormat(data.content.amount[i]);}}};return GenLivePoolDetail;}(game.LivePoolDetail));super_hi_lo.GenLivePoolDetail=GenLivePoolDetail;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var ResultsDetail=(function(_super){__extends(ResultsDetail,_super);function ResultsDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
ResultsDetail.prototype.initView=function(){_super.prototype.initView.call(this);};ResultsDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();this.resData=[];var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var posX=12;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tfNum;var card;var tfBetType;var tfOddEven;for(var i=0;i<15;i++){tfNum=game.GameUtils.createText('1-'+(i+1)+' ()',style);tfNum.x=posX;tfNum.y=posY;content.addChild(tfNum);card=new PIXI.Sprite(PIXI.Texture.fromFrame('smallcard_A7.png'));card.scale.x=(1/game.GameSettings.OPTIMIZE_FACTOR)*0.65;card.scale.y=card.scale.x;card.anchor.y=0.5;card.x=105;card.y=posY+tfNum.height*0.5+1;content.addChild(card);tfBetType=game.GameUtils.createText('HI/LO',style);tfBetType.x=205;tfBetType.anchor.x=0.5;tfBetType.y=posY;content.addChild(tfBetType);tfOddEven=game.GameUtils.createText('ODD/EVEN',style);tfOddEven.x=310;tfOddEven.anchor.x=0.5;tfOddEven.y=posY;content.addChild(tfOddEven);this.resData[i]=new ResultData(tfNum,card,tfBetType,tfOddEven);posY+=tfNum.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<this.resData.length-1;i++){this.bg.moveTo(10,(tfNum.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tfNum.height+dis)*(i+1));}};ResultsDetail.prototype.setData=function(data){var sorted=game.GameUtils.sortData(data.content.value,'roundid','DESC');var cardArr;var cardStr;var cardPos;for(var i=0;i<sorted.length;i++){cardArr=sorted[i].cards.split('#');cardStr=cardArr[1];cardPos=cardArr[0].length*0.5+1;this.resData[i].tfNum.text=sorted[i].shoe+' - '+sorted[i].round+' ( '+cardPos+' )';this.resData[i].setCard(cardStr);this.setBetType(this.resData[i].tfBetType,cardStr);this.setOddEven(this.resData[i].tfOddEven,cardStr);}};ResultsDetail.prototype.addData=function(data){for(var i=this.resData.length-1;i>0;i--){this.resData[i].tfNum.text=this.resData[i-1].tfNum.text;this.resData[i].setCard(this.resData[i-1].cardId);this.setBetType(this.resData[i].tfBetType,this.resData[i-1].cardId);this.setOddEven(this.resData[i].tfOddEven,this.resData[i-1].cardId);}
var cardArr=data.cards.split('#');var newCard=cardArr[1];var cardPos=cardArr[0].length/2+1;this.resData[0].tfNum.text=data.shoe+' - '+data.round+' ( '+cardPos+' )';this.resData[0].setCard(newCard);this.setBetType(this.resData[0].tfBetType,newCard);this.setOddEven(this.resData[0].tfOddEven,newCard);};ResultsDetail.prototype.setBetType=function(tfBetType,card){var cardStr=card.split('')[1];var color;var text;if('TJQK'.indexOf(cardStr)>=0||parseInt(cardStr)>7){color=game.InfoColor.BLUE;text=game.GameText.superhilo_hi;}
else if('A'.indexOf(cardStr)>=0||parseInt(cardStr)<7){color=game.InfoColor.RED;text=game.GameText.superhilo_lo;}
else{color=game.InfoColor.GREEN;text=game.GameText.SEVEN;}
tfBetType.style.fill=color;tfBetType.text=text;};ResultsDetail.prototype.setOddEven=function(tfOddEven,card){var cardStr=card.split('')[1];if('A359JK'.indexOf(cardStr)>=0){tfOddEven.text=game.GameText.ODD;}
else if('2468TQ'.indexOf(cardStr)>=0){tfOddEven.text=game.GameText.EVEN;}
else{tfOddEven.text='';}};return ResultsDetail;}(game.BaseGameDetail));super_hi_lo.ResultsDetail=ResultsDetail;var ResultData=(function(){function ResultData(tfNum,card,tfBetType,tfOddEven){this.tfNum=tfNum;this.card=card;this.tfBetType=tfBetType;this.tfOddEven=tfOddEven;}
ResultData.prototype.setCard=function(id){if(this.card){this.cardId=id;this.card.texture=PIXI.Texture.fromFrame('smallcard_'+id+'.png');}};ResultData.prototype.destroy=function(){this.tfNum.destroy();this.card.destroy();this.tfBetType.destroy();this.tfOddEven.destroy();this.cardId=null;};return ResultData;}());})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var StatisticsDetail=(function(_super){__extends(StatisticsDetail,_super);function StatisticsDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
StatisticsDetail.prototype.initView=function(){_super.prototype.initView.call(this);};StatisticsDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var statsPaneTex='superhilo_stats_pane';if(COMMON_LANG=='cs'||COMMON_LANG=='zh')
statsPaneTex=statsPaneTex.concat('_zh');this.statsPane=new PIXI.Sprite(this.gameModel.resources[statsPaneTex].texture);this.statsPane.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;this.statsPane.scale.y=this.statsPane.scale.x;this.statsPane.x=1;this.statsPane.y=2;content.addChild(this.statsPane);var style={fontFamily:"Arial",fontSize:18,fill:0x000000,align:'left'};this.tfHiNum=new PIXI.Text('00 (00)',style);this.tfHiNum.x=this.statsPane.x+48;this.tfHiNum.y=this.statsPane.y+8;content.addChild(this.tfHiNum);style={fontFamily:"Arial",fontSize:16,fill:0x000000,align:'left'};this.tfOddNum=new PIXI.Text('00 (00)',style);this.tfOddNum.x=this.statsPane.x+35;this.tfOddNum.y=this.statsPane.y+83;content.addChild(this.tfOddNum);style={fontFamily:"Arial",fontSize:18,fill:0x000000,align:'center'};this.tfSevenNum=new PIXI.Text('0 (0)',style);this.tfSevenNum.x=this.statsPane.x+160;this.tfSevenNum.y=this.statsPane.y+8;content.addChild(this.tfSevenNum);style={fontFamily:"Arial",fontSize:16,fill:0x000000,align:'center'};this.tfSevenNum2=new PIXI.Text('0 (0)',style);this.tfSevenNum2.x=this.statsPane.x+160;this.tfSevenNum2.y=this.statsPane.y+83;content.addChild(this.tfSevenNum2);style={fontFamily:"Arial",fontSize:18,fill:0x000000,align:'right'};this.tfLoNum=new PIXI.Text('0 (0)',style);this.tfLoNum.anchor.x=1;this.tfLoNum.x=this.statsPane.x+310;this.tfLoNum.y=this.statsPane.y+8;content.addChild(this.tfLoNum);style={fontFamily:"Arial",fontSize:16,fill:0x000000,align:'right'};this.tfEvenNum=new PIXI.Text('0 (0)',style);this.tfEvenNum.anchor.x=1;this.tfEvenNum.x=this.statsPane.x+313;this.tfEvenNum.y=this.statsPane.y+83;content.addChild(this.tfEvenNum);this.barHi=new PIXI.Graphics();content.addChild(this.barHi);this.barLo=new PIXI.Graphics();content.addChild(this.barLo);this.barOdd=new PIXI.Graphics();content.addChild(this.barOdd);this.barEven=new PIXI.Graphics();content.addChild(this.barEven);var centerBarBg=new PIXI.Graphics();centerBarBg.beginFill(0x064A26,1);centerBarBg.drawRoundedRect(this.statsPane.x+146.25,this.statsPane.y+46.85,65.3,17.5,15);centerBarBg.endFill();centerBarBg.beginFill(0x064A26,1);centerBarBg.drawRoundedRect(this.statsPane.x+146.25,this.statsPane.y+116.7,65.3,17.5,15);centerBarBg.endFill();content.addChild(centerBarBg);this.barSeven=new PIXI.Graphics();content.addChild(this.barSeven);this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height);this.bg.endFill();};StatisticsDetail.prototype.setData=function(data){var cards=data.replace('#','');var hiNum=0;var loNum=0;var sevenNum=0;var oddNum=0;var evenNum=0;var card;var pos=1;for(var i=0;i<cards.length*0.5;i++){card=cards.substr(pos,1);if('TJQK'.indexOf(card)>=0||parseInt(card)>7){hiNum++;}
else if('A'.indexOf(card)>=0||parseInt(card)<7){loNum++;}
else{sevenNum++;}
if('A359JK'.indexOf(card)>=0){oddNum++;}
else if('2468TQ'.indexOf(card)>=0){evenNum++;}
pos+=2;}
this.setStateHi(this.statsPane.x+5,this.statsPane.y+49.2,hiNum);this.setStateLo(this.statsPane.x+202,this.statsPane.y+49.2,loNum);this.setStateSeven(this.statsPane.x+148.7,this.statsPane.y+49.2,this.statsPane.y+119.2,sevenNum);this.setStateOdd(this.statsPane.x+5,this.statsPane.y+119.2,oddNum);this.setStateEven(this.statsPane.x+202,this.statsPane.y+119.2,evenNum);};StatisticsDetail.prototype.resetData=function(){this.setStateHi(this.statsPane.x+5,this.statsPane.y+49.2,0);this.setStateLo(this.statsPane.x+202,this.statsPane.y+49.2,0);this.setStateSeven(this.statsPane.x+148.7,this.statsPane.y+49.2,this.statsPane.y+119.2,0);this.setStateOdd(this.statsPane.x+5,this.statsPane.y+119.2,0);this.setStateEven(this.statsPane.x+202,this.statsPane.y+119.2,0);};StatisticsDetail.prototype.setStateHi=function(x,y,num){this.tfHiNum.text=num+' ('+(24-num)+')';this.barHi.clear();this.barHi.beginFill(0x2794B2,1);this.barHi.drawRoundedRect(x,y,150*(num/24),12.5,15);this.barHi.endFill();};StatisticsDetail.prototype.setStateLo=function(x,y,num){this.tfLoNum.text=num+' ('+(24-num)+')';var width=150*(num/24);this.barLo.clear();this.barLo.beginFill(0xBD0000,1);this.barLo.drawRoundedRect(x+148.5-width,y,width,12.5,15);this.barLo.endFill();};StatisticsDetail.prototype.setStateSeven=function(x,y1,y2,num){this.tfSevenNum.text=num+' ('+(4-num)+')';this.tfSevenNum2.text=this.tfSevenNum.text;var width=60*(num/4);this.barSeven.clear();this.barSeven.beginFill(0x0A813F,1);this.barSeven.drawRoundedRect(x,y1,width,12.5,15);this.barSeven.endFill();this.barSeven.beginFill(0x0A813F,1);this.barSeven.drawRoundedRect(x,y2,width,12.5,15);this.barSeven.endFill();};StatisticsDetail.prototype.setStateOdd=function(x,y,num){this.tfOddNum.text=num+' ('+(24-num)+')';this.barOdd.clear();this.barOdd.beginFill(0x807367,1);this.barOdd.drawRoundedRect(x,y,150*(num/24),12.5,15);this.barOdd.endFill();};StatisticsDetail.prototype.setStateEven=function(x,y,num){this.tfEvenNum.text=num+' ('+(24-num)+')';var width=150*(num/24);this.barEven.clear();this.barEven.beginFill(0xF5E3C7,1);this.barEven.drawRoundedRect(x+148.5-width,y,width,12.5,15);this.barEven.endFill();};return StatisticsDetail;}(game.BaseGameDetail));super_hi_lo.StatisticsDetail=StatisticsDetail;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var GameInfoCon=(function(_super){__extends(GameInfoCon,_super);function GameInfoCon(gameModel){return _super.call(this,gameModel)||this;}
GameInfoCon.prototype.initGameDetailCon=function(){this.gameDetailCon=new super_hi_lo.GenGameDetailCon(this.gameModel);this.addChild(this.gameDetailCon);this.gameDetailCon.y=90;};return GameInfoCon;}(game.BaseGameInfoCon));super_hi_lo.GameInfoCon=GameInfoCon;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var GameResult=(function(_super){__extends(GameResult,_super);function GameResult(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameResult.prototype.initBgs=function(){};GameResult.prototype.initialize=function(){this.initBgs();this.result1Tf=game.GameUtils.createText('',{fontFamily:"dinbold",fontSize:45,fontStyle:'bold',fill:0xffffff,stroke:0x222222,align:'center',strokeThickness:4});this.result1Tf.x=this.gameModel.GAME_WIDTH*0.5;this.result1Tf.y=360;this.result1Tf.anchor.x=0.5;this.result1Tf.anchor.y=0.5;this.result2Tf=game.GameUtils.createText('',{fontFamily:"dinbold",fontSize:30,fontStyle:'bold',fill:0xffffff,stroke:0x222222,align:'center',strokeThickness:4});this.result2Tf.x=this.gameModel.GAME_WIDTH*0.5;this.result2Tf.y=380+35;this.result2Tf.anchor.x=0.5;this.result2Tf.anchor.y=0.5;this.addChild(this.result1Tf);this.addChild(this.result2Tf);this.reset();};GameResult.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:case game.ViewMode.MODE_7S:this.result1Tf.y=360;this.result2Tf.y=380+30;break;case game.ViewMode.MODE_3D:break;}};GameResult.prototype.showResult=function(data){var results=data.content.result;var cards=data.content.cards;if(results.charAt(super_hi_lo.BetType.HI-1)=='1'){this.result1Tf.text=game.GameText.superhilo_hi;this.gameModel.soundMng.playSound(game.SoundMng.SOUND_HILO,false,game.SoundMng.HI);}
else if(results.charAt(super_hi_lo.BetType.LO-1)=='1'){this.result1Tf.text=game.GameText.superhilo_lo;this.gameModel.soundMng.playSound(game.SoundMng.SOUND_HILO,false,game.SoundMng.LO);}
else if(results.charAt(super_hi_lo.BetType.SEVEN-1)=='1'){this.result1Tf.text=game.GameText.SEVEN;this.gameModel.soundMng.playSound(game.SoundMng.SOUND_HILO,false,game.SoundMng.SEVEN);}};GameResult.prototype.getCardVal=function(cards){var card;var val=0;for(var i=0;i<cards.length/2;i++){card=cards[i*2+1];val+='TJQK'.indexOf(card)>=0?10+'TJQK'.indexOf(card):(card=='A'?1:parseInt(card));}
return val;};GameResult.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};GameResult.prototype.reset=function(){if(this.result1Tf)
this.result1Tf.text="";if(this.result2Tf)
this.result2Tf.text="";};return GameResult;}(game.BaseGameResult));super_hi_lo.GameResult=GameResult;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.initialize=function(){_super.prototype.initialize.call(this);if(this.gameModel.TABLE_ID)
this.bg.texture=this.gameModel.resources['table_bg_'+game.GameUtils.getColor(this.gameModel.TABLE_ID)].texture;this.initTrends();this.chipControl=new super_hi_lo.ChipControl(this.gameModel);this.chipControl.x=907;this.chipControl.y=591;this.chipControl.dissable();this.gameModel.chipControl=this.chipControl;this.betArea=new super_hi_lo.BetArea(this.gameModel,this.betInput);this.betArea.dissable();this.addChild(this.betArea);this.betControl=new game.BetControl(this.gameModel);this.betControl.x=477;this.betControl.y=580;this.betControl.hide();this.cardControl=new super_hi_lo.CardControl(this.gameModel);this.cardControl.x=318.1;this.cardControl.y=318.6;this.addChild(this.cardControl);this.addChild(this.betControl);this.addChild(this.chipControl);_super.prototype.initCountDown.call(this);this.countdown.x=640;this.countdown.y=383;this.gameResult=(new super_hi_lo.GameResult(this.gameModel));this.addChild(this.gameResult);this.gameHUD=new super_hi_lo.GameHUD(this.gameModel);this.addChild(this.gameHUD);this.updateView();};GameView.prototype.activeSuperHand=function(isSupper){};GameView.prototype.updateVodView=function(){if(!this.vodInited)
return;var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.gameModel.VOD_WIDTH=511;this.gameModel.VOD_HEIGHT=311;this.gameModel.VOD_X=386;this.gameModel.VOD_Y=3;this.processVodLoadMediaData();break;case game.ViewMode.MODE_3D:this.gameModel.VOD_X=0;this.gameModel.VOD_Y=-140;this.gameModel.VOD_WIDTH=this.gameModel.GAME_WIDTH-2*this.gameModel.VOD_X;this.gameModel.VOD_HEIGHT=this.gameModel.GAME_HEIGHT;this.processVodLoadMediaData();break;}
this.sizeHandler();};GameView.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;this.updateVodView();switch(viewMode){case game.ViewMode.MODE_2D:this.chipControl.x=907;this.chipControl.y=591;this.betControl.x=477;this.betControl.y=580;this.cardControl.x=318.1;this.cardControl.y=318.6;this.cardControl.visible=true;this.bg.y=0;this.betInput.x=497+6;this.betInput.y=583;this.betArea.collectWinPos.x=138;this.betArea.collectWinPos.y=572;break;case game.ViewMode.MODE_3D:break;}};GameView.prototype.changeView=function(){this.updateView();this.gameResult.changeView();_super.prototype.changeView.call(this);};return GameView;}(game.BaseGameViewGroup1));super_hi_lo.GameView=GameView;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var BigEyeIcon=(function(_super){__extends(BigEyeIcon,_super);function BigEyeIcon(){return _super!==null&&_super.apply(this,arguments)||this;}
BigEyeIcon.prototype.opDraw=function(info){this.clear();var results=info.result.split('');var type;if(results[super_hi_lo.BetType.LO-1]=='1')
type=1;if(results[super_hi_lo.BetType.HI-1]=='1')
type=2;var iconType=type==1?"trend_bigeyeroad_red":"trend_bigeyeroad_blue";this.createImg(iconType);};return BigEyeIcon;}(game.BigEyeIcon));super_hi_lo.BigEyeIcon=BigEyeIcon;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var CockRoachIcon=(function(_super){__extends(CockRoachIcon,_super);function CockRoachIcon(){return _super.call(this)||this;}
CockRoachIcon.prototype.draw=function(info){this.info=info;var results=info.result;var type;if(results.charAt(super_hi_lo.BetType.LO-1)=='1')
type=1;if(results.charAt(super_hi_lo.BetType.HI-1)=='1')
type=2;var iconType=type==1?"trend_cockroachroad_red":"trend_cockroachroad_blue";this.clear();this.createImg(iconType);};return CockRoachIcon;}(game.CockRoachIcon));super_hi_lo.CockRoachIcon=CockRoachIcon;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var PearlIcon=(function(_super){__extends(PearlIcon,_super);function PearlIcon(){return _super.call(this)||this;}
PearlIcon.prototype.drawResult=function(result){this.clear();var results=result.split('');var win;if(results[super_hi_lo.BetType.LO-1]=='1')
win=1;if(results[super_hi_lo.BetType.HI-1]=='1')
win=2;if(results[super_hi_lo.BetType.SEVEN-1]=='1')
win=3;var iconType=win==3?"trend_hilo_tie":(win==1?"trend_hilo_lo":"trend_hilo_hi");switch(this.type){case game.TrendType.EVEN_ODD:if(results[super_hi_lo.BetType.ODD-1]=='1')
iconType="result_blue_o";if(results[super_hi_lo.BetType.EVEN-1]=='1')
iconType="result_red_e";break;}
this.createImg(iconType);};return PearlIcon;}(game.PearlRoadIcon));super_hi_lo.PearlIcon=PearlIcon;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var SmallRoadIcon=(function(_super){__extends(SmallRoadIcon,_super);function SmallRoadIcon(){return _super.call(this)||this;}
SmallRoadIcon.prototype.draw=function(info){this.info=info;var result=info.result;var type;if(result.charAt(super_hi_lo.BetType.LO-1)=='1')
type=1;if(result.charAt(super_hi_lo.BetType.HI-1)=='1')
type=2;var iconType=type==1?"trend_smallroad_red":"trend_smallroad_blue";this.clear();this.createImg(iconType);};return SmallRoadIcon;}(game.SmallRoadIcon));super_hi_lo.SmallRoadIcon=SmallRoadIcon;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var TrendIcon=(function(_super){__extends(TrendIcon,_super);function TrendIcon(){return _super.call(this)||this;}
TrendIcon.prototype.draw=function(info){this.info=info;var result=info.result;var iconType;if(result.charAt(super_hi_lo.BetType.LO-1)=='1')
iconType="result_circle_0";else if(result.charAt(super_hi_lo.BetType.HI-1)=='1')
iconType="result_circle_1";else
iconType="";this.clear();this.createImg(iconType);};return TrendIcon;}(game.TrendIcon));super_hi_lo.TrendIcon=TrendIcon;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var IconCount=(function(_super){__extends(IconCount,_super);function IconCount(gameModel){return _super.call(this,gameModel)||this;}
IconCount.prototype.initialize=function(){this.tfs=[];this.icons=[];var results=[];results.push([super_hi_lo.BetType.getResult(super_hi_lo.BetType.HI),game.TrendType.NORMAL]);results.push([super_hi_lo.BetType.getResult(super_hi_lo.BetType.LO),game.TrendType.NORMAL]);results.push([super_hi_lo.BetType.getResult(super_hi_lo.BetType.SEVEN),game.TrendType.NORMAL]);results.push([super_hi_lo.BetType.getResult(super_hi_lo.BetType.EVEN),game.TrendType.EVEN_ODD]);results.push([super_hi_lo.BetType.getResult(super_hi_lo.BetType.ODD),game.TrendType.EVEN_ODD]);var dis=20;var posX=0;var icon;for(var i=0;i<results.length;i++){icon=new super_hi_lo.PearlIcon().setData(16);icon.x=posX;posX+=dis;icon.setType(results[i][1]);icon.draw(new game.netdata.TrendsItem().setData(results[i][0]));var tf=game.GameUtils.createText('0',{fontFamily:"Arial",fontSize:12,fill:0xffffff,align:'center'});tf.anchor.x=0.5;tf.x=icon.x;tf.y=icon.y+8;this.tfs[i]=tf;this.icons[i]=icon;this.addChild(icon);this.addChild(tf);}
this.clear();};IconCount.prototype.clear=function(){for(var i=0;i<this.tfs.length;i++){this.tfs[i].text='0';}};IconCount.prototype.addTrend=function(item,isAnim){if(isAnim===void 0){isAnim=false;}
var ind=-1;if(item.result.charAt(super_hi_lo.BetType.HI-1)=='1')
ind=0;if(item.result.charAt(super_hi_lo.BetType.LO-1)=='1')
ind=1;if(item.result.charAt(super_hi_lo.BetType.SEVEN-1)=='1')
ind=2;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;if(item.result.charAt(super_hi_lo.BetType.EVEN-1)=='1')
ind=3;if(item.result.charAt(super_hi_lo.BetType.ODD-1)=='1')
ind=4;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}};return IconCount;}(game.IconCount));super_hi_lo.IconCount=IconCount;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var Predict=(function(_super){__extends(Predict,_super);function Predict(gameModel){return _super.call(this,gameModel)||this;}
Predict.prototype.initialize=function(){this.banker=new PIXI.Container();this.player=new PIXI.Container();this.gameModel.toolTip.addToolTip(this.banker,game.GameText.PREDICT.replace('{0}',game.GameText.superhilo_lo));this.gameModel.toolTip.addToolTip(this.player,game.GameText.PREDICT.replace('{0}',game.GameText.superhilo_hi));this.player.y=45+2;this.addChild(this.banker);this.addChild(this.player);var btns=[this.banker,this.player];var results=[super_hi_lo.BetType.getResult(super_hi_lo.BetType.LO),super_hi_lo.BetType.getResult(super_hi_lo.BetType.HI)];var names=[game.GameText.superhilo_lo.toUpperCase(),game.GameText.superhilo_hi.toUpperCase()];for(var i=0;i<btns.length;i++){var size=18;var posX=12;var posY=32;var dis=22;var bg=new PIXI.Graphics();bg.lineStyle(0,0,0);bg.beginFill(0xffffff);bg.drawRect(0,0,92,45);btns[i]['bg']=bg;btns[i].addChild(bg);var icon1=new super_hi_lo.PearlIcon().setData(size);icon1.setType(game.TrendType.NORMAL);icon1.draw(new game.netdata.TrendsItem().setData(results[i]));icon1.x=posX;icon1.y=posY;posX+=dis;btns[i].addChild(icon1);var icon2=new super_hi_lo.TrendIcon().setData(size);icon2.setType(game.TrendType.NORMAL);icon2.draw(new game.netdata.TrendsItem().setData(results[i]));icon2.x=posX;icon2.y=posY;posX+=dis;btns[i].addChild(icon2);var icon3=new super_hi_lo.SmallRoadIcon().setData(size);icon3.setType(game.TrendType.NORMAL);icon3.draw(new game.netdata.TrendsItem().setData(results[i]));icon3.x=posX;icon3.y=posY;posX+=dis;btns[i].addChild(icon3);var icon4=new super_hi_lo.CockRoachIcon().setData(size);icon4.setType(game.TrendType.NORMAL);icon4.draw(new game.netdata.TrendsItem().setData(results[i]));icon4.x=posX;icon4.y=posY;posX+=dis;btns[i].addChild(icon4);btns[i]['icon1']=icon1;btns[i]['icon2']=icon2;btns[i]['icon3']=icon3;btns[i]['icon4']=icon4;var tf=game.GameUtils.createText(names[i],{fontFamily:"dinbold",fontSize:16,fontStyle:'bold',fill:0x000000,align:'center'});tf.anchor.x=0.5;tf.x=bg.width*0.5;tf.y=0;btns[i].addChild(tf);btns[i]['tf']=tf;btns[i].buttonMode=true;component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_OVER,this.onOver,this);component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_OUT,this.onOut,this);}};Predict.prototype.onOver=function(e){e.target['bg'].alpha=0.8;};Predict.prototype.onOut=function(e){e.target['bg'].alpha=1;};;return Predict;}(game.Predict));super_hi_lo.Predict=Predict;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var TrendContainer=(function(_super){__extends(TrendContainer,_super);function TrendContainer(){return _super!==null&&_super.apply(this,arguments)||this;}
TrendContainer.prototype.isTie=function(item){return item.result.charAt(super_hi_lo.BetType.SEVEN-1)=='1';};TrendContainer.prototype.changeWinner=function(item1,item2){if(item1==null||item2==null)
return true;return item1.result.substr(0,2)!=item2.result.substr(0,2);};return TrendContainer;}(game.TrendContainer));super_hi_lo.TrendContainer=TrendContainer;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var TrendInfoPanel=(function(_super){__extends(TrendInfoPanel,_super);function TrendInfoPanel(gameModel){return _super.call(this,gameModel)||this;}
TrendInfoPanel.prototype.initView=function(){this.showTimoutId=0;this.cardsPosX=[0];this.cardPosY=0;this.bg=new PIXI.Graphics();this.bg.beginFill(0x000000);this.bg.drawRoundedRect(0,0,30,42,5);this.bg.endFill();this.addChild(this.bg);var card=new PIXI.Sprite();card.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;card.scale.y=card.scale.x;card.x=this.cardsPosX[0];card.y=this.cardPosY;this.addChild(card);this.cards.push(card);};TrendInfoPanel.prototype.initIcons=function(){};TrendInfoPanel.prototype.onShow=function(target){trace("target.info.result = "+target.info.result);this.setData(target.info);var p=new PIXI.Point(target.x,target.y);p=target.parent.toGlobal(p);p=this.gameModel.overlay.toLocal(p);p.y+=target.size;if(p.x+this.width>this.gameModel.GAME_WIDTH-50)
p.x=this.gameModel.GAME_WIDTH-this.width-50;if(p.y+this.height>this.gameModel.GAME_HEIGHT)
p.y-=(this.height+target.size*2);this.x=p.x;this.y=p.y;};TrendInfoPanel.prototype.setData=function(data){var cards=data.cards;for(var i=0;i<this.cards.length;i++)
this.cards[i].visible=false;this.visible=true;var arr=cards.split('#');var key='smallcard_'+arr[1]+".png";this.cards[0].visible=true;this.cards[0].texture=PIXI.Texture.fromFrame(key);};return TrendInfoPanel;}(game.TrendInfoPanel));super_hi_lo.TrendInfoPanel=TrendInfoPanel;})(super_hi_lo||(super_hi_lo={}));var super_hi_lo;(function(super_hi_lo){var TrendMng=(function(_super){__extends(TrendMng,_super);function TrendMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
TrendMng.prototype.updateTrends=function(tableId,values){if(tableId!=this.gameModel.TABLE_ID)
return;if(!this.trendDataMap[tableId])
this.trendDataMap[tableId]=new game.TrendData();var trends=this.extractTrends(values);this.updateTrendsGame(tableId,trends);};TrendMng.prototype.extractTrends=function(values){var start=0;for(var i=0;i<values.length;i++){if(values[i].round==1){start=i;break;}}
return values.slice(start,values.length);};TrendMng.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:var maxView=new PIXI.Rectangle(366,622,859,140);this.normalTrend.setSmallView(new PIXI.Rectangle(maxView.x,maxView.y,765,92));this.normalTrend.setMaxView(maxView);this.bigEyeTrend.setSmallView(new PIXI.Rectangle(maxView.x,716,285,46));this.bigEyeTrend.setMaxView(maxView);this.smallTrend.setSmallView(new PIXI.Rectangle(653,this.bigEyeTrend.y,285,46));this.smallTrend.setMaxView(maxView);this.cockRoachTrend.setSmallView(new PIXI.Rectangle(940,this.bigEyeTrend.y,285,46));this.cockRoachTrend.setMaxView(maxView);this.pearlRoadTrend.setSmallView(new PIXI.Rectangle(25,maxView.y,300,92));this.pearlRoadTrend.setMaxView(maxView);this.pearViewBtn.x=4;this.pearViewBtn.y=623;this.iconCount.x=25+8;this.iconCount.y=735+8;this.predict.x=1133;this.predict.y=maxView.y;this.predict.banker.x=0;this.predict.banker.y=0;this.predict.player.x=0;this.predict.player.y=47;this.bg.clear();this.bg.lineStyle(1,0x26231E);this.bg.beginFill(0x26231E);this.bg.drawRect(0,0,this.gameModel.GAME_WIDTH,151);this.bg.endFill();this.bg.y=617;this.tableBtnCon.x=328;this.tableBtnCon.y=622;this.iconCount.scale.x=1;this.iconCount.scale.y=this.iconCount.scale.x;break;case game.ViewMode.MODE_3D:break;}};TrendMng.prototype.getBigBoardName=function(){return game.GameSettings.TABLE_INFOS[this.activeTableId].hint.toUpperCase();};TrendMng.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};TrendMng.prototype.initIconCount=function(){this.iconCount=new super_hi_lo.IconCount(this.gameModel);};TrendMng.prototype.initNormmalContainer=function(){this.normalTrend=new super_hi_lo.TrendContainer(this.gameModel,super_hi_lo.TrendIcon,765,92,6,game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].hint.toUpperCase(),true);};TrendMng.prototype.initPearlRoad=function(){this.pearlRoadTrend=new game.PearlRoad(this.gameModel,super_hi_lo.PearlIcon,300,92,6,game.GameText.PEARL_ROAD.toUpperCase(),true);};TrendMng.prototype.initBigEyeTrend=function(){this.bigEyeTrend=new game.TrendRoad(this.gameModel,super_hi_lo.BigEyeIcon,285,46,6,game.GameText.BIG_EYE_ROAD.toUpperCase());};TrendMng.prototype.initSmallTrend=function(){this.smallTrend=new game.TrendRoad(this.gameModel,super_hi_lo.SmallRoadIcon,285,46,6,game.GameText.SMALL_ROAD.toUpperCase());};TrendMng.prototype.initCockRoachTrend=function(){this.cockRoachTrend=new game.TrendRoad(this.gameModel,super_hi_lo.CockRoachIcon,285,46,6,game.GameText.COCK_ROACH_ROAD.toUpperCase());};TrendMng.prototype.initPredict=function(){this.predict=new super_hi_lo.Predict(this.gameModel);};TrendMng.prototype.initView=function(){this.pearlViewlTypes=[game.TrendType.NORMAL,game.TrendType.EVEN_ODD];_super.prototype.initView.call(this);this.predictBankerObj=new game.netdata.TrendsItem().setData(super_hi_lo.BetType.getResult(super_hi_lo.BetType.LO));this.predictPlayerObj=new game.netdata.TrendsItem().setData(super_hi_lo.BetType.getResult(super_hi_lo.BetType.HI));};TrendMng.prototype.initTrendInfoPanel=function(){this.trendInfoPanel=new super_hi_lo.TrendInfoPanel(this.gameModel);};TrendMng.prototype.getActiveTrendArray=function(){var result=this.trendDataMap[this.activeTableId].trendArr;result=this.extractTrends(result);return result;};TrendMng.prototype.onTableBtn=function(e){};TrendMng.prototype.superOnTableBtn=function(e){_super.prototype.onTableBtn.call(this,e);};TrendMng.prototype.onPredict=function(e){this.predictBankerObj.setData(super_hi_lo.BetType.getResult(super_hi_lo.BetType.LO));this.predictPlayerObj.setData(super_hi_lo.BetType.getResult(super_hi_lo.BetType.HI));var item=e.target==this.predict.banker?this.predictBankerObj:this.predictPlayerObj;this.clear();this.updateTrends(this.gameModel.TABLE_ID,this.trendDataMap[this.gameModel.TABLE_ID].trendArr);this.addTrendGame(this.activeTableId,item,true);};TrendMng.prototype.addTrendGame=function(tableId,item,isDummy){if(isDummy===void 0){isDummy=false;}
this.addMainBoardItemGame(tableId,item,isDummy);this.normalTrend.addTrend(item,true,isDummy);this.pearlRoadTrend.addTrend(item,true,isDummy);this.bigEyeTrend.updateScroll();this.smallTrend.updateScroll();this.cockRoachTrend.updateScroll();if(item.result.charAt(super_hi_lo.BetType.SEVEN-1)!='1')
this.blinkIcons(isDummy);if(!isDummy){this.iconCount.addTrend(item,true);}};TrendMng.prototype.isTie=function(item){return item.result.charAt(super_hi_lo.BetType.SEVEN-1)=='1';};TrendMng.prototype.getWin=function(item){var v=0;if(item.result.charAt(super_hi_lo.BetType.LO-1)=='1')
v=1;else if(item.result.charAt(super_hi_lo.BetType.HI-1)=='1')
v=2;return v;};TrendMng.prototype.drawTrendRoadIcon=function(r,c,isDummy){if(isDummy===void 0){isDummy=false;}
var mainBoard=this.trendDataMap[this.activeTableId].mainBoard;var red=super_hi_lo.BetType.getResult(super_hi_lo.BetType.LO);var blue=super_hi_lo.BetType.getResult(super_hi_lo.BetType.HI);var result="";if(c>1||(c==1&&r>0)){if(r==0)
result=mainBoard[c-1].length==mainBoard[c-2].length?red:blue;else{result=r==mainBoard[c-1].length?blue:red;}
this.bigEyeTrend.addTrend(new game.netdata.TrendsItem().setData(result),false,isDummy);}
if(c>2||(c==2&&r>0)){if(r==0)
result=mainBoard[c-1].length==mainBoard[c-3].length?red:blue;else{result=r==mainBoard[c-2].length?blue:red;}
this.smallTrend.addTrend(new game.netdata.TrendsItem().setData(result),false,isDummy);}
if(c>3||(c==3&&r>0)){if(r==0)
result=mainBoard[c-1].length==mainBoard[c-4].length?red:blue;else{result=r==mainBoard[c-3].length?blue:red;}
this.cockRoachTrend.addTrend(new game.netdata.TrendsItem().setData(result),false,isDummy);}};return TrendMng;}(game.BaseTrendMng));super_hi_lo.TrendMng=TrendMng;})(super_hi_lo||(super_hi_lo={}));var super_3pictures;(function(super_3pictures){var Game=(function(_super){__extends(Game,_super);function Game(){var _this=_super.call(this)||this;_this.isFlipCard1=false;_this.isFlipCard2=false;return _this;}
Game.prototype.destructor=function(){_super.prototype.destructor.call(this);};Game.prototype.initialize=function(tableId,resources){this.dealCardDelay=2500;this.resetGameResultDelay=1500;this.clearTimeoutIds=[];this.dealTimeoutIds=[];this.gameModel.GAME_ID=game.GameID.SUPER_3PICTURES;_super.prototype.initialize.call(this,tableId,resources);var str="P1 11001,B1 11002,BP 11003,P3B3 11004,P2B2 11005,P3 11004,B3 11004,P2 11005,B2 11005";var arr=str.split(',');var betLimitIdMap={};for(var i=0;i<arr.length;i++){var arr2=arr[i].split(' ');betLimitIdMap[arr2[0]]=arr2[1];}
this.gameModel.betLimitIdMap=betLimitIdMap;this.checkPairEnabled=false;return this;};Game.prototype.onBetCountDownComplete=function(){_super.prototype.onBetCountDownComplete.call(this);this.gameView.showStatus(game.GameText.WAIT_CARD_DEAL);};Game.prototype.onStartBet=function(data){_super.prototype.onStartBet.call(this,data);this.gameView.gameResult.showDisplay(false);this.gameView.gameResult.resetPairPlus();this.gameView.hideFlipCon();this.isFlipCard1=false;this.isFlipCard2=false;this.checkPairEnabled=false;};Game.prototype.onStopBet=function(){_super.prototype.onStopBet.call(this);this.gameView.gameResult.showDisplay(true);this.gameView.gameResult.showPairPlusCon(true);};Game.prototype.resetGameResult=function(){_super.prototype.resetGameResult.call(this);this.gameView.gameResult.showDisplay(false);this.gameView.gameResult.resetPairPlus();this.gameView.hideFlipCon();this.checkPairEnabled=false;};Game.prototype.startGame=function(){_super.prototype.startGame.call(this);};Game.prototype.initView=function(){this.gameView=new super_3pictures.GameView(this.gameModel);this.addChild(this.gameView);};Game.prototype.onAuthSuccess=function(){_super.prototype.onAuthSuccess.call(this);};Game.prototype.onWSOpenHdl=function(){_super.prototype.onWSOpenHdl.call(this);};Game.prototype.onWSCloseHdl=function(){_super.prototype.onWSCloseHdl.call(this);};Game.prototype.onWSMessageHdl=function(e){_super.prototype.onWSMessageHdl.call(this,e);var data=e.data;if(data.content&&data.content.table&&data.content.table!=this.gameModel.TABLE_ID)
return;switch(data.kind){case game.GameCMD.ACTION_DOWN:this.onActionDown(data);break;case game.GameCMD.SQUEEZE_ROLL_BACK_SUCCEED:this.onSqueezeRollBackSucceed(data);break;default:break;}};Game.prototype.onCountDownAll=function(data){_super.prototype.onCountDownAll.call(this,data);if(data.content.table!=this.gameModel.TABLE_ID)
return;var time=data.content.tick-1;if(time==5)
this.gameView.gameResult.showPairPlusCon(true);};Game.prototype.onActionDown=function(data){if(this.gameView.cardControl.cards[5]==undefined)
return;var tick=data.content.tick;var time=tick;var cardControl=this.gameView.cardControl;var pBet=this.gameView.betArea.getBetPlace('P1').confirmedAmt+this.gameView.betArea.getBetPlace('P2').confirmedAmt+this.gameView.betArea.getBetPlace('P3').confirmedAmt;var bBet=this.gameView.betArea.getBetPlace('B1').confirmedAmt+this.gameView.betArea.getBetPlace('B2').confirmedAmt+this.gameView.betArea.getBetPlace('B3').confirmedAmt;if(this.checkPairEnabled==false){this.checkPairEnabled=true;this.gameView.enablePairInfo(false);}
if(time>=0){if(pBet>=bBet&&this.isFlipCard1==false){this.gameView.showFlipCard(4,true);cardControl.setCardVisible(4,false);this.isFlipCard1=true;}
else if(pBet<bBet&&this.isFlipCard2==false){this.gameView.showFlipCard(5,true);cardControl.setCardVisible(5,false);this.isFlipCard2=true;}}
if(time>=0){if(this.gameView.actCountdown.getTotal()==0)
this.gameView.actCountdown.setTotal(time);this.gameView.actCountdown.setTime(tick>0?time:0);}
if(time==0){this.gameView.actCountdown.hide();this.gameView.actCountdown.setTotal(0);var firstCard=pBet>=bBet?4:5;this.gameView.flipTimeout(firstCard);this.isFlipCard1=false;this.isFlipCard2=false;cardControl.setCardVisible(4);cardControl.setCardVisible(5);}};Game.prototype.onSqueezeRollBackSucceed=function(data){var pos=data.content.pos;var arrPos=[0,2,1,3,4,5];for(var i=0;i<this.gameView.cardControl.cards.length;i++){if(i>=pos)
this.gameView.cardControl.clearCard(arrPos[i]);}
this.gameView.hideFlipCon();this.checkPairEnabled=false;};Game.prototype.onGameEvent=function(e){_super.prototype.onGameEvent.call(this,e);};Game.prototype.onHistory15=function(data){this.gameView.gameHUD.gameInfoCon.gameDetailCon.resultsDetail.setData(data);if(data.content.value[0].round==this.getLastRound()){this.gameView.cardControl.showCard(4);this.gameView.cardControl.showCard(5);}};Game.prototype.onCommitSucceedAll=function(data){_super.prototype.onCommitSucceedAll.call(this,data);if(data.content.table!=this.gameModel.TABLE_ID)
return;this.gameView.gameHUD.gameInfoCon.gameDetailCon.resultsDetail.addData(data.content);this.gameView.cardControl.showCard(4);this.gameView.cardControl.showCard(5);this.gameView.hideFlipCon();this.checkPairEnabled=false;};Game.prototype.onDeal=function(dealRes){this.gameView.cardControl.animatingMap[dealRes.content.pos-1]=true;var id=setTimeout(function(){component.VComponentUtils.removeElementFromArray(this.dealTimeoutIds,id);if(this.gameView.cardControl)
this.gameView.cardControl.dealCard(dealRes.content.card,dealRes.content.pos-1,true,false,0.15);}.bind(this),this.dealCardDelay);this.dealTimeoutIds.push(id);};return Game;}(game.BaseGame));super_3pictures.Game=Game;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var BetArea=(function(_super){__extends(BetArea,_super);function BetArea(gameModel,input){return _super.call(this,gameModel,input)||this;}
BetArea.prototype.initSettings=function(){_super.prototype.initSettings.call(this);this.initLiveChipSettings();this.initBetSettings();};BetArea.prototype.initialize=function(){_super.prototype.initialize.call(this);};BetArea.prototype.initLiveChipSettings=function(){var settings={};settings['P1']={totalPos:new PIXI.Point(445.9,486.9),arr:[new PIXI.Point(411.25,517.9),new PIXI.Point(425.75,513.4),new PIXI.Point(414,503.95),new PIXI.Point(429.15,501.2),new PIXI.Point(440.1,507.2)]};settings['B1']={totalPos:new PIXI.Point(802.4,487.45),arr:[new PIXI.Point(855.75,514.7),new PIXI.Point(870.5,519.7),new PIXI.Point(866.5,506),new PIXI.Point(842.85,508.15),new PIXI.Point(852.85,502.5)]};settings['BP']={totalPos:new PIXI.Point(607.55,494.2),arr:[new PIXI.Point(576.4,525.45),new PIXI.Point(592.4,528.95),new PIXI.Point(583.15,518.75),new PIXI.Point(597.5,517.5),new PIXI.Point(607.15,523.95)]};this.liveChip2DSetting=settings;};BetArea.prototype.initBetSettings=function(){var settings=[{id:"P1",x:388.75,y:489.85},{id:"BP",x:570.1,y:499.25},{id:"B1",x:708.65,y:489.85},{id:"P2",x:217.4,y:469.45},{id:"P3",x:198.4,y:502.5},{id:"B2",x:865.3,y:469.45},{id:"B3",x:877.75,y:502.5}];for(var i=0;i<settings.length;i++){settings[i].id=settings[i].id;settings[i].url="S3P_"+settings[i].id+".png";}
this.bet2DSetting=settings;};BetArea.prototype.initJson=function(){var url=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?"assets/super_3pictures/2d/bet_area.json":(game.GlobalVals.viewMode==game.ViewMode.MODE_3D?"assets/super_3pictures/3d/bet_area.json":"assets/super_3pictures/7s/bet_area.json");this.updateJson(url);};BetArea.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:this.liveChip3DSetting;_super.prototype.initLiveChip.call(this,vSetting);};BetArea.prototype.initBetCon=function(settings){if(settings===void 0){settings=null;}
var vSetting=game.GlobalVals.viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.initBetCon.call(this,vSetting);};BetArea.prototype.updateText=function(){var viewMode=game.GlobalVals.viewMode;var betAreaText=this.betAreaText;betAreaText.texture=this.gameModel.resources[(viewMode!=game.ViewMode.MODE_2D?viewMode+"_":"")+'bet_area_text'].texture;betAreaText.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;betAreaText.scale.y=betAreaText.scale.x;switch(viewMode){case game.ViewMode.MODE_2D:betAreaText.x=139.45;betAreaText.y=350.5;break;case game.ViewMode.MODE_3D:break;}};BetArea.prototype.changeView=function(){var viewMode=game.GlobalVals.viewMode;var url=viewMode==game.ViewMode.MODE_2D?"assets/super_3pictures/2d/bet_area.json":(viewMode==game.ViewMode.MODE_3D?"assets/super_3pictures/3d/bet_area.json":"assets/super_3pictures/7s/bet_area.json");this.updateJson(url);var vSetting=viewMode==game.ViewMode.MODE_2D?this.bet2DSetting:this.bet3DSetting;_super.prototype.updateBetConSettings.call(this,vSetting);vSetting=viewMode==game.ViewMode.MODE_2D?this.liveChip2DSetting:this.liveChip3DSetting;this.liveChipMng.updateView(vSetting);this.updateText();_super.prototype.changeView.call(this);};BetArea.prototype.getBetMax=function(betType){betType='P2B2'.indexOf(betType)>=0?'P2B2':('P3B3'.indexOf(betType)>=0?'P3B3':betType);return this.gameModel.getBetMax(betType);};BetArea.prototype.getBetMin=function(betType){betType='P2B2'.indexOf(betType)>=0?'P2B2':('P3B3'.indexOf(betType)>=0?'P3B3':betType);return this.gameModel.getBetMin(betType);};BetArea.prototype.onBetClick=function(hit){var id=hit['id'];_super.prototype.onBetClick.call(this,hit);};BetArea.prototype.rebet=function(){_super.prototype.rebet.call(this);};BetArea.prototype.getBetTypeFromId=function(id){return id;};BetArea.prototype.getBetPlaceWithType=function(betType,seatId){if(seatId===void 0){seatId=0;}
if(seatId==0)
seatId=this.seatId;var obj=this.betPlaceMap[betType]?this.betPlaceMap[betType]:this.betPlaceMap[betType+"_"+seatId];if(!obj)
return null;if(!(obj instanceof Array)){if(obj.seatId>0)
return seatId==obj.seatId?obj:null;else
return seatId==this.seatId?obj:null;}
return obj[seatId>4?seatId-2:seatId-1];};BetArea.prototype.showResult=function(data){this.hideHighlight();var results=data.content.result;var hit;for(var i=0;i<this.hitArr.length;i++){hit=this.hitArr[i];if(results.charAt(super_3pictures.BetType.getTypeByLetter(hit.id)-1)=='0')
continue;hit['winHL'].visible=true;}};BetArea.prototype.getBetName=function(betType){return super_3pictures.BetType.getName(betType);};return BetArea;}(game.BaseBetArea));super_3pictures.BetArea=BetArea;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var BetType=(function(){function BetType(){}
BetType.getResult=function(type,src){if(src===void 0){src='000000000000000';}
return src.substring(0,type-1)+'1'+src.substring(type,15);};BetType.getTypeByLetter=function(letter){switch(letter){case'P1':return BetType.PLAYER_WIN;case'P2':return BetType.PLAYER_PAIR_PLUS;case'P3':return BetType.PLAYER_3P;case'B1':return BetType.BANKER_WIN;case'B2':return BetType.BANKER_PAIR_PLUS;case'B3':return BetType.BANKER_3P;case'BP':return BetType.TIE;default:return-1;}};BetType.getName=function(type){if(!BetType.BET_MAP){BetType.BET_MAP={};BetType.BET_MAP['P1']=game.GameText.PLAYER;BetType.BET_MAP['P2']=game.GameText.player_pair_plus;BetType.BET_MAP['P3']=game.GameText.player_3_pictures;BetType.BET_MAP['B1']=game.GameText.BANKER;BetType.BET_MAP['B2']=game.GameText.banker_pair_plus;BetType.BET_MAP['B3']=game.GameText.banker_3_pictures;BetType.BET_MAP['BP']=game.GameText.TIE;}
return BetType.BET_MAP[type];};BetType.PLAYER_WIN=1;BetType.PLAYER_3P=2;BetType.PLAYER_PAIR_PLUS=3;BetType.PLAYER_FLUSH=4;BetType.PLAYER_STRAIGHT=5;BetType.PLAYER_3OFKIND=6;BetType.PLAYER_STRAIGHT_FLUSH=7;BetType.BANKER_WIN=8;BetType.BANKER_3P=9;BetType.BANKER_PAIR_PLUS=10;BetType.BANKER_FLUSH=11;BetType.BANKER_STRAIGHT=12;BetType.BANKER_3OFKIND=13;BetType.BANKER_STRAIGHT_FLUSH=14;BetType.TIE=15;return BetType;}());super_3pictures.BetType=BetType;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var CardControl=(function(_super){__extends(CardControl,_super);function CardControl(gameModel){return _super.call(this,gameModel)||this;}
CardControl.prototype.initialize=function(){this.cardConfigs=new Array();var c0=new game.CardConfig();c0.x=0;c0.y=13.5;c0.vertices=[29.75,5,98,5,79.25,83.5,5,83.5];this.cardConfigs[0]=c0;var c1=new game.CardConfig();c1.x=356;c1.y=0;c1.vertices=[5,5,76.5,5,87.5,82,10,82];this.cardConfigs[1]=c1;var c2=new game.CardConfig();c2.x=78.5;c2.y=13.5;c2.vertices=[23.25,5,95,5,82.75,83.5,5,83.5];this.cardConfigs[2]=c2;var c3=new game.CardConfig();c3.x=431.5;c3.y=0;c3.vertices=[5,5,76.5,5,94.25,82,16.75,82];this.cardConfigs[3]=c3;var c4=new game.CardConfig();c4.x=160.5;c4.y=13.5;c4.vertices=[16.25,5,88,5,83,83.5,5,83.5];this.cardConfigs[4]=c4;var c5=new game.CardConfig();c5.x=506.25;c5.y=0;c5.vertices=[5,5,76.5,5,101.25,82,23.75,82];this.cardConfigs[5]=c5;c0.uvs=[0,0,1,0,1,1,0,1];c1.uvs=c0.uvs.slice();c2.uvs=c0.uvs.slice();c3.uvs=c0.uvs.slice();c4.uvs=c0.uvs.slice();c5.uvs=c0.uvs.slice();for(var i=0;i<this.cardConfigs.length;i++){this.cardConfigs[i].vertices=new Float32Array(this.cardConfigs[i].vertices);this.cardConfigs[i].uvs=new Float32Array(this.cardConfigs[i].uvs);}
this.cards=[null,null,null,null,null,null];};CardControl.prototype.setCardVisible=function(cardPos,visible){if(visible===void 0){visible=true;}
var card=this.cards[cardPos];if(card)
card.visible=visible;};CardControl.prototype.dealCard=function(cardId,cardPos,animated,isDealCardBack,duration){if(animated===void 0){animated=true;}
if(isDealCardBack===void 0){isDealCardBack=false;}
if(duration===void 0){duration=0.3;}
if(cardPos>=4)
_super.prototype.dealCard.call(this,cardId,cardPos,animated,true,duration);else
_super.prototype.dealCard.call(this,cardId,cardPos,animated,isDealCardBack,duration);this.updateCardVals();};CardControl.prototype.showCard=function(cardPos){var card=this.cards[cardPos];if(card['cardId']==card['orgCardId'])
return;card['cardId']=card['orgCardId'];var mesh=card['mesh'];mesh.texture=this.gameModel.resources[card['cardId']].texture;this.updateCardVals();};CardControl.prototype.clearCard=function(carPos){_super.prototype.clearCard.call(this,carPos);this.updateCardVals();};CardControl.prototype.clearAllCards=function(){_super.prototype.clearAllCards.call(this);this.updateCardVals();};CardControl.prototype.updateCardVals=function(){var gameResult=this.gameModel.gameView.gameResult;var pcards="";var bcards="";for(var i=0;i<this.cards.length;i++){if(!this.cards[i])
continue;if(i%2==0)
pcards+=this.cards[i]['cardId'];else
bcards+=this.cards[i]['cardId'];}
if(this.cards.length<8){gameResult.setPlayerCard2(pcards);gameResult.setBankerCard2(bcards);}
gameResult.updatePairPlus(pcards,bcards);};return CardControl;}(game.BaseCardControl));super_3pictures.CardControl=CardControl;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var ChipControl=(function(_super){__extends(ChipControl,_super);function ChipControl(gameModel){return _super.call(this,gameModel)||this;}
ChipControl.prototype.initChipPos=function(){this.updateChipPos(null);};ChipControl.prototype.initChips=function(schips,shownRange){_super.prototype.initChips.call(this,schips,shownRange);this.updateLeftRight();};ChipControl.prototype.updateLeftRight=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y-7;this.rightArrow.rotation=-10*Math.PI/180;break;}};ChipControl.prototype.updateChipPos=function(chipsPos){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.chipsPos=[new PIXI.Point(-52.35,1.85),new PIXI.Point(0.05,0.65),new PIXI.Point(51.05,-1.55),new PIXI.Point(102.15,-5.2),new PIXI.Point(154.85,-10.95),new PIXI.Point(207.4,-19.4),new PIXI.Point(257.55,-28.45),new PIXI.Point(305.95,-38.85)];break;}
_super.prototype.updateChipPos.call(this,this.chipsPos);};ChipControl.prototype.changeView=function(){this.updateChipPos(null);this.updateLeftRight();this.drawMasker();_super.prototype.changeView.call(this);};return ChipControl;}(game.BaseChipControl));super_3pictures.ChipControl=ChipControl;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var GameHUD=(function(_super){__extends(GameHUD,_super);function GameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameHUD.prototype.initView=function(){_super.prototype.initView.call(this);this.settingCon=new game.SettingContainer(this.gameModel);this.settingCon.x=0;this.settingCon.y=581;this.addChild(this.settingCon);this.gameInfoCon=new super_3pictures.GameInfoCon(this.gameModel);this.addChild(this.gameInfoCon);};GameHUD.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.settingCon.x=0;this.settingCon.y=580;this.gameInfoCon.expand();this.gameInfoCon.resizeBtn.visible=false;break;case game.ViewMode.MODE_3D:this.settingCon.x=0;this.settingCon.y=632;this.gameInfoCon.collapse();this.gameInfoCon.resizeBtn.visible=true;break;}};GameHUD.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameHUD;}(game.BaseGameHUD));super_3pictures.GameHUD=GameHUD;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var GenGameDetailCon=(function(_super){__extends(GenGameDetailCon,_super);function GenGameDetailCon(){return _super!==null&&_super.apply(this,arguments)||this;}
GenGameDetailCon.prototype.initView=function(){this.viewW=379;this.viewH=157;this.contentY=27;var w=this.viewW;var h=this.viewH;var contentY=this.contentY;var limitBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('limit_icon0001.png'),PIXI.Texture.fromFrame('limit_icon0002.png')]);var livePoolBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('livepool_icon0001.png'),PIXI.Texture.fromFrame('livepool_icon0002.png')]);var resultsBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('info_game_result_icon0001.png'),PIXI.Texture.fromFrame('info_game_result_icon0002.png')]);game.GameUtils.resizeNodeH(limitBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(livePoolBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(resultsBtn,game.StyleMng.INFO_TAB_BTN_SIZE);this.gameModel.toolTip.addToolTip(limitBtn,game.GameText.LIMITS);this.gameModel.toolTip.addToolTip(livePoolBtn,game.GameText.LIVE_POOL);this.gameModel.toolTip.addToolTip(resultsBtn,game.GameText.RESULTS);var btns=[limitBtn,livePoolBtn,resultsBtn];this.btns=btns;for(var i=0;i<btns.length;i++){this.addChild(btns[i]);btns[i].buttonMode=true;btns[i].gotoAndStop(1);btns[i].x=(btns[i].width+1)*i;}
this.initLimitDetail();this.initLivePoolDetail();this.initResultsDetail();var contents=[this.limitDetail,this.livePoolDetail,this.resultsDetail];for(var i=0;i<contents.length;i++){this.addChild(contents[i]);contents[i].y=contentY;}
var tabMng=new component.VTabMng();tabMng.initialize(btns,contents);this.tabMng=tabMng;var expandBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_expand0001.png'),PIXI.Texture.fromFrame('info_pane_expand0002.png')],this.onExpand.bind(this));expandBtn.x=this.viewW-expandBtn.width;var conllapseBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_collapse0001.png'),PIXI.Texture.fromFrame('info_pane_collapse0002.png')],this.onCollapse.bind(this));conllapseBtn.x=this.viewW-conllapseBtn.width;var resizeBtn=new component.VToggleButton(expandBtn,conllapseBtn);this.addChild(resizeBtn);resizeBtn.y=this.contentY+this.viewH-resizeBtn.height;this.resizeBtn=resizeBtn;};GenGameDetailCon.prototype.initLimitDetail=function(){this.limitDetail=new super_3pictures.GenLimitDetail(this.gameModel,this.viewW,this.viewH);};GenGameDetailCon.prototype.initLivePoolDetail=function(){this.livePoolDetail=new super_3pictures.GenLivePoolDetail(this.gameModel,this.viewW,this.viewH);};GenGameDetailCon.prototype.initResultsDetail=function(){this.resultsDetail=new super_3pictures.ResultsDetail(this.gameModel,this.viewW,this.viewH);};GenGameDetailCon.prototype.onExpand=function(){var addedSize=40;this.limitDetail.resize(this.viewW,this.viewH+addedSize);this.livePoolDetail.resize(this.viewW,this.viewH+addedSize);this.resultsDetail.resize(this.viewW,this.viewH+addedSize);this.resizeBtn.y=this.contentY+this.viewH-this.resizeBtn.height+addedSize;};GenGameDetailCon.prototype.onCollapse=function(){this.limitDetail.resize(this.viewW,this.viewH);this.livePoolDetail.resize(this.viewW,this.viewH);this.resultsDetail.resize(this.viewW,this.viewH);this.resizeBtn.y=this.contentY+this.viewH-this.resizeBtn.height;};return GenGameDetailCon;}(game.GameDetailCon));super_3pictures.GenGameDetailCon=GenGameDetailCon;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var GenLimitDetail=(function(_super){__extends(GenLimitDetail,_super);function GenLimitDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
GenLimitDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLimitDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();this.tfs=[];var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.PLAYER,game.GameText.BANKER,game.GameText.TIE,game.GameText.threepictures,game.GameText.pair_plus_title];var posX=12;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;for(var i=0;i<texts.length;i++){tf=game.GameUtils.createText(texts[i],style);tf.x=posX;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};GenLimitDetail.prototype.setData=function(data){this.tfs[0].text=component.VComponentUtils.getNumInFormat(data.content[0].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[0].max);this.tfs[1].text=component.VComponentUtils.getNumInFormat(data.content[1].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[1].max);this.tfs[2].text=component.VComponentUtils.getNumInFormat(data.content[2].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[2].max);this.tfs[3].text=component.VComponentUtils.getNumInFormat(data.content[3].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[3].max);this.tfs[4].text=component.VComponentUtils.getNumInFormat(data.content[4].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[4].max);};return GenLimitDetail;}(game.LimitDetail));super_3pictures.GenLimitDetail=GenLimitDetail;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var GenLivePoolDetail=(function(_super){__extends(GenLivePoolDetail,_super);function GenLivePoolDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
GenLivePoolDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLivePoolDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.PLAYER,game.GameText.BANKER,game.GameText.TIE,game.GameText.player_pair_plus,game.GameText.banker_pair_plus,game.GameText.player_3_pictures,game.GameText.banker_3_pictures];var results=[];results.push([super_3pictures.BetType.getResult(super_3pictures.BetType.PLAYER_WIN),super_3pictures.TrendType.NORMAL]);results.push([super_3pictures.BetType.getResult(super_3pictures.BetType.BANKER_WIN),super_3pictures.TrendType.NORMAL]);results.push([super_3pictures.BetType.getResult(super_3pictures.BetType.TIE),game.TrendType.NORMAL]);results.push([super_3pictures.BetType.getResult(super_3pictures.BetType.PLAYER_PAIR_PLUS,super_3pictures.BetType.getResult(super_3pictures.BetType.PLAYER_WIN)),super_3pictures.TrendType.PLAYER]);results.push([super_3pictures.BetType.getResult(super_3pictures.BetType.BANKER_PAIR_PLUS,super_3pictures.BetType.getResult(super_3pictures.BetType.BANKER_WIN)),super_3pictures.TrendType.BANKER]);results.push([super_3pictures.BetType.getResult(super_3pictures.BetType.PLAYER_3P,super_3pictures.BetType.getResult(super_3pictures.BetType.PLAYER_WIN)),super_3pictures.TrendType.PLAYER]);results.push([super_3pictures.BetType.getResult(super_3pictures.BetType.BANKER_3P,super_3pictures.BetType.getResult(super_3pictures.BetType.BANKER_WIN)),super_3pictures.TrendType.BANKER]);this.tfs=[];var posX=12;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;for(var i=0;i<texts.length;i++){tf=game.GameUtils.createText(texts[i],style);tf.x=posX;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};GenLivePoolDetail.prototype.setData=function(data){this.clearData();var trendObj={};for(var i=0;i<data.content.cat.length;i++){trendObj[data.content.cat[i]]=data.content.amount[i];}
this.tfs[0].text=component.VComponentUtils.getNumInFormat(trendObj['P1']);this.tfs[1].text=component.VComponentUtils.getNumInFormat(trendObj['B1']);this.tfs[2].text=component.VComponentUtils.getNumInFormat(trendObj['BP']);this.tfs[3].text=component.VComponentUtils.getNumInFormat(trendObj['P2']);this.tfs[4].text=component.VComponentUtils.getNumInFormat(trendObj['B2']);this.tfs[5].text=component.VComponentUtils.getNumInFormat(trendObj['P3']);this.tfs[6].text=component.VComponentUtils.getNumInFormat(trendObj['B3']);};return GenLivePoolDetail;}(game.LivePoolDetail));super_3pictures.GenLivePoolDetail=GenLivePoolDetail;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var ResultsDetail=(function(_super){__extends(ResultsDetail,_super);function ResultsDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
ResultsDetail.prototype.initView=function(){_super.prototype.initView.call(this);};ResultsDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();this.resData=[];var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var posX=12;var posY=5;var dis=10;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tfCode=game.GameUtils.createText(game.GameText.CODE,style);tfCode.x=posX;tfCode.y=posY;content.addChild(tfCode);style.fill=game.InfoColor.BLUE;var tfPlayer=game.GameUtils.createText(game.GameText.PLAYER,style);tfPlayer.x=posX+85;tfPlayer.y=posY;content.addChild(tfPlayer);style.fill=game.InfoColor.RED;var tfBanker=game.GameUtils.createText(game.GameText.BANKER,style);tfBanker.x=posX+223;tfBanker.y=posY;content.addChild(tfBanker);var tfNum;style.fill=0x000000;posY+=tfCode.height*0.75+dis;var tfResult;var card1;var card2;var card3;this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);var resObj={};for(var i=0;i<15;i++){tfNum=game.GameUtils.createText('1-'+(i+1),style);tfNum.x=posX;tfNum.y=posY;content.addChild(tfNum);resObj={'tfNum':tfNum,'content':new Array()};this.resData[i]=resObj;for(var j=0;j<2;j++){card1=new PIXI.Sprite(PIXI.Texture.fromFrame('smallcard_A7.png'));card1.scale.x=(1/game.GameSettings.OPTIMIZE_FACTOR)*0.5;card1.scale.y=card1.scale.x;card1.anchor.y=0.5;card1.x=tfPlayer.x+138*j;card1.y=posY+tfNum.height*0.5+0.5;content.addChild(card1);card2=new PIXI.Sprite(PIXI.Texture.fromFrame('smallcard_A7.png'));card2.scale.x=(1/game.GameSettings.OPTIMIZE_FACTOR)*0.5;card2.scale.y=card2.scale.x;card2.anchor.y=0.5;card2.x=card1.x+card1.width+1;card2.y=card1.y;content.addChild(card2);card3=new PIXI.Sprite(PIXI.Texture.fromFrame('smallcard_A7.png'));card3.scale.x=(1/game.GameSettings.OPTIMIZE_FACTOR)*0.5;card3.scale.y=card3.scale.x;card3.anchor.y=0.5;card3.x=card2.x+card2.width+1;card3.y=card1.y;content.addChild(card3);tfResult=game.GameUtils.createText('000',style);tfResult.anchor.x=0.5;tfResult.x=card3.x+52;tfResult.y=posY;content.addChild(tfResult);resObj['content'][j]=new ResultData(tfResult,card1,card2,card3);}
if(i<14){this.bg.moveTo(10,tfNum.y+tfNum.height+5);this.bg.lineTo(this.viewW,tfNum.y+tfNum.height+5);}
posY+=tfNum.height+dis;}};ResultsDetail.prototype.setData=function(data){var sorted=game.GameUtils.sortData(data.content.value,'roundid','DESC');var resObj;var cardArr;for(var i=0;i<sorted.length;i++){cardArr=sorted[i].cards.split('#');resObj=this.resData[i];resObj['tfNum'].text=sorted[i].shoe+' - '+sorted[i].round;resObj['content'][0].setData(cardArr[0],sorted[i].result,true);resObj['content'][1].setData(cardArr[1],sorted[i].result,false);}};ResultsDetail.prototype.addData=function(data){var resObj;var resObj2;for(var i=this.resData.length-1;i>0;i--){resObj=this.resData[i];resObj2=this.resData[i-1];resObj['tfNum'].text=resObj2['tfNum'].text;resObj['content'][0].setData(resObj2['content'][0].cards,resObj2['content'][0].result,true);resObj['content'][1].setData(resObj2['content'][1].cards,resObj2['content'][1].result,false);}
var cardArr=data.cards.split('#');resObj=this.resData[0];resObj['tfNum'].text=data.shoe+' - '+data.round;resObj['content'][0].setData(cardArr[0],data.result,true);resObj['content'][1].setData(cardArr[1],data.result,false);};return ResultsDetail;}(game.BaseGameDetail));super_3pictures.ResultsDetail=ResultsDetail;var ResultData=(function(){function ResultData(tfResult,card1,card2,card3){this.tfResult=tfResult;this.card1=card1;this.card2=card2;this.card3=card3;}
ResultData.prototype.setData=function(cards,result,isPlayer){this.cards=cards;this.result=result;this.card1.texture=PIXI.Texture.fromFrame('smallcard_'+cards.substr(4,2)+'.png');this.card2.texture=PIXI.Texture.fromFrame('smallcard_'+cards.substr(2,2)+'.png');this.card3.texture=PIXI.Texture.fromFrame('smallcard_'+cards.substr(0,2)+'.png');var textColor=0x000000;if(result[super_3pictures.BetType.TIE-1]=='1'){textColor=game.InfoColor.GREEN;}
else if(isPlayer&&result[super_3pictures.BetType.PLAYER_WIN-1]=='1'){textColor=game.InfoColor.BLUE;}
else if(!isPlayer&&result[super_3pictures.BetType.BANKER_WIN-1]=='1'){textColor=game.InfoColor.RED;}
this.tfResult.style.fill=textColor;this.tfResult.text=this.getResultText(cards);};ResultData.prototype.getResultText=function(cards){var numPic=0;var card;var val=this.getCardVal(cards);for(var i=0;i<cards.length/2;i++){card=cards[i*2+1];if('JQK'.indexOf(card)>=0)
numPic++;}
if(numPic>0){if(numPic==3)
return game.GameText.threepictures_3p;else if(numPic==2)
return game.GameText.threepictures_2p+val;else
return game.GameText.threepictures_1p+val;}
return val.toString();};ResultData.prototype.getCardVal=function(cards){if(!cards)
return 0;var card;var val=0;for(var i=0;i<cards.length/2;i++){card=cards[i*2+1];val+='TJQK'.indexOf(card)>=0?0:(card=='A'?1:parseInt(card));}
val=val%10;return val;};ResultData.prototype.destroy=function(){this.cards='';this.result='';this.tfResult.destroy();this.card1.destroy();this.card2.destroy();this.card3.destroy();};return ResultData;}());})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var GameInfoCon=(function(_super){__extends(GameInfoCon,_super);function GameInfoCon(gameModel){return _super.call(this,gameModel)||this;}
GameInfoCon.prototype.initGameDetailCon=function(){this.gameDetailCon=new super_3pictures.GenGameDetailCon(this.gameModel);this.addChild(this.gameDetailCon);this.gameDetailCon.y=90;};return GameInfoCon;}(game.BaseGameInfoCon));super_3pictures.GameInfoCon=GameInfoCon;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var GameResult=(function(_super){__extends(GameResult,_super);function GameResult(gameModel){var _this=_super.call(this,gameModel)||this;_this.initPairPlusCon();_this.updateView();return _this;}
GameResult.prototype.initPairPlusCon=function(){this.pairPlusCon=new PIXI.Container();this.pairPlusCon.x=7.45;this.pairPlusCon.y=386;this.addChild(this.pairPlusCon);var bg=new PIXI.Graphics();bg.beginFill(0x0F0E0C,0.9);bg.drawRoundedRect(0,0,209,188,5);bg.endFill();bg.lineStyle(1,0x302C28);bg.moveTo(4,25);bg.lineTo(204.55,25);this.pairPlusCon.addChild(bg);var offWhite=0xF4E3C8;var yellow=0xFCC235;var style={fontFamily:"Arial",fontSize:11,fill:offWhite,align:'left'};var tf=new PIXI.Text(game.GameText.pair_plus_title.toUpperCase(),style);tf.x=4.75;tf.y=5.6;this.pairPlusCon.addChild(tf);style.fill=game.InfoColor.BLUE;var ptf=new PIXI.Text(game.GameText.PLAYER,style);ptf.x=104;ptf.y=5.6;this.pairPlusCon.addChild(ptf);style.fill=game.InfoColor.RED;var btf=new PIXI.Text(game.GameText.BANKER,style);btf.x=157;btf.y=5.6;this.pairPlusCon.addChild(btf);style.fontSize=9;this.pPairPlusCards=[];this.bPairPlusCards=[];var betTypes=[GameResult.STRAIGHT_FLUSH,GameResult.THREE_OF_KIND,GameResult.STRAIGHT,GameResult.FLUSH,GameResult.PAIRS];var texts=[game.GameText.pair_plus_straight_flush,game.GameText.pair_plus_kind,game.GameText.pair_plus_straight,game.GameText.pair_plus_flush,game.GameText.pair_plus_pair];var payouts=[game.GameText.pair_plus_straight_flush_payout,game.GameText.pair_plus_kind_payout,game.GameText.pair_plus_straight_payout,game.GameText.pair_plus_flush_payout,game.GameText.pair_plus_pair_payout];var card;for(var i=0;i<5;i++){style.fill=yellow;tf=new PIXI.Text(payouts[i],style);tf.x=4.4;tf.y=35.45+i*31.55;this.pairPlusCon.addChild(tf);if(tf.width>21){tf.scale.x=tf.scale.y=21/tf.width;}
style.fill=offWhite;tf=new PIXI.Text(texts[i],style);tf.x=28.5;tf.y=35.45+i*31.55;this.pairPlusCon.addChild(tf);if(tf.width>61){tf.scale.x=tf.scale.y=61/tf.width;}
card=new PairPlusCard(betTypes[i]);card.x=95.05;card.y=28.9+i*32.1;this.pairPlusCon.addChild(card);this.pPairPlusCards[i]=card;card=new PairPlusCard(betTypes[i]);card.x=149.25;card.y=28.9+i*32.1;this.pairPlusCon.addChild(card);this.bPairPlusCards[i]=card;}
var pCardX=this.pPairPlusCards[0].x;var bCardX=this.bPairPlusCards[0].x;var cw=this.pPairPlusCards[0].getConWidth();ptf.x=(pCardX+cw*0.5)-ptf.width*0.5;btf.x=(bCardX+cw*0.5)-btf.width*0.5;};GameResult.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:case game.ViewMode.MODE_7S:this.playerCardVal.x=299.35;this.playerCardVal.y=325.65;this.bankerCardVal.x=899.8;this.bankerCardVal.y=this.playerCardVal.y;this.result1Tf.y=360;this.result2Tf.y=380+30;this.player.x=398.8;this.player.y=321.65;this.banker.x=784.45;this.banker.y=320.7;this.player.visible=true;this.banker.visible=true;break;case game.ViewMode.MODE_3D:break;}};GameResult.prototype.showDisplay=function(value){this.player.visible=value;this.banker.visible=value;this.playerCardVal.visible=value;this.bankerCardVal.visible=value;};GameResult.prototype.showPairPlusCon=function(value){this.pairPlusCon.visible=value;};GameResult.prototype.updatePairPlus=function(pcards,bcards){for(var i=0;i<5;i++){this.pPairPlusCards[i].setDisplay(pcards);this.bPairPlusCards[i].setDisplay(bcards);}};GameResult.prototype.resetPairPlus=function(){if(this.pairPlusCon){this.pairPlusCon.visible=false;for(var i=0;i<5;i++){this.pPairPlusCards[i].reset();this.bPairPlusCards[i].reset();}}};GameResult.prototype.showResult=function(data){var results=data.content.result;var cards=data.content.cards;var arr=cards.split('#');if(results.charAt(super_3pictures.BetType.BANKER_WIN-1)=='1')
this.banker.gotoAndStop(1);if(results.charAt(super_3pictures.BetType.PLAYER_WIN-1)=='1')
this.player.gotoAndStop(1);if(results.charAt(super_3pictures.BetType.BANKER_WIN-1)=='1'){this.result1Tf.text=game.GameText.BANKER.toUpperCase();this.gameModel.soundMng.playSound(game.SoundMng.SOUND_3PICTURES,false,game.SoundMng.BANKER_WIN);}
else if(results.charAt(super_3pictures.BetType.PLAYER_WIN-1)=='1'){this.result1Tf.text=game.GameText.PLAYER.toUpperCase();this.gameModel.soundMng.playSound(game.SoundMng.SOUND_3PICTURES,false,game.SoundMng.PLAYER_WIN);}
else{this.result1Tf.text=game.GameText.TIE;this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.TIE);}};GameResult.prototype.setBankerCard2=function(cards){if(this.bankerCardVal)
this.bankerCardVal['tf'].text=this.getResultText(cards);};GameResult.prototype.setPlayerCard2=function(cards){if(this.playerCardVal)
this.playerCardVal['tf'].text=this.getResultText(cards);};GameResult.prototype.getResultText=function(cards){var numPic=0;var card;var val=this.getCardVal(cards);for(var i=0;i<cards.length/2;i++){card=cards[i*2+1];if('JQK'.indexOf(card)>=0)
numPic++;}
if(numPic>0){if(numPic==3)
return game.GameText.threepictures_3p;else if(numPic==2)
return game.GameText.threepictures_2p+val;else
return game.GameText.threepictures_1p+val;}
return val.toString();};GameResult.prototype.getCardVal=function(cards){if(!cards)
return 0;var card;var val=0;for(var i=0;i<cards.length/2;i++){card=cards[i*2+1];val+='TJQKB'.indexOf(card)>=0?0:(card=='A'?1:parseInt(card));}
val=val%10;return val;};GameResult.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};GameResult.prototype.reset=function(){_super.prototype.reset.call(this);};GameResult.STRAIGHT_FLUSH=1;GameResult.THREE_OF_KIND=2;GameResult.STRAIGHT=3;GameResult.FLUSH=4;GameResult.PAIRS=5;return GameResult;}(game.BaseGameResult));super_3pictures.GameResult=GameResult;var PairPlusCard=(function(_super){__extends(PairPlusCard,_super);function PairPlusCard(betType){var _this=_super.call(this)||this;_this.betType=betType;_this.initialize();return _this;}
PairPlusCard.prototype.getConWidth=function(){return 49.05;};PairPlusCard.prototype.initialize=function(){this.hl=new PIXI.Graphics();this.hl.lineStyle(1,0xFCC235,1);this.hl.drawRoundedRect(0,0,49.05,24,5);this.hl.endFill();this.hl.visible=false;this.addChild(this.hl);this.cards=[];var card;for(var i=0;i<3;i++){card=new PIXI.Sprite(PIXI.Texture.fromFrame('smallcard_A7.png'));card.scale.x=(1/game.GameSettings.OPTIMIZE_FACTOR)*0.45;card.scale.y=card.scale.x;card.x=3.1+i*15;card.y=2.6;card.visible=false;this.addChild(card);this.cards[i]=card;}};PairPlusCard.prototype.setDisplay=function(cards){if(cards.length==0)
return;this.reset();var cardStr="";for(var i=0;i<cards.length/2;i++){cardStr=cards.substr(i*2,2);if(cardStr!=""){this.cards[i].texture=PIXI.Texture.fromFrame('smallcard_'+cardStr+'.png');this.cards[i].visible=true;}}
this.checkPairs(cards);};PairPlusCard.prototype.checkPairs=function(cards){var betType=[];var sameSuit=cards.substr(0,1)==cards.substr(2,1)?true:false;var sameRank=cards.substr(1,1)==cards.substr(3,1)?true:false;var consec=this.isConsecutive(cards.substr(1,1),cards.substr(3,1));var pairs=cards.length>2?true:false;if(cards.length>4&&cards.substr(4,2)!='CB'){sameSuit=sameSuit&&cards.substr(2,1)==cards.substr(4,1)?true:false;sameRank=sameRank&&cards.substr(3,1)==cards.substr(5,1)?true:false;if(this.betType==super_3pictures.GameResult.STRAIGHT_FLUSH)
consec=this.isConsecutive(cards.substr(1,1),cards.substr(3,1),cards.substr(5,1));if(this.betType==super_3pictures.GameResult.STRAIGHT)
consec=this.isConsecutive(cards.substr(1,1),cards.substr(3,1),cards.substr(5,1));pairs=cards.substr(1,1)==cards.substr(3,1)?true:(cards.substr(1,1)==cards.substr(5,1)?true:(cards.substr(3,1)==cards.substr(5,1)?true:false));}
if(consec&&((!sameSuit&&cards.length>4)||cards.length==4||(cards.substr(5,1)=='B'&&cards.length>4)))
betType.push(super_3pictures.GameResult.STRAIGHT);if(sameSuit&&consec)
betType.push(super_3pictures.GameResult.STRAIGHT_FLUSH);if(sameRank)
betType.push(super_3pictures.GameResult.THREE_OF_KIND);if(sameSuit&&((!consec&&cards.length>4)||cards.length==4||(cards.substr(5,1)=='B'&&cards.length>4)))
betType.push(super_3pictures.GameResult.FLUSH);if(pairs)
betType.push(super_3pictures.GameResult.PAIRS);for(var i=0;i<this.cards.length;i++){this.cards[i].alpha=this.hasBetType(betType)?1:0.1;}
if(cards.length>2&&this.hasBetType(betType))
this.hl.visible=true;else
this.hl.visible=false;};PairPlusCard.prototype.hasBetType=function(betTypes){var result=false;for(var i=0;i<betTypes.length;i++){if(this.betType==betTypes[i]){result=true;break;}}
return result;};PairPlusCard.prototype.isConsecutive=function(card1,card2,card3){if(card3===void 0){card3='';}
var cardVal1=this.getCardVal(card1);var cardVal2=this.getCardVal(card2);var cardVal3=this.getCardVal(card3);var varied=cardVal1==cardVal2?false:(cardVal1==cardVal3?false:(cardVal2==cardVal3?false:true));if(varied){if(cardVal3==-1){if(cardVal1==1&&'KQ'.indexOf(card2)>=0)
return true;if(cardVal2==1&&'KQ'.indexOf(card1)>=0)
return true;return Math.abs(cardVal1-cardVal2)<=2?true:false;}
if(cardVal1==1&&'KQ'.indexOf(card2)>=0&&'KQ'.indexOf(card3)>=0&&Math.abs(cardVal2-cardVal3)==1)
return true;if(cardVal2==1&&'KQ'.indexOf(card1)>=0&&'KQ'.indexOf(card3)>=0&&Math.abs(cardVal1-cardVal3)==1)
return true;if(cardVal3==1&&'KQ'.indexOf(card1)>=0&&'KQ'.indexOf(card2)>=0&&Math.abs(cardVal1-cardVal2)==1)
return true;if(Math.abs(cardVal1-cardVal2)==1&&Math.abs(cardVal2-cardVal3)==1){return(cardVal1>cardVal2&&cardVal2>cardVal3)||(cardVal1<cardVal2&&cardVal2<cardVal3)?true:false;}
if(Math.abs(cardVal1-cardVal3)==1&&Math.abs(cardVal2-cardVal3)==1){return(cardVal1>cardVal3&&cardVal3>cardVal2)||(cardVal1<cardVal3&&cardVal3<cardVal2)?true:false;}
if(Math.abs(cardVal1-cardVal3)==1&&Math.abs(cardVal2-cardVal3)==2)
return true;}
return false;};PairPlusCard.prototype.getCardVal=function(card){if(card=='T')
return 10;if(card=='J')
return 11;if(card=='Q')
return 12;if(card=='K')
return 13;return card=='A'?1:(card==''?-1:parseInt(card));};PairPlusCard.prototype.reset=function(){this.hl.visible=false;for(var i=0;i<this.cards.length;i++){this.cards[i].alpha=1;this.cards[i].visible=false;}};PairPlusCard.prototype.clear=function(){this.removeChild(this.hl);component.VComponentUtils.deepClean(this.hl);while(this.cards.length){var card=this.cards.pop();this.removeChild(card);component.VComponentUtils.deepClean(card);}};return PairPlusCard;}(PIXI.Container));})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.destructor=function(){_super.prototype.destructor.call(this);clearTimeout(this.timeout);TweenMax.killTweensOf(this.flipCon);};GameView.prototype.initialize=function(){_super.prototype.initialize.call(this);this.bg.texture=this.gameModel.resources['table_bg_red'].texture;this.initTrends();this.chipControl=new super_3pictures.ChipControl(this.gameModel);this.chipControl.x=907;this.chipControl.y=591;this.chipControl.dissable();this.gameModel.chipControl=this.chipControl;this.betArea=new super_3pictures.BetArea(this.gameModel,this.betInput);this.betArea.dissable();this.addChild(this.betArea);this.initPairPlusInfo();this.betControl=new game.BetControl(this.gameModel);this.betControl.x=477;this.betControl.y=580;this.betControl.hide();this.cardControl=new super_3pictures.CardControl(this.gameModel);this.cardControl.x=332.1;this.cardControl.y=380.1;this.addChild(this.cardControl);this.addChild(this.betControl);this.addChild(this.chipControl);_super.prototype.initCountDown.call(this);this.countdown.x=640;this.countdown.y=383;this.gameResult=(new super_3pictures.GameResult(this.gameModel));this.addChild(this.gameResult);this.gameHUD=new super_3pictures.GameHUD(this.gameModel);this.addChild(this.gameHUD);this.initCardFlip();this.updateView();};GameView.prototype.initCardFlip=function(){var w=162*0.95,h=240*0.95;this.flipCon=new PIXI.Container();this.addChild(this.flipCon);var bg=new PIXI.Sprite(this.gameModel.resources['squeeze_overlay'].texture);this.flipCon.addChild(bg);bg.anchor.x=0.5;bg.anchor.y=0.5;bg.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;bg.scale.y=bg.scale.x;bg.x=game.GameSettings.CANVAS_WIDTH/2;bg.y=game.GameSettings.CANVAS_HEIGHT-bg.height/2;this.flipPage=new component.fage_flip.PageCon();this.flipPage.x=game.GameSettings.CANVAS_WIDTH/2-w*0.5;this.flipPage.y=bg.y-h*0.5;this.flipCon.addChild(this.flipPage);this.flipPage.initialize(w,h,this.gameModel.resources['C8'].texture,this.gameModel.resources['CB'].texture,this.onFlipCompleteHdl.bind(this));this.flipCon.visible=false;this.flipCon.alpha=0;this.actCountdown=new game.CountDown(2,0xE0C955);this.actCountdown.setTotal(0);this.addChild(this.actCountdown);this.actCountdown.hide();this.actCountdown.x=this.countdown.x;this.actCountdown.y=this.countdown.y;this.actCountdown.scale.x=this.countdown.scale.x;this.actCountdown.scale.y=this.countdown.scale.y;};GameView.prototype.initPairPlusInfo=function(){this.playerInfoBtn=new PIXI.Sprite(this.gameModel.resources['pair_plus_tips_btn'].texture);this.playerInfoBtn.anchor.x=0.5;this.playerInfoBtn.x=403;this.playerInfoBtn.y=491.5;this.playerInfoBtn.alpha=0.01;this.addChild(this.playerInfoBtn);this.bankerInfoBtn=new PIXI.Sprite(this.gameModel.resources['pair_plus_tips_btn'].texture);this.bankerInfoBtn.anchor.x=0.5;this.bankerInfoBtn.x=1035;this.bankerInfoBtn.y=471.95;this.bankerInfoBtn.alpha=0.01;this.addChild(this.bankerInfoBtn);this.playerInfoBtn.buttonMode=true;this.bankerInfoBtn.buttonMode=true;component.VMouseUtils.on(this.playerInfoBtn,component.VMouseUtils.MOUSE_OVER,this.onInfoBtnMouseOver,this);component.VMouseUtils.on(this.playerInfoBtn,component.VMouseUtils.MOUSE_OUT,this.onInfoBtnMouseOut,this);component.VMouseUtils.on(this.bankerInfoBtn,component.VMouseUtils.MOUSE_OVER,this.onInfoBtnMouseOver,this);component.VMouseUtils.on(this.bankerInfoBtn,component.VMouseUtils.MOUSE_OUT,this.onInfoBtnMouseOut,this);this.pairPlusInfo=new PIXI.Container();this.gameModel.overlay.addChild(this.pairPlusInfo);var bg=new PIXI.Sprite(this.gameModel.resources['pair_plus_tips_bg'].texture);bg.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;bg.scale.y=bg.scale.x;this.pairPlusInfo.addChild(bg);this.pairPlusInfo.visible=false;var tf1=game.GameUtils.createText(game.GameText.pair_plus_title.toUpperCase(),{fontFamily:"dinbold",fontSize:12,fontStyle:'bold',fill:0xF4E3C8,align:'left'});tf1.x=5;tf1.y=5;var tf2=game.GameUtils.createText(game.GameText.pair_plus_straight_flush,{fontFamily:"dinbold",fontSize:12,fontStyle:'bold',fill:0xF4E3C8,align:'left'});tf2.x=5;tf2.y=26;var tf3=game.GameUtils.createText(game.GameText.pair_plus_straight_flush_payout,{fontFamily:"dinbold",fontSize:12,fontStyle:'bold',fill:0xF4E3C8,align:'right'});tf3.anchor.x=1;tf3.x=197;tf3.y=26;var texts=[game.GameText.pair_plus_kind,game.GameText.pair_plus_straight,game.GameText.pair_plus_flush,game.GameText.pair_plus_pair];var payouts=[game.GameText.pair_plus_kind_payout,game.GameText.pair_plus_straight_payout,game.GameText.pair_plus_flush_payout,game.GameText.pair_plus_pair_payout];for(var i=0;i<texts.length;i++){tf2.text+='\n'+texts[i];tf3.text+='\n'+payouts[i];}
this.pairPlusInfo.addChild(tf1);this.pairPlusInfo.addChild(tf2);this.pairPlusInfo.addChild(tf3);};GameView.prototype.onFlipCompleteHdl=function(page){};GameView.prototype.enablePairInfo=function(value){this.playerInfoBtn.buttonMode=value;this.bankerInfoBtn.buttonMode=value;if(value==false)
this.pairPlusInfo.visible=false;};GameView.prototype.flipTimeout=function(firstCard){clearTimeout(this.timeout);TweenMax.to(this.flipCon,0.3,{alpha:0,onComplete:function(){this.hideFlipCon();}.bind(this)});if(firstCard==4){this.cardControl.showCard(4);this.timeout=setTimeout(function(){clearTimeout(this.timeout);this.cardControl.showCard(5);}.bind(this),1000);}
else{this.cardControl.showCard(5);this.timeout=setTimeout(function(){clearTimeout(this.timeout);this.cardControl.showCard(4);}.bind(this),1000);}};GameView.prototype.showFlipCard=function(cardPos,isAuto){this.flipPage.corner.visible=!isAuto;this.flipCon.visible=true;TweenMax.to(this.flipCon,0.5,{alpha:1});this.flipPage.visible=true;this.flipPage.reset();this.flipPage['cardIndex']=cardPos;var card=this.cardControl.cards[cardPos];this.flipPage.setFrontTexture(this.gameModel.resources[card['orgCardId']].texture);if(isAuto){this.flipPage.lock();clearTimeout(this.timeout);this.timeout=setTimeout(this.flipPage.autoFlip.bind(this.flipPage,2*1000),1000);}
else{this.flipPage.unlock();}};GameView.prototype.hideFlipCon=function(){TweenMax.killTweensOf(this.flipCon);this.flipCon.visible=false;this.flipCon.alpha=0;this.enablePairInfo(true);};GameView.prototype.onInfoBtnMouseOver=function(e){this.pairPlusInfo.visible=true;this.pairPlusInfo.x=e.target.x-this.pairPlusInfo.width*0.5;this.pairPlusInfo.y=e.target.y-this.pairPlusInfo.height-2;};GameView.prototype.onInfoBtnMouseOut=function(e){this.pairPlusInfo.visible=false;};GameView.prototype.activeSuperHand=function(isSupper){};GameView.prototype.updateVodView=function(){if(!this.vodInited)
return;var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.gameModel.VOD_WIDTH=511;this.gameModel.VOD_HEIGHT=311;this.gameModel.VOD_X=386;this.gameModel.VOD_Y=3;this.processVodLoadMediaData();break;case game.ViewMode.MODE_3D:this.gameModel.VOD_X=0;this.gameModel.VOD_Y=-140;this.gameModel.VOD_WIDTH=this.gameModel.GAME_WIDTH-2*this.gameModel.VOD_X;this.gameModel.VOD_HEIGHT=this.gameModel.GAME_HEIGHT;this.processVodLoadMediaData();break;}
this.sizeHandler();};GameView.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;this.updateVodView();switch(viewMode){case game.ViewMode.MODE_2D:this.chipControl.x=907;this.chipControl.y=591;this.betControl.x=477;this.betControl.y=580;this.cardControl.visible=true;this.cardControl.x=332.1;this.cardControl.y=380.1;this.bg.y=0;this.betArea.collectWinPos.x=138;this.betArea.collectWinPos.y=572;this.betInput.x=497+6;this.betInput.y=583;break;case game.ViewMode.MODE_3D:break;}};GameView.prototype.changeView=function(){this.updateView();this.gameResult.changeView();_super.prototype.changeView.call(this);};return GameView;}(game.BaseGameViewGroup1));super_3pictures.GameView=GameView;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var PearlIcon=(function(_super){__extends(PearlIcon,_super);function PearlIcon(){return _super.call(this)||this;}
PearlIcon.prototype.drawResult=function(result){this.clear();var results=result.split('');var win;if(results[super_3pictures.BetType.BANKER_WIN-1]=='1')
win=1;if(results[super_3pictures.BetType.PLAYER_WIN-1]=='1')
win=2;if(results[super_3pictures.BetType.TIE-1]=='1')
win=3;var iconType=iconType=win==3?"result_solid_2":(win==1?"result_solid_0":"result_solid_1");this.createImg(iconType);};return PearlIcon;}(game.PearlRoadIcon));super_3pictures.PearlIcon=PearlIcon;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var TrendIcon=(function(_super){__extends(TrendIcon,_super);function TrendIcon(){return _super.call(this)||this;}
TrendIcon.prototype.draw=function(info){this.info=info;var results=info.result.split('');var type=0;if(results[super_3pictures.BetType.BANKER_WIN-1]=='1')
type=1;if(results[super_3pictures.BetType.PLAYER_WIN-1]=='1')
type=2;if(results[super_3pictures.BetType.TIE-1]=='1')
type=3;this.clear();this.createImg(type==3?"":(type==2?"result_circle_1":"result_circle_0"));};return TrendIcon;}(game.TrendIcon));super_3pictures.TrendIcon=TrendIcon;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var IconCount=(function(_super){__extends(IconCount,_super);function IconCount(gameModel){return _super.call(this,gameModel)||this;}
IconCount.prototype.initialize=function(){this.tfs=[];this.icons=[];var results=[];results.push([super_3pictures.BetType.getResult(super_3pictures.BetType.BANKER_WIN),game.TrendType.NORMAL]);results.push([super_3pictures.BetType.getResult(super_3pictures.BetType.PLAYER_WIN),game.TrendType.NORMAL]);results.push([super_3pictures.BetType.getResult(super_3pictures.BetType.TIE),game.TrendType.NORMAL]);var dis=20;var posX=0;var icon;for(var i=0;i<results.length;i++){icon=new super_3pictures.PearlIcon().setData(16);icon.x=posX;posX+=dis;icon.setType(results[i][1]);icon.draw(new game.netdata.TrendsItem().setData(results[i][0]));var tf=game.GameUtils.createText('0',{fontFamily:"Arial",fontSize:12,fill:0xffffff,align:'center'});tf.anchor.x=0.5;tf.x=icon.x;tf.y=icon.y+8;this.tfs[i]=tf;this.icons[i]=icon;this.addChild(icon);this.addChild(tf);}
this.clear();};IconCount.prototype.clear=function(){for(var i=0;i<this.tfs.length;i++){this.tfs[i].text='0';}};IconCount.prototype.addTrend=function(item,isAnim){if(isAnim===void 0){isAnim=false;}
var ind=-1;if(item.result.charAt(super_3pictures.BetType.BANKER_WIN-1)=='1')
ind=0;if(item.result.charAt(super_3pictures.BetType.PLAYER_WIN-1)=='1')
ind=1;if(item.result.charAt(super_3pictures.BetType.TIE-1)=='1')
ind=2;if(ind>=0){this.tfs[ind].text=(parseInt(this.tfs[ind].text)+1).toString();if(isAnim)
this.icons[ind].blink();}
ind=-1;};return IconCount;}(game.IconCount));super_3pictures.IconCount=IconCount;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var Predict=(function(_super){__extends(Predict,_super);function Predict(gameModel){return _super.call(this,gameModel)||this;}
Predict.prototype.destructor=function(){_super.prototype.destructor.call(this);};Predict.prototype.initialize=function(){this.banker=new PIXI.Container();this.player=new PIXI.Container();this.gameModel.toolTip.addToolTip(this.banker,game.GameText.PREDICT.replace('{0}',game.GameText.BANKER));this.gameModel.toolTip.addToolTip(this.player,game.GameText.PREDICT.replace('{0}',game.GameText.PLAYER));this.player.y=45+2;this.addChild(this.banker);this.addChild(this.player);var btns=[this.banker,this.player];var results;var names=[game.GameText.BANKER.toUpperCase(),game.GameText.PLAYER.toUpperCase()];for(var i=0;i<btns.length;i++){var size=18;var posX=12;var posY=32;var dis=22;var bg=new PIXI.Graphics();bg.lineStyle(0,0,0);bg.beginFill(0xffffff);bg.drawRect(0,0,92,45);btns[i]['bg']=bg;btns[i].addChild(bg);results=[super_3pictures.BetType.getResult(super_3pictures.BetType.BANKER_WIN),super_3pictures.BetType.getResult(super_3pictures.BetType.PLAYER_WIN)];var icon1=new super_3pictures.PearlIcon().setData(size);icon1.setType(game.TrendType.NORMAL);icon1.draw(new game.netdata.TrendsItem().setData(results[i]));icon1.x=posX;icon1.y=posY;posX+=dis;btns[i].addChild(icon1);var icon2=new super_3pictures.TrendIcon().setData(size);icon2.setType(game.TrendType.NORMAL);icon2.draw(new game.netdata.TrendsItem().setData(results[i]));icon2.x=posX;icon2.y=posY;posX+=dis;btns[i].addChild(icon2);results=[game.BetType.getResult(game.BetType.BANKER),game.BetType.getResult(game.BetType.PLAYER)];var icon3=new game.SmallRoadIcon().setData(size);icon3.setType(game.TrendType.NORMAL);icon3.draw(new game.netdata.TrendsItem().setData(results[i]));icon3.x=posX;icon3.y=posY;posX+=dis;btns[i].addChild(icon3);var icon4=new game.CockRoachIcon().setData(size);icon4.setType(game.TrendType.NORMAL);icon4.draw(new game.netdata.TrendsItem().setData(results[i]));icon4.x=posX;icon4.y=posY;posX+=dis;btns[i].addChild(icon4);btns[i]['icon1']=icon1;btns[i]['icon2']=icon2;btns[i]['icon3']=icon3;btns[i]['icon4']=icon4;var tf=game.GameUtils.createText(names[i],{fontFamily:"dinbold",fontSize:16,fontStyle:'bold',fill:0x000000,align:'center'});tf.anchor.x=0.5;tf.x=bg.width*0.5;tf.y=0;btns[i].addChild(tf);btns[i]['tf']=tf;btns[i].buttonMode=true;component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_OVER,this.onOver,this);component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_OUT,this.onOut,this);}};Predict.prototype.onOver=function(e){e.target['bg'].alpha=0.8;};Predict.prototype.onOut=function(e){e.target['bg'].alpha=1;};;return Predict;}(game.Predict));super_3pictures.Predict=Predict;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var TrendContainer=(function(_super){__extends(TrendContainer,_super);function TrendContainer(){return _super!==null&&_super.apply(this,arguments)||this;}
TrendContainer.prototype.isTie=function(item){return item.result.charAt(super_3pictures.BetType.TIE-1)=='1';};TrendContainer.prototype.changeWinner=function(item1,item2){if(item1==null||item2==null)
return true;var resArr1=item1.result.split('');var resArr2=item2.result.split('');var result1=resArr1[super_3pictures.BetType.PLAYER_WIN-1].concat(resArr1[super_3pictures.BetType.BANKER_WIN-1]);var result2=resArr2[super_3pictures.BetType.PLAYER_WIN-1].concat(resArr2[super_3pictures.BetType.BANKER_WIN-1]);return result1!=result2;};return TrendContainer;}(game.TrendContainer));super_3pictures.TrendContainer=TrendContainer;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var TrendInfoPanel=(function(_super){__extends(TrendInfoPanel,_super);function TrendInfoPanel(gameModel){return _super.call(this,gameModel)||this;}
TrendInfoPanel.prototype.initView=function(){this.showTimoutId=0;this.bg=new PIXI.Graphics();this.bg.beginFill(0x000000);this.bg.drawRoundedRect(0,0,280,55,5);this.bg.endFill();this.addChild(this.bg);var divider=new PIXI.Graphics();divider.lineStyle(1,0xDDDDDD);divider.moveTo(140,4);divider.lineTo(140,52);this.addChild(divider);var style={fontFamily:"Arial",fontStyle:'bold',fontSize:18,fill:0xffffff,align:'center'};this.playerTf=game.GameUtils.createText('',style);this.playerTf.x=24;this.playerTf.y=27;this.playerTf.anchor.x=0.5;this.addChild(this.playerTf);this.bankerTf=game.GameUtils.createText('',style);this.bankerTf.x=255;this.bankerTf.y=27;this.bankerTf.anchor.x=0.5;this.addChild(this.bankerTf);var card;var cx=[50,79,108,144,173,202];for(var i=0;i<6;i++){var card=new PIXI.Sprite();card.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;card.scale.y=card.scale.x;card.x=cx[i];card.y=6;this.addChild(card);this.cards.push(card);}
this.initIcons();};TrendInfoPanel.prototype.initIcons=function(){this.playerIcon=new super_3pictures.PearlIcon();this.playerIcon.drawResult(game.BetType.getResult(super_3pictures.BetType.PLAYER_WIN));this.playerIcon.x=24;this.playerIcon.y=15;this.playerIcon.width=18;this.playerIcon.scale.y=this.playerIcon.scale.x;this.addChild(this.playerIcon);this.bankerIcon=new super_3pictures.PearlIcon();this.bankerIcon.drawResult(game.BetType.getResult(super_3pictures.BetType.BANKER_WIN));this.bankerIcon.x=255;this.bankerIcon.y=15;this.bankerIcon.width=18;this.bankerIcon.scale.y=this.bankerIcon.scale.x;this.addChild(this.bankerIcon);};TrendInfoPanel.prototype.onShow=function(target){trace("target.info.result = "+target.info.result);this.setData(target.info);var p=new PIXI.Point(target.x,target.y);p=target.parent.toGlobal(p);p=this.gameModel.overlay.toLocal(p);p.y+=target.size;if(p.x+this.width>this.gameModel.GAME_WIDTH-50)
p.x=this.gameModel.GAME_WIDTH-this.width-50;if(p.y+this.height>this.gameModel.GAME_HEIGHT)
p.y-=(this.height+target.size*2);this.x=p.x;this.y=p.y;};TrendInfoPanel.prototype.setData=function(data){var cards=data.cards;for(var i=0;i<this.cards.length;i++)
this.cards[i].visible=false;this.visible=true;var arr=cards.split('#');var key;var str="";for(var i=0;i<arr[0].length/2;i++)
str+=arr[0].substr(arr[0].length-i*2-2,2);arr[0]=str;for(var i=0;i<arr[0].length/2;i++){key='smallcard_'+arr[0].substr(i*2,2)+".png";this.cards[i].visible=true;this.cards[i].texture=PIXI.Texture.fromFrame(key);}
this.playerTf.text=this.getResultText(arr[0]);var c=0;for(var i=arr[1].length/2-1;i>=0;i--){key='smallcard_'+arr[1].substr(i*2,2)+".png";this.cards[3+c].visible=true;this.cards[3+c].texture=PIXI.Texture.fromFrame(key);c++;}
this.bankerTf.text=this.getResultText(arr[1]);var style={fontFamily:"Arial",fontStyle:'bold',fontSize:18,fill:0xffffff,align:'center'};if(data.result.charAt(super_3pictures.BetType.PLAYER_WIN-1)=='1'){this.bankerTf.style=style;style.fill=game.InfoColor.BLUE;this.playerTf.style=style;}
else if(data.result.charAt(super_3pictures.BetType.BANKER_WIN-1)=='1'){this.playerTf.style=style;style.fill=game.InfoColor.RED;this.bankerTf.style=style;}
else{style.fill=game.InfoColor.GREEN;this.playerTf.style=style;this.bankerTf.style=style;}};TrendInfoPanel.prototype.getResultText=function(cards){var numPic=0;var card;var val=this.getCardVal(cards);for(var i=0;i<cards.length/2;i++){card=cards[i*2+1];if('JQK'.indexOf(card)>=0)
numPic++;}
if(numPic>0){if(numPic==3)
return game.GameText.threepictures_3p;else if(numPic==2)
return game.GameText.threepictures_2p+val;else
return game.GameText.threepictures_1p+val;}
return val.toString();};TrendInfoPanel.prototype.getCardVal=function(cards){if(!cards)
return 0;var card;var val=0;for(var i=0;i<cards.length/2;i++){card=cards[i*2+1];val+='TJQKB'.indexOf(card)>=0?0:(card=='A'?1:parseInt(card));}
val=val%10;return val;};return TrendInfoPanel;}(game.TrendInfoPanel));super_3pictures.TrendInfoPanel=TrendInfoPanel;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var TrendType=(function(){function TrendType(){}
TrendType.NORMAL=0;TrendType.BANKER=1;TrendType.PLAYER=2;return TrendType;}());super_3pictures.TrendType=TrendType;})(super_3pictures||(super_3pictures={}));var super_3pictures;(function(super_3pictures){var TrendMng=(function(_super){__extends(TrendMng,_super);function TrendMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
TrendMng.prototype.updateTrends=function(tableId,values){if(tableId!=this.gameModel.TABLE_ID)
return;if(!this.trendDataMap[tableId])
this.trendDataMap[tableId]=new game.TrendData();var trends=this.extractTrends(values);this.updateTrendsGame(tableId,trends);};TrendMng.prototype.extractTrends=function(values){var start=0;for(var i=0;i<values.length;i++){if(values[i].round==1){start=i;break;}}
return values.slice(start,values.length);};TrendMng.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:var maxView=new PIXI.Rectangle(366,622,859,140);this.normalTrend.setSmallView(new PIXI.Rectangle(maxView.x,maxView.y,765,92));this.normalTrend.setMaxView(maxView);this.bigEyeTrend.setSmallView(new PIXI.Rectangle(maxView.x,716,285,46));this.bigEyeTrend.setMaxView(maxView);this.smallTrend.setSmallView(new PIXI.Rectangle(653,this.bigEyeTrend.y,285,46));this.smallTrend.setMaxView(maxView);this.cockRoachTrend.setSmallView(new PIXI.Rectangle(940,this.bigEyeTrend.y,285,46));this.cockRoachTrend.setMaxView(maxView);this.pearlRoadTrend.setSmallView(new PIXI.Rectangle(25,maxView.y,300,92));this.pearlRoadTrend.setMaxView(maxView);this.pearViewBtn.x=4;this.pearViewBtn.y=623;this.iconCount.x=25+8;this.iconCount.y=735+8;this.predict.x=1133;this.predict.y=maxView.y;this.predict.banker.x=0;this.predict.banker.y=0;this.predict.player.x=0;this.predict.player.y=47;this.bg.clear();this.bg.lineStyle(1,0x26231E);this.bg.beginFill(0x26231E);this.bg.drawRect(0,0,this.gameModel.GAME_WIDTH,151);this.bg.endFill();this.bg.y=617;this.tableBtnCon.x=328;this.tableBtnCon.y=622;this.iconCount.scale.x=1;this.iconCount.scale.y=this.iconCount.scale.x;break;case game.ViewMode.MODE_3D:break;}};TrendMng.prototype.getBigBoardName=function(){return game.GameSettings.TABLE_INFOS[this.activeTableId].hint.toUpperCase();};TrendMng.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};TrendMng.prototype.initIconCount=function(){this.iconCount=new super_3pictures.IconCount(this.gameModel);};TrendMng.prototype.initNormmalContainer=function(){this.normalTrend=new super_3pictures.TrendContainer(this.gameModel,super_3pictures.TrendIcon,765,92,6,game.GameSettings.TABLE_INFOS[this.gameModel.TABLE_ID].hint.toUpperCase(),true);};TrendMng.prototype.initPearlRoad=function(){this.pearlRoadTrend=new game.PearlRoad(this.gameModel,super_3pictures.PearlIcon,300,92,6,game.GameText.PEARL_ROAD.toUpperCase(),true);};TrendMng.prototype.initPredict=function(){this.predict=new super_3pictures.Predict(this.gameModel);};TrendMng.prototype.initView=function(){this.pearlViewlTypes=[game.TrendType.NORMAL];_super.prototype.initView.call(this);this.predictBankerObj=new game.netdata.TrendsItem().setData(super_3pictures.BetType.getResult(super_3pictures.BetType.BANKER_WIN));this.predictPlayerObj=new game.netdata.TrendsItem().setData(super_3pictures.BetType.getResult(super_3pictures.BetType.PLAYER_WIN));};TrendMng.prototype.initTrendInfoPanel=function(){this.trendInfoPanel=new super_3pictures.TrendInfoPanel(this.gameModel);};TrendMng.prototype.onTableBtn=function(e){};TrendMng.prototype.superOnTableBtn=function(e){_super.prototype.onTableBtn.call(this,e);};TrendMng.prototype.onPredict=function(e){this.predictBankerObj.setData(super_3pictures.BetType.getResult(super_3pictures.BetType.BANKER_WIN));this.predictPlayerObj.setData(super_3pictures.BetType.getResult(super_3pictures.BetType.PLAYER_WIN));var item=e.target==this.predict.banker?this.predictBankerObj:this.predictPlayerObj;this.clear();this.updateTrends(this.gameModel.TABLE_ID,this.trendDataMap[this.gameModel.TABLE_ID].trendArr);this.addTrendGame(this.activeTableId,item,true);};TrendMng.prototype.addTrendGame=function(tableId,item,isDummy){if(isDummy===void 0){isDummy=false;}
this.addMainBoardItemGame(tableId,item,isDummy);this.normalTrend.addTrend(item,true,isDummy);this.pearlRoadTrend.addTrend(item,true,isDummy);this.bigEyeTrend.updateScroll();this.smallTrend.updateScroll();this.cockRoachTrend.updateScroll();if(item.result.charAt(super_3pictures.BetType.TIE-1)!='1')
this.blinkIcons(isDummy);if(!isDummy){this.iconCount.addTrend(item,true);}};TrendMng.prototype.isTie=function(item){return item.result.charAt(super_3pictures.BetType.TIE-1)=='1';};TrendMng.prototype.getWin=function(item){var v=0;if(item.result.charAt(super_3pictures.BetType.BANKER_WIN-1)=='1')
v=1;else if(item.result.charAt(super_3pictures.BetType.PLAYER_WIN-1)=='1')
v=2;return v;};return TrendMng;}(game.BaseTrendMng));super_3pictures.TrendMng=TrendMng;})(super_3pictures||(super_3pictures={}));var super_fantan;(function(super_fantan){var Game=(function(_super){__extends(Game,_super);function Game(){return _super.call(this)||this;}
Game.prototype.destructor=function(){_super.prototype.destructor.call(this);for(var i=0;i<this.actionCountdownDelays.length;i++)
clearTimeout(this.actionCountdownDelays[i]);};Game.prototype.initialize=function(tableId,resources){this.isShowingSqueeze=false;this.videoDelay=700;this.dealCardDelay1=1800+this.videoDelay;this.dealCardDelay2=0+this.videoDelay;this.actionCountdownDelays=[];this.dealCardDelay=this.dealCardDelay1;this.resetGameResultDelay=1500;this.clearTimeoutIds=[];this.dealTimeoutIds=[];this.gameModel.GAME_ID=game.GameID.SUPER_FANTAN;_super.prototype.initialize.call(this,tableId,resources);var str="A1 11101,A2 11102,G2 11103,G1 11104,TP 11105,F1 11106,F2 11106,F3 11106,F4 11106,N12 11107,N13 11107,N14 11107,N21 11107,N23 11107,N24 11107,N31 11107,N32 11107,N34 11107,N41 11107,N42 11107,N43 11107,K12 11108,K14 11108,K23 11108,K34 11108";var arr=str.split(',');var betLimitIdMap={};for(var i=0;i<arr.length;i++){var arr2=arr[i].split(' ');betLimitIdMap[arr2[0]]=arr2[1];}
this.gameModel.betLimitIdMap=betLimitIdMap;return this;};Game.prototype.onWSMessageHdl=function(e){_super.prototype.onWSMessageHdl.call(this,e);var data=e.data;if(data.content&&data.content.table&&data.content.table!=this.gameModel.TABLE_ID)
return;switch(data.kind){case game.GameCMD.ACTION_DOWN:this.actionCountdownDelays.push(setTimeout(this.onActionDown.bind(this,data),this.videoDelay));break;}};Game.prototype.onActionDown=function(data){var tick=data.content.tick;var time=tick;var actCountdown=this.gameView.actCountdown;if(actCountdown.getTotal()===0){actCountdown.setTotal(time);if(!this.isShowingSqueeze){this.gameView.showSqueeze();this.isShowingSqueeze=true;}}
actCountdown.setTime(tick>0?time:0);if(time==0){actCountdown.hide();actCountdown.setTotal(0);this.gameView.cardControl.showCard(4);this.gameView.cardControl.showCard(5);this.gameView.flipTimeout();this.isShowingSqueeze=false;for(var i=0;i<this.actionCountdownDelays.length;i++)
clearTimeout(this.actionCountdownDelays[i]);}};Game.prototype.onBetCountDownComplete=function(){_super.prototype.onBetCountDownComplete.call(this);this.gameView.showStatus(game.GameText.WAIT_CARD_DEAL);};Game.prototype.initView=function(){this.gameView=new super_fantan.GameView(this.gameModel);this.addChild(this.gameView);};Game.prototype.onHistory15=function(data){this.gameView.gameHUD.gameInfoCon.gameDetailCon.resultsDetail.setData(data);if(data.content.value[0].round===this.getLastRound()){this.gameView.cardControl.showCard(4);this.gameView.cardControl.showCard(5);this.gameView.hideSqueeze();}};Game.prototype.onCommitSucceedAll=function(data){_super.prototype.onCommitSucceedAll.call(this,data);if(data.content.table!==this.gameModel.TABLE_ID)
return;this.gameView.gameHUD.gameInfoCon.gameDetailCon.resultsDetail.addData(data.content);this.gameView.cardControl.showCard(4);this.gameView.cardControl.showCard(5);this.gameView.hideSqueeze();this.gameView.onCommit(data.content);};Game.prototype.onStartBet=function(data){_super.prototype.onStartBet.call(this,data);this.gameView.onStartBet();};Game.prototype.onDeal=function(dealRes){if(dealRes.content.pos===6){this.dealCardDelay=this.dealCardDelay2;_super.prototype.onDeal.call(this,dealRes);this.dealCardDelay=this.dealCardDelay1;}
else
_super.prototype.onDeal.call(this,dealRes);};return Game;}(game.BaseGame));super_fantan.Game=Game;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var ResultType=(function(){function ResultType(){}
ResultType.getResult=function(type,src){if(src===void 0){src='0000000000000000000000000';}
return src.substring(0,type-1)+'1'+src.substring(type,src.length);};ResultType.getTypeById=function(id){switch(id){case'A1':return ResultType.ODD;case'A2':return ResultType.EVEN;case'F1':return ResultType.FAN1;case'F2':return ResultType.FAN2;case'F3':return ResultType.FAN3;case'F4':return ResultType.FAN4;case'N12':return ResultType.ONENIM2;case'N13':return ResultType.ONENIM3;case'N14':return ResultType.ONENIM4;case'N21':return ResultType.TWONIM1;case'N23':return ResultType.TWONIM3;case'N24':return ResultType.TWONIM4;case'N31':return ResultType.THREENIM1;case'N32':return ResultType.THREENIM2;case'N34':return ResultType.THREENIM4;case'N41':return ResultType.FOURNIM1;case'N42':return ResultType.FOURNIM2;case'N43':return ResultType.FOURNIM3;case'K12':return ResultType.KWOK1AND2;case'K14':return ResultType.KWOK1AND4;case'K23':return ResultType.KWOK2AND3;case'K34':return ResultType.KWOK3AND4;case'G1':return ResultType.SMALL;case'G2':return ResultType.BIG;case'TP':return ResultType.TIE;default:return-1;}};ResultType.ODD=1;ResultType.EVEN=2;ResultType.FAN1=3;ResultType.FAN2=4;ResultType.FAN3=5;ResultType.FAN4=6;ResultType.ONENIM2=7;ResultType.ONENIM3=8;ResultType.ONENIM4=9;ResultType.TWONIM1=10;ResultType.TWONIM3=11;ResultType.TWONIM4=12;ResultType.THREENIM1=13;ResultType.THREENIM2=14;ResultType.THREENIM4=15;ResultType.FOURNIM1=16;ResultType.FOURNIM2=17;ResultType.FOURNIM3=18;ResultType.KWOK1AND2=19;ResultType.KWOK1AND4=20;ResultType.KWOK2AND3=21;ResultType.KWOK3AND4=22;ResultType.SMALL=23;ResultType.BIG=24;ResultType.TIE=25;return ResultType;}());super_fantan.ResultType=ResultType;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var SFBetType=(function(){function SFBetType(){}
SFBetType.getResult=function(type,src){if(src===void 0){src='0000000000000000000000000';}
return src.substring(0,type-1)+'1'+src.substring(type,src.length);};SFBetType.getName=function(type){switch(type){case'F1':return game.GameText.fan1;case'F2':return game.GameText.fan2;case'F3':return game.GameText.fan3;case'F4':return game.GameText.fan4;case'G1':return game.GameText.SMALL;case'TP':return game.GameText.superfantan_total_point;case'G2':return game.GameText.BIG;case'A1':return game.GameText.ODD;case'A2':return game.GameText.EVEN;case'N12':return game.GameText.oneNim2;case'N13':return game.GameText.oneNim3;case'N14':return game.GameText.oneNim4;case'N21':return game.GameText.twoNim1;case'N23':return game.GameText.twoNim3;case'N24':return game.GameText.twoNim4;case'N31':return game.GameText.threeNim1;case'N32':return game.GameText.threeNim2;case'N34':return game.GameText.threeNim4;case'N41':return game.GameText.fourNim1;case'N42':return game.GameText.fourNim2;case'N43':return game.GameText.fourNim3;case'K12':return game.GameText.kwok1And2;case'K14':return game.GameText.kwok1And4;case'K23':return game.GameText.kwok2And3;case'K34':return game.GameText.kwok3And4;}};SFBetType.getTypeById=function(id){switch(id){case'F1':return SFBetType.FAN1;case'F2':return SFBetType.FAN2;case'F3':return SFBetType.FAN3;case'F4':return SFBetType.FAN4;case'G1':return SFBetType.SMALL;case'G2':return SFBetType.BIG;case'A1':return SFBetType.ODD;case'A2':return SFBetType.EVEN;default:return-1;}};SFBetType.FAN1=1;SFBetType.FAN2=2;SFBetType.FAN3=3;SFBetType.FAN4=4;SFBetType.SMALL=5;SFBetType.BIG=6;SFBetType.ODD=7;SFBetType.EVEN=8;return SFBetType;}());super_fantan.SFBetType=SFBetType;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var SFCards=(function(){function SFCards(str){this.str=str;this.total=this.getCardVal(this.str.split('#').join(''));this.total_player=this.getCardVal(this.str.split('#')[0]);this.total_banker=this.getCardVal(this.str.split('#')[1]);}
SFCards.prototype.getCardVal=function(cards){if(!cards)
return 0;var card;var val=0;for(var i=0;i<cards.length/2;i++){card=cards[i*2+1];if(card=='B')
val+=0;else
val+='TJQK'.indexOf(card)>=0?10+'TJQK'.indexOf(card):(card=='A'?1:parseInt(card));}
return val;};return SFCards;}());super_fantan.SFCards=SFCards;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var SFResult=(function(){function SFResult(str){this.str=str;this.isOdd=this.wonOn(super_fantan.ResultType.ODD);this.isEven=this.wonOn(super_fantan.ResultType.EVEN);this.isFan1=this.wonOn(super_fantan.ResultType.FAN1);this.isFan2=this.wonOn(super_fantan.ResultType.FAN2);this.isFan3=this.wonOn(super_fantan.ResultType.FAN3);this.isFan4=this.wonOn(super_fantan.ResultType.FAN4);this.isOneNim2=this.wonOn(super_fantan.ResultType.ONENIM2);this.isOneNim3=this.wonOn(super_fantan.ResultType.ONENIM3);this.isOneNim4=this.wonOn(super_fantan.ResultType.ONENIM4);this.isTwoNim1=this.wonOn(super_fantan.ResultType.TWONIM1);this.isTwoNim3=this.wonOn(super_fantan.ResultType.TWONIM3);this.isTwoNim4=this.wonOn(super_fantan.ResultType.TWONIM4);this.isThreeNim1=this.wonOn(super_fantan.ResultType.THREENIM1);this.isThreeNim2=this.wonOn(super_fantan.ResultType.THREENIM2);this.isThreeNim4=this.wonOn(super_fantan.ResultType.THREENIM4);this.isFourNim1=this.wonOn(super_fantan.ResultType.FOURNIM1);this.isFourNim2=this.wonOn(super_fantan.ResultType.FOURNIM2);this.isFourNim3=this.wonOn(super_fantan.ResultType.FOURNIM3);this.isKwok1And2=this.wonOn(super_fantan.ResultType.KWOK1AND2);this.isKwok1And4=this.wonOn(super_fantan.ResultType.KWOK1AND4);this.isKwok2And3=this.wonOn(super_fantan.ResultType.KWOK2AND3);this.isKwok3And4=this.wonOn(super_fantan.ResultType.KWOK3AND4);this.isSmall=this.wonOn(super_fantan.ResultType.SMALL);this.isBig=this.wonOn(super_fantan.ResultType.BIG);this.isTie=this.wonOn(super_fantan.ResultType.TIE);if(this.isFan1)
this.fan=1;else if(this.isFan2)
this.fan=2;else if(this.isFan3)
this.fan=3;else if(this.isFan4)
this.fan=4;}
SFResult.prototype.wonOn=function(resultIndex){return this.str.charAt(resultIndex-1)==='1';};return SFResult;}());super_fantan.SFResult=SFResult;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){;var BetArea=(function(_super){__extends(BetArea,_super);function BetArea(gameModel,input){var _this=_super.call(this,gameModel,input)||this;_this.markerPos=[{x:698.45,y:595.15},{x:874.6,y:512.15},{x:698.45,y:491.9},{x:402.2,y:512.15}];_this.updateDummyBetPlaces();return _this;}
BetArea.prototype.initSettings=function(){_super.prototype.initSettings.call(this);this.initBetSettings();};BetArea.prototype.initHighLight=function(){_super.prototype.initHighLight.call(this);var betHit;var hl;for(var i=0;i<this.hitArr.length;i++){betHit=this.hitArr[i];if(this.isDummy(betHit.id)){hl=betHit.highlight;switch(betHit.id){case"T1":betHit.highlight=[hl,this.betMap["F2"].highlight,this.betMap["F3"].highlight,this.betMap["F4"].highlight];break;case"T2":betHit.highlight=[hl,this.betMap["F1"].highlight,this.betMap["F3"].highlight,this.betMap["F4"].highlight];break;case"T3":betHit.highlight=[hl,this.betMap["F1"].highlight,this.betMap["F2"].highlight,this.betMap["F4"].highlight];break;case"T4":betHit.highlight=[hl,this.betMap["F1"].highlight,this.betMap["F2"].highlight,this.betMap["F3"].highlight];break;}}
else if(this.isFan(betHit.id)){this.fanHighlightCon.addChild(betHit.highlight);this.fanHighlightCon.addChild(betHit.winHL);}}};BetArea.prototype.initBetSettings=function(){var settings=[{id:"A1",x:454.2,y:520.95},{id:"A2",x:645.75,y:520.95},{id:"N34",x:384.15,y:426.95},{id:"N31",x:556.1,y:426.95},{id:"N32",x:726.55,y:426.95},{id:"N23",x:905.85,y:479.3},{id:"N24",x:913.55,y:523.3},{id:"N21",x:921.55,y:568.85},{id:"N12",x:738.1,y:622.95},{id:"N13",x:545,y:622.95},{id:"N14",x:350.5,y:622.95},{id:"N41",x:209.25,y:568.85},{id:"N42",x:220.75,y:525.3},{id:"N43",x:232.85,y:479.3},{id:"K34",x:244.5,y:426.95},{id:"K23",x:896.65,y:426.65},{id:"K12",x:929.35,y:613.35},{id:"K14",x:195.35,y:613.7},{id:"G1",x:340.3,y:664.7},{id:"TP",x:541.65,y:664.7},{id:"G2",x:740.55,y:664.7},{id:"F3",x:389.85,y:468.85},{id:"F2",x:830.65,y:472.2},{id:"F1",x:365.4,y:571.35},{id:"F4",x:358.05,y:472.2},{id:"T3",x:129.95,y:426.95},{id:"T2",x:1031.4,y:426.95},{id:"T4",x:1056.15,y:519.5},{id:"T1",x:99.45,y:519.5}];var stackSettings=[{id:"A1",x:545.15,y:544.1},{id:"A2",x:736.75,y:544.1},{id:"N34",x:468.95,y:445.1},{id:"N31",x:639.95,y:445.1},{id:"N32",x:811.35,y:445.1},{id:"N23",x:977.3,y:498.4},{id:"N24",x:987.15,y:542.4},{id:"N21",x:997.4,y:587.95},{id:"N12",x:833.9,y:641.1},{id:"N13",x:640.1,y:641.1},{id:"N14",x:446.35,y:641.1},{id:"N41",x:282.85,y:587.95},{id:"N42",x:292.6,y:544.4},{id:"N43",x:302.9,y:498.4},{id:"K34",x:313.6,y:450.1},{id:"K23",x:966.55,y:449.8},{id:"K12",x:1008.45,y:636.5},{id:"K14",x:271.7,y:636.8},{id:"G1",x:440,y:691.85},{id:"TP",x:640.1,y:691.85},{id:"G2",x:840.25,y:691.85},{id:"F3",x:583.95,y:492.5},{id:"F2",x:876.9,y:543.1},{id:"F1",x:583.95,y:594.95},{id:"F4",x:402.95,y:543.1}];for(var i=0;i<settings.length;i++){settings[i].isDummy=this.isDummy(settings[i].id);settings[i].url="SF_"+settings[i].id+".png";if(!this.isDummy(settings[i].id)){settings[i].betplaceX=stackSettings[i].x;settings[i].betplaceY=stackSettings[i].y;}}
this.bet2DSetting=settings;};BetArea.prototype.initJson=function(){this.updateJson("assets/super_fantan/2d/bet_area.json");};BetArea.prototype.initLiveChip=function(settings){if(settings===void 0){settings=null;}};BetArea.prototype.initFanPayouts=function(){this.fanPayoutsContainer=new PIXI.Container();this.fanPayoutsContainer.x=366;this.fanPayoutsContainer.y=499;this.addChild(this.fanPayoutsContainer);var fanPayoutPos=[{x:251,y:105},{x:488,y:64},{x:250,y:2},{x:9,y:64}];var fanPayout;for(var i=0;i<4;i++){fanPayout=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('fan'+(i+1)+'_payout1.png'),PIXI.Texture.fromFrame('fan'+(i+1)+'_payout2.png')]);fanPayout.x=fanPayoutPos[i].x;fanPayout.y=fanPayoutPos[i].y;this.fanPayoutsContainer.addChild(fanPayout);}};BetArea.prototype.initMarker=function(){this.marker=new PIXI.Sprite(this.gameModel.resources['fantan_marker'].texture);this.marker.anchor.set(0.5,0.6);this.marker.visible=false;this.addChild(this.marker);};BetArea.prototype.initBetCon=function(settings){if(settings===void 0){settings=null;}
this.fanHighlightCon=new PIXI.Container();this.addChild(this.fanHighlightCon);this.initFanPayouts();this.initMarker();_super.prototype.initBetCon.call(this,this.bet2DSetting);for(var i=0;i<this.hitArr.length;i++){var betHit=this.hitArr[i];if(this.isDummy(betHit.id)){switch(betHit.id){case"T1":betHit.setting.referBetplaces=["F2","F3","F4"];break;case"T2":betHit.setting.referBetplaces=["F1","F3","F4"];break;case"T3":betHit.setting.referBetplaces=["F1","F2","F4"];break;case"T4":betHit.setting.referBetplaces=["F1","F2","F3"];break;}}}};BetArea.prototype.updateText=function(){var betAreaText=this.betAreaText;betAreaText.texture=this.gameModel.resources['bet_area_text'].texture;betAreaText.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;betAreaText.scale.y=betAreaText.scale.x;betAreaText.x=99.5;betAreaText.y=426.5;};BetArea.prototype.changeView=function(){this.updateJson("assets/super_fantan/2d/bet_area.json");_super.prototype.updateBetConSettings.call(this,this.bet2DSetting);this.updateText();_super.prototype.changeView.call(this);};BetArea.prototype.getBetName=function(betType){return super_fantan.SFBetType.getName(betType);};BetArea.prototype.getBetTypeFromId=function(id){return id;};BetArea.prototype.getBetPlaceWithType=function(betType,seatId){if(seatId===void 0){seatId=0;}
return this.betPlaceMap[betType];};BetArea.prototype.isDummy=function(id){return id==="T1"||id==="T2"||id==="T3"||id==="T4";};BetArea.prototype.isFan=function(id){return id==="F1"||id==="F2"||id==="F3"||id==="F4";};BetArea.prototype.updateFanPayouts=function(frame){for(var i=0;i<4;i++){this.fanPayoutsContainer.getChildAt(i).gotoAndStop(frame);}};BetArea.prototype.resetLosingFanPayouts=function(winningFan){for(var i=0;i<4;i++){if(i!==winningFan-1)
this.fanPayoutsContainer.getChildAt(i).gotoAndStop(0);}};BetArea.prototype.showMarker=function(fan){this.marker.visible=true;this.marker.x=this.markerPos[fan-1].x;this.marker.y=this.markerPos[fan-1].y;};BetArea.prototype.hideMarker=function(){this.marker.visible=false;};BetArea.prototype.showResult=function(data){this.hideHighlight();var result=new super_fantan.SFResult(data.content.result);var hit;for(var i=0;i<this.hitArr.length;i++){hit=this.hitArr[i];if(!result.wonOn(super_fantan.ResultType.getTypeById(hit.betType))||this.isDummy(hit.betType))
continue;hit['winHL'].visible=true;}};return BetArea;}(game.BaseBetArea));super_fantan.BetArea=BetArea;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var CardControl=(function(_super){__extends(CardControl,_super);function CardControl(gameModel){return _super.call(this,gameModel)||this;}
CardControl.prototype.initialize=function(){this.cardConfigs=new Array();var c0=new game.CardConfig();c0.x=505;c0.y=315;c0.vertices=[10,5,47,5,44,39,5,39];this.cardConfigs[0]=c0;var c1=new game.CardConfig();c1.x=545;c1.y=315;c1.vertices=[8,5,45,5,43,39,5,39];this.cardConfigs[2]=c1;var c2=new game.CardConfig();c2.x=584;c2.y=315;c2.vertices=[7,5,44,5,44,39,5,39];this.cardConfigs[4]=c2;var c3=new game.CardConfig();c3.x=648;c3.y=315;c3.vertices=[5,5,42,5,44,39,5,39];this.cardConfigs[1]=c3;var c4=new game.CardConfig();c4.x=686;c4.y=315;c4.vertices=[5,5,42,5,45,39,7,39];this.cardConfigs[3]=c4;var c5=new game.CardConfig();c5.x=724;c5.y=315;c5.vertices=[5,5,42,5,47,39,8,39];this.cardConfigs[5]=c5;c0.uvs=[0,0,1,0,1,1,0,1];c1.uvs=c2.uvs=c3.uvs=c4.uvs=c5.uvs=c0.uvs.slice();for(var i=0;i<this.cardConfigs.length;i++){this.cardConfigs[i].vertices=new Float32Array(this.cardConfigs[i].vertices);this.cardConfigs[i].uvs=new Float32Array(this.cardConfigs[i].uvs);}
this.cards=[null,null,null,null,null,null];this.initText();};CardControl.prototype.initText=function(){var cardsPositionX=[529.75,567.5,608,673,712.5,753.5];this.cardValues=[];for(var j=0;j<6;j++){var text=game.GameUtils.createText('',{fontFamily:component.VComponentUtils.getFont(),fontSize:15,fontStyle:'',fill:0xffffff,align:'center'});text.x=cardsPositionX[j];text.y=359;text.scale.set(0.5);text.anchor.x=0.5;this.cardValues.push(text);this.addChild(text);}
this.resetText();};CardControl.prototype.resetText=function(){for(var i=0;i<this.cardValues.length;i++){this.cardValues[i].text='';}};CardControl.prototype.dealCard=function(cardId,cardPos,animated){if(animated===void 0){animated=true;}
if(cardPos>=4){_super.prototype.dealCard.call(this,cardId,cardPos,animated,true);}
else{_super.prototype.dealCard.call(this,cardId,cardPos,animated);this.setCardText(cardPos,cardId);}
this.updateCardVals();};CardControl.prototype.clearCard=function(cardPos){_super.prototype.clearCard.call(this,cardPos);this.updateCardVals();};CardControl.prototype.clearAllCards=function(){_super.prototype.clearAllCards.call(this);this.updateCardVals();this.resetText();};CardControl.prototype.updateCardVals=function(){var gameResult=this.gameModel.gameView.gameResult;var pcards="";var bcards="";for(var i=0;i<this.cards.length;i++){if(!this.cards[i])
continue;if(i%2==0)
pcards+=this.cards[i]['cardId'];else
bcards+=this.cards[i]['cardId'];}
gameResult.setPlayerCard(gameResult.getCardVal(pcards));gameResult.setBankerCard(gameResult.getCardVal(bcards));};CardControl.prototype.showCard=function(cardPos){var card=this.cards[cardPos];if(card['cardId']!==card['orgCardId']){card['cardId']=card['orgCardId'];var mesh=card['mesh'];mesh.texture=this.gameModel.resources[card['cardId']].texture;this.setCardText(cardPos,card['cardId']);this.updateCardVals();}};CardControl.prototype.setCardText=function(cardPos,cardId){var cardArrangement=[0,3,1,4,2,5];this.cardValues[cardArrangement[cardPos]].text=this.gameModel.gameView.gameResult.getCardVal(cardId?cardId:this.cards[cardPos]['cardId']).toString();};return CardControl;}(game.BaseCardControl));super_fantan.CardControl=CardControl;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var ChipControl=(function(_super){__extends(ChipControl,_super);function ChipControl(gameModel){return _super.call(this,gameModel)||this;}
ChipControl.prototype.initChipPos=function(){this.updateChipPos(null);};ChipControl.prototype.initChips=function(schips,shownRange){_super.prototype.initChips.call(this,schips,shownRange);this.updateLeftRight();};ChipControl.prototype.updateLeftRight=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y-7;this.rightArrow.rotation=-10*Math.PI/180;break;case game.ViewMode.MODE_3D:this.leftArrow.x=this.chipsPos[1].x-40;this.leftArrow.y=this.chipsPos[1].y;this.rightArrow.x=this.chipsPos[this.shownRange].x+40;this.rightArrow.y=this.chipsPos[this.shownRange].y;this.rightArrow.rotation=0;break;}};ChipControl.prototype.updateChipPos=function(chipsPos){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.chipsPos=[new PIXI.Point(-52.35,1.85),new PIXI.Point(0.05,0.65),new PIXI.Point(51.05,-1.55),new PIXI.Point(102.15,-5.2),new PIXI.Point(154.85,-10.95),new PIXI.Point(207.4,-19.4),new PIXI.Point(257.55,-28.45),new PIXI.Point(305.95,-38.85)];break;case game.ViewMode.MODE_3D:this.chipsPos=[new PIXI.Point(-52.25,0.55),new PIXI.Point(-0.6,0.55),new PIXI.Point(51.05,0.55),new PIXI.Point(102.7,0.55),new PIXI.Point(154.35,0.55),new PIXI.Point(206,0.55),new PIXI.Point(257.65,0.55),new PIXI.Point(309.3,0.55)];break;}
_super.prototype.updateChipPos.call(this,this.chipsPos);};ChipControl.prototype.changeView=function(){this.updateChipPos(null);this.updateLeftRight();this.drawMasker();_super.prototype.changeView.call(this);};return ChipControl;}(game.BaseChipControl));super_fantan.ChipControl=ChipControl;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var GameHUD=(function(_super){__extends(GameHUD,_super);function GameHUD(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
GameHUD.prototype.initView=function(){_super.prototype.initView.call(this);this.settingCon=new super_fantan.SettingContainer(this.gameModel);this.settingCon.x=12;this.settingCon.y=730;this.addChild(this.settingCon);this.gameInfoCon=new super_fantan.GameInfoCon(this.gameModel);this.addChild(this.gameInfoCon);};GameHUD.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.settingCon.x=12;this.settingCon.y=730;this.gameInfoCon.expand();this.gameInfoCon.resizeBtn.visible=false;break;}};GameHUD.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};return GameHUD;}(game.BaseGameHUD));super_fantan.GameHUD=GameHUD;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var GenGameDetailCon=(function(_super){__extends(GenGameDetailCon,_super);function GenGameDetailCon(){return _super!==null&&_super.apply(this,arguments)||this;}
GenGameDetailCon.prototype.initView=function(){this.viewW=379;this.viewH=157;this.contentY=27;var w=this.viewW;var h=this.viewH;var contentY=this.contentY;var limitBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('limit_icon0001.png'),PIXI.Texture.fromFrame('limit_icon0002.png')]);var livePoolBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('livepool_icon0001.png'),PIXI.Texture.fromFrame('livepool_icon0002.png')]);var resultsBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('info_game_result_icon0001.png'),PIXI.Texture.fromFrame('info_game_result_icon0002.png')]);var bonusBtn=new PIXI.extras.MovieClip([PIXI.Texture.fromFrame('bonus98_icon0001.png'),PIXI.Texture.fromFrame('bonus98_icon0002.png')]);game.GameUtils.resizeNodeH(limitBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(livePoolBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(resultsBtn,game.StyleMng.INFO_TAB_BTN_SIZE);game.GameUtils.resizeNodeH(bonusBtn,game.StyleMng.INFO_TAB_BTN_SIZE);this.gameModel.toolTip.addToolTip(limitBtn,game.GameText.LIMITS);this.gameModel.toolTip.addToolTip(livePoolBtn,game.GameText.LIVE_POOL);this.gameModel.toolTip.addToolTip(resultsBtn,game.GameText.RESULTS);this.gameModel.toolTip.addToolTip(bonusBtn,game.GameText.SUPER_98_HIS);var btns=[limitBtn,livePoolBtn,resultsBtn,bonusBtn];this.btns=btns;for(var i=0;i<btns.length;i++){this.addChild(btns[i]);btns[i].buttonMode=true;btns[i].gotoAndStop(1);btns[i].x=(btns[i].width+1)*i;}
this.initLimitDetail();this.initLivePoolDetail();this.initResultsDetail();this.bonusUpsDetail=new game.BonusUpsDetail(this.gameModel,w,h);var contents=[this.limitDetail,this.livePoolDetail,this.resultsDetail,this.bonusUpsDetail];for(var i=0;i<contents.length;i++){this.addChild(contents[i]);contents[i].y=contentY;}
var tabMng=new component.VTabMng();tabMng.initialize(btns,contents);this.tabMng=tabMng;var expandBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_expand0001.png'),PIXI.Texture.fromFrame('info_pane_expand0002.png')],this.onExpand.bind(this));expandBtn.x=this.viewW-expandBtn.width;var conllapseBtn=new component.VButton([PIXI.Texture.fromFrame('info_pane_collapse0001.png'),PIXI.Texture.fromFrame('info_pane_collapse0002.png')],this.onCollapse.bind(this));conllapseBtn.x=this.viewW-conllapseBtn.width;var resizeBtn=new component.VToggleButton(expandBtn,conllapseBtn);this.addChild(resizeBtn);resizeBtn.y=this.contentY+this.viewH-resizeBtn.height;this.resizeBtn=resizeBtn;};GenGameDetailCon.prototype.initLimitDetail=function(){this.limitDetail=new super_fantan.GenLimitDetail(this.gameModel,this.viewW,this.viewH);};GenGameDetailCon.prototype.initLivePoolDetail=function(){this.livePoolDetail=new super_fantan.GenLivePoolDetail(this.gameModel,this.viewW,this.viewH);};GenGameDetailCon.prototype.initResultsDetail=function(){this.resultsDetail=new super_fantan.ResultsDetail(this.gameModel,this.viewW,this.viewH);};GenGameDetailCon.prototype.onExpand=function(){_super.prototype.onExpand.call(this);var addedSize=40;this.resultsDetail.resize(this.viewW,this.viewH+addedSize);};GenGameDetailCon.prototype.onCollapse=function(){_super.prototype.onCollapse.call(this);this.resultsDetail.resize(this.viewW,this.viewH);};return GenGameDetailCon;}(game.GameDetailCon));super_fantan.GenGameDetailCon=GenGameDetailCon;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var GenLimitDetail=(function(_super){__extends(GenLimitDetail,_super);function GenLimitDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
GenLimitDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLimitDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();this.tfs=[];var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[game.GameText.fan+' 1,2,3,4',game.GameText.EVEN+' / '+game.GameText.ODD,game.GameText.BIG+' / '+game.GameText.SMALL,game.GameText.superfantan_total_point,game.GameText.nim,game.GameText.kwok];var posX=12;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;for(var i=0;i<texts.length;i++){tf=game.GameUtils.createText(texts[i],style);tf.x=posX;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};GenLimitDetail.prototype.setData=function(data){this.tfs[0].text=component.VComponentUtils.getNumInFormat(data.content[2].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[2].max);this.tfs[1].text=component.VComponentUtils.getNumInFormat(data.content[1].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[1].max);this.tfs[2].text=component.VComponentUtils.getNumInFormat(data.content[7].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[7].max);this.tfs[3].text=component.VComponentUtils.getNumInFormat(data.content[6].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[6].max);this.tfs[4].text=component.VComponentUtils.getNumInFormat(data.content[3].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[3].max);this.tfs[5].text=component.VComponentUtils.getNumInFormat(data.content[4].min)+" - "+component.VComponentUtils.getNumInFormat(data.content[4].max);};return GenLimitDetail;}(game.LimitDetail));super_fantan.GenLimitDetail=GenLimitDetail;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var GenLivePoolDetail=(function(_super){__extends(GenLivePoolDetail,_super);function GenLivePoolDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
GenLivePoolDetail.prototype.initView=function(){_super.prototype.initView.call(this);};GenLivePoolDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var texts=[super_fantan.SFBetType.getName('F1'),super_fantan.SFBetType.getName('F2'),super_fantan.SFBetType.getName('F3'),super_fantan.SFBetType.getName('F4'),super_fantan.SFBetType.getName('G1'),super_fantan.SFBetType.getName('G2'),super_fantan.SFBetType.getName('A1'),super_fantan.SFBetType.getName('A2')];var results=[[super_fantan.ResultType.getResult(super_fantan.ResultType.FAN1),11],[super_fantan.ResultType.getResult(super_fantan.ResultType.FAN2),11],[super_fantan.ResultType.getResult(super_fantan.ResultType.FAN3),11],[super_fantan.ResultType.getResult(super_fantan.ResultType.FAN4),11],[super_fantan.ResultType.getResult(super_fantan.ResultType.SMALL),game.TrendType.BIG_SMALL],[super_fantan.ResultType.getResult(super_fantan.ResultType.BIG),game.TrendType.BIG_SMALL],[super_fantan.ResultType.getResult(super_fantan.ResultType.ODD),game.TrendType.EVEN_ODD],[super_fantan.ResultType.getResult(super_fantan.ResultType.EVEN),game.TrendType.EVEN_ODD]];this.tfs=[];var posX=5;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tf;var icon;for(var i=0;i<texts.length;i++){icon=new super_fantan.SFantanPearlIcon().setData(game.TrendIconUtils.NORMAL_SIZE);content.addChild(icon);icon.x=posX+icon.size*0.5;icon.y=posY+icon.size*0.5;icon.setType(results[i][1]);icon.drawResult(results[i][0]);tf=game.GameUtils.createText(texts[i],style);tf.x=posX+20;tf.y=posY;content.addChild(tf);tf=game.GameUtils.createText('0',style);tf.x=this.viewW-30;tf.anchor.x=1;tf.y=posY;content.addChild(tf);this.tfs[i]=tf;posY+=tf.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height+20);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<texts.length-1;i++){this.bg.moveTo(10,(tf.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tf.height+dis)*(i+1));}};GenLivePoolDetail.prototype.setData=function(data){this.clearData();for(var i=0;i<data.content.cat.length;i++){this.tfs[super_fantan.SFBetType.getTypeById(data.content.cat[i])-1].text=component.VComponentUtils.getNumInFormat(data.content.amount[i]);}};return GenLivePoolDetail;}(game.LivePoolDetail));super_fantan.GenLivePoolDetail=GenLivePoolDetail;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var ResultsDetail=(function(_super){__extends(ResultsDetail,_super);function ResultsDetail(){return _super!==null&&_super.apply(this,arguments)||this;}
ResultsDetail.prototype.initView=function(){_super.prototype.initView.call(this);};ResultsDetail.prototype.initContent=function(){this.bg=new PIXI.Graphics();this.resData=[];var content=new PIXI.Container();this.addChild(content);content.addChild(this.bg);this.content=content;var posX=12;var posY=5;var dis=12;var style={fontFamily:"Arial",fontSize:12,fill:0x000000,align:'left'};var tfNum;var fan;var tfTotal;var tfSize;var tfOddEven;for(var i=0;i<15;i++){tfNum=game.GameUtils.createText('',style);tfNum.x=posX;tfNum.y=posY;content.addChild(tfNum);fan=new PIXI.Sprite(PIXI.Texture.fromFrame('result_fan1.png'));fan.scale.x=(1/game.GameSettings.OPTIMIZE_FACTOR)*0.65;fan.scale.y=fan.scale.x;fan.anchor.y=0.5;fan.x=86.5;fan.y=posY+tfNum.height*0.5+1;content.addChild(fan);tfTotal=game.GameUtils.createText('',style);tfTotal.x=161;tfTotal.anchor.x=0.5;tfTotal.y=posY;content.addChild(tfTotal);tfSize=game.GameUtils.createText('',style);tfSize.x=235.5;tfSize.anchor.x=0.5;tfSize.y=posY;content.addChild(tfSize);tfOddEven=game.GameUtils.createText('',style);tfOddEven.x=310;tfOddEven.anchor.x=0.5;tfOddEven.y=posY;content.addChild(tfOddEven);this.resData[i]=new ResultData(tfNum,fan,tfTotal,tfSize,tfOddEven);posY+=tfNum.height+dis;}
this.bg.beginFill(0x0000ff,0);this.bg.drawRect(0,0,this.viewW,content.height);this.bg.endFill();this.bg.lineStyle(1,0xcdcdcd);for(var i=0;i<this.resData.length-1;i++){this.bg.moveTo(10,(tfNum.height+dis)*(i+1));this.bg.lineTo(this.viewW,(tfNum.height+dis)*(i+1));}};ResultsDetail.prototype.setData=function(data){var sorted=game.GameUtils.sortData(data.content.value,'roundid','DESC');for(var i=0;i<sorted.length;i++){var cards=new super_fantan.SFCards(sorted[i].cards);var totalBeads=cards.total;this.resData[i].setData(sorted[i].shoe,sorted[i].round,totalBeads);}};ResultsDetail.prototype.addData=function(data){for(var i=this.resData.length-1;i>0;i--){this.resData[i].setData(this.resData[i-1].shoe,this.resData[i-1].round,this.resData[i-1].totalBeads);}
var cards=new super_fantan.SFCards(data.cards);var totalBeads=cards.total;this.resData[0].setData(data.shoe,data.round,totalBeads);};return ResultsDetail;}(game.BaseGameDetail));super_fantan.ResultsDetail=ResultsDetail;var ResultData=(function(){function ResultData(tfNum,fan,tfTotal,tfSize,tfOddEven){this.tfNum=tfNum;this.fan=fan;this.tfTotal=tfTotal;this.tfSize=tfSize;this.tfOddEven=tfOddEven;}
ResultData.prototype.setData=function(shoe,round,totalBeads){this.shoe=shoe;this.round=round;this.totalBeads=totalBeads;this.tfNum.text=shoe+' - '+round;var fanNumber=(totalBeads%4)===0?4:(totalBeads%4);this.fan.texture=PIXI.Texture.fromFrame('result_fan'+fanNumber+'.png');this.tfTotal.text=totalBeads.toString();if(totalBeads<42){this.tfSize.text=game.GameText.SMALL;this.tfSize.style.fill=0x2a8fbd;this.tfTotal.style.fill=0x2a8fbd;if(LANG==='vn')
this.tfSize.style.fontSize=12;}
else if(totalBeads>42){this.tfSize.text=game.GameText.BIG;this.tfSize.style.fill=0xc6001e;this.tfTotal.style.fill=0xc6001e;if(LANG==='vn')
this.tfSize.style.fontSize=12;}
else{this.tfSize.text=game.GameText.superfantan_total_point;this.tfSize.style.fill=0x007236;this.tfTotal.style.fill=0x007236;if(LANG==='vn')
this.tfSize.style.fontSize=11;}
this.tfOddEven.text=totalBeads%2===0?game.GameText.EVEN:game.GameText.ODD;};ResultData.prototype.destroy=function(){this.tfNum.destroy();this.fan.destroy();this.tfTotal.destroy();this.tfSize.destroy();this.tfOddEven.destroy();this.shoe=null;this.round=null;this.totalBeads=null;};return ResultData;}());})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var GameInfoCon=(function(_super){__extends(GameInfoCon,_super);function GameInfoCon(gameModel){return _super.call(this,gameModel)||this;}
GameInfoCon.prototype.initGameDetailCon=function(){this.gameDetailCon=new super_fantan.GenGameDetailCon(this.gameModel);this.addChild(this.gameDetailCon);this.gameDetailCon.y=90;};return GameInfoCon;}(game.BaseGameInfoCon));super_fantan.GameInfoCon=GameInfoCon;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var GameResult=(function(_super){__extends(GameResult,_super);function GameResult(gameModel){var _this=_super.call(this,gameModel,'','')||this;_this.banker=0;_this.player=0;_this.totalBeads=0;_this.showTotal();return _this;}
GameResult.prototype.initBgs=function(){};GameResult.prototype.initialize=function(){this.initBeadBoard();this.initBeads();this.initTexts();delete this.bankerCardVal;delete this.playerCardVal;this.result1Tf=game.GameUtils.createText(game.GameText.total,{fontFamily:"dinbold",fontSize:12,fontStyle:'',fill:0xf5e3c7,align:'center'});this.result1Tf.x=957;this.result1Tf.y=364.5;this.result1Tf.anchor.x=0.5;this.addChild(this.result1Tf);this.result2Tf=game.GameUtils.createText('0',{fontFamily:"dinbold",fontSize:30,fontStyle:'bold',fill:0xf5e3c7,align:'center'});this.result2Tf.x=958;this.result2Tf.y=378.6;this.result2Tf.anchor.x=0.5;this.addChild(this.result2Tf);this.reset();};GameResult.prototype.initBeadBoard=function(){this.beadBoard=new PIXI.Sprite(this.gameModel.resources['superfantan_bead_board'].texture);this.beadBoard.x=392.5;this.beadBoard.y=372;this.addChild(this.beadBoard);};GameResult.prototype.initBeads=function(){this.beads=[];this.beadPos=[{x:415.7,y:377.6},{x:414.4,y:386.3},{x:413.1,y:394.95},{x:411.8,y:403.55},{x:440.4,y:377.6},{x:439.2,y:386.3},{x:438,y:394.85},{x:436.75,y:403.65},{x:464.65,y:377.6},{x:463.7,y:386.2},{x:462.7,y:394.85},{x:461.65,y:403.55},{x:489.4,y:377.6},{x:488.55,y:386.2},{x:487.6,y:394.85},{x:486.6,y:403.55},{x:513.95,y:377.7},{x:513.2,y:386.2},{x:512.4,y:394.85},{x:511.55,y:403.55},{x:538.15,y:377.6},{x:537.6,y:386.2},{x:536.9,y:394.95},{x:536.45,y:403.65},{x:562.7,y:377.6},{x:562.25,y:386.2},{x:561.85,y:394.95},{x:561.4,y:403.55},{x:587.6,y:377.6},{x:587.2,y:386.3},{x:586.8,y:394.95},{x:586.4,y:403.55},{x:611.95,y:377.6},{x:611.85,y:386.25},{x:611.6,y:394.95},{x:611.5,y:403.65},{x:636.65,y:377.6},{x:636.65,y:386.3},{x:636.55,y:394.95},{x:636.55,y:403.65},{x:661.65,y:377.6},{x:661.85,y:386.3},{x:662,y:394.95},{x:662.2,y:403.65},{x:686.75,y:377.6},{x:687.2,y:386.3},{x:687.5,y:394.95},{x:687.8,y:403.65},{x:711.8,y:377.6},{x:712.2,y:386.3},{x:712.7,y:394.95},{x:713.2,y:403.55},{x:736.85,y:377.6},{x:737.55,y:386.3},{x:738.25,y:394.95},{x:738.95,y:403.55},{x:761.85,y:377.75},{x:762.65,y:386.35},{x:763.45,y:395.05},{x:764.25,y:403.75},{x:786.85,y:377.65},{x:787.75,y:386.35},{x:788.65,y:395.05},{x:789.55,y:403.75},{x:811.85,y:377.75},{x:812.95,y:386.35},{x:814.05,y:395.05},{x:815.1,y:403.75},{x:836.85,y:377.75},{x:838.05,y:386.4},{x:839.25,y:395.05},{x:840.45,y:403.65},{x:861.85,y:377.75},{x:863.15,y:386.35},{x:864.65,y:395.05},{x:866,y:403.75}];for(var i=0;i<GameResult.COLUMNS*GameResult.ROWS;i++){var bead=new PIXI.Sprite(this.gameModel.resources['superfantan_bead'].texture);bead.x=this.beadPos[i].x;bead.y=this.beadPos[i].y;bead.anchor.set(0.5);bead.alpha=0;this.beads.push(bead);this.addChild(bead);}};GameResult.prototype.initTexts=function(){this.beadTexts=[];for(var i=1;i<=GameResult.COLUMNS;i++){var iByFours=i*4;var text=game.GameUtils.createText(iByFours.toString(),{fontFamily:component.VComponentUtils.getFont(),fontSize:15,fontStyle:'',fill:0xff0000,align:'center'});text.x=this.beads[iByFours-1].x;text.y=411.5;text.scale.set(0.5);text.anchor.x=0.5;this.beadTexts.push(text);this.addChild(text);}};GameResult.prototype.setBankerCard=function(val){this.banker=val;this.updateBeads();};GameResult.prototype.setPlayerCard=function(val){this.player=val;this.updateBeads();};GameResult.prototype.showResult=function(data){var cards=new super_fantan.SFCards(data.content.cards);var result=new super_fantan.SFResult(data.content.result);this.setPlayerCard(cards.total_player);this.setBankerCard(cards.total_banker);this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,"sfx_num"+result.fan);if(cards.total<42)
this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.SMALL);else if(cards.total>42)
this.gameModel.soundMng.playSound(game.SoundMng.SOUND_SPRITE,false,game.SoundMng.BIG);};GameResult.prototype.getCardVal=function(cards){if(!cards)
return 0;var card;var val=0;for(var i=0;i<cards.length/2;i++){card=cards[i*2+1];if(card=='B')
val+=0;else
val+='TJQK'.indexOf(card)>=0?10+'TJQK'.indexOf(card):(card=='A'?1:parseInt(card));}
return val;};GameResult.prototype.reset=function(){this.setBankerCard(0);this.setPlayerCard(0);this.result2Tf.text='0';};GameResult.prototype.updateBeads=function(){var newTotal=this.player+this.banker;var maximumBeads=GameResult.COLUMNS*GameResult.ROWS;if(newTotal>maximumBeads)
newTotal=maximumBeads;else if(newTotal<0)
newTotal=0;if(newTotal>this.totalBeads){var bead=void 0;var delayMultiplier=0;for(var i=this.totalBeads;i<newTotal;i++){delayMultiplier++;bead=this.beads[i];bead.alpha=0;bead.y=this.beadPos[i].y-20;TweenMax.to(bead,0.2,{delay:0.05*delayMultiplier,alpha:1,y:this.beadPos[i].y,onStart:this.initBeadAnimation.bind(this,bead)});}}
else if(newTotal<this.totalBeads){var bead=void 0;for(var i=this.totalBeads-1;i>=newTotal;i--){bead=this.beads[i];TweenMax.killTweensOf(bead);bead.alpha=0;}}
if(newTotal!==this.totalBeads){this.totalBeads=newTotal;this.showTotal();for(var j=0;j<GameResult.COLUMNS;j++){this.beadTexts[j].style.fill=(j+1<=newTotal/4)?0xffffff:0xff0000;}
this.result2Tf.text=newTotal.toString();}};GameResult.prototype.initBeadAnimation=function(bead){bead.alpha=0.5;};GameResult.prototype.showTotal=function(){var shown=this.totalBeads>0;this.result1Tf.visible=shown;this.result2Tf.visible=shown;};GameResult.COLUMNS=19;GameResult.ROWS=4;return GameResult;}(game.BaseGameResult));super_fantan.GameResult=GameResult;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){return _super.call(this,gameModel)||this;}
GameView.prototype.destructor=function(){clearTimeout(this.timeoutId1);clearTimeout(this.timeoutId2);TweenMax.killTweensOf(this.flipCon);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.off(this.infoIcon,component.VMouseUtils.MOUSE_OVER,this.onShowInfo,this);else
component.VMouseUtils.off(this.infoIcon,component.VMouseUtils.MOUSE_UP,this.onShowInfo,this);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.off(this.infoIcon,component.VMouseUtils.MOUSE_OUT,this.onHideInfo,this);else
component.VMouseUtils.off(this.infoIcon,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.onHideInfo,this);_super.prototype.destructor.call(this);};GameView.prototype.onShowInfo=function(){this.super98Panel.show();};GameView.prototype.onHideInfo=function(){this.super98Panel.hide();};GameView.prototype.initialize=function(){_super.prototype.initialize.call(this);this.bg.texture=this.gameModel.resources['table_bg_red'].texture;this.initTrends();this.chipControl=new super_fantan.ChipControl(this.gameModel);this.chipControl.x=915.95;this.chipControl.y=741;this.chipControl.dissable();this.gameModel.chipControl=this.chipControl;this.betInput.x=507;this.betInput.y=732;this.betArea=new super_fantan.BetArea(this.gameModel,this.betInput);this.betArea.dissable();this.addChild(this.betArea);this.betArea.collectWinPos.x=154;this.betArea.collectWinPos.y=746;var bonusBg=new PIXI.extras.MovieClip([this.gameModel.resources['fantan_bonus98_1'].texture,this.gameModel.resources['fantan_bonus98_2'].texture]);this.bonusBg=bonusBg;bonusBg.x=70;bonusBg.y=374;this.addChild(this.bonusBg);this.betControl=new game.BetControl(this.gameModel);this.betControl.x=483;this.betControl.y=730;this.betControl.hide();this.cardControl=new super_fantan.CardControl(this.gameModel);this.addChild(this.cardControl);this.addChild(this.betControl);this.addChild(this.chipControl);this.gameResult=(new super_fantan.GameResult(this.gameModel));this.addChild(this.gameResult);_super.prototype.initCountDown.call(this);this.countdown.x=640;this.countdown.y=383;this.diceAnim=new game.DiceAnim(this.gameModel);this.addChild(this.diceAnim);var arr=[];for(var i=1;i<=7;i++)
arr.push('color_dice0'+i+'');for(var i=1;i<=12;i++)
arr.push('color_dice'+i+'0');this.diceAnim.initialize(arr,7);this.diceAnim.pivot.x=192;this.diceAnim.pivot.y=650;this.diceAnim.x=116;this.diceAnim.y=368;this.diceAnim.scale.x=0.5;this.diceAnim.scale.y=0.5;this.diceAnim.visible=false;this.gameHUD=new super_fantan.GameHUD(this.gameModel);this.addChild(this.gameHUD);var infoIcon=new component.VButton([PIXI.Texture.fromFrame('left_info_icon.png'),PIXI.Texture.fromFrame('left_info_icon.png')]);infoIcon.x=168;infoIcon.y=383;infoIcon.scale.x=1/game.GameSettings.OPTIMIZE_FACTOR;infoIcon.scale.y=infoIcon.scale.x;infoIcon.rotation=7*Math.PI/180;infoIcon.buttonMode=true;this.addChild(infoIcon);this.infoIcon=infoIcon;this.infoIcon.visible=false;if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(infoIcon,component.VMouseUtils.MOUSE_OVER,this.onShowInfo,this);else
component.VMouseUtils.on(infoIcon,component.VMouseUtils.MOUSE_UP,this.onShowInfo,this);if(!component.VComponentUtils.isMobile)
component.VMouseUtils.on(infoIcon,component.VMouseUtils.MOUSE_OUT,this.onHideInfo,this);else
component.VMouseUtils.on(this.infoIcon,component.VMouseUtils.MOUSE_UP_OUTSIDE,this.onHideInfo,this);this.super98Panel=new super_fantan.Super98InfoPopup(null);this.super98Panel.x=this.infoIcon.x-this.super98Panel.viewW*0.5;this.super98Panel.y=this.infoIcon.y-this.super98Panel.viewH-12;this.gameModel.overlay.addChild(this.super98Panel);this.super98Panel.hide();this.initRoundResult(0,117,379,159);this.initCardsFlip();};GameView.prototype.initTrends=function(){this.trendMng=new super_fantan.TrendMng(this.gameModel);this.trendMng.visible=false;this.overlay.addChildAt(this.trendMng,this.overlay.children.length-2);this.overlay.setChildIndex(this.trendMng.trendInfoPanel,this.overlay.children.length-1);};GameView.prototype.initCardsFlip=function(){var w=162*0.95;var h=240*0.95;this.flipPageWidth=w;this.flipPageHeight=h;this.flipCon=new PIXI.Container();this.overlay.addChild(this.flipCon);var bg=new PIXI.Sprite(this.gameModel.resources['squeeze_overlay'].texture);bg.anchor.set(0.5);bg.scale.set(1/game.GameSettings.OPTIMIZE_FACTOR);bg.x=game.GameSettings.CANVAS_WIDTH/2;bg.y=game.GameSettings.CANVAS_HEIGHT-bg.height/2;this.flipCon.addChild(bg);this.flipPage1=new component.fage_flip.PageCon();this.flipPage2=new component.fage_flip.PageCon();this.flipPage1.lock();this.flipPage2.lock();this.flipPage1.x=game.GameSettings.CANVAS_WIDTH/2-this.flipPageWidth*1.3;this.flipPage2.x=game.GameSettings.CANVAS_WIDTH/2+this.flipPageWidth*0.3;this.flipPage1.y=bg.y-this.flipPageHeight*0.5;this.flipPage2.y=this.flipPage1.y;this.flipCon.addChild(this.flipPage1);this.flipCon.addChild(this.flipPage2);this.flipPage1.initialize(w,h,this.gameModel.resources['C8'].texture,this.gameModel.resources['CB'].texture,this.onFlipCompleteHdl.bind(this));this.flipPage2.initialize(w,h,this.gameModel.resources['C8'].texture,this.gameModel.resources['CB'].texture,this.onFlipCompleteHdl.bind(this));this.flipPage1.corner.visible=false;this.flipPage2.corner.visible=false;this.flipCon.visible=false;this.flipCon.alpha=0;this.actCountdown=new game.CountDown(2,0xE0C955);this.actCountdown.x=this.countdown.x;this.actCountdown.y=this.countdown.y;this.actCountdown.scale.x=this.countdown.scale.x;this.actCountdown.scale.y=this.countdown.scale.y;this.addChild(this.actCountdown);this.actCountdown.setTotal(0);this.actCountdown.hide();};GameView.prototype.initRoundResult=function(x,y,width,height){this.roundResult=new PIXI.Container();this.roundResult.x=x;this.roundResult.y=y;this.gameModel.overlay.addChild(this.roundResult);this.roundResult.visible=false;var bg=new PIXI.Graphics();bg.clear();bg.beginFill(0x000000,0.8);bg.drawRect(0,0,width,height);bg.endFill();this.roundResult.addChild(bg);var icon=new super_fantan.TrendDetailIcon(80,49);icon.x=width/2-40;icon.y=height*0.33-40;this.roundResult.addChild(icon);this.roundResult['icon']=icon;var txt=new PIXI.Text('0',{fontFamily:component.VComponentUtils.getFont(),fontSize:40,fontStyle:'',fill:0xffffff,align:'center'});txt.x=width/2;txt.y=height*0.75;txt.anchor.set(0.5);this.roundResult.addChild(txt);this.roundResult['txt']=txt;};GameView.prototype.showRoundResult=function(content){var cards=new super_fantan.SFCards(content.cards);this.roundResult['txt'].text=cards.total.toString();this.roundResult['icon'].setData(content);this.roundResult.visible=true;};GameView.prototype.hideRoundResult=function(){this.roundResult.visible=false;};GameView.prototype.onFlipCompleteHdl=function(page){var card=this.cardControl.cards[page['cardIndex']];card['cardId']=card['orgCardId'];this.cardControl.setCardText(page['cardIndex']);this.cardControl.updateCardVals();};GameView.prototype.flipTimeout=function(){clearTimeout(this.timeoutId1);clearTimeout(this.timeoutId2);TweenMax.to(this.flipCon,0.3,{alpha:0,onComplete:function(){this.flipCon.visible=false;}.bind(this)});this.showAllCards();};GameView.prototype.showAllCards=function(){for(var i=0;i<this.cardControl.cards.length;i++){var card=this.cardControl.cards[i];if(card){card['cardId']=card['orgCardId'];card['mesh'].texture=this.gameModel.resources[card['orgCardId']].texture;card.visible=true;}}
this.cardControl.setCardText(4);this.cardControl.setCardText(5);};GameView.prototype.showSqueeze=function(){this.flipCon.visible=true;TweenMax.killTweensOf(this.flipCon);this.flipCon.alpha=0;TweenMax.to(this.flipCon,0.5,{alpha:1});this.cardControl.cards[4].visible=false;this.cardControl.cards[5].visible=false;this.show6thFlipCard(500);this.show5thFlipCard(3500);};GameView.prototype.hideSqueeze=function(){TweenMax.killTweensOf(this.flipCon);this.flipCon.visible=false;this.flipCon.alpha=0;};GameView.prototype.show6thFlipCard=function(timeoutDelay){var cardId=this.cardControl.cards[5]['orgCardId'];this.flipPage2['cardIndex']=5;this.flipPage2.reset();this.flipPage2.setFrontTexture(this.gameModel.resources[cardId].texture);this.timeoutId1=setTimeout(this.flipPage2.autoFlip.bind(this.flipPage2,1500),timeoutDelay);};GameView.prototype.show5thFlipCard=function(timeoutDelay){var cardId=this.cardControl.cards[4]['orgCardId'];this.flipPage1['cardIndex']=4;this.flipPage1.reset();this.flipPage1.setFrontTexture(this.gameModel.resources[cardId].texture);this.timeoutId2=setTimeout(this.flipPage1.autoFlip.bind(this.flipPage1,1500),timeoutDelay);};GameView.prototype.activeSuperHand=function(isSupper){if(this.bonusBg)
this.bonusBg.gotoAndStop(isSupper?1:0);this.betArea.updateFanPayouts(isSupper?1:0);};GameView.prototype.updateVodView=function(){if(!this.vodInited)
return;var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:this.gameModel.VOD_WIDTH=511;this.gameModel.VOD_HEIGHT=311;this.gameModel.VOD_X=386;this.gameModel.VOD_Y=3;this.processVodLoadMediaData();break;}
this.sizeHandler();};GameView.prototype.initTip=function(){_super.prototype.initTip.call(this);this.tipCon.x=1072;};GameView.prototype.onTableLimit=function(){_super.prototype.onTableLimit.call(this);if(!game.GameUtils.checkSuper98(this.gameModel.TABLE_ID)){this.removeChild(this.bonusBg);this.infoIcon.visible=false;}
else{this.bonusBg.visible=true;this.infoIcon.visible=true;}};GameView.prototype.changeView=function(){this.gameResult.changeView();_super.prototype.changeView.call(this);};GameView.prototype.onCommit=function(content){var result=new super_fantan.SFResult(content.result);var fan=result.fan;this.betArea.showMarker(fan);this.betArea.resetLosingFanPayouts(fan);this.showRoundResult(content);};GameView.prototype.onStartBet=function(){this.betArea.hideMarker();this.hideRoundResult();};return GameView;}(game.BaseGameView));super_fantan.GameView=GameView;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var SettingContainer=(function(_super){__extends(SettingContainer,_super);function SettingContainer(){return _super!==null&&_super.apply(this,arguments)||this;}
SettingContainer.prototype.initLivePoolBtn=function(balanceY,btnH){};SettingContainer.prototype.onLivePool=function(){};return SettingContainer;}(game.SettingContainer));super_fantan.SettingContainer=SettingContainer;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var Super98InfoPopup=(function(_super){__extends(Super98InfoPopup,_super);function Super98InfoPopup(main){var _this=_super.call(this,main,308,170)||this;_this.closeBtn.visible=false;_this.titleTf.text=game.GameText.bonus98_title;_this.hasUnderlay=false;var table=new component.VTable(308-1,22,4,["",""],[3/4,1/4],"center",{fontFamily:"Arial",fill:0xF0E4D8,fontSize:12},{fontFamily:"Arial",fontSize:12,fill:0xF0E4D8,wordWrap:true});table.titleCon.visible=false;table.y=10;_this.addChild(table);table.setData(0,[game.GameText.fan1,game.GameText.fan_bonus_payout]);table.setData(1,[game.GameText.fan2,game.GameText.fan_bonus_payout]);table.setData(2,[game.GameText.fan3,game.GameText.fan_bonus_payout]);table.setData(3,[game.GameText.fan4,game.GameText.fan_bonus_payout]);var tf=game.GameUtils.createNormalText('');_this.addChild(tf);tf.scale.x=tf["orgScaleX"];tf.scale.y=tf.scale.x;tf.text=game.GameText.SUPER_HAND_PAYOUT.replace('(','\n(');if(tf.width>_this.viewW){tf.scale.x=tf["orgScaleX"]*(_this.viewW/tf.width);tf.scale.y=tf.scale.x;}
tf.anchor.x=0.5;tf.x=_this.bg.width*0.5;tf.y=_this.bg.height-7-tf.height;return _this;}
return Super98InfoPopup;}(game.BasePopup));super_fantan.Super98InfoPopup=Super98InfoPopup;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var GenIconCount=(function(_super){__extends(GenIconCount,_super);function GenIconCount(gameModel){return _super.call(this,gameModel)||this;}
GenIconCount.prototype.destructor=function(){this.tfs=[];this.icons=[];_super.prototype.destructor.call(this);};GenIconCount.prototype.initialize=function(){this.tfs=[];this.icons=[];var results=[];results.push(super_fantan.ResultType.getResult(super_fantan.ResultType.BIG));results.push(super_fantan.ResultType.getResult(super_fantan.ResultType.SMALL));results.push(super_fantan.ResultType.getResult(super_fantan.ResultType.TIE));results.push(super_fantan.ResultType.getResult(super_fantan.ResultType.EVEN));results.push(super_fantan.ResultType.getResult(super_fantan.ResultType.ODD));var dis=20;var posX=0;var icon;for(var i=0;i<results.length;i++){icon=new super_fantan.GenPearlRoadIcon().setData(16);icon.x=posX;posX+=dis;if(i==0||i==1||i==2)
icon.setType(game.TrendType.BIG_SMALL);else if(i==3||i==4)
icon.setType(game.TrendType.EVEN_ODD);icon.draw(new game.netdata.TrendsItem().setData(results[i]));var tf=game.GameUtils.createText('0',{fontFamily:"Arial",fontSize:12,fill:0xffffff,align:'center'});tf.anchor.x=0.5;tf.x=icon.x;tf.y=icon.y+8;this.tfs[i]=tf;this.icons[i]=icon;this.addChild(icon);this.addChild(tf);}
this.clear();};GenIconCount.prototype.clear=function(){for(var i=0;i<this.tfs.length;i++){this.tfs[i].text='0';}};GenIconCount.prototype.addTrend=function(item,isAnim){if(isAnim===void 0){isAnim=false;}
var idx=-1;var result=new super_fantan.SFResult(item.result);if(result.isBig)
idx=0;else if(result.isSmall)
idx=1;else if(result.isTie)
idx=2;if(idx>=0){this.tfs[idx].text=(parseInt(this.tfs[idx].text)+1).toString();if(isAnim)
this.icons[idx].blink();}
idx=-1;if(result.isEven)
idx=3;else if(result.isOdd)
idx=4;if(idx>=0){this.tfs[idx].text=(parseInt(this.tfs[idx].text)+1).toString();if(isAnim)
this.icons[idx].blink();}};GenIconCount.prototype.updateTrends=function(values){for(var i=0;i<values.length;i++)
this.addTrend(values[i]);};return GenIconCount;}(game.IconCount));super_fantan.GenIconCount=GenIconCount;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var GenPearlRoad=(function(_super){__extends(GenPearlRoad,_super);function GenPearlRoad(gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem){if(name===void 0){name="";}
if(isHoverIcon===void 0){isHoverIcon=false;}
if(minItem===void 0){minItem=250;}
if(maxItem===void 0){maxItem=300;}
var _this=_super.call(this,gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem)||this;_this.type=game.TrendType.BIG_SMALL;_this.underlay.alpha=0.6;return _this;}
return GenPearlRoad;}(game.PearlRoad));super_fantan.GenPearlRoad=GenPearlRoad;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var GenPredict=(function(_super){__extends(GenPredict,_super);function GenPredict(gameModel){return _super.call(this,gameModel)||this;}
GenPredict.prototype.destructor=function(){_super.prototype.destructor.call(this);};GenPredict.prototype.initialize=function(){this.banker=new PIXI.Container();this.player=new PIXI.Container();this.gameModel.toolTip.addToolTip(this.banker,game.GameText.PREDICT.replace('{0}',game.GameText.BIG));this.gameModel.toolTip.addToolTip(this.player,game.GameText.PREDICT.replace('{0}',game.GameText.SMALL));this.player.y=45+2;this.addChild(this.banker);this.addChild(this.player);var btns=[this.banker,this.player];var results=['0100000000000000000000010','1000000000000000000000100'];var names=[game.GameText.BIG,game.GameText.SMALL];for(var i=0;i<btns.length;i++){var size=18;var posX=12;var posY=32;var dis=22;var bg=new PIXI.Graphics();bg.lineStyle(0,0,0);bg.beginFill(0xffffff);bg.drawRect(0,0,92,45);btns[i]['bg']=bg;btns[i].addChild(bg);var icon1=new super_fantan.GenPearlRoadIcon().setData(size);icon1.setType(game.TrendType.BIG_SMALL);icon1.draw(new game.netdata.TrendsItem().setData(results[i]));icon1.x=posX;icon1.y=posY;posX+=dis;btns[i].addChild(icon1);var icon2=new game.BigEyeIcon().setData(size);icon2.setType(game.TrendType.BIG_SMALL);icon2.draw(new game.netdata.TrendsItem().setData(results[i]));icon2.x=posX;icon2.y=posY;posX+=dis;btns[i].addChild(icon2);var icon3=new game.SmallRoadIcon().setData(size);icon3.setType(game.TrendType.BIG_SMALL);icon3.draw(new game.netdata.TrendsItem().setData(results[i]));icon3.x=posX;icon3.y=posY;posX+=dis;btns[i].addChild(icon3);var icon4=new game.CockRoachIcon().setData(size);icon4.setType(game.TrendType.BIG_SMALL);icon4.draw(new game.netdata.TrendsItem().setData(results[i]));icon4.x=posX;icon4.y=posY;posX+=dis;btns[i].addChild(icon4);btns[i]['icon1']=icon1;btns[i]['icon2']=icon2;btns[i]['icon3']=icon3;btns[i]['icon4']=icon4;var tf=game.GameUtils.createText(names[i],{fontFamily:"dinbold",fontSize:16,fontStyle:'bold',fill:0x000000,align:'center'});tf.anchor.x=0.5;tf.x=bg.width*0.5;tf.y=0;btns[i].addChild(tf);btns[i]['tf']=tf;btns[i].buttonMode=true;component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_OVER,this.onOver,this);component.VMouseUtils.on(btns[i],component.VMouseUtils.MOUSE_OUT,this.onOut,this);}};GenPredict.prototype.onOver=function(e){e.target['bg'].alpha=0.8;};GenPredict.prototype.onOut=function(e){e.target['bg'].alpha=1;};;return GenPredict;}(game.Predict));super_fantan.GenPredict=GenPredict;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var GenTrendInfoPanel=(function(_super){__extends(GenTrendInfoPanel,_super);function GenTrendInfoPanel(gameModel){return _super.call(this,gameModel)||this;}
GenTrendInfoPanel.prototype.initView=function(){this.bg=new PIXI.Graphics();this.addChild(this.bg);this.tf=game.GameUtils.createNormalText('',20,0xffffff,'bold');this.tf.anchor.x=this.tf.anchor.y=0.5;this.addChild(this.tf);this.fan=new PIXI.Sprite(PIXI.Texture.fromFrame('result_fan1.png'));this.fan.width=this.fan.height=26;this.fan.x=7;this.fan.y=7;this.addChild(this.fan);};GenTrendInfoPanel.prototype.onShow=function(target){var result=new super_fantan.SFResult(target.info.result);var cards=new super_fantan.SFCards(target.info.cards);this.visible=true;this.bg.clear();this.bg.beginFill(0x000000);this.bg.drawRoundedRect(0,0,80,40,5);this.bg.endFill();this.tf.text=cards.total.toString();this.fan.texture=PIXI.Texture.fromFrame('result_fan'+result.fan+'.png');this.tf.x=60;this.tf.y=20;var p=new PIXI.Point(target.x,target.y);p=target.parent.toGlobal(p);p=this.gameModel.overlay.toLocal(p);p.y+=target.size;if(p.x+this.width>this.gameModel.GAME_WIDTH-game.GameSettings.TABLE_SMALL_VIEW_WIDTH)
p.x=this.gameModel.GAME_WIDTH-this.width-game.GameSettings.TABLE_SMALL_VIEW_WIDTH;if(p.y+this.height>this.gameModel.GAME_HEIGHT)
p.y-=(this.height+target.size*2);this.x=p.x;this.y=p.y;};return GenTrendInfoPanel;}(game.TrendInfoPanel));super_fantan.GenTrendInfoPanel=GenTrendInfoPanel;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var GenTrendRoad=(function(_super){__extends(GenTrendRoad,_super);function GenTrendRoad(gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem){if(name===void 0){name="";}
if(isHoverIcon===void 0){isHoverIcon=false;}
if(minItem===void 0){minItem=250;}
if(maxItem===void 0){maxItem=300;}
var _this=_super.call(this,gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem)||this;_this.type=game.TrendType.BIG_SMALL;_this.underlay.alpha=0.6;return _this;}
GenTrendRoad.prototype.onExpandBtn=function(e){_super.prototype.onExpandBtn.call(this,e);var btn=e.target;this.underlay.alpha=btn.currentFrame==1?1:0.6;};return GenTrendRoad;}(game.TrendRoad));super_fantan.GenTrendRoad=GenTrendRoad;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var GenPearlRoadIcon=(function(_super){__extends(GenPearlRoadIcon,_super);function GenPearlRoadIcon(){return _super.call(this)||this;}
GenPearlRoadIcon.prototype.draw=function(info){this.info=info;var result=new super_fantan.SFResult(info.result);this.clear();if(this.type===game.TrendType.BIG_SMALL&&result.isTie){this.createImg('result_green_42');return;}
var iconType='';switch(this.type){case game.TrendType.BIG_SMALL:iconType=result.isBig?'result_red_b':'result_blue_s';break;case game.TrendType.EVEN_ODD:iconType=result.isEven?'result_red_e':'result_blue_o';break;}
this.createImg(iconType);};return GenPearlRoadIcon;}(game.PearlRoadIcon));super_fantan.GenPearlRoadIcon=GenPearlRoadIcon;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var GenTrendIcon=(function(_super){__extends(GenTrendIcon,_super);function GenTrendIcon(size){var _this=_super.call(this)||this;if(size)
_this.size=size;return _this;}
GenTrendIcon.prototype.draw=function(info){this.info=info;var result=new super_fantan.SFResult(info.result);this.clear();var type;switch(this.type){case game.TrendType.NORMAL:var iconType=result.fan?'result_fan'+result.fan:'';this.createImg(iconType);return;case game.TrendType.BIG_SMALL:type=result.isBig?0:1;break;case game.TrendType.EVEN_ODD:type=result.isEven?0:1;break;}
this.createImg(type==0?"result_circle_0":"result_circle_1");};return GenTrendIcon;}(game.TrendIcon));super_fantan.GenTrendIcon=GenTrendIcon;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var SFantanPearlIcon=(function(_super){__extends(SFantanPearlIcon,_super);function SFantanPearlIcon(){return _super.call(this)||this;}
SFantanPearlIcon.prototype.drawResult=function(result){this.clear();var results=new super_fantan.SFResult(result);var iconType;if(results.isFan1)
iconType='result_fan1';else if(results.isFan2)
iconType='result_fan2';else if(results.isFan3)
iconType='result_fan3';else if(results.isFan4)
iconType='result_fan4';else if(results.isSmall)
iconType='trend_small';else if(results.isBig)
iconType='trend_big';else if(results.isOdd)
iconType='result_red_o';else if(results.isEven)
iconType='result_red_e';else
iconType='';this.createImg(iconType);};return SFantanPearlIcon;}(game.PearlRoadIcon));super_fantan.SFantanPearlIcon=SFantanPearlIcon;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var TrendDetailIcon=(function(_super){__extends(TrendDetailIcon,_super);function TrendDetailIcon(size,textSize,border){if(size===void 0){size=18;}
if(textSize===void 0){textSize=11;}
if(border===void 0){border=0;}
var _this=_super.call(this)||this;_this.border=border;_this.size=size;_this.textSize=textSize;_this.initView();return _this;}
TrendDetailIcon.prototype.initView=function(){this.bg=new PIXI.Graphics();this.addChild(this.bg);this.tf=game.GameUtils.createNormalText('',this.textSize,0x000000,'bold');this.tf.x=this.bg.width*0.5;this.tf.y=this.bg.height*0.5;this.tf.anchor.x=0.5;this.tf.anchor.y=this.tf.anchor.x;this.addChild(this.tf);};TrendDetailIcon.prototype.setData=function(data){var result=new super_fantan.SFResult(data.result);this.bg.clear();result.isFan1?this.bg.lineStyle(this.border,0x000000):this.bg.lineStyle(0,0,0);var color;switch(result.fan){case 1:color=0xffffff;break;case 2:color=0x059605;break;case 3:color=0xf4d62a;break;case 4:color=0xd30926;break;}
this.bg.beginFill(color);var radius=this.size/2;this.bg.drawCircle(radius,radius,radius);this.bg.endFill();this.tf.text=result.fan.toString();this.tf.x=this.tf.y=this.size/2;this.tf.anchor.set(0.5);};return TrendDetailIcon;}(PIXI.Container));super_fantan.TrendDetailIcon=TrendDetailIcon;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var NormalTrendContainer=(function(_super){__extends(NormalTrendContainer,_super);function NormalTrendContainer(gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem){if(name===void 0){name="";}
if(isHoverIcon===void 0){isHoverIcon=false;}
if(minItem===void 0){minItem=250;}
if(maxItem===void 0){maxItem=300;}
var _this=_super.call(this,gameModel,IconClass,width,height,maxRow,name,isHoverIcon,minItem,maxItem)||this;_this.type=game.TrendType.NORMAL;_this.underlay.alpha=0.6;return _this;}
NormalTrendContainer.prototype.changeWinner=function(item1,item2){if(item1==null||item2==null)
return true;var result1=new super_fantan.SFResult(item1.result);var result2=new super_fantan.SFResult(item2.result);switch(this.type){case game.TrendType.BIG_SMALL:return result1.isBig!=result2.isBig;case game.TrendType.EVEN_ODD:return result1.isEven!=result2.isEven;}};NormalTrendContainer.prototype.onExpandBtn=function(e){_super.prototype.onExpandBtn.call(this,e);var btn=e.target;this.underlay.alpha=btn.currentFrame==1?1:0.6;};NormalTrendContainer.prototype.setType=function(type){var prevType=this.type;if(prevType===type)
return;_super.prototype.setType.call(this,type);if(prevType===game.TrendType.NORMAL||(prevType!==game.TrendType.NORMAL&&this.type===game.TrendType.NORMAL)){this.maxRow=type===game.TrendType.NORMAL?4:6;this.iconSize=this.viewH/this.maxRow;if(this.blank==-1)
this.blank=2*this.iconSize;this.drawBg(this.isDark);}};NormalTrendContainer.prototype.drawTrendItem=function(item,isUpdateScroll,isDummy){if(isUpdateScroll===void 0){isUpdateScroll=false;}
if(isDummy===void 0){isDummy=false;}
if(this.type!==0)
return _super.prototype.drawTrendItem.call(this,item,isUpdateScroll,isDummy);var exItem=this.trends.length==0?null:this.trends[this.trends.length-1].info;var p=new PIXI.Point();var orgP1=this.p1.clone();var orgP2=this.p2.clone();var p1=this.p1;var p2=this.p2;p.copy(p1);p2.copy(p1);p1.x++;var result=new super_fantan.SFResult(item.result);if(result.isFan1)
p.y=0;else if(result.isFan2)
p.y=1;else if(result.isFan3)
p.y=2;else if(result.isFan4)
p.y=3;if(!isDummy)
this.posMap[p.x+'_'+p.y]=true;var icon=this.gameModel.vObjectPool.get(this.TrendIconClass).setData(this.iconSize,isDummy);icon.setType(this.type);icon.x=this.iconSize*0.5+p.x*this.iconSize;icon.y=this.iconSize*0.5+p.y*this.iconSize;icon['index']=this.trends.length;icon.draw(item);if(this.isHoverIcon&&!isDummy){icon.buttonMode=true;component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_UP,this.onItemMouseUp,this);component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_OVER,this.onItemMouseOver,this);component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_OUT,this.onItemMouseOut,this);component.VMouseUtils.on(icon,component.VMouseUtils.MOUSE_DOWN,this.onItemMouseDown,this);}
this.content.addChild(icon);if(!isDummy){this.trends.push(icon);}
if(isUpdateScroll)
this.updateScroll();this.isChanged=true;if(isDummy){this.p1.copy(orgP1);this.p2.copy(orgP2);this.dummyIcon=icon;}
return icon;};NormalTrendContainer.prototype.isTie=function(item){if(this.type!==game.TrendType.BIG_SMALL)
return false;else
return new super_fantan.SFResult(item.result).isTie;};return NormalTrendContainer;}(game.TrendContainer));super_fantan.NormalTrendContainer=NormalTrendContainer;})(super_fantan||(super_fantan={}));var super_fantan;(function(super_fantan){var TrendMng=(function(_super){__extends(TrendMng,_super);function TrendMng(gameModel){var _this=_super.call(this,gameModel)||this;_this.updateView();return _this;}
TrendMng.prototype.destructor=function(){component.VMouseUtils.off(game.GlobalVals.stage,component.VMouseUtils.MOUSE_UP,this.onStageUp,this);component.VMouseUtils.off(this.bg,component.VMouseUtils.MOUSE_DOWN,this.onMouseDown,this);component.VMouseUtils.on(this.expandBtn,component.VMouseUtils.MOUSE_UP,this.onPanelExpand,this);TweenMax.killTweensOf(this);_super.prototype.destructor.call(this);};TrendMng.prototype.getBigBoardName=function(){return game.GameText.BIG_ROAD;};TrendMng.prototype.initView=function(){this.pearlViewlTypes=[game.TrendType.BIG_SMALL,game.TrendType.EVEN_ODD];this.bg=new PIXI.Graphics();this.addChild(this.bg);this.bg.alpha=0.9;this.contentW=1067;this.startY=460;this.isExpanded=false;this.normalTrend=new super_fantan.NormalTrendContainer(this.gameModel,super_fantan.GenTrendIcon,765,92,4,this.getBigBoardName(),true);this.addChild(this.normalTrend);this.bigEyeTrend=new super_fantan.GenTrendRoad(this.gameModel,game.BigEyeIcon,285,46,6,game.GameText.BIG_EYE_ROAD.toUpperCase());this.addChild(this.bigEyeTrend);this.smallTrend=new super_fantan.GenTrendRoad(this.gameModel,game.SmallRoadIcon,285,46,6,game.GameText.SMALL_ROAD.toUpperCase());this.addChild(this.smallTrend);this.cockRoachTrend=new super_fantan.GenTrendRoad(this.gameModel,game.CockRoachIcon,285,46,6,game.GameText.COCK_ROACH_ROAD.toUpperCase());this.addChild(this.cockRoachTrend);this.pearlRoadTrend=new super_fantan.GenPearlRoad(this.gameModel,super_fantan.GenPearlRoadIcon,300,92,6,game.GameText.PEARL_ROAD.toUpperCase(),true);this.addChild(this.pearlRoadTrend);for(var i=0;i<305;i++){this.gameModel.vObjectPool.release(new game.SmallRoadIcon(),game.SmallRoadIcon);this.gameModel.vObjectPool.release(new game.CockRoachIcon(),game.CockRoachIcon);this.gameModel.vObjectPool.release(new super_fantan.GenPearlRoadIcon(),super_fantan.GenPearlRoadIcon);}
for(var i=0;i<605;i++){this.gameModel.vObjectPool.release(new super_fantan.GenTrendIcon(),super_fantan.GenTrendIcon);}
this.iconCount=new super_fantan.GenIconCount(this.gameModel);this.addChild(this.iconCount);this.predict=new super_fantan.GenPredict(this.gameModel);this.addChild(this.predict);this.predictBankerObj=new game.netdata.TrendsItem().setData('0100000000000000000000010');this.predictPlayerObj=new game.netdata.TrendsItem().setData('1000000000000000000000100');component.VMouseUtils.on(this.predict.player,component.VMouseUtils.MOUSE_DOWN,this.onPredict,this);component.VMouseUtils.on(this.predict.banker,component.VMouseUtils.MOUSE_DOWN,this.onPredict,this);this.maxTrendIndex=this.children.length-1;this.initPearViewBtns();this.initTableBtns();this.initChangeColorBtn();this.initSelectTrendBtns();this.trendInfoPanel=new super_fantan.GenTrendInfoPanel(this.gameModel);this.trendInfoPanel.hide();this.gameModel.overlay.addChildAt(this.trendInfoPanel,this.gameModel.overlay.children.length-1);this.gameModel.overlay.setChildIndex(this.trendInfoPanel,this.gameModel.overlay.children.length-1);this.expandBtn=new PIXI.Container();this.gameModel.overlay.addChild(this.expandBtn);this.expandBtn.y=this.startY;this.x=-this.contentW;this.visible=false;var bg=new PIXI.Graphics();bg.beginFill(0x26231E);bg.drawRect(0,0,23,151);bg.endFill();this.expandBtn.addChild(bg);var sp=new PIXI.Sprite(PIXI.Texture.fromFrame("trend_icon.png"));sp.anchor.x=0.5;sp.anchor.y=0.5;sp.x=bg.width*0.5;sp.y=bg.height*0.5;game.GameUtils.resizeNodeH(sp,18);this.expandBtn.addChild(sp);this.expandBtn.buttonMode=true;component.VMouseUtils.on(this.expandBtn,component.VMouseUtils.MOUSE_UP,this.onPanelExpand,this);this.gameModel.dispatcher.addEventListener(GameEvent.GAME_TREND_INFO,this.onTrendInfo,this);this.gameModel.dispatcher.addEventListener(GameEvent.GAME_HIDE_TREND_INFO,this.onHideTrendInfo,this);component.VMouseUtils.on(this.normalTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.on(this.bigEyeTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.on(this.smallTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.on(this.cockRoachTrend.expandBtn,component.VMouseUtils.MOUSE_UP,this.onExpandBtn,this);component.VMouseUtils.on(game.GlobalVals.stage,component.VMouseUtils.MOUSE_UP,this.onStageUp,this);component.VMouseUtils.on(this.bg,component.VMouseUtils.MOUSE_DOWN,this.onMouseDown,this);this.visible=false;};TrendMng.prototype.onStageUp=function(){component.VComponentUtils.stopDrag(this);};TrendMng.prototype.onMouseDown=function(){component.VComponentUtils.startDrag(this,new PIXI.Rectangle(0,-this.startY,0,this.gameModel.GAME_HEIGHT-this.height));};TrendMng.prototype.onPanelExpand=function(e){this.isExpanded=!this.isExpanded;TweenMax.killTweensOf(this);this.visible=true;if(this.isExpanded)
this.show();else
this.hide();};TrendMng.prototype.hide=function(){TweenMax.to(this,0.5,{x:-this.contentW,onComplete:function(){this.y=0;this.visible=false;}.bind(this)});};TrendMng.prototype.show=function(){TweenMax.to(this,0.5,{x:0,onUpdate:function(){this.expandBtn.x=this.x+this.contentW;}.bind(this)});};TrendMng.prototype.initSelectTrendBtns=function(trendTypes,txts){if(trendTypes===void 0){trendTypes=null;}
if(txts===void 0){txts=null;}
var trendTypes=[game.TrendType.NORMAL,game.TrendType.BIG_SMALL,game.TrendType.EVEN_ODD];var txts=["","B/S","E/O"];if(!trendTypes)
return;this.trendTypeBtnCon=new PIXI.Container();this.addChild(this.trendTypeBtnCon);var btn;for(var i=0;i<trendTypes.length;i++){btn=new PIXI.Container();btn.y=i*15;var bg=new PIXI.Graphics();bg.alpha=0;bg.beginFill(0x333333);bg.drawRect(0,0,22,15);btn['bg']=bg;btn.addChild(btn['bg']);btn['type']=trendTypes[i];var origLang=LANG;var firstButton=i===0;if(firstButton)
LANG='en';btn['tf']=game.GameUtils.createText(txts[i],{fontFamily:"Arial",fontSize:10,fontStyle:'bold',fill:0x777777,align:'center'});if(firstButton){LANG=origLang;this.activeTrendBtn=btn;btn['tf'].y=-11;btn['tf'].style.fontSize=26;btn['tf'].style.fill=0xffffff;}
btn['tf'].x=12;btn['tf'].anchor.x=0.5;btn.addChild(btn['tf']);btn.y=17*i;this.trendTypeBtnCon.addChild(btn);btn.buttonMode=true;component.VMouseUtils.on(btn,component.VMouseUtils.MOUSE_DOWN,this.onTrendTypeBtn,this);}
this.trendTypeBtnCon.x=278;this.trendTypeBtnCon.y=465;};TrendMng.prototype.initTableBtns=function(){};TrendMng.prototype.updateTrends=function(tableId,values){if(tableId!=this.gameModel.TABLE_ID)
return;this.activeTableId=this.gameModel.TABLE_ID;this.updateTrendsGame(tableId,values);};TrendMng.prototype.updateView=function(){var viewMode=game.GlobalVals.viewMode;switch(viewMode){case game.ViewMode.MODE_2D:case game.ViewMode.MODE_7S:var maxView=new PIXI.Rectangle(304,464,758,141);this.normalTrend.setSmallView(new PIXI.Rectangle(maxView.x,maxView.y,661,92));this.normalTrend.setMaxView(maxView);this.bigEyeTrend.setSmallView(new PIXI.Rectangle(maxView.x,559,250,46));this.bigEyeTrend.setMaxView(maxView);this.smallTrend.setSmallView(new PIXI.Rectangle(559,this.bigEyeTrend.y,250,46));this.smallTrend.setMaxView(maxView);this.cockRoachTrend.setSmallView(new PIXI.Rectangle(812,this.bigEyeTrend.y,250,46));this.cockRoachTrend.setMaxView(maxView);this.pearlRoadTrend.setSmallView(new PIXI.Rectangle(25,maxView.y,242,92));this.pearlRoadTrend.setMaxView(maxView);this.pearViewBtn.x=4;this.pearViewBtn.y=464;this.changeColorBtn.x=284;this.changeColorBtn.y=588;this.iconCount.x=34;this.iconCount.y=585;this.predict.x=969;this.predict.y=maxView.y;this.predict.banker.x=0;this.predict.banker.y=0;this.predict.player.x=0;this.predict.player.y=47;this.predict.resizeBtns(93,44);this.bg.clear();this.bg.lineStyle(1,0x26231E);this.bg.beginFill(0x26231E);this.bg.drawRect(0,0,1086,151);this.bg.endFill();this.bg.y=this.startY;this.bg.lineStyle(1,0x777777);this.bg.moveTo(274,5);this.bg.lineTo(274,5+90);this.iconCount.scale.x=1;this.iconCount.scale.y=this.iconCount.scale.x;break;case game.ViewMode.MODE_3D:break;}};TrendMng.prototype.update=function(){_super.prototype.update.call(this);this.expandBtn.x=this.x+this.contentW;this.expandBtn.y=this.y+this.startY;};TrendMng.prototype.changeView=function(){this.updateView();_super.prototype.changeView.call(this);};TrendMng.prototype.onPredict=function(e){var item=e.target==this.predict.banker?this.predictBankerObj:this.predictPlayerObj;this.clear();this.updateTrends(this.gameModel.TABLE_ID,this.trendDataMap[this.gameModel.TABLE_ID].trendArr);this.addTrendGame(this.activeTableId,item,true);};TrendMng.prototype.isTie=function(item){return new super_fantan.SFResult(item.result).isTie;};TrendMng.prototype.getWin=function(item){var v=0;var result=new super_fantan.SFResult(item.result);if(result.isBig)
v=1;else if(result.isSmall)
v=2;return v;};return TrendMng;}(game.BaseTrendMng));super_fantan.TrendMng=TrendMng;})(super_fantan||(super_fantan={}));var lobby;(function(lobby){var BaseTableItem=(function(_super){__extends(BaseTableItem,_super);function BaseTableItem(gameModel,info){var _this=_super.call(this,gameModel)||this;_this.info=info;_this.redraw=0;_this.maxItem=20;return _this;}
BaseTableItem.prototype.destroy=function(options){this.gameModel.dispatcher.removeEventListener(game.GameEvent.GAME_UPDATE,this.update,this);_super.prototype.destroy.call(this);};BaseTableItem.prototype.initView=function(w,h){var bg=new PIXI.mesh.NineSlicePlane(this.gameModel.resources['table_item_bg'].texture,10,34,10,34);this.addChild(bg);this.bg=bg;this.bg.width=w;this.bg.height=h;this.countDown=new game.CountDown(2,0xE0C955);this.countDown.x=w-22;this.countDown.y=13;this.countDown.scale.x=0.35;this.countDown.scale.y=this.countDown.scale.x;this.addChild(this.countDown);this.gameTitle=new game.GameTitleCon(this.gameModel);this.gameTitle.scale.x=0.8;this.gameTitle.scale.y=this.gameTitle.scale.x;this.gameTitle.bg.visible=false;this.addChild(this.gameTitle);this.gameTitle.setData(this.info.id);var tableId=this.info.id;var activeGroup=null;for(var j=0;j<game.GameSettings.CONFIG.tableSmallView.length;j++){if(activeGroup)
break;var group=game.GameSettings.CONFIG.tableSmallView[j];for(var k=0;k<group.tables.length;k++){if(group.tables[k]==tableId){activeGroup=group;break;}}}
this.gameTitle.gameNameTf.text=game.GameSettings.TABLE_INFOS[tableId].gameName;if(activeGroup){this.gameTitle.icon.texture=PIXI.Texture.fromFrame(activeGroup.icon);var gameName=game.GameSettings.TABLE_INFOS[tableId].gameName;if(activeGroup.gameName)
this.gameTitle.gameNameTf.text=activeGroup.gameName;}
if(this.gameTitle.turbo){var turbo=this.gameTitle.turbo;turbo.x=(w-66)/this.gameTitle.scale.x;turbo.y=1;turbo.width=28/this.gameTitle.scale.x;turbo.scale.y=turbo.scale.x;}
if(this.info['isNew']){this.gameTitle.createNewIcon();this.gameTitle.newIcon.x=w/this.gameTitle.scale.x-150;}
this.avatar=new game.AvatarIcon(this.gameModel).initialize(110,'',game.GameUtils.getStudio(this.info.id));this.avatar.x=4;this.avatar.y=30;this.addChild(this.avatar);this.studioCon=game.GameUtils.createBg(this.avatar.width,20,game.GameUtils.getStudioColor(game.GameUtils.getStudio(this.info.id)),0,0.8);this.studioCon.x=this.avatar.x;this.studioCon.y=120;this.addChild(this.studioCon);var t=game.GameUtils.createNormalText(game.GameText['STUDIO_'+game.GameUtils.getStudio(this.info.id)+'_NAME']);t.anchor.x=0.5;var tf=new game.FixedSizeText(this.avatar.width,t);tf.x=this.avatar.width*0.5;tf.y=4;this.studioCon.addChild(tf);var c=game.GameUtils.getStudioColor(game.GameUtils.getStudio(this.info.id));this.enterBtn=new component.VButton([game.GameUtils.createBg(80,27,c,3,0.9),game.GameUtils.createBg(80,27,c,3,0.9)],this.onEnter.bind(this));t=game.GameUtils.createNormalText(game.GameText.ENTER.toUpperCase());t.anchor.x=0.5;t.anchor.y=0.5;var tf=new game.FixedSizeText(this.enterBtn.width,t);tf.x=this.enterBtn.width*0.5;tf.y=this.enterBtn.height*0.5;this.enterBtn.addChild(tf);this.enterBtn.x=w-(596-506);this.enterBtn.y=112;this.gameModel.dispatcher.addEventListener(game.GameEvent.GAME_UPDATE,this.update,this);};BaseTableItem.prototype.update=function(){if(this.redraw==1){this.redraw=0;this.trendCon.clear();this.doInitTrends();}
if(this.redraw>0)
this.redraw--;};BaseTableItem.prototype.onEnter=function(){var btn=game.GlobalVals.main.mainView.tablesView.tableSmallView.getBtn(this.info.id);var menu=btn['menu'];if(!menu)
return;if(menu.hasActiveItem()){menu.runActiveItem();return;}
else
menu.show();var p=new PIXI.Point(this.enterBtn.x-menu.width-2,this.enterBtn.y);p=this.toGlobal(p);p=game.GlobalVals.overlay.toLocal(p);menu.x=p.x;menu.y=p.y;if(menu.y>game.GameSettings.CANVAS_HEIGHT-menu.height)
menu.y=game.GameSettings.CANVAS_HEIGHT-menu.height;};BaseTableItem.prototype.doInitTrends=function(){};BaseTableItem.prototype.onNewShoeSucceed=function(){this.doInitTrends();};BaseTableItem.prototype.addTrend=function(item){};BaseTableItem.prototype.refresh=function(){this.addChild(this.enterBtn);this.initTrends();var tableSetting=game.GlobalVals.getTableSetting(this.info.id);this.countDown.setTotal(tableSetting.ticks);for(var i=0;i<game.GlobalVals.lobbyResponse.content.length;i++)
if(game.GlobalVals.lobbyResponse.content[i].id==this.info.id){if(game.GlobalVals.lobbyResponse.content[i].dealerPhoto)
this.avatar.loadImage(game.GlobalVals.lobbyResponse.content[i].dealerPhoto);else
this.avatar.loadImage("../common_bin/assets/dummy_dealer_avatar.jpg");break;}};BaseTableItem.prototype.initTrends=function(){if(!game.GlobalVals.trendDataMap[this.info.id])
return;this.redraw=2;};return BaseTableItem;}(game.GameObject));lobby.BaseTableItem=BaseTableItem;})(lobby||(lobby={}));var lobby;(function(lobby){var Game=(function(_super){__extends(Game,_super);function Game(){return _super.call(this)||this;}
Game.prototype.initialize=function(tableId,resources){this.gameModel.GAME_ID=game.GameID.LOBBY;this.gameModel.TABLE_ID=tableId;this.gameModel.initialize(resources);this.userInfo=game.GlobalVals.userInfo;this.startGame();return this;};Game.prototype.startGame=function(){_super.prototype.startGame.call(this);};Game.prototype.initView=function(){_super.prototype.initView.call(this);this.gameView=new lobby.GameView(this.gameModel);this.addChild(this.gameView);};Game.prototype.onAuthSuccess=function(){};Game.prototype.onWSOpenHdl=function(){};Game.prototype.onWSCloseHdl=function(){};Game.prototype.onGameEvent=function(e){switch(e.data.type){}};Game.prototype.onWSMessageHdl=function(e){var data=e.data;switch(data.kind){case game.GameCMD.BALANCE:this.onBalance();break;case game.GameCMD.COMMIT_SUCCEED:this.onCommitSucceedAll(data);break;case game.GameCMD.LIMITS:break;case game.GameCMD.COUNT_DOWN:this.onCountDownAll(data);break;case game.GameCMD.SHOW_LOBBY:this.onShowLobby(data);break;case game.GameCMD.HISTORY_100:this.onHistory100(data);break;case game.GameCMD.ROLL_BACK_SUCCEED:this.onRollbackSucceedAll(data);break;case game.GameCMD.NEW_SHOE_SUCCEED:this.onNewShoeSucceed(data);break;}};Game.prototype.onNewShoeSucceed=function(data){this.gameView.tablesCon.grid.onNewShoeSucceed(data);};Game.prototype.onHistory100=function(data){};Game.prototype.onShowLobby=function(data){this.gameView.tablesCon.grid.onShowLobby(data);};Game.prototype.onCountDownAll=function(data){this.gameView.tablesCon.grid.onCountDownAll(data);};Game.prototype.onCommitSucceedAll=function(data){this.gameView.tablesCon.grid.onCommitSucceedAll(data);};Game.prototype.onRollbackSucceedAll=function(data){this.gameView.tablesCon.grid.onRollbackSucceedAll(data);};Game.prototype.enterGame=function(limitID){game.NetUtils.sendWS({kind:game.GameCMD.GET_BALANCE,game:this.gameModel.TABLE_ID});this.gameModel.loading.hide();this.onAuthSuccess();this.gameModel.LIMIT_ID=limitID;this.gameView.onEnterGame();};return Game;}(game.BaseGame));lobby.Game=Game;})(lobby||(lobby={}));var lobby;(function(lobby){var GameView=(function(_super){__extends(GameView,_super);function GameView(gameModel){var _this=_super.call(this,gameModel)||this;_this.betInput.visible=false;return _this;}
GameView.prototype.initialize=function(){this.gameModel.VOD_X=0;this.gameModel.VOD_Y=32;this.gameModel.VOD_WIDTH=game.GameSettings.CANVAS_WIDTH;this.gameModel.VOD_HEIGHT=223;var bg=new PIXI.Graphics();this.addChild(bg);bg.beginFill(0x1E1E1E);bg.drawRect(0,this.gameModel.VOD_Y+this.gameModel.VOD_HEIGHT,game.GameSettings.CANVAS_WIDTH,game.GameSettings.CANVAS_HEIGHT-this.gameModel.VOD_Y-this.gameModel.VOD_HEIGHT);bg.endFill();_super.prototype.initialize.call(this);var topBar=game.GameUtils.createBg(game.GameSettings.CANVAS_WIDTH,33,0x1F1F1F);this.addChild(topBar);var userIcon=new PIXI.Sprite(this.gameModel.resources['user_icon'].texture);userIcon.x=5;userIcon.y=5;topBar.addChild(userIcon);this.userNameTf=game.GameUtils.createNormalText("",14);this.userNameTf.x=41;this.userNameTf.y=10;this.addChild(this.userNameTf);this.banner=new lobby.LAdsCon(this.gameModel,this.gameModel.VOD_WIDTH,this.gameModel.VOD_HEIGHT);this.banner.y=this.gameModel.VOD_Y;this.addChild(this.banner);this.banner.show(false);this.settingCon=new lobby.GenSettingContainer(this.gameModel);this.addChild(this.settingCon);this.tabCon=new PIXI.Container();this.tabCon.x=42;this.tabCon.y=257;this.addChild(this.tabCon);this.tablesCon=new lobby.TablesCon(this.gameModel);this.addChild(this.tablesCon);this.initTabCon();this.addChild(this.overlay);};GameView.prototype.initBg=function(){};GameView.prototype.initViewModeControl=function(){};GameView.prototype.initTabCon=function(){var arr=[];var studioOrder=game.GameSettings.CONFIG.studioLobbyOrder;for(var i=0;i<studioOrder.length;i++)
arr.push(game.GameText['STUDIO_'+studioOrder[i]+'_NAME']);arr=arr.concat([game.GameText.ALL,game.GameText.POPULAR,game.GameText.BACCARAT,game.GameText.SICBO,game.GameText.ROULETTE,game.GameText.VIEW_7S,game.GameText.OTHER,""]);var sizes=[3/25,3/25,3/25,2/25,2/25,2/25,2/25,2/25,2/25,2/25,1/25];var dis=1;var w=1197-sizes.length*dis;;var btn;var btnH=40;var posX=0;var btns=[];for(var i=0;i<arr.length;i++){arr[i]=arr[i].toUpperCase();if(i<studioOrder.length){var studio=studioOrder[i];var c=game.StyleMng['STUDIO_'+studio+'_COLOR'];var c1=game.StyleMng.getStudioHighLightColor(studio);btn=new component.VButton([game.GameUtils.createBg(w*sizes[i],btnH,c,10),game.GameUtils.createBg(w*sizes[i],btnH,c1,10)]);}
else
btn=new component.VButton([game.GameUtils.createBg(w*sizes[i],btnH,0x3A352F,10),game.GameUtils.createBg(w*sizes[i],btnH,0xFAF1E2,10)]);btn.buttonMode=true;var tf=game.GameUtils.createNormalText(arr[i]);tf.style.align="center";tf.anchor.x=0.5;tf.x=btn.width*0.5;tf.y=10;btn.tf=tf;btn.addChild(tf);btn.x=posX;btn.data=i;posX+=btn.width+dis;this.tabCon.addChild(btn);btns.push(btn);}
this.tabBtns=btns.slice();var turbo=new PIXI.Sprite(PIXI.Texture.fromFrame("turbo_icon.png"));this.addChild(turbo);turbo.x=6;turbo.y=1;turbo.width=32;turbo.scale.y=turbo.scale.x;btns[btns.length-1].addChild(turbo);game.GlobalVals.toolTip.addToolTip(btns[btns.length-1],game.GameText.TURBO);this.tabMng=new component.VTabMng();this.tabMng.initialize(btns);this.tabMng.addEventListener(component.VTabMng.CHANGE,this.onTabChange,this);};GameView.prototype.onTabChange=function(e){var btn=e.data;if(this.activeBtn&&this.activeBtn.data>1)
this.activeBtn.tf.style.fill=game.GameUtils.TEXT_COLOR;this.activeBtn=btn;DEFAULT_TAB=btn.data;if(btn.data>1)
btn.tf.style.fill=0x000000;this.tablesCon.setTableIds(this.getTableIds(),btn.data>=game.GameSettings.CONFIG.studioLobbyOrder.length);var studio=game.GameSettings.CONFIG.studioLobbyOrder[btn.data];if(btn.data<game.GameSettings.CONFIG.studioLobbyOrder.length)
this.tablesCon.grid.bg.gotoAndStop(studio+1);else
this.tablesCon.grid.bg.gotoAndStop(0);};GameView.prototype.getTableIds=function(){if(!this.activeBtn)
return[];var ids=[];var id;var gameId;game.GlobalVals.selected7S=false;if(this.activeBtn.data<game.GameSettings.CONFIG.studioLobbyOrder.length){var studio=game.GameSettings.CONFIG.studioLobbyOrder[this.activeBtn.data];ids=game.GameSettings.CONFIG.studio[studio].tableIds.slice();for(var j=ids.length-1;j>=0;j--){if(game.GameSettings.TABLE_INFOS[ids[j]].banned)
ids.splice(j,1);}
return ids;}
switch(this.activeBtn.data-game.GameSettings.CONFIG.studioLobbyOrder.length+1){case 1:ids=game.GameUtils.getAllTableIds();break;case 2:ids=game.GameSettings.CONFIG.lobby.popular.slice();break;case 3:ids=game.GameUtils.getTableForGame([game.GameID.FABULOUS,game.GameID.BACCARAT,game.GameID.BACCARAT_NONCOMMISSION,game.GameID.BACCARAT_CINEMATIC,game.GameID.BACCARAT_SUPER98,game.GameID.SEVEN_UP,game.GameID.SQUEEZE_BACCARAT,game.GameID.SQUEEZE_BACCARAT_NONCOMMISSION,game.GameID.LUCKY_BACCARAT]);break;case 4:ids=game.GameUtils.getTableForGame([game.GameID.SICBO]);break;case 5:ids=game.GameUtils.getTableForGame([game.GameID.ROULETTE_CINEMATIC,game.GameID.ROULETTE]);break;case 6:game.GlobalVals.selected7S=true;var allIds=game.GameUtils.getAllTableIds();for(var j=0;j<allIds.length;j++)
if(game.GameUtils.checkViewModeAvailable(allIds[j],game.ViewMode.MODE_7S))
ids.push(allIds[j]);break;case 7:var gameIds=[game.GameID.BULL_FIGHT,game.GameID.DRAGON_TIGER,game.GameID.SUPER_HI_LO,game.GameID.SUPER_3PICTURES,game.GameID.SUPER_FANTAN];ids=game.GameUtils.getTableForGame(gameIds);break;case 8:var allIds=game.GameUtils.getAllTableIds();for(var j=0;j<allIds.length;j++)
if(game.GameSettings.TABLE_INFOS[allIds[j]].turbo)
ids.push(allIds[j]);break;}
for(var j=ids.length-1;j>=0;j--){if(game.GameSettings.TABLE_INFOS[ids[j]].banned)
ids.splice(j,1);}
return ids;};GameView.prototype.initMiniTool=function(){this.topTool=new lobby.TopTool(this.gameModel);this.topTool.y=1;this.topTool.x=game.GameSettings.CANVAS_WIDTH-this.topTool.width-5;this.addChild(this.topTool);};GameView.prototype.activeSuperHand=function(isSupper){};GameView.prototype.initVod=function(){this.video=game.GlobalVals.getAdsVideoElement();this.video.style.zIndex='0';this.onVodLoadMetaDataBinding=this.onVodLoadMetaData.bind(this);this.video.addEventListener('loadedmetadata',this.onVodLoadMetaDataBinding);this.video.controls='';this.video.loop='loop';this.video.type="application/x-mpegURL";};GameView.prototype.playVod=function(){if(!this.isVodStarted){this.isVodStarted=true;if(this.video){this.video.src="../common_bin/assets/lang/"+LANG+"/"+game.GameSettings.CONFIG.adsVods[0];this.video.pause();}}};GameView.prototype.updateView=function(){};GameView.prototype.update=function(){this.gameModel.loading.update();};GameView.prototype.changeView=function(){};GameView.prototype.onTableLimit=function(){};GameView.prototype.onAuthSuccess=function(){};GameView.prototype.onEnterGame=function(){this.userNameTf.text=game.GlobalVals.userInfo.nickname;this.tablesCon.grid.onEnterGame();if(DEFAULT_TAB>=0)
this.tabMng.setActiveInd(DEFAULT_TAB);else
this.tabMng.setActive(this.tabBtns[3]);this.playVod();};GameView.prototype.setBalance=function(value,animated){if(animated===void 0){animated=false;}
this.settingCon.setBalance(value,game.GlobalVals.userInfo.currency,false);};return GameView;}(game.BaseGameView));lobby.GameView=GameView;})(lobby||(lobby={}));var lobby;(function(lobby){var GenSettingContainer=(function(_super){__extends(GenSettingContainer,_super);function GenSettingContainer(gameModel){var _this=_super.call(this,gameModel)||this;_this.livePoolBtn.visible=false;_this.balance.y=1;_this.cashierBtn.x=210;_this.balance['tf'].x=240;_this.balance['bg'].visible=false;_this.refreshBtn.x=370;_this.settingBtn.x=1150;_this.menuCon.x=_this.settingBtn.x;return _this;}
GenSettingContainer.prototype.initView=function(){this.menuDirectionDown=true;_super.prototype.initView.call(this);};return GenSettingContainer;}(game.SettingContainer));lobby.GenSettingContainer=GenSettingContainer;})(lobby||(lobby={}));var lobby;(function(lobby){var BacTableItem=(function(_super){__extends(BacTableItem,_super);function BacTableItem(gameModel,info){return _super.call(this,gameModel,info)||this;}
BacTableItem.prototype.initView=function(w,h){_super.prototype.initView.call(this,w,h);this.trendCon=new game.TrendContainer(this.gameModel,game.TrendIcon,w-(596-470),112,6,this.info.hint,false,70,80);this.trendCon.expandBtn.visible=false;this.trendCon.x=124;this.trendCon.y=30;this.addChild(this.trendCon);};BacTableItem.prototype.addTrend=function(item){this.trendCon.addTrend(item,true);this.trendCon.blinkExIcon();};BacTableItem.prototype.doInitTrends=function(){this.trendCon.clear();this.trendCon.updateTrends(game.GlobalVals.trendDataMap[this.info.id].trendArr);};return BacTableItem;}(lobby.BaseTableItem));lobby.BacTableItem=BacTableItem;})(lobby||(lobby={}));var lobby;(function(lobby){var BaseTrendCon=(function(_super){__extends(BaseTrendCon,_super);function BaseTrendCon(gameModel,ItemClass,w,h){var _this=_super.call(this,gameModel)||this;_this.ItemClass=ItemClass;_this.viewW=w;_this.viewH=h;_this.items=[];_this.initView();return _this;}
BaseTrendCon.prototype.initView=function(){var masker=game.GameUtils.createBg(this.viewW,this.viewH);this.addChild(masker);var maskerCopy=game.GameUtils.createBg(this.viewW,this.viewH);maskerCopy.alpha=0;this.addChild(maskerCopy);this.content=new PIXI.Container();this.addChild(this.content);this.content.mask=masker;this.scroller=new component.VHorScroll(maskerCopy,this.content);};BaseTrendCon.prototype.destructor=function(){this.clear();_super.prototype.destructor.call(this);};BaseTrendCon.prototype.clear=function(){while(this.items.length){var item=this.items.pop();this.content.removeChild(item);core.VObjectPool.release(item,this.ItemClass);}};BaseTrendCon.prototype.updateTrends=function(trendArr){this.clear();for(var i=0;i<trendArr.length;i++){var item=core.VObjectPool.get(this.ItemClass);item.setData(trendArr[i]);item.x=item.width*0.5+i*(item.width-5);this.content.addChild(item);this.items.push(item);}
var blank=0;var w=this.content.width;TweenMax.killTweensOf(this.content);this.content.x=-(w-this.viewW+blank);this.scroller.updateScroll(w+blank);};return BaseTrendCon;}(game.GameObject));lobby.BaseTrendCon=BaseTrendCon;})(lobby||(lobby={}));var lobby;(function(lobby){var BullTableItem=(function(_super){__extends(BullTableItem,_super);function BullTableItem(gameModel,info){return _super.call(this,gameModel,info)||this;}
BullTableItem.prototype.initView=function(w,h){_super.prototype.initView.call(this,w,h);this.trendCon=new game.TrendContainer(this.gameModel,bull_fight.GenTrendIcon,w-(596-470),112,6,this.info.hint,false,70,80);this.trendCon.expandBtn.visible=false;this.trendCon.x=124;this.trendCon.y=30;this.addChild(this.trendCon);};BullTableItem.prototype.addTrend=function(item){this.trendCon.addTrend(item,true);this.trendCon.blinkExIcon();};BullTableItem.prototype.doInitTrends=function(){this.trendCon.clear();this.trendCon.updateTrends(game.GlobalVals.trendDataMap[this.info.id].trendArr);};return BullTableItem;}(lobby.BaseTableItem));lobby.BullTableItem=BullTableItem;})(lobby||(lobby={}));var lobby;(function(lobby){var DraTableItem=(function(_super){__extends(DraTableItem,_super);function DraTableItem(gameModel,info){return _super.call(this,gameModel,info)||this;}
DraTableItem.prototype.initView=function(w,h){_super.prototype.initView.call(this,w,h);this.trendCon=new game.TrendContainer(this.gameModel,dragon_tiger.DraTrendIcon,w-(596-470),112,6,this.info.hint,false,70,80);this.trendCon.expandBtn.visible=false;this.trendCon.x=124;this.trendCon.y=30;this.addChild(this.trendCon);};DraTableItem.prototype.addTrend=function(item){this.trendCon.addTrend(item,true);this.trendCon.blinkExIcon();};DraTableItem.prototype.doInitTrends=function(){this.trendCon.clear();this.trendCon.updateTrends(game.GlobalVals.trendDataMap[this.info.id].trendArr);};return DraTableItem;}(lobby.BaseTableItem));lobby.DraTableItem=DraTableItem;})(lobby||(lobby={}));var lobby;(function(lobby){var HiLoTableItem=(function(_super){__extends(HiLoTableItem,_super);function HiLoTableItem(gameModel,info){var _this=_super.call(this,gameModel,info)||this;_this.maxItem=15;return _this;}
HiLoTableItem.prototype.initView=function(w,h){_super.prototype.initView.call(this,w,h);this.trendCon=new super_hi_lo.TrendContainer(this.gameModel,super_hi_lo.TrendIcon,w-(596-470),112,6,this.info.hint);this.trendCon.expandBtn.visible=false;this.trendCon.x=124;this.trendCon.y=30;this.addChild(this.trendCon);};HiLoTableItem.prototype.addTrend=function(item){this.doInitTrends();};HiLoTableItem.prototype.doInitTrends=function(){if(!game.GlobalVals.trendDataMap[this.info.id])
return;var arr=game.GlobalVals.trendDataMap[this.info.id].trendArr;arr=this.extractTrends(arr);var index=arr.length-this.maxItem;this.trendCon.clear();this.trendCon.updateTrends(arr.slice(index>=0?index:0,arr.length));};HiLoTableItem.prototype.extractTrends=function(values){var start=0;for(var i=0;i<values.length;i++){if(values[i].round==1){start=i;break;}}
return values.slice(start,values.length);};return HiLoTableItem;}(lobby.BaseTableItem));lobby.HiLoTableItem=HiLoTableItem;})(lobby||(lobby={}));var lobby;(function(lobby){var LuckTableItem=(function(_super){__extends(LuckTableItem,_super);function LuckTableItem(gameModel,info){return _super.call(this,gameModel,info)||this;}
LuckTableItem.prototype.initView=function(w,h){_super.prototype.initView.call(this,w,h);this.trendCon=new game.TrendContainer(this.gameModel,lucky_baccarat.LuckTrendIcon,w-(596-470),112,6,this.info.hint,false,70,80);this.trendCon.expandBtn.visible=false;this.trendCon.x=124;this.trendCon.y=30;this.addChild(this.trendCon);};LuckTableItem.prototype.addTrend=function(item){this.trendCon.addTrend(item,true);this.trendCon.blinkExIcon();};LuckTableItem.prototype.doInitTrends=function(){this.trendCon.clear();this.trendCon.updateTrends(game.GlobalVals.trendDataMap[this.info.id].trendArr);};return LuckTableItem;}(lobby.BaseTableItem));lobby.LuckTableItem=LuckTableItem;})(lobby||(lobby={}));var lobby;(function(lobby){var RouTableItem=(function(_super){__extends(RouTableItem,_super);function RouTableItem(gameModel,info){var _this=_super.call(this,gameModel,info)||this;_this.maxItem=20;return _this;}
RouTableItem.prototype.initView=function(w,h){_super.prototype.initView.call(this,w,h);this.trendCon=new lobby.RouTrendCon(this.gameModel,lobby.RouTrendItem,w-(596-470),112);this.trendCon.x=124;this.trendCon.y=30;this.addChild(this.trendCon);};RouTableItem.prototype.addTrend=function(item){var arr=game.GlobalVals.trendDataMap[this.info.id].trendHis100Arr;var index=arr.length-this.maxItem;this.trendCon.updateTrends(arr.slice(index>0?index:0,arr.length));};RouTableItem.prototype.doInitTrends=function(){if(!game.GlobalVals.trendDataMap[this.info.id])
return;var arr=game.GlobalVals.trendDataMap[this.info.id].trendHis100Arr;var index=arr.length-this.maxItem;this.trendCon.clear();this.trendCon.updateTrends(arr.slice(index>=0?index:0,arr.length));};return RouTableItem;}(lobby.BaseTableItem));lobby.RouTableItem=RouTableItem;})(lobby||(lobby={}));var lobby;(function(lobby){var RouTrendCon=(function(_super){__extends(RouTrendCon,_super);function RouTrendCon(gameModel,ItemClass,w,h){return _super.call(this,gameModel,ItemClass,w,h)||this;}
RouTrendCon.prototype.initView=function(){var bg=new PIXI.Graphics();this.addChild(bg);bg.lineStyle(1,0x424242);bg.moveTo(0,35);bg.lineTo(this.viewW,35);bg.moveTo(0,this.viewH-35);bg.lineTo(this.viewW,this.viewH-35);_super.prototype.initView.call(this);};return RouTrendCon;}(lobby.BaseTrendCon));lobby.RouTrendCon=RouTrendCon;})(lobby||(lobby={}));var lobby;(function(lobby){var RouTrendItem=(function(_super){__extends(RouTrendItem,_super);function RouTrendItem(gameModel){var _this=_super.call(this,gameModel)||this;_this.bg=game.GameUtils.createBg(68,112,0x000000,0,0.01);_this.bg.x=-_this.bg.width*0.5;_this.addChild(_this.bg);_this.tf1=game.GameUtils.createNormalText("",14);_this.tf1.anchor.x=0.5;_this.tf1.y=10;_this.addChild(_this.tf1);_this.tf2=game.GameUtils.createNormalText("",14);_this.tf2.anchor.x=0.5;_this.addChild(_this.tf2);_this.tf2.y=_this.bg.height-_this.tf2.height-10;_this.icon=new roulette.TrendDettailIcon(30,16);_this.addChild(_this.icon);return _this;}
RouTrendItem.prototype.setData=function(info){this.tf1.text=parseInt(info.cards)%2==0?game.GameText.EVEN:game.GameText.ODD;this.tf2.text=info.shoe+" - "+info.round;this.icon.setData(info);this.icon.x=-this.icon.width*0.5;this.icon.y=this.bg.height*0.5-this.icon.height*0.5;};RouTrendItem.prototype.clean=function(){};return RouTrendItem;}(game.GameObject));lobby.RouTrendItem=RouTrendItem;})(lobby||(lobby={}));var lobby;(function(lobby){var S3PTableItem=(function(_super){__extends(S3PTableItem,_super);function S3PTableItem(gameModel,info){var _this=_super.call(this,gameModel,info)||this;_this.maxItem=15;return _this;}
S3PTableItem.prototype.initView=function(w,h){_super.prototype.initView.call(this,w,h);this.trendCon=new super_3pictures.TrendContainer(this.gameModel,super_3pictures.TrendIcon,w-(596-470),112,6,this.info.hint,false,70,80);this.trendCon.expandBtn.visible=false;this.trendCon.x=124;this.trendCon.y=30;this.addChild(this.trendCon);};S3PTableItem.prototype.addTrend=function(item){this.trendCon.addTrend(item,true);this.trendCon.blinkExIcon();};S3PTableItem.prototype.doInitTrends=function(){if(!game.GlobalVals.trendDataMap[this.info.id])
return;var arr=game.GlobalVals.trendDataMap[this.info.id].trendArr;arr=this.extractTrends(arr);var index=arr.length-this.maxItem;this.trendCon.clear();this.trendCon.updateTrends(arr.slice(index>=0?index:0,arr.length));};S3PTableItem.prototype.extractTrends=function(values){var start=0;for(var i=0;i<values.length;i++){if(values[i].round==1){start=i;break;}}
return values.slice(start,values.length);};return S3PTableItem;}(lobby.BaseTableItem));lobby.S3PTableItem=S3PTableItem;})(lobby||(lobby={}));var lobby;(function(lobby){var SevTableItem=(function(_super){__extends(SevTableItem,_super);function SevTableItem(gameModel,info){return _super.call(this,gameModel,info)||this;}
SevTableItem.prototype.initView=function(w,h){_super.prototype.initView.call(this,w,h);this.trendCon=new seven_up.GenTrendContainer(this.gameModel,seven_up.GenTrendIcon,w-(596-470),112,6,this.info.hint,false,70,80);this.trendCon.expandBtn.visible=false;this.trendCon.x=124;this.trendCon.y=30;this.addChild(this.trendCon);};SevTableItem.prototype.addTrend=function(item){this.trendCon.addTrend(item,true);this.trendCon.blinkExIcon();};SevTableItem.prototype.doInitTrends=function(){this.trendCon.clear();this.trendCon.updateTrends(game.GlobalVals.trendDataMap[this.info.id].trendArr);};return SevTableItem;}(lobby.BaseTableItem));lobby.SevTableItem=SevTableItem;})(lobby||(lobby={}));var lobby;(function(lobby){var SFTableItem=(function(_super){__extends(SFTableItem,_super);function SFTableItem(gameModel,info){var _this=_super.call(this,gameModel,info)||this;_this.maxItem=20;return _this;}
SFTableItem.prototype.initView=function(w,h){_super.prototype.initView.call(this,w,h);this.trendCon=new lobby.SFTrendCon(this.gameModel,lobby.SFTrendItem,w-(596-470),112);this.trendCon.x=124;this.trendCon.y=30;this.addChild(this.trendCon);};SFTableItem.prototype.addTrend=function(item){var arr=game.GlobalVals.trendDataMap[this.info.id].trendHis100Arr;var index=arr.length-this.maxItem;this.trendCon.updateTrends(arr.slice(index>0?index:0,arr.length));};SFTableItem.prototype.doInitTrends=function(){if(!game.GlobalVals.trendDataMap[this.info.id])
return;var arr=game.GlobalVals.trendDataMap[this.info.id].trendHis100Arr;var index=arr.length-this.maxItem;this.trendCon.clear();this.trendCon.updateTrends(arr.slice(index>=0?index:0,arr.length));};return SFTableItem;}(lobby.BaseTableItem));lobby.SFTableItem=SFTableItem;})(lobby||(lobby={}));var lobby;(function(lobby){var SFTrendCon=(function(_super){__extends(SFTrendCon,_super);function SFTrendCon(gameModel,ItemClass,w,h){return _super.call(this,gameModel,ItemClass,w,h)||this;}
SFTrendCon.prototype.initView=function(){var bg=new PIXI.Graphics();this.addChild(bg);bg.lineStyle(1,0x424242);bg.moveTo(0,35);bg.lineTo(this.viewW,35);bg.moveTo(0,this.viewH-35);bg.lineTo(this.viewW,this.viewH-35);_super.prototype.initView.call(this);};SFTrendCon.prototype.updateTrends=function(trendArr){this.clear();for(var i=0;i<trendArr.length;i++){var item=core.VObjectPool.get(this.ItemClass);item.setData(trendArr[i]);var width=void 0;switch(LANG){case'en':case'id':width=75;break;case'vn':width=80;break;default:width=68;break;}
item.x=width*0.5+i*(width-5);this.content.addChild(item);this.items.push(item);}
var blank=0;var w=this.content.width;TweenMax.killTweensOf(this.content);this.content.x=-(w-this.viewW+blank);this.scroller.updateScroll(w+blank);};return SFTrendCon;}(lobby.BaseTrendCon));lobby.SFTrendCon=SFTrendCon;})(lobby||(lobby={}));var lobby;(function(lobby){var SFTrendItem=(function(_super){__extends(SFTrendItem,_super);function SFTrendItem(gameModel){var _this=_super.call(this,gameModel)||this;var width;switch(LANG){case'en':case'id':width=75;break;case'vn':width=80;break;default:width=68;break;}
_this.bg=game.GameUtils.createBg(width,112,0x000000,0,0.01);_this.bg.x=-_this.bg.width*0.5;_this.addChild(_this.bg);_this.tf1=game.GameUtils.createNormalText("",14);_this.tf1.anchor.x=0.5;_this.tf1.y=10;_this.addChild(_this.tf1);_this.tf2=game.GameUtils.createNormalText("",14);_this.tf2.anchor.x=0.5;_this.addChild(_this.tf2);_this.tf2.y=_this.bg.height-_this.tf2.height-10;_this.icon=new super_fantan.GenTrendIcon(30);_this.icon.setType(game.TrendType.NORMAL);_this.icon.x=-1;_this.icon.y=56;_this.addChild(_this.icon);return _this;}
SFTrendItem.prototype.setData=function(info){var total=this.getCardVal(info.cards.toString().split('#').join(''));var size;var color;if(total<42){size=game.GameText.SMALL;color=0x2a8fbd;}
else if(total>42){size=game.GameText.BIG;color=0xc6001e;}
else{if(LANG==='en'||LANG==='vn'||LANG==='id')
size=game.GameText.superfantan_total_point.split(' l 42').join('').split(' 42').join('').split('42').join('');else
size=game.GameText.superfantan_total_point;color=0x007236;}
if(LANG==='vn')
this.adjustTf2(total);this.tf1.style.fill=color;this.tf2.style.fill=color;this.tf1.text=total.toString();this.tf2.text=size;this.icon.draw(info);};SFTrendItem.prototype.adjustTf2=function(total){if(total===42){this.tf2.style.fontSize=12;this.tf2.y=this.bg.height-this.tf2.height-11;}
else{this.tf2.style.fontSize=14;this.tf2.y=this.bg.height-this.tf2.height-10;}};SFTrendItem.prototype.getCardVal=function(cards){if(!cards)
return 0;var card;var val=0;for(var i=0;i<cards.length/2;i++){card=cards[i*2+1];if(card=='B')
val+=0;else
val+='TJQK'.indexOf(card)>=0?10+'TJQK'.indexOf(card):(card=='A'?1:parseInt(card));}
return val;};SFTrendItem.prototype.clean=function(){};return SFTrendItem;}(game.GameObject));lobby.SFTrendItem=SFTrendItem;})(lobby||(lobby={}));var lobby;(function(lobby){var SicTableItem=(function(_super){__extends(SicTableItem,_super);function SicTableItem(gameModel,info){var _this=_super.call(this,gameModel,info)||this;_this.maxItem=20;return _this;}
SicTableItem.prototype.initView=function(w,h){_super.prototype.initView.call(this,w,h);this.trendCon=new lobby.SicTrendCon(this.gameModel,lobby.SicTrendItem,w-(596-470),112);this.trendCon.x=124;this.trendCon.y=30;this.addChild(this.trendCon);};SicTableItem.prototype.addTrend=function(item){var arr=game.GlobalVals.trendDataMap[this.info.id].trendHis100Arr;var index=arr.length-this.maxItem;this.trendCon.updateTrends(arr.slice(index>0?index:0,arr.length));};SicTableItem.prototype.doInitTrends=function(){if(!game.GlobalVals.trendDataMap[this.info.id])
return;var arr=game.GlobalVals.trendDataMap[this.info.id].trendHis100Arr;var index=arr.length-this.maxItem;this.trendCon.clear();this.trendCon.updateTrends(arr.slice(index>=0?index:0,arr.length));};return SicTableItem;}(lobby.BaseTableItem));lobby.SicTableItem=SicTableItem;})(lobby||(lobby={}));var lobby;(function(lobby){var SicTrendCon=(function(_super){__extends(SicTrendCon,_super);function SicTrendCon(gameModel,ItemClass,w,h){return _super.call(this,gameModel,ItemClass,w,h)||this;}
SicTrendCon.prototype.initView=function(){var bg=new PIXI.Graphics();this.addChild(bg);bg.lineStyle(1,0x424242);bg.moveTo(0,32);bg.lineTo(this.viewW,32);bg.moveTo(0,this.viewH-32);bg.lineTo(this.viewW,this.viewH-32);_super.prototype.initView.call(this);};return SicTrendCon;}(lobby.BaseTrendCon));lobby.SicTrendCon=SicTrendCon;})(lobby||(lobby={}));var lobby;(function(lobby){var SicTrendItem=(function(_super){__extends(SicTrendItem,_super);function SicTrendItem(gameModel){var _this=_super.call(this,gameModel)||this;_this.bg=game.GameUtils.createBg(68,112,0x000000,0,0.01);_this.bg.x=-_this.bg.width*0.5;_this.addChild(_this.bg);_this.tf1=game.GameUtils.createNormalText("",14);_this.tf1.anchor.x=0.5;_this.tf1.y=10;_this.addChild(_this.tf1);_this.tf2=game.GameUtils.createNormalText("",14);_this.tf2.anchor.x=0.5;_this.addChild(_this.tf2);_this.tf2.y=_this.bg.height-_this.tf2.height-10;_this.icon=new PIXI.Container;_this.dices=[];_this.diceSize=20;_this.addChild(_this.icon);for(var i=0;i<3;i++){var dice=new PIXI.Sprite();dice.anchor.x=0.5;_this.icon.addChild(dice);_this.dices.push(dice);_this.dices[i].texture=PIXI.Texture.fromFrame('sic_live_dice_1.png');}
_this.dices[1].x=-_this.diceSize*0.5-1;_this.dices[1].y=_this.diceSize+2;_this.dices[2].x=_this.diceSize*0.5+1;_this.dices[2].y=_this.diceSize+2;_this.icon.y=_this.bg.height*0.5-_this.diceSize;return _this;}
SicTrendItem.prototype.setData=function(info){var arr=info.cards.split("");var num=parseInt(arr[0])+parseInt(arr[1])+parseInt(arr[2]);this.tf1.text=num.toString();for(var i=0;i<arr.length;i++){this.dices[i].texture=PIXI.Texture.fromFrame('sic_live_dice_'+arr[i]+'.png');this.dices[i].width=this.diceSize;this.dices[i].scale.y=this.dices[i].scale.x;}
if(arr[0]==arr[1]&&arr[1]==arr[2]){this.tf2.style.fill=game.TrendIconUtils.GREEN;this.tf2.text=game.GameText.TRIPLE;}
else{this.tf2.text=num>10?game.GameText.BIG:game.GameText.SMALL;this.tf2.style.fill=num>10?game.TrendIconUtils.RED:game.TrendIconUtils.BLUE;}};SicTrendItem.prototype.clean=function(){};return SicTrendItem;}(game.GameObject));lobby.SicTrendItem=SicTrendItem;})(lobby||(lobby={}));var lobby;(function(lobby_1){var LAdsCon=(function(_super){__extends(LAdsCon,_super);function LAdsCon(gameModel,viewW,viewH){return _super.call(this,gameModel,viewW,viewH)||this;}
LAdsCon.prototype.initialize=function(){this.container.removeChild(this.bg);this.inited=true;var banners;banners=game.GameSettings.CONFIG["banners_"+OPERATOR_ID]||game.GameSettings.CONFIG["banners_"+OPERATOR_ID.toLowerCase()]||game.GameSettings.CONFIG["banners_"+OPERATOR_ID.toUpperCase()]||game.GameSettings.CONFIG.banners;for(var i=0;i<banners.length;i++){if(!banners[i].url)
continue;var page=new PIXI.Container();this.container.addChild(page);this.pages.push(page);if(i>0)
page.visible=false;var img=new PIXI.Sprite();page.addChild(img);page['img']=img;page['info']=banners[i];page.buttonMode=true;this.pageMap["../common_bin/assets/banners/"+banners[i].url]=page;component.VMouseUtils.on(page,component.VMouseUtils.MOUSE_DOWN,this.onBannerClick,this);if(banners[i].type!='video')
game.GlobalVals.resourceMng.getDynamicTexture(banners[i].url,"../common_bin/assets/banners/"+banners[i].url,this.onGetTextureBinding);else{var hit=new PIXI.Graphics();img.addChild(hit);hit.beginFill(0x00ff00,0.01);hit.drawRect(0,0,this.gameModel.VOD_WIDTH,this.gameModel.VOD_HEIGHT);hit.endFill();}}
this.timerId=setInterval(this.onNext.bind(this),10000);};LAdsCon.prototype.onBannerClick=function(e){var info=e.target['info'];trace("link: "+info.link);if(e.target['info'].name=='CLUBWGRAND'){var lobby=(game.GlobalVals.main.activeGame);lobby.gameView.tabMng.setActiveInd(0);return;}
if(e.target['info'].name=='CLUB_ALL'){var ms=component.VMouseUtils.mousePos();var index=Math.floor(ms.x/(game.GameSettings.CANVAS_WIDTH/3));var lobby=(game.GlobalVals.main.activeGame);lobby.gameView.tabMng.setActiveInd(index);return;}
if(info.link=="")
return;var mp=component.VMouseUtils.mousePos();if(info.isSplit){if(component.VMouseUtils.mousePos().x>game.GameSettings.CANVAS_WIDTH/2)
window.open(game.GameSettings.CONFIG.apkUrl,'_blank');else
window.open(game.GameSettings.CONFIG.iosUrl,'_blank');}
else if(info.link){window.open(info.link,'_blank');}};LAdsCon.prototype.onNext=function(){_super.prototype.onNext.call(this);if(this.index==this.pages.length)
this.index=0;if(this.pages[this.index]['info']['type']=='video'){game.GlobalVals.getAdsVideoElement().play();}
else{game.GlobalVals.getAdsVideoElement().pause();}};return LAdsCon;}(game.AdsCon));lobby_1.LAdsCon=LAdsCon;})(lobby||(lobby={}));var lobby;(function(lobby){var PageMng=(function(_super){__extends(PageMng,_super);function PageMng(pageNum,viewNum,btnS,hasBegin,hasEnd){if(viewNum===void 0){viewNum=5;}
if(btnS===void 0){btnS=20;}
if(hasBegin===void 0){hasBegin=true;}
if(hasEnd===void 0){hasEnd=true;}
return _super.call(this,pageNum,viewNum,btnS,false,false)||this;}
PageMng.prototype.createNextBtn=function(){return new component.VButton([new PIXI.Sprite(PIXI.Texture.fromFrame('lobby_next_button0001.png')),new PIXI.Sprite(PIXI.Texture.fromFrame('lobby_next_button0002.png'))],this.onNext.bind(this));};PageMng.prototype.createBackBtn=function(){var f1=new PIXI.Sprite(PIXI.Texture.fromFrame('lobby_next_button0001.png'));f1.scale.x=-1;f1.x=f1.width;var f2=new PIXI.Sprite(PIXI.Texture.fromFrame('lobby_next_button0002.png'));f2.scale.x=-1;f2.x=f1.width;return new component.VButton([f1,f2],this.onBack.bind(this));};PageMng.prototype.createPageItem=function(index){var btn;var g0=new PIXI.Graphics();g0.beginFill(0x403835);g0.drawCircle(0,0,7);g0.endFill();g0.x=g0.width*0.5;g0.y=g0.height*0.5;var g1=new PIXI.Graphics();g1.beginFill(0xffffff);g1.drawCircle(0,0,7);g1.endFill();g1.x=g1.width*0.5;g1.y=g1.height*0.5;btn=new component.VButton([g0,g1],this.onIndexClick.bind(this));return btn;};PageMng.prototype.initPage=function(pageNum){_super.prototype.initPage.call(this,pageNum);};return PageMng;}(component.VPagesManager));lobby.PageMng=PageMng;})(lobby||(lobby={}));var lobby;(function(lobby){var TablesCon=(function(_super){__extends(TablesCon,_super);function TablesCon(gameModel){var _this=_super.call(this,gameModel)||this;_this.pageSize=game.GameSettings.CONFIG.studioLobbyOrder.length*3;_this.grid=new lobby.TablesGrid(gameModel,game.GameSettings.CONFIG.studioLobbyOrder.length);_this.addChild(_this.grid);_this.grid.x=37;_this.grid.y=290;_this.pageMng=new lobby.PageMng(0);_this.addChild(_this.pageMng);_this.pageMng.dispatcher.addEventListener(component.VPagesManager.CHANGE_INDEX,_this.onPage,_this);_this.pageMng.next.x=game.GameSettings.CANVAS_WIDTH-_this.pageMng.next.width;_this.pageMng.next.y=480;_this.pageMng.back.y=_this.pageMng.next.y;return _this;}
TablesCon.prototype.setTableIds=function(pids,isGroupStudio){if(isGroupStudio===void 0){isGroupStudio=false;}
var ids=[];var id;var arr=[];var pushedMap={};for(var i=0;i<pids.length;i++){if(game.netdata.ShowLobbyResponse.getDisplayStatus(game.GlobalVals.lobbyResponse,pids[i])!=1)
continue;if(!game.netdata.LimitsResponse.getLimitContent(game.GlobalVals.limitsResponse,pids[i]).limits.length)
continue;var activeGroup=game.GameUtils.getTableGroup(pids[i]);if(activeGroup){if(pushedMap[core.VUtils.getObjKey(activeGroup)])
continue;pushedMap[core.VUtils.getObjKey(activeGroup)]=true;}
ids.push(pids[i]);}
if(isGroupStudio){var studioOrder=game.GameSettings.CONFIG.studioLobbyOrder;for(var i=0;i<studioOrder.length;i++)
arr[studioOrder[i]]=[];var maxlen=0;for(i=0;i<ids.length;i++){var studio=game.GameSettings.TABLE_INFOS[ids[i]].studio;arr[studio].push(ids[i]);if(maxlen<arr[studio].length)
maxlen=arr[studio].length;}
var ids2=[];for(var k=0;k<maxlen;k++)
for(i=0;i<studioOrder.length;i++){studio=studioOrder[i];if(arr[studio].length)
ids2.push(arr[studio].shift());else
ids2.push(0);}
ids=ids2;}
this.tables=[];for(var i=0;i<ids.length;i++){if(ids[i])
this.tables.push(game.GameSettings.TABLE_INFOS[ids[i]]);else
this.tables.push(null);}
this.pageMng.initPage(Math.ceil(this.tables.length/this.pageSize));this.pageMng.pageCon.x=game.GameSettings.CANVAS_WIDTH*0.5-this.pageMng.pageCon.width*0.5;this.pageMng.pageCon.y=748;this.pageIndex=0;this.grid.initItems(this.tables.slice(this.pageIndex,this.pageIndex+this.pageSize));};TablesCon.prototype.onPage=function(e){this.pageIndex=e.data;this.grid.initItems(this.tables.slice(this.pageIndex*this.pageSize,this.pageIndex*this.pageSize+this.pageSize));this.grid.onEnterGame();};return TablesCon;}(game.GameObject));lobby.TablesCon=TablesCon;})(lobby||(lobby={}));var lobby;(function(lobby){var TablesGrid=(function(_super){__extends(TablesGrid,_super);function TablesGrid(gameModel,col){var _this=_super.call(this,gameModel)||this;_this.col=col;_this.items=[];_this.tableMap=[];var arr=[PIXI.Texture.fromFrame('table_grid_bg_all.png')];for(var i=0;i<game.GameSettings.CONFIG.studio.length;i++)
arr.push(PIXI.Texture.fromFrame('table_grid_bg_'+game.GameUtils.getStudioColorName(i)+'.png'));_this.bg=new PIXI.extras.MovieClip(arr);_this.addChild(_this.bg);_this.bg.gotoAndStop(0);return _this;}
TablesGrid.prototype.clear=function(){this.tableMap={};while(this.items.length){var item=this.items.pop();if(!item)
continue;this.removeChild(item);component.VComponentUtils.deepClean(item);}};TablesGrid.prototype.initItems=function(arr){this.clear();var dis=4;for(var i=0;i<arr.length;i++){if(!arr[i])
continue;var item=this.createItem(arr[i]);item.initView((this.bg.width-dis*(this.col+1))/this.col,145);this.addChild(item);item.x=dis+(i%this.col)*(item.bg.width+dis);item.y=dis+Math.floor(i/this.col)*(item.bg.height+2);this.items.push(item);this.tableMap[arr[i].id]=item;item.refresh();}};TablesGrid.prototype.onNewShoeSucceed=function(data){if(!this.tableMap||!this.tableMap[data.content])
return;this.tableMap[data.content].onNewShoeSucceed();};TablesGrid.prototype.onShowLobby=function(data){};TablesGrid.prototype.createItem=function(info){switch(info.gameId){case game.GameID.BACCARAT:case game.GameID.BACCARAT_NONCOMMISSION:case game.GameID.BACCARAT_SUPER98:case game.GameID.FABULOUS:case game.GameID.SQUEEZE_BACCARAT:case game.GameID.SQUEEZE_BACCARAT_NONCOMMISSION:case game.GameID.BACCARAT_CINEMATIC:return new lobby.BacTableItem(this.gameModel,info);case game.GameID.LUCKY_BACCARAT:return new lobby.LuckTableItem(this.gameModel,info);case game.GameID.DRAGON_TIGER:return new lobby.DraTableItem(this.gameModel,info);case game.GameID.ROULETTE:case game.GameID.ROULETTE_CINEMATIC:return new lobby.RouTableItem(this.gameModel,info);case game.GameID.SICBO:return new lobby.SicTableItem(this.gameModel,info);case game.GameID.SEVEN_UP:return new lobby.SevTableItem(this.gameModel,info);case game.GameID.BULL_FIGHT:return new lobby.BullTableItem(this.gameModel,info);case game.GameID.SUPER_HI_LO:return new lobby.HiLoTableItem(this.gameModel,info);case game.GameID.SUPER_3PICTURES:return new lobby.S3PTableItem(this.gameModel,info);case game.GameID.SUPER_FANTAN:return new lobby.SFTableItem(this.gameModel,info);default:return new lobby.BacTableItem(this.gameModel,info);}};TablesGrid.prototype.onCommitSucceedAll=function(data){var trendItem=new game.netdata.TrendsItem();core.VUtils.copy(data.content,trendItem);if(!this.tableMap[data.content.table])
return;var item=this.tableMap[data.content.table];item.addTrend(trendItem);};TablesGrid.prototype.onEnterGame=function(){};TablesGrid.prototype.onCountDownAll=function(data){if(!this.tableMap[data.content.table])
return;var item=this.tableMap[data.content.table];var time=data.content.tick-1;item.countDown.setTime(time>0?time:0);};TablesGrid.prototype.onHistory100=function(data){if(!this.tableMap[data.content.table])
return;var item=this.tableMap[data.content.table];item.initTrends();};TablesGrid.prototype.onRollbackSucceedAll=function(data){if(!this.tableMap[data.content.table])
return;var item=this.tableMap[data.content.table];item.initTrends();};return TablesGrid;}(game.GameObject));lobby.TablesGrid=TablesGrid;})(lobby||(lobby={}));var lobby;(function(lobby){var TopTool=(function(_super){__extends(TopTool,_super);function TopTool(gameModel){return _super.call(this,gameModel)||this;}
TopTool.prototype.initView=function(){_super.prototype.initView.call(this);this.bg.visible=false;if(this.adsBtn)
this.adsBtn.visible=false;if(this.adsCon)
this.adsCon.visible=false;this.fullscreenBtn.x=278.5;this.gameModel.toolTip.removeToolTip(this.exitBtn);this.gameModel.toolTip.addToolTip(this.exitBtn,game.GameText.LOGOUT);};TopTool.prototype.onExitBtn=function(){game.NetUtils.closeConnection();game.GlobalVals.messagePopup.showMessage(game.GameText.LOGOUT_SUCCESS);game.GlobalVals.main['stopGame']();game.GlobalVals.messagePopup.showMessage(game.GameText.LOGOUT_SUCCESS,function(){open("",'_self').close();},game.GameText.NOTICE);};return TopTool;}(game.TopTool));lobby.TopTool=TopTool;})(lobby||(lobby={}));var singleview;(function(singleview){var BaseMiniLobbyItem=(function(_super){__extends(BaseMiniLobbyItem,_super);function BaseMiniLobbyItem(main,info,w,h){var _this=_super.call(this,main)||this;_this.info=info;_this.viewW=w;_this.viewH=h;_this.titleH=25;_this.padding=4;_this.easingFactor=0.9;_this.initView();return _this;}
BaseMiniLobbyItem.prototype.destructor=function(){_super.prototype.destructor.call(this);component.VComponentUtils.dispatcher.removeEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,this.update,this);component.VMouseUtils.off(this,component.VMouseUtils.MOUSE_DOWN,this.onDown,this);component.VMouseUtils.off(this,component.VMouseUtils.MOUSE_UP,this.onEnter,this);component.VMouseUtils.off(this,component.VMouseUtils.MOUSE_OVER,this.onOver,this);component.VMouseUtils.off(this,component.VMouseUtils.MOUSE_OUT,this.onOut,this);};BaseMiniLobbyItem.prototype.onDown=function(){this.exMousePos=component.VMouseUtils.mousePos().clone();};BaseMiniLobbyItem.prototype.onOver=function(){this.bg.alpha=0.5;};BaseMiniLobbyItem.prototype.onOut=function(){this.bg.alpha=1;};BaseMiniLobbyItem.prototype.initView=function(){component.VMouseUtils.on(this,component.VMouseUtils.MOUSE_OVER,this.onOver,this);component.VMouseUtils.on(this,component.VMouseUtils.MOUSE_OUT,this.onOut,this);component.VMouseUtils.on(this,component.VMouseUtils.MOUSE_DOWN,this.onDown,this);if(this.viewInited)
throw new Error("Double initView!!!");this.viewInited=true;var tableId=this.info.id;var stutio=this.info['studio'];this.buttonMode=true;var w=this.viewW,h=this.viewH;var bgColor=0x25221D;var rounded=5;var bg=new PIXI.Graphics();this.bg=bg;this.addChild(bg);bg.beginFill(bgColor);bg.drawRoundedRect(0,0,w,h,rounded);bg.endFill();bg.beginFill(game.StyleMng['STUDIO_'+stutio+'_COLOR']);bg.drawRoundedRect(0,0,w,this.titleH+12,rounded);bg.endFill();bg.beginFill(bgColor);bg.drawRect(0,this.titleH,w,14);bg.endFill();this.gameTitle=game.GameUtils.createText(game.GameSettings.TABLE_INFOS[tableId].tableName+" "+game.GameSettings.TABLE_INFOS[tableId].gameName,{fontSize:12,fill:0xffffff});this.gameTitle.scale.y=this.titleH/this.gameTitle.height;this.gameTitle.x=4;if(this.gameTitle.width>w-20)
this.gameTitle.scale.x=(w-20)/this.gameTitle.width;this.gameTitle.anchor.y=0.5;this.gameTitle.y=this.titleH/2;this.gameTitle.scale.y=this.gameTitle.scale.x;this.addChild(this.gameTitle);game.GlobalVals.toolTip.addToolTip(this,game.GameText.ENTER+(game.GameSettings.TABLE_INFOS[tableId].turbo?" ("+game.GameText.TURBO+")":""));if(game.GameSettings.TABLE_INFOS[tableId].isNew){this.newIcon=new PIXI.Sprite(PIXI.Texture.fromFrame("icon_lobby_new.png"));this.addChild(this.newIcon);this.newIcon.scale.y=(this.titleH-1)/this.newIcon.height;this.newIcon.scale.x=this.newIcon.scale.y;this.newIcon.x=w-this.newIcon.width;this.newIcon.y=0;}
if(game.GameSettings.TABLE_INFOS[tableId].turbo){var turbo=new PIXI.Container();var f0=new PIXI.Sprite(PIXI.Texture.fromFrame("turbo_icon_0.png"));var f1=new PIXI.Sprite(PIXI.Texture.fromFrame("turbo_icon_1.png"));turbo['f1']=f1;turbo.addChild(f0);turbo.addChild(f1);this.addChild(turbo);turbo.scale.y=(this.titleH-1)/turbo.height;turbo.scale.x=turbo.scale.y;turbo.x=w-turbo.width-1-(this.newIcon?this.newIcon.width+1:0);turbo.y=0;this.turbo=turbo;}
component.VMouseUtils.on(this,component.VMouseUtils.MOUSE_UP,this.onEnter,this);component.VComponentUtils.dispatcher.addEventListener(component.VComponentUtils.GAME_UPDATE_EVENT,this.update,this);};BaseMiniLobbyItem.prototype.onEnter=function(){var p=component.VMouseUtils.mousePos();if(!this.exMousePos)
return;if(Math.abs(p.x-this.exMousePos.x)>this.viewW*0.05||Math.abs(p.y-this.exMousePos.y)>this.viewW*0.05)
return;this.exMousePos=null;var btn=game.GlobalVals.main.mainView.tablesView.tableSmallView.getBtn(this.info.id);var menu=btn['menu'];if(!menu)
return;if(menu.hasActiveItem()){menu.runActiveItem();return;}
else
menu.show();var p=new PIXI.Point(this.x-menu.width-2,this.y);p=this.parent.toGlobal(p);p=game.GlobalVals.overlay.toLocal(p);menu.x=p.x;menu.y=p.y;if(menu.y>game.GameSettings.CANVAS_HEIGHT-menu.height)
menu.y=game.GameSettings.CANVAS_HEIGHT-menu.height;};BaseMiniLobbyItem.prototype.update=function(){if(this.turbo){if(this.turbo['f1'].alpha<0.1){this.easingFactor=1.1;this.turbo['f1'].alpha=0.1;}
if(this.turbo['f1'].alpha>3){this.easingFactor=0.9;this.turbo['f1'].alpha=3;}
this.turbo['f1'].alpha*=this.easingFactor;}};BaseMiniLobbyItem.prototype.addTrend=function(item){};BaseMiniLobbyItem.prototype.doInitTrends=function(){};BaseMiniLobbyItem.prototype.initTrends=function(){this.trendCon.x=0;this.trendCon.y=this.titleH;if(!game.GlobalVals.trendDataMap[this.info.id])
return;this.doInitTrends();};return BaseMiniLobbyItem;}(game.MainObject));singleview.BaseMiniLobbyItem=BaseMiniLobbyItem;})(singleview||(singleview={}));var singleview;(function(singleview){var Main=(function(_super){__extends(Main,_super);function Main(){var _this=_super.call(this)||this;_this.resourceMng=new singleview.ResourceManager(_this);_this.enteredGame=false;var versionFile='versioning.txt?v='+Math.floor(new Date().getTime()/60000);var loader=new PIXI.loaders.Loader();loader.add('versioning',versionFile).on('complete',function(){versionMap=JSON.parse(loader.resources['versioning'].data);_this.loadConfig();});loader.load();return _this;}
Main.prototype.onKeyUp=function(e){this.onMouseHdl();};Main.prototype.onMouseHdl=function(){if(game.GlobalVals.messagePopup&&game.GlobalVals.messagePopup.isShowed)
return;clearTimeout(this.maxIdleTimeoutId);this.maxIdleTimeoutId=setTimeout(this.onMaxIdle.bind(this),game.GameSettings.CONFIG.maxIdleTime*1000);};Main.prototype.sizeHandler=function(){_super.prototype.sizeHandler.call(this);if(this.iframe){this.iframe.style.left=gameOrigin.x+900*gameScale+'px';this.iframe.style.top=gameOrigin.y+34*gameScale+'px';this.iframe.width=330*gameScale;this.iframe.height=246*gameScale;}
if(this.mainView)
this.mainView.sizeHandler();if(this.activeGame)
this.activeGame.sizeHandler();};Main.prototype.update=function(){if(this.gameModel)
this.gameModel.dispatcher.dispatchEventWith(GameEvent.GAME_UPDATE,null);if(this.activeGame)
this.activeGame.update();this.loading.update();if(this.preloader)
this.preloader.loading.update();_super.prototype.update.call(this);};Main.prototype.loadConfig=function(){var loader=new PIXI.loaders.Loader();loader.add("single_view_config","single_view_config.json?t="+new Date().getTime());loader.add("localizet","../common_bin/localizet.txt").add("soundsprite",'../common_bin/assets/sounds/'+singleview.ResourceManager.getSoundLang()+"/soundsprite.json");loader.on('complete',this.loadConfigCompleteHdl.bind(this));loader.load();};Main.prototype.loadConfigCompleteHdl=function(loader){game.GameUtils.parseText(loader.resources['localizet'].data.toString());var config=loader.resources['single_view_config'].data;game.GameSettings.setConfig(config);this.defaultTable=DEFAULT_TABLE_ID>=0&&game.GameSettings.TABLE_INFOS[DEFAULT_TABLE_ID]?DEFAULT_TABLE_ID:game.GameSettings.CONFIG.defaultTable;game.GlobalVals.soundJson=loader.resources['soundsprite'].data;this.initialize();};Main.prototype.loadTrendText=function(){sys.loadFileAsync("../common_bin/trend_icons.txt",this.loadTrendTextCompleteHdl.bind(this));};Main.prototype.loadTrendTextCompleteHdl=function(data){game.GameUtils.parseTrendText(data);this.initialize();};Main.prototype.loadCommonAssets=function(){this.resourceMng.loadCommonAsset(this.loadMainAssetsCompleteHdl.bind(this),function(progress){var per=progress;if(per>100)
per=100;this.preloader.loading.updatePercent(component.VComponentUtils.getIntInFormat(per));}.bind(this));};Main.prototype.loadMainAssetsCompleteHdl=function(loader,sounds){this.preloader.parent.removeChild(this.preloader);this.preloader=null;_super.prototype.loadMainAssetsCompleteHdl.call(this,loader,sounds);this.initView();if(this.defaultTable==0){this.mainView.tablesView.visible=false;if(this.mainView.miniLobby)
this.mainView.miniLobby.visible=false;}
this.initNetwork();this.dispatcher.addEventListener(game.GameEvent.CHANGE_LIMIT,this.onChangeLimit,this);};Main.prototype.getGameResources=function(gameResources,gameSounds){var resource={};for(var i in gameResources)
resource[i]=gameResources[i];for(var i in this.resourceMng.commonLoader.resources)
if(!resource[i])
resource[i]=this.resourceMng.commonLoader.resources[i];var sounds={};for(var i in gameSounds)
sounds[i]=gameSounds[i];for(var i in this.resourceMng.commonSound)
if(!sounds[i])
sounds[i]=this.resourceMng.commonSound[i];resource['soundMap']=sounds;return resource;};Main.prototype.initView=function(){_super.prototype.initView.call(this);var iframe=document.getElementById('miniSlot');this.iframe=iframe;this.iframe.style.zIndex=game.Htmlzindex.MAX_INDEX;component.VMouseUtils.on(this.stage,component.VMouseUtils.MOUSE_DOWN,this.onMouseHdl,this);component.VComponentUtils.dispatcher.addEventListener(component.VComponentUtils.KEY_UP_EVENT,this.onKeyUp,this);if(!game.CookiesMng.hasCookie("mute"))
game.CookiesMng.saveCookie("mute",false);Howler.mute(game.CookiesMng.getCookie("mute"));this.gameCon=new PIXI.Container();this.addChild(this.gameCon);this.mainView=new singleview.MainView(this);this.addChild(this.mainView);if(this.testEnabled){var bg=new PIXI.Sprite(this.resources['bgtest'].texture);this.mainCon.addChild(bg);this.testView=new game.UITest(this);this.testView.testScroll();}
var tooltipCon=new PIXI.Container();this.addChild(tooltipCon);game.GlobalVals.toolTipCon=tooltipCon;var toolTip=new component.VToolTip();toolTip.initialize(game.GlobalVals.toolTipCon,new PIXI.Rectangle(0,0,game.GameSettings.CANVAS_WIDTH-50,game.GameSettings.CANVAS_HEIGHT));game.GlobalVals.toolTip=toolTip;this.gameModel=new game.GameModel();this.gameModel.initialize(this.resourceMng.commonLoader.resources);this.sizeHandler();};Main.prototype.loadGameAssetsCompleteHdl=function(loader,sounds){var resources=loader.resources;var src=this.getGameResources(resources,sounds);this.destroyActiveGame();this.activeGame=new this.GameClass().initialize(this.gameTableId,src);this.gameCon.addChild(this.activeGame);this.loading.hide();this.tipTf.visible=false;if(game.GlobalVals.limitsResponse){this.enterGame();}};Main.prototype.onMaxIdle=function(){if(game.GlobalVals.isLocal)
return;this.stopGame();game.GlobalVals.messagePopup.showMessage(game.GameText.LONG_IDLE_ALERT,function(){location.reload();},game.GameText.NOTICE,game.GameText.REPLOAD);};Main.prototype.stopGame=function(){this.destroyActiveGame();clearTimeout(this.maxIdleTimeoutId);this.maxIdleTimeoutId=0;game.GlobalVals.wssTryIndex=1000;game.NetUtils.closeConnection();};Main.prototype.enterGame=function(){this.enteredGame=true;clearTimeout(this.maxIdleTimeoutId);this.maxIdleTimeoutId=setTimeout(this.onMaxIdle.bind(this),game.GameSettings.CONFIG.maxIdleTime*1000);var tableId=this.activeLimit?this.activeLimit.table:this.defaultTable;if(tableId>0&&game.GlobalVals.viewMode==game.ViewMode.MODE_2D){if(game.GlobalVals.operatorFlagInfo.miniStatus==2||game.GlobalVals.operatorFlagInfo.miniStatus==3){this.iframe.style.display='';this.activeGame.gameView.miniTool.topTool.hideAds();}
else
this.activeGame.gameView.miniTool.topTool.showAds();}
if(tableId==0){this.activeGame.enterGame(0);this.mainView.tablesView.visible=false;if(this.mainView.miniLobby)
this.mainView.miniLobby.visible=false;return;}
this.mainView.tablesView.visible=true;if(this.mainView.miniLobby)
this.mainView.miniLobby.visible=true;var limitId=this.activeLimit?this.activeLimit.limit:game.netdata.LimitsResponse.getLimitContent(game.GlobalVals.limitsResponse,tableId).limits[0].id;this.activeGame.enterGame(limitId);};Main.prototype.onChangeLimit=function(e){trace("Main::onChangeLimit");this.activeLimit=e.data;this.loadGameAsset(this.activeLimit.table);this.mainView.miniLobby.hide();};Main.prototype.refreshGame=function(g){this.loading.show();_super.prototype.refreshGame.call(this,g);this.onChangeLimit(new core.VBaseEvent().setData(game.GameEvent.CHANGE_LIMIT,{table:g.gameModel.TABLE_ID,limit:g.gameModel.LIMIT_ID}));};Main.prototype.destroyActiveGame=function(){if(!this.activeGame)
return;for(var i in this.activeGame.gameModel.resources){delete this.activeGame.gameModel.resources[i];}
component.VComponentUtils.deepClean(this.activeGame);this.activeGame=null;if(this.renderer['textureGC'])
this.renderer['textureGC'].run();trace("destroyActiveGame ===================================================================================================");};Main.prototype.onShowLobby=function(data){game.GlobalVals.lobbyResponse=data;this.mainView.tablesView.setData(data);};Main.prototype.onCountDownAll=function(data){this.mainView.tablesView.tableSmallView.setTime(data.content.table,data.content.tick);};Main.prototype.onWSOpenHdl=function(){_super.prototype.onWSOpenHdl.call(this);if(this.activeGame)
this.activeGame.onWSOpenHdl();};Main.prototype.onWSCloseHdl=function(){_super.prototype.onWSCloseHdl.call(this);trace("onWSCloseHdl on "+game.GameSettings.WS_URL);if(game.GlobalVals.wssTryIndex<game.GameSettings.CONFIG.wsUrls.length-1){game.GlobalVals.wssTryIndex++;game.GameSettings.WS_URL=game.GameSettings.CONFIG.wsUrls[game.GlobalVals.wssTryIndex];trace("try reconnect to "+game.GameSettings.WS_URL);this.initNetwork();}
else if(this.activeGame)
this.activeGame.onWSCloseHdl();};Main.prototype.loadGameProgress=function(per){if(per>100)
per=100;this.loading.updatePercent(per);};Main.prototype.loadGameAsset=function(tableId){if(game.GlobalVals.selected7S)
game.GlobalVals.viewMode=game.ViewMode.MODE_7S;if(game.GameSettings.TABLE_INFOS[tableId]&&!game.GameUtils.checkViewModeAvailable(tableId,game.GlobalVals.viewMode))
game.GlobalVals.viewMode=game.GameSettings.TABLE_INFOS[tableId].viewModes[0];this.iframe.style.display='none';this.gameTableId=tableId;this.loading.show(true,game.GameText.LOAD_GAME_ASSETS+"...");var gameId=tableId==0?999:game.GameSettings.TABLE_INFOS[tableId].gameId;if(gameId!=game.GameID.LOBBY&&!game.GameSettings.checkViewModeAvailable(gameId,game.GlobalVals.viewMode))
game.GlobalVals.viewMode=game.ViewMode.MODE_2D;switch(gameId){case game.GameID.BACCARAT:case game.GameID.BACCARAT_NONCOMMISSION:case game.GameID.BACCARAT_SUPER98:if(game.GlobalVals.viewMode==game.ViewMode.MODE_2D||game.GlobalVals.viewMode==game.ViewMode.MODE_3D)
this.GameClass=baccarat.Game;else
this.GameClass=baccarat_7s.Game;this.resourceMng.loadBaccaratAsset(this.loadGameAssetsCompleteHdl.bind(this),this.loadGameProgress.bind(this));break;case game.GameID.BACCARAT_CINEMATIC:if(game.GlobalVals.viewMode==game.ViewMode.MODE_2D||game.GlobalVals.viewMode==game.ViewMode.MODE_3D)
this.GameClass=reveal_baccarat.Game;else
this.GameClass=reveal_baccarat_7s.Game;this.resourceMng.loadBaccaratAsset(this.loadGameAssetsCompleteHdl.bind(this),this.loadGameProgress.bind(this));break;case game.GameID.SQUEEZE_BACCARAT:case game.GameID.SQUEEZE_BACCARAT_NONCOMMISSION:if(game.GlobalVals.viewMode==game.ViewMode.MODE_2D||game.GlobalVals.viewMode==game.ViewMode.MODE_3D)
this.GameClass=squeeze_baccarat.Game;this.resourceMng.loadBaccaratAsset(this.loadGameAssetsCompleteHdl.bind(this),this.loadGameProgress.bind(this));break;case game.GameID.ROULETTE:case game.GameID.ROULETTE_CINEMATIC:if(game.GlobalVals.viewMode==game.ViewMode.MODE_2D||game.GlobalVals.viewMode==game.ViewMode.MODE_3D)
this.GameClass=roulette.Game;else
this.GameClass=roulette_7s.Game;this.resourceMng.loadRouletteAsset(this.loadGameAssetsCompleteHdl.bind(this),this.loadGameProgress.bind(this));break;case game.GameID.DRAGON_TIGER:if(game.GlobalVals.viewMode==game.ViewMode.MODE_2D||game.GlobalVals.viewMode==game.ViewMode.MODE_3D)
this.GameClass=dragon_tiger.Game;else
this.GameClass=dragon_tiger_7s.Game;this.resourceMng.loadDragonTigerAsset(this.loadGameAssetsCompleteHdl.bind(this),this.loadGameProgress.bind(this));break;case game.GameID.SICBO:this.GameClass=sicbo.Game;this.resourceMng.loadSicBoAsset(this.loadGameAssetsCompleteHdl.bind(this),this.loadGameProgress.bind(this));break;case game.GameID.FABULOUS:if(game.GlobalVals.viewMode==game.ViewMode.MODE_2D||game.GlobalVals.viewMode==game.ViewMode.MODE_3D)
this.GameClass=fabulous.Game;else
this.GameClass=fabulous_7s.Game;this.resourceMng.loadFabulousAsset(this.loadGameAssetsCompleteHdl.bind(this),this.loadGameProgress.bind(this));break;case game.GameID.LUCKY_BACCARAT:this.GameClass=lucky_baccarat.Game;this.resourceMng.loadLuckyBaccaratAsset(this.loadGameAssetsCompleteHdl.bind(this),this.loadGameProgress.bind(this));break;case game.GameID.SEVEN_UP:if(game.GlobalVals.viewMode==game.ViewMode.MODE_2D||game.GlobalVals.viewMode==game.ViewMode.MODE_3D)
this.GameClass=seven_up.Game;else
this.GameClass=seven_up_7s.Game;this.resourceMng.loadSevenUpAsset(this.loadGameAssetsCompleteHdl.bind(this),this.loadGameProgress.bind(this),tableId);break;case game.GameID.BULL_FIGHT:this.GameClass=bull_fight.BullGame;this.resourceMng.loadBullFightAsset(this.loadGameAssetsCompleteHdl.bind(this),this.loadGameProgress.bind(this));break;case game.GameID.SUPER_HI_LO:this.GameClass=super_hi_lo.Game;this.resourceMng.loadSuperHiLoAsset(this.loadGameAssetsCompleteHdl.bind(this),this.loadGameProgress.bind(this));break;case game.GameID.SUPER_3PICTURES:this.GameClass=super_3pictures.Game;this.resourceMng.loadSuper3PicturesAsset(this.loadGameAssetsCompleteHdl.bind(this),this.loadGameProgress.bind(this));break;case game.GameID.SUPER_FANTAN:this.GameClass=super_fantan.Game;this.resourceMng.loadSuperFantanAsset(this.loadGameAssetsCompleteHdl.bind(this),this.loadGameProgress.bind(this));break;case game.GameID.LOBBY:this.GameClass=lobby.Game;this.resourceMng.loadLobbyAsset(this.loadGameAssetsCompleteHdl.bind(this),this.loadGameProgress.bind(this));break;}};Main.prototype.onWSMessageHdl=function(e){_super.prototype.onWSMessageHdl.call(this,e);var data=e.data;switch(data.kind){case game.GameCMD.AUTH_SUCCESS:this.loading.show(true,game.GameText.LOAD_GAME_ASSETS+"...");this.loadGameAsset(this.defaultTable);break;case game.GameCMD.LIMITS:this.mainView.tablesView.setLimits();if(!this.enteredGame&&this.activeGame)
this.enterGame();break;case game.GameCMD.TABLE_LIMIT:this.mainView.tablesView.activeTable(data.content.table,data.content.id);break;case game.GameCMD.COMMIT_SUCCEED:this.mainView.tablesView.onCommitSuccess(data);var miniLobby=this.mainView.miniLobby;if(miniLobby)
miniLobby.grid.onCommitSucceedAll(data);break;case game.GameCMD.BET_HISTORY:this.mainView.historyPanel.setData(data);break;case game.GameCMD.BUNDLE_RESULT:this.mainView.historyPanel.setBuldleResult(data);break;case game.GameCMD.LIVE_BET_STATS:this.mainView.reportPanel.setLiveBetStats(data);break;case game.GameCMD.MINI_BET_STATS:this.mainView.reportPanel.setMiniBetStats(data);break;case game.GameCMD.LOGIN_DUPLICATED:this.onLoginDupplicated();break;case game.GameCMD.OPERATOR_FLAG:game.GlobalVals.operatorFlagInfo=data.content;if(isDebug==7)
game.GlobalVals.operatorFlagInfo.miniStatus=2;break;case game.GameCMD.BET_SUCCEED:var btn=this.mainView.tablesView.tableSmallView.getBtn(data.content.table);if(btn)
btn['menu'].disableNonselectedMenus();break;case game.GameCMD.CURRENT_BETS:if(data.content.value.length==0)
return;var btn=this.mainView.tablesView.tableSmallView.getBtn(data.content.table);if(btn)
btn['menu'].disableNonselectedMenus();break;case game.GameCMD.START_BET_SUCCEED:var btn=this.mainView.tablesView.tableSmallView.getBtn(data.content.table);if(btn)
btn['menu'].enableAllMenus();break;}
if(this.activeGame)
this.activeGame.onWSMessageHdl(e);};Main.prototype.onLoginDupplicated=function(){if(this.activeGame)
this.activeGame.gameView.destroyVod();game.GlobalVals.messagePopup.showMessage(game.GameText.LOGIN_DUPLICATED_ALERT,function(){open("",'_self').close();},DOMAIN_NAME);};Main.prototype.onAuthSuccess=function(data){_super.prototype.onAuthSuccess.call(this,data);};Main.prototype.getLimits=function(data){var tableIds=game.GameUtils.getAllTableIds();var limitsReq=new game.netdata.LimitsRequest(tableIds);game.NetUtils.sendWS(limitsReq);};Main.prototype.addTrend=function(tableId,item){if(game.GameSettings.updateResultFunc[tableId]){item.result=game.GameSettings.updateResultFunc[tableId](item.cards);}
_super.prototype.addTrend.call(this,tableId,item);};Main.prototype.onActive=function(){_super.prototype.onActive.call(this);Howler.mute(game.CookiesMng.getCookie("mute"));};Main.prototype.onDeactive=function(){_super.prototype.onDeactive.call(this);Howler.mute(true);};Main.prototype.onNewShoeSucceedAll=function(data){trace("onNewShoeSucceedAll  ============ "+data.content);var maxTrendIcon=999;var lastRound=1;if(data.content==67&&game.GlobalVals.trendDataMap[data.content].trendArr){var trendArr=game.GlobalVals.trendDataMap[data.content].trendArr;if(trendArr.length>0)
lastRound=trendArr[trendArr.length-1].round;maxTrendIcon=game.GameSettings.TABLE_INFOS[data.content].maxTrendIcon;}
if(data.content!=67||(data.content==67&&lastRound>=maxTrendIcon))
this.resetShoe(data.content);};return Main;}(game.BaseMain));singleview.Main=Main;})(singleview||(singleview={}));function initMain(main){var win=window,_undef="undefined";var hidden,visibilityChange;if(document["hidden"]!=undefined){hidden="hidden";visibilityChange="visibilitychange";}
else if(document["mozHidden"]!=undefined){hidden="mozHidden";visibilityChange="mozvisibilitychange";}
else if(document["msHidden"]!=undefined){hidden="msHidden";visibilityChange="msvisibilitychange";}
else if(document["webkitHidden"]!=undefined){hidden="webkitHidden";visibilityChange="webkitvisibilitychange";}
var onHidden=function(){main.onDeactive();};var onShow=function(){main.onActive();};if(hidden){document.addEventListener(visibilityChange,function(){if(document[hidden])
onHidden();else
onShow();},false);}
else{win.addEventListener("blur",onHidden,false);win.addEventListener("focus",onShow,false);}
if(navigator.userAgent.indexOf("MicroMessenger")>-1){win.onfocus=function(){onShow();};}
if("onpageshow"in window&&"onpagehide"in window){win.addEventListener("pagehide",onHidden,false);win.addEventListener("pageshow",onShow,false);}
win=null;visibilityChange=null;};var WebFont=eval("WebFont");function main(){window.onload=function(){WebFont.load({active:function(){var main=new singleview.Main();initMain(main);},google:{families:["DinMedium"]}});};}
var singleview;(function(singleview){var ResourceManager=(function(_super){__extends(ResourceManager,_super);function ResourceManager(main){return _super.call(this,main)||this;}
ResourceManager.prototype.loadCommonSounds=function(handler,progress){var filenames=[];this.commonSound={};var obj=game.GlobalVals.soundJson;obj.id="soundsprite";var path='../common_bin/assets/sounds/'+ResourceManager.getSoundLang()+"/";obj.src=[getVersionedUrl(path+'soundsprite.ogg'),getVersionedUrl(path+'soundsprite.mp3')];for(var k in obj.sprite){obj.sprite[k][0]*=1000;obj.sprite[k][1]*=1000;}
filenames.push(obj);if(!game.GameSettings.SOUND_ENABLE)
filenames=[];this.loadSounds(filenames,this.commonLoader,this.commonSound,handler,progress);};ResourceManager.getSoundLang=function(){if(LANG=='cs'||LANG=='kr')
return LANG;return'en';};ResourceManager.prototype.loadCommonAsset=function(handler,progress){if(progress===void 0){progress=null;}
this.commonLoader=new PIXI.loaders.Loader();if(progress)
this.commonLoader.on('progress',function(loader,loadedResource){progress(loader.progress*(this.assetPercent/100));}.bind(this));var arr=['A',2,3,4,5,6,7,8,9,'T','J','Q','K'];for(var i=0;i<arr.length;i++){this.commonLoader.add('S'+arr[i],'../common_bin/assets/cards/S'+arr[i]+'.png');this.commonLoader.add('C'+arr[i],'../common_bin/assets/cards/C'+arr[i]+'.png');this.commonLoader.add('D'+arr[i],'../common_bin/assets/cards/D'+arr[i]+'.png');this.commonLoader.add('H'+arr[i],'../common_bin/assets/cards/H'+arr[i]+'.png');}
this.commonLoader.add('CB','../common_bin/assets/cards/CB.png');this.commonLoader.add('A7','../common_bin/assets/cards/A7.png');this.commonLoader.add('CS','../common_bin/assets/cards/CS.png');this.commonLoader.add("../common_bin/assets/small_cards.json").add("../common_bin/assets/trend_expand_btn.json").add("assets/baccarat/share/color_dices/color_dice_icons.json").add("../common_bin/assets/common_icons.json").add("../common_bin/assets/trend_icons.json").add("../common_bin/assets/trend_icons"+(LANG=='cs'?"_cs":"_en")+".json").add("../common_bin/assets/live_dice.json").add("../common_bin/assets/pool_chip_control.json").add("../common_bin/assets/player_chip_control.json").add("../common_bin/assets/chip_control.json").add("../common_bin/assets/hud_info_panel.json").add("../common_bin/assets/bet_control.json").add("../common_bin/assets/seats.json").add("../common_bin/assets/table_small_view_blue.json").add("../common_bin/assets/table_small_view_green.json").add("../common_bin/assets/tip.json").add("../common_bin/assets/component.json").add("../common_bin/assets/game_icons.json").add("../common_bin/assets/jumptable_icons.json").add('refreshBtn',"../common_bin/assets/refreshBtn.png").add('balance_bg',"../common_bin/assets/balance_bg.png").add('status_msg_bg',"../common_bin/assets/status_msg_bg.png").add('dummy_texture',"../common_bin/assets/dummy_texture.png").add('left_arrow',"../common_bin/assets/left_arrow.png").add('right_arrow',"../common_bin/assets/right_arrow.png").add('chip_selector',"../common_bin/assets/chip_selector.png").add('chip_shahow',"../common_bin/assets/chip_shadow.png").add('menu_arrow',"../common_bin/assets/menu_arrow.png").add('table_bg_blue',"../common_bin/assets/table_bg_blue.png").add('table_bg_green',"../common_bin/assets/table_bg_green.png").add('table_bg_lightblue',"../common_bin/assets/table_bg_lightblue.png").add('table_bg_red',"../common_bin/assets/table_bg_red.png").add('table_bg_purple',"../common_bin/assets/table_bg_purple.png").add('table_bg_yellow',"../common_bin/assets/table_bg_yellow.png").add("../common_bin/assets/hilo_trend_icons"+(LANG=='cs'?"_cs":"_en")+".json");this.commonLoader.on('complete',function(){this.loadCommonSounds(handler,progress);}.bind(this));this.commonLoader.load();};ResourceManager.prototype.loadBaccaratSound=function(assetLoader,handler,progress){if(this.baccaratSound){handler(assetLoader,this.baccaratSound);return;}
this.baccaratSound={};var filenames=[];for(var i=0;i<filenames.length;i++)
filenames[i]='assets/baccarat/share/sounds/'+filenames[i];this.loadSounds(filenames,assetLoader,this.baccaratSound,handler,progress);};ResourceManager.prototype.loadBaccaratAsset=function(handler,progress){if(progress===void 0){progress=null;}
if(this.baccaratLoader){this.loadBaccaratSound(this.baccaratLoader,handler,progress);return;}
var winLang=LANG=='cs'?'_cs':'';this.baccaratLoader=new PIXI.loaders.Loader();if(progress)
this.baccaratLoader.on('progress',function(loader,loadedResource){progress(loader.progress*(this.assetPercent/100));}.bind(this));this.baccaratLoader.add("assets/baccarat/share/banker_player.json").add('card_val_bg',"assets/baccarat/share/card_val_bg.png").add("assets/baccarat/2d/bet_area.json").add("assets/baccarat/2d/bet_area_hl.json").add("squeeze_overlay","./assets/squeeze_baccarat/share/squeeze_overlay.png").add('table_bonus98_1',"assets/baccarat/2d/lang/"+COMMON_LANG+"/table_bonus98_0001.png").add('table_bonus98_2',"assets/baccarat/2d/lang/"+COMMON_LANG+"/table_bonus98_0002.png").add('bet_area_text_blue',"assets/baccarat/2d/lang/"+COMMON_LANG+"/bet_area_text_blue.png").add('bet_area_text_green',"assets/baccarat/2d/lang/"+COMMON_LANG+"/bet_area_text_green.png").add('bet_area_text_lightblue',"assets/baccarat/2d/lang/"+COMMON_LANG+"/bet_area_text_lightblue.png").add('bac_banker_win_on_six'+winLang,"assets/baccarat/2d/bac_banker_win_on_six"+winLang+".png").add('bac_commission_win_ratio'+winLang,"assets/baccarat/2d/bac_commission_win_ratio"+winLang+".png").add('bac_noncommission_win_ratio'+winLang,"assets/baccarat/2d/bac_noncommission_win_ratio"+winLang+".png").add('bac_super98_win_ratio'+winLang,"assets/baccarat/2d/bac_super98_win_ratio"+winLang+".png").add("assets/baccarat/7s/bet_area.json").add("assets/baccarat/7s/bet_area_hl.json").add('7s_bet_area_text_blue',"assets/baccarat/7s/lang/"+COMMON_LANG+"/bet_area_text_blue.png").add('7s_bet_area_text_green',"assets/baccarat/7s/lang/"+COMMON_LANG+"/bet_area_text_green.png").add('7s_bet_area_text_lightblue',"assets/baccarat/7s/lang/"+COMMON_LANG+"/bet_area_text_lightblue.png").add('7s_bac_banker_win_on_six'+winLang,"assets/baccarat/7s/7s_bac_banker_win_on_six"+winLang+".png").add('7s_bac_commission_win_ratio'+winLang,"assets/baccarat/7s/7s_bac_commission_win_ratio"+winLang+".png").add('7s_bac_noncommission_win_ratio'+winLang,"assets/baccarat/7s/7s_bac_noncommission_win_ratio"+winLang+".png").add('7s_bac_super98_win_ratio'+winLang,"assets/baccarat/7s/7s_bac_super98_win_ratio"+winLang+".png");var arr=[];for(var i=1;i<=7;i++)
arr.push('color_dice0'+i+'');for(var i=1;i<=12;i++)
arr.push('color_dice'+i+'0');for(var i=0;i<arr.length;i++)
this.baccaratLoader.add(arr[i],"assets/baccarat/share/color_dices/"+arr[i]+'.png');this.baccaratLoader.on('complete',function(){this.loadBaccaratSound(this.baccaratLoader,handler,progress);}.bind(this));this.baccaratLoader.load();};ResourceManager.prototype.loadRouletteAsset=function(handler,progress){if(progress===void 0){progress=null;}
if(this.rouletteLoader){handler(this.rouletteLoader,this.rouletteLoader.resources);return;}
this.rouletteLoader=new PIXI.loaders.Loader();if(progress)
this.rouletteLoader.on('progress',function(loader,loadedResource){progress(loader.progress*(this.assetPercent/100));}.bind(this));this.rouletteLoader.add("assets/roulette/share/icons/icons.json").add("assets/roulette/2d/bet_area.json").add("assets/roulette/2d/bet_area_hl.json").add('bet_area_text_blue',"assets/roulette/2d/lang/"+COMMON_LANG+"/bet_area_text_blue.png").add('bet_area_text_green',"assets/roulette/2d/lang/"+COMMON_LANG+"/bet_area_text_green.png").add('bet_area_text_lightblue',"assets/roulette/2d/lang/"+COMMON_LANG+"/bet_area_text_lightblue.png");this.rouletteLoader.on('complete',function(){handler(this.rouletteLoader,{});}.bind(this));this.rouletteLoader.load();};ResourceManager.prototype.loadDragonTigerSound=function(assetLoader,handler,progress){if(this.dragonTigerSound){handler(assetLoader,this.dragonTigerSound);return;}
this.dragonTigerSound={};var filenames=[];for(var i=0;i<filenames.length;i++)
filenames[i]='assets/dragon_tiger/share/sounds/'+filenames[i];this.loadSounds(filenames,assetLoader,this.dragonTigerSound,handler,progress);};ResourceManager.prototype.loadDragonTigerAsset=function(handler,progress){if(progress===void 0){progress=null;}
if(this.dragonTigerLoader){this.loadDragonTigerSound(this.dragonTigerLoader,handler,progress);return;}
this.dragonTigerLoader=new PIXI.loaders.Loader();if(progress)
this.dragonTigerLoader.on('progress',function(loader,loadedResource){progress(loader.progress*(this.assetPercent/100));}.bind(this));this.dragonTigerLoader.add("assets/dragon_tiger/share/dragon_tiger.json").add('card_val_bg',"assets/dragon_tiger/share/card_val_bg.png").add("assets/dragon_tiger/2d/bet_area.json").add("assets/dragon_tiger/2d/bet_area_hl.json").add('bet_area_text',"assets/dragon_tiger/2d/lang/"+COMMON_LANG+"/bet_area_text.png").add("assets/dragon_tiger/7s/bet_area.json").add("assets/dragon_tiger/7s/bet_area_hl.json").add('7s_bet_area_text_blue',"assets/dragon_tiger/7s/lang/"+COMMON_LANG+"/bet_area_text_blue.png").add('7s_bet_area_text_green',"assets/dragon_tiger/7s/lang/"+COMMON_LANG+"/bet_area_text_green.png").add('7s_bet_area_text_lightblue',"assets/dragon_tiger/7s/lang/"+COMMON_LANG+"/bet_area_text_lightblue.png");this.dragonTigerLoader.on('complete',function(){this.loadDragonTigerSound(this.dragonTigerLoader,handler,progress);}.bind(this));this.dragonTigerLoader.load();};ResourceManager.prototype.loadBullFightSound=function(assetLoader,handler,progress){if(this.bullFightSound){handler(assetLoader,this.bullFightSound);return;}
this.bullFightSound={};var filenames=[];for(var i=0;i<filenames.length;i++)
filenames[i]='assets/bull_fight/share/sounds/'+filenames[i];this.loadSounds(filenames,assetLoader,this.bullFightSound,handler,progress);};ResourceManager.prototype.loadBullFightAsset=function(handler,progress){if(progress===void 0){progress=null;}
if(this.bullFightLoader){this.loadBullFightSound(this.bullFightLoader,handler,progress);return;}
this.bullFightLoader=new PIXI.loaders.Loader();if(progress)
this.bullFightLoader.on('progress',function(loader,loadedResource){progress(loader.progress*(this.assetPercent/100));}.bind(this));this.bullFightLoader.add("assets/bull_fight/2d/share/bet_area.json").add("assets/bull_fight/2d/share/bet_area_hl.json").add("icon_lobby_new","../common_bin/assets/icon/icon_lobby_new.png").add('bet_area_text_lightblue',"assets/bull_fight/2d/lang/"+COMMON_LANG+"/bet_area_text_lightblue.png");this.bullFightLoader.on('complete',function(){this.loadBullFightSound(this.bullFightLoader,handler,progress);}.bind(this));this.bullFightLoader.load();};ResourceManager.prototype.loadFabulousSound=function(assetLoader,handler,progress){if(this.fabulousSound){handler(assetLoader,this.fabulousSound);return;}
this.fabulousSound={};var filenames=[];for(var i=0;i<filenames.length;i++)
filenames[i]='assets/fabulous/share/sounds/'+filenames[i];this.loadSounds(filenames,assetLoader,this.fabulousSound,handler,progress);};ResourceManager.prototype.loadFabulousAsset=function(handler,progress){if(progress===void 0){progress=null;}
if(this.fabulousLoader){this.loadFabulousSound(this.fabulousLoader,handler,progress);return;}
this.fabulousLoader=new PIXI.loaders.Loader();if(progress)
this.fabulousLoader.on('progress',function(loader,loadedResource){progress(loader.progress*(this.assetPercent/100));}.bind(this));this.fabulousLoader.add("assets/baccarat/share/banker_player.json").add('card_val_bg',"assets/baccarat/share/card_val_bg.png").add("assets/fabulous/2d/bet_area.json").add('fabulous_logo',"assets/fabulous/2d/fabulous_logo.png").add("assets/fabulous/2d/bet_area_hl.json").add('bet_area_text',"assets/fabulous/2d/lang/"+COMMON_LANG+"/bet_area_text.png").add("assets/fabulous/7s/bet_area.json").add("assets/fabulous/7s/bet_area_hl.json").add('7s_bet_area_text_blue',"assets/fabulous/7s/lang/"+COMMON_LANG+"/bet_area_text_blue.png").add('7s_fabulous_logo',"assets/fabulous/7s/fabulous_logo.png");this.fabulousLoader.on('complete',function(){this.loadFabulousSound(this.fabulousLoader,handler,progress);}.bind(this));this.fabulousLoader.load();};ResourceManager.prototype.loadLuckyBaccaratSound=function(assetLoader,handler,progress){if(this.luckyBaccaratSound){handler(assetLoader,this.luckyBaccaratSound);return;}
this.luckyBaccaratSound={};var filenames=[];for(var i=0;i<filenames.length;i++)
filenames[i]='assets/lucky_baccarat/share/sounds/'+filenames[i];this.loadSounds(filenames,assetLoader,this.luckyBaccaratSound,handler,progress);};ResourceManager.prototype.loadLuckyBaccaratAsset=function(handler,progress){if(progress===void 0){progress=null;}
if(this.luckyBaccaratLoader){this.loadLuckyBaccaratSound(this.luckyBaccaratLoader,handler,progress);return;}
this.luckyBaccaratLoader=new PIXI.loaders.Loader();if(progress)
this.luckyBaccaratLoader.on('progress',function(loader,loadedResource){progress(loader.progress*(this.assetPercent/100));}.bind(this));this.luckyBaccaratLoader.add("assets/baccarat/share/banker_player.json").add('card_val_bg',"assets/baccarat/share/card_val_bg.png").add("assets/lucky_baccarat/2d/bet_area.json").add('lucky_baccarat_logo',"assets/lucky_baccarat/2d/lucky_baccarat_logo.png").add("assets/lucky_baccarat/2d/bet_area_hl.json").add('bet_area_text',"assets/lucky_baccarat/2d/lang/"+COMMON_LANG+"/bet_area_text.png");this.luckyBaccaratLoader.on('complete',function(){this.loadLuckyBaccaratSound(this.luckyBaccaratLoader,handler,progress);}.bind(this));this.luckyBaccaratLoader.load();};ResourceManager.prototype.loadSevenUpAsset=function(handler,progress,tableId){if(this.sevenUpLoader){handler(this.sevenUpLoader,{});return;}
this.sevenUpLoader=new PIXI.loaders.Loader();if(progress)
this.sevenUpLoader.on('progress',function(loader,loadedResource){progress(loader.progress*(this.assetPercent/100));}.bind(this));this.sevenUpLoader.on('complete',function(){handler(this.sevenUpLoader,{});}.bind(this));this.sevenUpLoader.add("assets/baccarat/share/banker_player.json").add('card_val_bg',"assets/baccarat/share/card_val_bg.png");this.sevenUpLoader.add("assets/seven_up/2d/bet_area.json").add("assets/seven_up/2d/bet_area_hl.json").add('bet_area_text_'+game.GameUtils.getColor(tableId),"assets/seven_up/2d/lang/"+COMMON_LANG+"/bet_area_text_"+game.GameUtils.getColor(tableId)+".png");this.sevenUpLoader.add("assets/seven_up/7s/bet_area.json").add("assets/seven_up/7s/bet_area_hl.json").add('7s_bet_area_text_'+game.GameUtils.getColor(tableId),"assets/seven_up/7s/lang/"+COMMON_LANG+"/bet_area_text_"+game.GameUtils.getColor(tableId)+".png");if(this.sevenUpLoader['_numToLoad'])
this.sevenUpLoader.load();else
handler(this.sevenUpLoader,{});};ResourceManager.prototype.loadSicBoSound=function(assetLoader,handler,progress){if(this.sicboSound){handler(assetLoader,this.sicboSound);return;}
this.sicboSound={};var filenames=[];for(var i=0;i<filenames.length;i++)
filenames[i]='assets/sicbo/share/sounds/'+filenames[i];this.loadSounds(filenames,assetLoader,this.sicboSound,handler,progress);};ResourceManager.prototype.loadSicBoAsset=function(handler,progress){if(progress===void 0){progress=null;}
if(this.sicboLoader){this.loadSicBoSound(this.sicboLoader,handler,progress);return;}
this.sicboLoader=new PIXI.loaders.Loader();if(progress)
this.sicboLoader.on('progress',function(loader,loadedResource){progress(loader.progress*(this.assetPercent/100));}.bind(this));this.sicboLoader.add("assets/sicbo/share/icons/icons.json").add("assets/sicbo/2d/bet_area.json").add("assets/sicbo/2d/bet_area_hl.json").add('bet_area_text_blue',"assets/sicbo/2d/lang/"+COMMON_LANG+"/bet_area_text_blue.png").add('bet_area_text_green',"assets/sicbo/2d/lang/"+COMMON_LANG+"/bet_area_text_green.png").add('bet_area_text_lightblue',"assets/sicbo/2d/lang/"+COMMON_LANG+"/bet_area_text_lightblue.png");for(var i=1;i<=6;i++)
this.sicboLoader.add("assets/sicbo/share/dice3d/dice_3d_"+i+".json");this.sicboLoader.on('complete',function(){this.loadSicBoSound(this.sicboLoader,handler,progress);}.bind(this));this.sicboLoader.load();};ResourceManager.prototype.loadSuperHiLoSound=function(assetLoader,handler,progress){if(this.superHiLoSound){handler(assetLoader,this.superHiLoSound);return;}
game.GlobalVals.soundHiLoJson=assetLoader.resources[game.SoundMng.SOUND_HILO].data;var filenames=[];this.superHiLoSound={};var obj=game.GlobalVals.soundHiLoJson;obj.id=game.SoundMng.SOUND_HILO;var path='assets/super_hi_lo/share/sounds/'+(LANG=='cs'?'cs':'en')+"/";obj.src=[getVersionedUrl(path+obj.id+'.ogg'),getVersionedUrl(path+obj.id+'.mp3')];for(var k in obj.sprite){obj.sprite[k][0]*=1000;obj.sprite[k][1]*=1000;}
filenames.push(obj);if(!game.GameSettings.SOUND_ENABLE)
filenames=[];this.loadSounds(filenames,assetLoader,this.superHiLoSound,handler,progress);};ResourceManager.prototype.loadSuperHiLoAsset=function(handler,progress){if(progress===void 0){progress=null;}
if(this.superHiLoLoader){this.loadSuperHiLoSound(this.superHiLoLoader,handler,progress);return;}
this.superHiLoLoader=new PIXI.loaders.Loader();if(progress)
this.superHiLoLoader.on('progress',function(loader,loadedResource){progress(loader.progress*(this.assetPercent/100));}.bind(this));this.superHiLoLoader.add("assets/super_hi_lo/2d/bet_area.json").add("assets/super_hi_lo/2d/bet_area_hl.json").add('bet_area_text_blue',"assets/super_hi_lo/2d/lang/"+COMMON_LANG+"/bet_area_text_blue.png").add('bet_area_text_green',"assets/super_hi_lo/2d/lang/"+COMMON_LANG+"/bet_area_text_green.png").add('bet_area_text_lightblue',"assets/super_hi_lo/2d/lang/"+COMMON_LANG+"/bet_area_text_lightblue.png").add('superhilo_stats_pane',"assets/super_hi_lo/share/superhilo_stats_pane.png").add('superhilo_stats_pane_zh',"assets/super_hi_lo/share/superhilo_stats_pane_zh.png").add("soundhilo",'assets/super_hi_lo/share/sounds/'+(LANG=='cs'?'cs':'en')+"/soundhilo.json");this.superHiLoLoader.on('complete',function(){this.loadSuperHiLoSound(this.superHiLoLoader,handler,progress);}.bind(this));this.superHiLoLoader.load();};ResourceManager.prototype.loadSuper3PicturesSound=function(assetLoader,handler,progress){if(this.super3PicturesSound){handler(assetLoader,this.super3PicturesSound);return;}
game.GlobalVals.soundS3PJson=assetLoader.resources[game.SoundMng.SOUND_3PICTURES].data;var filenames=[];this.super3PicturesSound={};var obj=game.GlobalVals.soundS3PJson;obj.id=game.SoundMng.SOUND_3PICTURES;var path='assets/super_3pictures/share/sounds/'+ResourceManager.getSoundLang()+"/";obj.src=[getVersionedUrl(path+obj.id+'.ogg'),getVersionedUrl(path+obj.id+'.mp3')];for(var k in obj.sprite){obj.sprite[k][0]*=1000;obj.sprite[k][1]*=1000;}
filenames.push(obj);if(!game.GameSettings.SOUND_ENABLE)
filenames=[];this.loadSounds(filenames,assetLoader,this.super3PicturesSound,handler,progress);};ResourceManager.prototype.loadSuper3PicturesAsset=function(handler,progress){if(progress===void 0){progress=null;}
if(this.super3PicturesLoader){this.loadSuper3PicturesSound(this.super3PicturesLoader,handler,progress);return;}
this.super3PicturesLoader=new PIXI.loaders.Loader();if(progress)
this.super3PicturesLoader.on('progress',function(loader,loadedResource){progress(loader.progress*(this.assetPercent/100));}.bind(this));this.super3PicturesLoader.add("assets/baccarat/share/banker_player.json").add("squeeze_overlay","./assets/squeeze_baccarat/share/squeeze_overlay.png").add("assets/super_3pictures/2d/bet_area.json").add("assets/super_3pictures/2d/bet_area_hl.json").add('bet_area_text',"assets/super_3pictures/2d/lang/"+COMMON_LANG+"/superthreepicture_betarea_background.png").add('card_val_bg',"assets/super_3pictures/share/card_val_bg.png").add('pair_plus_tips_bg',"assets/super_3pictures/share/pair_plus_tips_bg.png").add('pair_plus_tips_btn',"assets/super_3pictures/share/pair_plus_tips_btn.png").add("sound3pictures",'assets/super_3pictures/share/sounds/'+ResourceManager.getSoundLang()+"/sound3pictures.json");this.super3PicturesLoader.on('complete',function(){this.loadSuper3PicturesSound(this.super3PicturesLoader,handler,progress);}.bind(this));this.super3PicturesLoader.load();};ResourceManager.prototype.loadSuperFantanSound=function(assetLoader,handler,progress){if(this.superFantanSound){handler(assetLoader,this.superFantanSound);return;}
this.superFantanSound={};var filenames=[];for(var i=0;i<filenames.length;i++)
filenames[i]='assets/super_fantan/share/sounds/'+filenames[i];this.loadSounds(filenames,assetLoader,this.superFantanSound,handler,progress);};ResourceManager.prototype.loadSuperFantanAsset=function(handler,progress){if(progress===void 0){progress=null;}
if(this.superFantanLoader){this.loadSuperFantanSound(this.superFantanLoader,handler,progress);return;}
this.superFantanLoader=new PIXI.loaders.Loader();if(progress)
this.superFantanLoader.on('progress',function(loader,loadedResource){progress(loader.progress*(this.assetPercent/100));}.bind(this));this.superFantanLoader.add('superfantan_bead',"assets/super_fantan/share/superfantan_bead.png").add('superfantan_bead_board',"assets/super_fantan/share/superfantan_bead_board.png").add('fantan_marker',"assets/super_fantan/share/fantan_marker.png").add("assets/super_fantan/share/fan_payout.json").add("assets/super_fantan/2d/bet_area.json").add("assets/super_fantan/2d/bet_area_hl.json").add('bet_area_text',"assets/super_fantan/2d/lang/"+COMMON_LANG+"/superfantan_betarea_background.png").add('fantan_bonus98_1',"assets/super_fantan/2d/lang/"+COMMON_LANG+"/bonus98_1.png").add('fantan_bonus98_2',"assets/super_fantan/2d/lang/"+COMMON_LANG+"/bonus98_2.png").add("squeeze_overlay","./assets/squeeze_baccarat/share/squeeze_overlay.png");var arr=[];for(var i=1;i<=7;i++)
arr.push('color_dice0'+i+'');for(var i=1;i<=12;i++)
arr.push('color_dice'+i+'0');for(var i=0;i<arr.length;i++)
this.superFantanLoader.add(arr[i],"assets/baccarat/share/color_dices/"+arr[i]+'.png');this.superFantanLoader.on('complete',function(){this.loadSuperFantanSound(this.superFantanLoader,handler,progress);}.bind(this));this.superFantanLoader.load();};ResourceManager.prototype.loadLobbySound=function(assetLoader,handler,progress){if(this.lobbySound){handler(assetLoader,this.lobbySound);return;}
this.lobbySound={};var filenames=[];for(var i=0;i<filenames.length;i++)
filenames[i]='assets/lobby/share/sounds/'+filenames[i];this.loadSounds(filenames,assetLoader,this.lobbySound,handler,progress);};ResourceManager.prototype.loadLobbyAsset=function(handler,progress){if(progress===void 0){progress=null;}
if(this.lobbyLoader){this.loadLobbySound(this.lobbyLoader,handler,progress);return;}
this.lobbyLoader=new PIXI.loaders.Loader();if(progress)
this.lobbyLoader.on('progress',function(loader,loadedResource){progress(loader.progress*(this.assetPercent/100));}.bind(this));this.lobbyLoader.add("assets/lobby/grid_bg.json").add('table_item_bg',"assets/lobby/table_item_bg.png").add('user_icon',"assets/lobby/user_icon.png").add("assets/lobby/btns.json");this.lobbyLoader.on('complete',function(){this.loadLobbySound(this.lobbyLoader,handler,progress);}.bind(this));this.lobbyLoader.load();};ResourceManager.VERSION='1.0';return ResourceManager;}(game.BaseResourceManager));singleview.ResourceManager=ResourceManager;})(singleview||(singleview={}));var singleview;(function(singleview){var MainView=(function(_super){__extends(MainView,_super);function MainView(main){var _this=_super.call(this,main)||this;_this.initialize();return _this;}
MainView.prototype.destroy=function(options){_super.prototype.destroy.call(this);};MainView.prototype.initialize=function(){this.tablesView=new game.TablesView(this.main);this.addChild(this.tablesView);this.tablesView.x=game.GameSettings.CANVAS_WIDTH-50;var globalMsg=new component.VMessage();this.addChild(globalMsg);globalMsg.setSize(game.GameSettings.CANVAS_WIDTH,game.GameSettings.CANVAS_HEIGHT);game.GlobalVals.globalMsg=globalMsg;globalMsg.hide();this.miniLobby=new singleview.MiniLobby(this.main);this.addChild(this.miniLobby);this.historyPanel=new game.HistoryPanel(this.main,877,601);this.historyPanel.autoCenter=true;this.historyPanel.x=(game.GameSettings.CANVAS_WIDTH-this.historyPanel.width)*0.5;this.historyPanel.y=(game.GameSettings.CANVAS_HEIGHT-this.historyPanel.height)*0.5;this.historyPanel.hide();this.addChild(this.historyPanel);game.GlobalVals.historyPanel=this.historyPanel;this.reportPanel=new game.ReportPanel(this.main,600,270);this.reportPanel.autoCenter=true;this.reportPanel.x=(game.GameSettings.CANVAS_WIDTH-this.reportPanel.width)*0.5;this.reportPanel.y=(game.GameSettings.CANVAS_HEIGHT-this.reportPanel.height)*0.5;this.reportPanel.hide();this.addChild(this.reportPanel);game.GlobalVals.reportPanel=this.reportPanel;this.messagePopup=new game.MessagePopup(this.main,400,200,true,0x111111);this.addChild(this.messagePopup);game.GlobalVals.messagePopup=this.messagePopup;this.messagePopup.hide();this.overlay=new PIXI.Container();this.addChild(this.overlay);game.GlobalVals.overlay=this.overlay;};MainView.prototype.sizeHandler=function(){};MainView.prototype.onKeyDown=function(e){var keyCode=e.data.keyCode;if(keyCode==17)
this.ctrPress=true;if(keyCode==48&&this.ctrPress){game.GlobalVals.globalMsg.hide();}};MainView.prototype.onKeyUp=function(e){var keyCode=e.data.keyCode;if(keyCode==17)
this.ctrPress=false;};return MainView;}(game.MainObject));singleview.MainView=MainView;})(singleview||(singleview={}));var singleview;(function(singleview){var BacMiniLobbyItem=(function(_super){__extends(BacMiniLobbyItem,_super);function BacMiniLobbyItem(main,info,w,h){return _super.call(this,main,info,w,h)||this;}
BacMiniLobbyItem.prototype.initView=function(){_super.prototype.initView.call(this);this.trendCon=new game.TrendContainer(this.gameModel,game.TrendIcon,this.viewW,this.viewH-this.titleH,6,this.info.hint,false,70,80,0);var trendc=this.trendCon;trendc.nameTf.style.fontSize=20;trendc.nameTf.text=game.GameText.BIG_ROAD;this.trendCon.expandBtn.visible=false;this.addChild(this.trendCon);};BacMiniLobbyItem.prototype.addTrend=function(item){this.trendCon.addTrend(item,true);this.trendCon.blinkExIcon();};BacMiniLobbyItem.prototype.doInitTrends=function(){var arr=game.GlobalVals.trendDataMap[this.info.id].trendArr;var num=40;this.trendCon.updateTrends(arr.slice(arr.length-num>0?arr.length-num:0,arr.length));};return BacMiniLobbyItem;}(singleview.BaseMiniLobbyItem));singleview.BacMiniLobbyItem=BacMiniLobbyItem;})(singleview||(singleview={}));var singleview;(function(singleview){var BaseTrendCon=(function(_super){__extends(BaseTrendCon,_super);function BaseTrendCon(main,ItemClass,w,h){var _this=_super.call(this,main)||this;_this.ItemClass=ItemClass;_this.viewW=w;_this.viewH=h;_this.items=[];_this.initView();return _this;}
BaseTrendCon.prototype.initView=function(){if(this.viewInited)
throw new Error("Double initView!!!");this.viewInited=true;var bgColor=0x25221D;var bg=new PIXI.Graphics();this.addChild(bg);bg.beginFill(bgColor);bg.drawRect(0,0,this.viewW,this.viewH);bg.endFill();this.content=new PIXI.Container();this.addChild(this.content);};BaseTrendCon.prototype.destructor=function(){this.clear();_super.prototype.destructor.call(this);};BaseTrendCon.prototype.clear=function(){trace("base mini lobby clear ======================== "+this.items.length);while(this.items.length){var item=this.items.pop();this.content.removeChild(item);core.VObjectPool.release(item,this.ItemClass);}};BaseTrendCon.prototype.updateTrends=function(trendArr){this.clear();var display=3;for(var i=0;i<trendArr.length;i++){var item=core.VObjectPool.get(this.ItemClass);item.setSize(this.main,this.viewW,this.viewH/display);item.setData(trendArr[i]);item.y=(display-i-1)*item.viewH;this.content.addChild(item);this.items.push(item);}};return BaseTrendCon;}(game.MainObject));singleview.BaseTrendCon=BaseTrendCon;})(singleview||(singleview={}));var singleview;(function(singleview){var BullMiniLobbyItem=(function(_super){__extends(BullMiniLobbyItem,_super);function BullMiniLobbyItem(main,info,w,h){return _super.call(this,main,info,w,h)||this;}
BullMiniLobbyItem.prototype.initView=function(){_super.prototype.initView.call(this);this.trendCon=new game.TrendContainer(this.gameModel,bull_fight.GenTrendIcon,this.viewW,this.viewH-this.titleH,6,this.info.hint,false,70,80,0);this.trendCon.expandBtn.visible=false;var trendc=this.trendCon;trendc.nameTf.style.fontSize=20;trendc.nameTf.text=game.GameText.BIG_ROAD;this.addChild(this.trendCon);};BullMiniLobbyItem.prototype.addTrend=function(item){this.trendCon.addTrend(item,true);this.trendCon.blinkExIcon();};BullMiniLobbyItem.prototype.doInitTrends=function(){var arr=game.GlobalVals.trendDataMap[this.info.id].trendArr;var num=40;this.trendCon.updateTrends(arr.slice(arr.length-num>0?arr.length-num:0,arr.length));};return BullMiniLobbyItem;}(singleview.BaseMiniLobbyItem));singleview.BullMiniLobbyItem=BullMiniLobbyItem;})(singleview||(singleview={}));var singleview;(function(singleview){var DraMiniLobbyItem=(function(_super){__extends(DraMiniLobbyItem,_super);function DraMiniLobbyItem(main,info,w,h){return _super.call(this,main,info,w,h)||this;}
DraMiniLobbyItem.prototype.initView=function(){_super.prototype.initView.call(this);this.trendCon=new game.TrendContainer(this.gameModel,game.TrendIcon,this.viewW,this.viewH-this.titleH,6,this.info.hint,false,70,80,0);this.trendCon.expandBtn.visible=false;var trendc=this.trendCon;trendc.nameTf.style.fontSize=20;trendc.nameTf.text=game.GameText.BIG_ROAD;this.addChild(this.trendCon);};DraMiniLobbyItem.prototype.addTrend=function(item){this.trendCon.addTrend(item,true);this.trendCon.blinkExIcon();};DraMiniLobbyItem.prototype.doInitTrends=function(){var arr=game.GlobalVals.trendDataMap[this.info.id].trendArr;var num=40;this.trendCon.updateTrends(arr.slice(arr.length-num>0?arr.length-num:0,arr.length));};return DraMiniLobbyItem;}(singleview.BaseMiniLobbyItem));singleview.DraMiniLobbyItem=DraMiniLobbyItem;})(singleview||(singleview={}));var singleview;(function(singleview){var HiLoMiniLobbyItem=(function(_super){__extends(HiLoMiniLobbyItem,_super);function HiLoMiniLobbyItem(main,info,w,h){return _super.call(this,main,info,w,h)||this;}
HiLoMiniLobbyItem.prototype.initView=function(){_super.prototype.initView.call(this);this.maxItem=15;this.trendCon=new super_hi_lo.TrendContainer(this.gameModel,super_hi_lo.TrendIcon,this.viewW,this.viewH-this.titleH,6,this.info.hint);this.trendCon.expandBtn.visible=false;var trendc=this.trendCon;trendc.nameTf.style.fontSize=20;trendc.nameTf.text=game.GameText.BIG_ROAD;this.addChild(this.trendCon);};HiLoMiniLobbyItem.prototype.addTrend=function(item){this.trendCon.addTrend(item,true);this.trendCon.blinkExIcon();};HiLoMiniLobbyItem.prototype.doInitTrends=function(){if(!game.GlobalVals.trendDataMap[this.info.id])
return;var arr=game.GlobalVals.trendDataMap[this.info.id].trendArr;arr=this.extractTrends(arr);var index=arr.length-this.maxItem;this.trendCon.clear();this.trendCon.updateTrends(arr.slice(index>=0?index:0,arr.length));};HiLoMiniLobbyItem.prototype.extractTrends=function(values){var start=0;for(var i=0;i<values.length;i++){if(values[i].round==1){start=i;break;}}
return values.slice(start,values.length);};return HiLoMiniLobbyItem;}(singleview.BaseMiniLobbyItem));singleview.HiLoMiniLobbyItem=HiLoMiniLobbyItem;})(singleview||(singleview={}));var singleview;(function(singleview){var LuckMiniLobbyItem=(function(_super){__extends(LuckMiniLobbyItem,_super);function LuckMiniLobbyItem(main,info,w,h){return _super.call(this,main,info,w,h)||this;}
LuckMiniLobbyItem.prototype.initView=function(){_super.prototype.initView.call(this);this.trendCon=new game.TrendContainer(this.gameModel,lucky_baccarat.LuckTrendIcon,this.viewW,this.viewH-this.titleH,6,this.info.hint,false,70,80,0);var trendc=this.trendCon;trendc.nameTf.style.fontSize=20;trendc.nameTf.text=game.GameText.BIG_ROAD;this.trendCon.expandBtn.visible=false;this.addChild(this.trendCon);};LuckMiniLobbyItem.prototype.addTrend=function(item){this.trendCon.addTrend(item,true);this.trendCon.blinkExIcon();};LuckMiniLobbyItem.prototype.doInitTrends=function(){var arr=game.GlobalVals.trendDataMap[this.info.id].trendArr;var num=40;this.trendCon.updateTrends(arr.slice(arr.length-num>0?arr.length-num:0,arr.length));};return LuckMiniLobbyItem;}(singleview.BaseMiniLobbyItem));singleview.LuckMiniLobbyItem=LuckMiniLobbyItem;})(singleview||(singleview={}));var singleview;(function(singleview){var MiniLobby=(function(_super){__extends(MiniLobby,_super);function MiniLobby(main){var _this=_super.call(this,main)||this;_this.viewW=400;_this.viewH=game.GameSettings.CANVAS_HEIGHT;_this.tabW=35;_this.selectedTab=0;var arrow0=new PIXI.Sprite(PIXI.Texture.fromFrame("ver_arrow.png"));arrow0.scale.x=-1;arrow0.anchor.x=0.5;arrow0.anchor.y=0.5;arrow0.y=0;arrow0.x=20;var f0=new PIXI.Sprite(PIXI.Texture.fromFrame("expand_btn_2.png"));f0.anchor.y=0.5;f0.addChild(arrow0);var arrow1=new PIXI.Sprite(PIXI.Texture.fromFrame("ver_arrow.png"));arrow1.anchor.x=0.5;arrow1.anchor.y=0.5;arrow1.y=0;arrow1.x=20;var f1=new PIXI.Sprite(PIXI.Texture.fromFrame("expand_btn_2.png"));f1.anchor.y=0.5;f1.addChild(arrow1);_this.expandBtn=new component.VToggleButton(f0,f1,_this.onExpand.bind(_this));_this.expandBtn.buttonMode=true;_this.expandBtn.width=22;_this.expandBtn.scale.y=_this.expandBtn.scale.x;_this.expandBtn.x=-_this.expandBtn.width+1;_this.expandBtn.y=420;_this.addChild(_this.expandBtn);_this.bg=new PIXI.Graphics();_this.bg.lineStyle(1,0x4D463E);_this.bg.beginFill(0x1A1614);_this.bg.drawRect(0,0,_this.viewW,_this.viewH);_this.addChild(_this.bg);_this.grid=new singleview.MiniLobbyGrid(_this.main,_this.viewW-_this.tabW-20,_this.viewH,2);_this.grid.x=_this.tabW+20;_this.addChild(_this.grid);_this.tabBtns=[];_this.tabCon=new PIXI.Container();_this.tabCon.x=22;_this.addChild(_this.tabCon);var arr=["popular_icon.png","baccarat_game_icon.png","baccarat_2_game_icon.png","dragon_tiger_game_icon.png","sicbo_game_icon.png","roulette_game_icon.png","other_icon.png"];var posY=0;for(var i=0;i<arr.length;i++){var f0=new PIXI.Sprite(PIXI.Texture.fromFrame(arr[i]));f0.anchor.x=0.5;var f1=new PIXI.Sprite(PIXI.Texture.fromFrame(arr[i]));f1.anchor.x=0.5;f0.alpha=0.5;var btn=new component.VButton([f0,f1]);btn.scale.x=_this.tabW/btn.width;btn.scale.y=btn.scale.x;btn.data=i;_this.tabBtns.push(btn);_this.tabCon.addChild(btn);btn.x=0;btn.y=posY;posY+=btn.height+15;}
_this.tabCon.y=(game.GameSettings.CANVAS_HEIGHT-_this.tabCon.height)*0.5;_this.tabMng=new component.VTabMng();_this.tabMng.initialize(_this.tabBtns);_this.tabMng.addEventListener(component.VTabMng.CHANGE,_this.onTabChange,_this);_this.x=game.GameSettings.CANVAS_WIDTH-game.GameSettings.TABLE_SMALL_VIEW_WIDTH;_this.bg.visible=false;_this.tabCon.visible=false;return _this;}
MiniLobby.prototype.onExpand=function(){if(this.expandBtn.currentFrame==1)
this.show();else
this.hide();};MiniLobby.prototype.show=function(){this.bg.visible=true;this.tabCon.visible=true;this.initTrends();game.GlobalVals.onShownPopup(this.bg);TweenMax.to(this,0.3,{x:game.GameSettings.CANVAS_WIDTH-this.viewW});};MiniLobby.prototype.hide=function(){this.expandBtn.setFrame(0);TweenMax.to(this,0.3,{x:game.GameSettings.CANVAS_WIDTH-game.GameSettings.TABLE_SMALL_VIEW_WIDTH,onComplete:function(){this.bg.visible=false;this.tabCon.visible=false;this.grid.clear();game.GlobalVals.onHidePopup();}.bind(this)});};MiniLobby.prototype.initTrends=function(){this.tabMng.setActive(this.tabBtns[this.selectedTab]);};MiniLobby.prototype.onTabChange=function(e){var btn=e.data;this.selectedTab=btn.data;this.grid.setTableIds(this.getTableIds(btn.data));};MiniLobby.prototype.getTableIds=function(tabIndex){var ids=[];var id;var gameId;switch(tabIndex){case 0:ids=game.GameSettings.CONFIG.lobby.mini_popular.slice();break;case 1:ids=game.GameUtils.getTableForGame([game.GameID.BACCARAT,game.GameID.BACCARAT_NONCOMMISSION,game.GameID.BACCARAT_SUPER98,game.GameID.SQUEEZE_BACCARAT,game.GameID.BACCARAT_CINEMATIC,game.GameID.SQUEEZE_BACCARAT_NONCOMMISSION]);break;case 2:ids=game.GameUtils.getTableForGame([game.GameID.SEVEN_UP,game.GameID.FABULOUS,game.GameID.LUCKY_BACCARAT]);break;case 3:ids=game.GameUtils.getTableForGame([game.GameID.DRAGON_TIGER]);break;case 4:ids=game.GameUtils.getTableForGame([game.GameID.SICBO]);break;case 5:ids=game.GameUtils.getTableForGame([game.GameID.ROULETTE_CINEMATIC,game.GameID.ROULETTE]);break;case 6:ids=game.GameUtils.getTableForGame([game.GameID.BULL_FIGHT,game.GameID.SUPER_HI_LO,game.GameID.SUPER_3PICTURES,game.GameID.SUPER_FANTAN]);break;}
for(var j=ids.length-1;j>=0;j--){if(game.GameSettings.TABLE_INFOS[ids[j]].banned)
ids.splice(j,1);}
return ids;};return MiniLobby;}(game.MainObject));singleview.MiniLobby=MiniLobby;})(singleview||(singleview={}));var singleview;(function(singleview){var MiniLobbyGrid=(function(_super){__extends(MiniLobbyGrid,_super);function MiniLobbyGrid(main,w,h,col){var _this=_super.call(this,main)||this;_this.viewW=w;_this.viewH=h;_this.dis=10;_this.col=col;_this.items=[];_this.tableMap=[];return _this;}
MiniLobbyGrid.prototype.clear=function(){this.tableMap={};while(this.items.length){var item=this.items.pop();if(!item)
continue;this.removeChild(item);component.VComponentUtils.deepClean(item);}};MiniLobbyGrid.prototype.setTableIds=function(pids){var arr=[];var pushedMap={};var studioOrder=game.GameSettings.CONFIG.studioLobbyOrder;for(var k=0;k<studioOrder.length;k++){var studio=studioOrder[k];arr[studio]=[];}
for(var i=0;i<pids.length;i++){if(game.netdata.ShowLobbyResponse.getDisplayStatus(game.GlobalVals.lobbyResponse,pids[i])!=1)
continue;if(!game.netdata.LimitsResponse.getLimitContent(game.GlobalVals.limitsResponse,pids[i]).limits.length)
continue;var activeGroup=game.GameUtils.getTableGroup(pids[i]);if(activeGroup){if(pushedMap[core.VUtils.getObjKey(activeGroup)])
continue;pushedMap[core.VUtils.getObjKey(activeGroup)]=true;}
arr[game.GameUtils.getStudio(pids[i])].push(game.GameSettings.TABLE_INFOS[pids[i]]);}
var infos=[];for(var k=0;k<studioOrder.length;k++)
infos=infos.concat(arr[studioOrder[k]]);this.clear();this.initItems(infos,this.dis);};MiniLobbyGrid.prototype.initItems=function(arr,posY){var dis=this.dis;for(var i=0;i<arr.length;i++){if(!arr[i])
continue;var item=this.createItem(arr[i]);this.addChild(item);item.x=dis+(i%this.col)*(item.bg.width+dis);item.y=posY+Math.floor(i/this.col)*(item.bg.height+dis);this.items.push(item);this.tableMap[arr[i].id]=item;item.initTrends();}};MiniLobbyGrid.prototype.onShowLobby=function(data){};MiniLobbyGrid.prototype.createItem=function(info){var w=(this.viewW-(this.col+1)*this.dis)/this.col;var h=110;switch(info.gameId){case game.GameID.BACCARAT:case game.GameID.BACCARAT_NONCOMMISSION:case game.GameID.BACCARAT_SUPER98:case game.GameID.FABULOUS:case game.GameID.SQUEEZE_BACCARAT:case game.GameID.SQUEEZE_BACCARAT_NONCOMMISSION:case game.GameID.BACCARAT_CINEMATIC:return new singleview.BacMiniLobbyItem(this.main,info,w,h);case game.GameID.LUCKY_BACCARAT:return new singleview.LuckMiniLobbyItem(this.main,info,w,h);case game.GameID.DRAGON_TIGER:return new singleview.DraMiniLobbyItem(this.main,info,w,h);case game.GameID.ROULETTE:case game.GameID.ROULETTE_CINEMATIC:return new singleview.RouMiniLobbyItem(this.main,info,w,h);case game.GameID.SICBO:return new singleview.SicMiniLobbyItem(this.main,info,w,h);case game.GameID.SEVEN_UP:return new singleview.SevMiniLobbyItem(this.main,info,w,h);case game.GameID.BULL_FIGHT:return new singleview.BullMiniLobbyItem(this.main,info,w,h);case game.GameID.SUPER_HI_LO:return new singleview.HiLoMiniLobbyItem(this.main,info,w,h);case game.GameID.SUPER_3PICTURES:return new singleview.S3PMiniLobbyItem(this.main,info,w,h);case game.GameID.SUPER_FANTAN:return new singleview.SFMiniLobbyItem(this.main,info,w,h);default:return new singleview.BacMiniLobbyItem(this.main,info,w,h);}};MiniLobbyGrid.prototype.onCommitSucceedAll=function(data){var trendItem=new game.netdata.TrendsItem();core.VUtils.copy(data.content,trendItem);if(!this.tableMap[data.content.table])
return;var item=this.tableMap[data.content.table];item.addTrend(trendItem);};MiniLobbyGrid.prototype.onEnterGame=function(){};MiniLobbyGrid.prototype.onHistory100=function(data){if(!this.tableMap[data.content.table])
return;var item=this.tableMap[data.content.table];item.initTrends();};return MiniLobbyGrid;}(game.MainObject));singleview.MiniLobbyGrid=MiniLobbyGrid;})(singleview||(singleview={}));var singleview;(function(singleview){var RouMiniLobbyItem=(function(_super){__extends(RouMiniLobbyItem,_super);function RouMiniLobbyItem(main,info,w,h){return _super.call(this,main,info,w,h)||this;}
RouMiniLobbyItem.prototype.initView=function(){_super.prototype.initView.call(this);this.maxItem=3;this.trendCon=new singleview.BaseTrendCon(this.main,singleview.RouTrendItem,this.viewW,this.viewH-this.titleH);this.addChild(this.trendCon);};RouMiniLobbyItem.prototype.addTrend=function(item){var arr=game.GlobalVals.trendDataMap[this.info.id].trendHis100Arr;var index=arr.length-this.maxItem;this.trendCon.updateTrends(arr.slice(index>0?index:0,arr.length));};RouMiniLobbyItem.prototype.doInitTrends=function(){if(!game.GlobalVals.trendDataMap[this.info.id])
return;this.trendCon.clear();var arr=game.GlobalVals.trendDataMap[this.info.id].trendHis100Arr;var index=arr.length-this.maxItem;this.trendCon.updateTrends(arr.slice(index>=0?index:0,arr.length));};return RouMiniLobbyItem;}(singleview.BaseMiniLobbyItem));singleview.RouMiniLobbyItem=RouMiniLobbyItem;})(singleview||(singleview={}));var singleview;(function(singleview){var RouTrendItem=(function(_super){__extends(RouTrendItem,_super);function RouTrendItem(){var _this=_super.call(this,null)||this;_this.tf1=game.GameUtils.createNormalText("",12);_this.addChild(_this.tf1);_this.tf2=game.GameUtils.createNormalText("",12);_this.addChild(_this.tf2);return _this;}
RouTrendItem.prototype.setSize=function(main,w,h){this.main=main;this.gameModel=main.gameModel;this.viewW=w;this.viewH=h;if(!this.bg){this.bg=new PIXI.Graphics();this.addChild(this.bg);this.bg.lineStyle(1,0x4D463E);this.bg.moveTo(0,this.viewH-1);this.bg.lineTo(this.viewW,this.viewH-1);}
this.tf1.anchor.y=0.5;this.tf1.x=4;this.tf1.y=this.viewH*0.5;this.tf2.anchor.y=0.5;this.tf2.y=this.viewH*0.5;this.tf2.x=this.viewW-35;if(this.icon)
this.removeChild(this.icon);this.icon=new roulette.TrendDettailIcon(this.viewH*0.7,this.viewH*0.5);this.icon.y=(this.viewH-this.icon.height)/2-1;this.addChild(this.icon);return this;};RouTrendItem.prototype.setData=function(info){this.tf1.text=info.shoe+" - "+info.round;this.tf2.text=parseInt(info.cards)%2==0?game.GameText.EVEN:game.GameText.ODD;this.icon.setData(info);var pos=0;if(info.result.charAt(roulette.ResultType.TIE)=='1')
pos=1;else if(info.result.charAt(roulette.ResultType.RED)=='1')
pos=2;this.icon.x=50+(this.icon.width+2)*pos;};return RouTrendItem;}(game.MainObject));singleview.RouTrendItem=RouTrendItem;})(singleview||(singleview={}));var singleview;(function(singleview){var S3PMiniLobbyItem=(function(_super){__extends(S3PMiniLobbyItem,_super);function S3PMiniLobbyItem(main,info,w,h){return _super.call(this,main,info,w,h)||this;}
S3PMiniLobbyItem.prototype.initView=function(){_super.prototype.initView.call(this);this.maxItem=15;this.trendCon=new super_3pictures.TrendContainer(this.gameModel,super_3pictures.TrendIcon,this.viewW,this.viewH-this.titleH,6,this.info.hint,false,70,80,0);this.trendCon.expandBtn.visible=false;var trendc=this.trendCon;trendc.nameTf.style.fontSize=20;trendc.nameTf.text=game.GameText.BIG_ROAD;this.addChild(this.trendCon);};S3PMiniLobbyItem.prototype.addTrend=function(item){this.trendCon.addTrend(item,true);this.trendCon.blinkExIcon();};S3PMiniLobbyItem.prototype.doInitTrends=function(){if(!game.GlobalVals.trendDataMap[this.info.id])
return;var arr=game.GlobalVals.trendDataMap[this.info.id].trendArr;arr=this.extractTrends(arr);var index=arr.length-this.maxItem;this.trendCon.clear();this.trendCon.updateTrends(arr.slice(index>=0?index:0,arr.length));};S3PMiniLobbyItem.prototype.extractTrends=function(values){var start=0;for(var i=0;i<values.length;i++){if(values[i].round==1){start=i;break;}}
return values.slice(start,values.length);};return S3PMiniLobbyItem;}(singleview.BaseMiniLobbyItem));singleview.S3PMiniLobbyItem=S3PMiniLobbyItem;})(singleview||(singleview={}));var singleview;(function(singleview){var SevMiniLobbyItem=(function(_super){__extends(SevMiniLobbyItem,_super);function SevMiniLobbyItem(main,info,w,h){return _super.call(this,main,info,w,h)||this;}
SevMiniLobbyItem.prototype.initView=function(){_super.prototype.initView.call(this);this.trendCon=new seven_up.GenTrendContainer(this.gameModel,seven_up.GenTrendIcon,this.viewW,this.viewH-this.titleH,6,this.info.hint,false,70,80,0);var trendc=this.trendCon;trendc.nameTf.style.fontSize=20;trendc.nameTf.text=game.GameText.BIG_ROAD;this.trendCon.expandBtn.visible=false;this.addChild(this.trendCon);};SevMiniLobbyItem.prototype.addTrend=function(item){this.trendCon.addTrend(item,true);this.trendCon.blinkExIcon();};SevMiniLobbyItem.prototype.doInitTrends=function(){var arr=game.GlobalVals.trendDataMap[this.info.id].trendArr;var num=40;this.trendCon.updateTrends(arr.slice(arr.length-num>0?arr.length-num:0,arr.length));};return SevMiniLobbyItem;}(singleview.BaseMiniLobbyItem));singleview.SevMiniLobbyItem=SevMiniLobbyItem;})(singleview||(singleview={}));var singleview;(function(singleview){var SFMiniLobbyItem=(function(_super){__extends(SFMiniLobbyItem,_super);function SFMiniLobbyItem(main,info,w,h){return _super.call(this,main,info,w,h)||this;}
SFMiniLobbyItem.prototype.initView=function(){_super.prototype.initView.call(this);this.maxItem=3;this.trendCon=new singleview.BaseTrendCon(this.main,singleview.SFTrendItem,this.viewW,this.viewH-this.titleH);this.addChild(this.trendCon);};SFMiniLobbyItem.prototype.addTrend=function(item){var arr=game.GlobalVals.trendDataMap[this.info.id].trendHis100Arr;var index=arr.length-this.maxItem;this.trendCon.updateTrends(arr.slice(index>0?index:0,arr.length));};SFMiniLobbyItem.prototype.doInitTrends=function(){if(!game.GlobalVals.trendDataMap[this.info.id])
return;this.trendCon.clear();var arr=game.GlobalVals.trendDataMap[this.info.id].trendHis100Arr;var index=arr.length-this.maxItem;this.trendCon.updateTrends(arr.slice(index>=0?index:0,arr.length));};return SFMiniLobbyItem;}(singleview.BaseMiniLobbyItem));singleview.SFMiniLobbyItem=SFMiniLobbyItem;})(singleview||(singleview={}));var singleview;(function(singleview){var SFTrendItem=(function(_super){__extends(SFTrendItem,_super);function SFTrendItem(){var _this=_super.call(this,null)||this;_this.tf1=game.GameUtils.createNormalText("",12);_this.addChild(_this.tf1);_this.tf2=game.GameUtils.createNormalText("",12);_this.addChild(_this.tf2);return _this;}
SFTrendItem.prototype.setSize=function(main,w,h){this.main=main;this.gameModel=main.gameModel;this.viewW=w;this.viewH=h;this.tf1.anchor.y=0.5;this.tf1.x=this.viewW*0.5;this.tf1.anchor.x=0.5;this.tf1.y=this.viewH*0.5;this.tf2.anchor.y=0.5;this.tf2.y=this.viewH*0.5;this.tf2.x=this.viewW-5;this.tf2.anchor.x=1;if(this.icon)
this.removeChild(this.icon);this.icon=new super_fantan.GenTrendIcon();this.icon.setType(game.TrendType.NORMAL);this.icon.x=14;this.icon.y=14;this.addChild(this.icon);return this;};SFTrendItem.prototype.setData=function(info){var total=this.getCardVal(info.cards.toString().split('#').join(''));var size;var color;if(total<42){size=game.GameText.SMALL;color=0x2a8fbd;}
else if(total>42){size=game.GameText.BIG;color=0xc6001e;}
else{size=game.GameText.TIE;color=0x007236;}
this.tf1.style.fill=color;this.tf2.style.fill=color;this.tf1.text=total.toString();this.tf2.text=size;this.icon.draw(info);};SFTrendItem.prototype.getCardVal=function(cards){if(!cards)
return 0;var card;var val=0;for(var i=0;i<cards.length/2;i++){card=cards[i*2+1];if(card=='B')
val+=0;else
val+='TJQK'.indexOf(card)>=0?10+'TJQK'.indexOf(card):(card=='A'?1:parseInt(card));}
return val;};return SFTrendItem;}(game.MainObject));singleview.SFTrendItem=SFTrendItem;})(singleview||(singleview={}));var singleview;(function(singleview){var SicMiniLobbyItem=(function(_super){__extends(SicMiniLobbyItem,_super);function SicMiniLobbyItem(main,info,w,h){return _super.call(this,main,info,w,h)||this;}
SicMiniLobbyItem.prototype.initView=function(){_super.prototype.initView.call(this);this.maxItem=3;this.trendCon=new singleview.BaseTrendCon(this.main,singleview.SicTrendItem,this.viewW,this.viewH-this.titleH);this.addChild(this.trendCon);};SicMiniLobbyItem.prototype.addTrend=function(item){var arr=game.GlobalVals.trendDataMap[this.info.id].trendHis100Arr;var index=arr.length-this.maxItem;this.trendCon.updateTrends(arr.slice(index>0?index:0,arr.length));};SicMiniLobbyItem.prototype.doInitTrends=function(){if(!game.GlobalVals.trendDataMap[this.info.id])
return;this.trendCon.clear();var arr=game.GlobalVals.trendDataMap[this.info.id].trendHis100Arr;var index=arr.length-this.maxItem;this.trendCon.updateTrends(arr.slice(index>=0?index:0,arr.length));};return SicMiniLobbyItem;}(singleview.BaseMiniLobbyItem));singleview.SicMiniLobbyItem=SicMiniLobbyItem;})(singleview||(singleview={}));var singleview;(function(singleview){var SicTrendItem=(function(_super){__extends(SicTrendItem,_super);function SicTrendItem(){var _this=_super.call(this,null)||this;_this.tf1=game.GameUtils.createNormalText("",12);_this.addChild(_this.tf1);_this.tf2=game.GameUtils.createNormalText("",12);_this.addChild(_this.tf2);return _this;}
SicTrendItem.prototype.setSize=function(main,w,h){this.main=main;this.gameModel=main.gameModel;this.viewW=w;this.viewH=h;if(!this.bg){this.bg=new PIXI.Graphics();this.addChild(this.bg);this.bg.lineStyle(1,0x4D463E);this.bg.moveTo(0,this.viewH-1);this.bg.lineTo(this.viewW,this.viewH-1);}
this.tf1.anchor.y=0.5;this.tf1.x=90;this.tf1.y=this.viewH*0.5;this.tf2.anchor.y=0.5;this.tf2.y=this.viewH*0.5;this.tf2.x=this.viewW-40;this.dices=[];for(var i=0;i<3;i++){var dice=new PIXI.Sprite();this.addChild(dice);this.dices.push(dice);this.dices[i].texture=PIXI.Texture.fromFrame('sic_live_dice_1.png');dice.scale.y=this.viewH*0.7/dice.height;dice.scale.x=dice.scale.y;dice.x=4+(dice.width+2)*i;dice.y=(this.viewH-dice.height)/2-1;}
return this;};SicTrendItem.prototype.setData=function(info){var arr=info.cards.split("");var num=parseInt(arr[0])+parseInt(arr[1])+parseInt(arr[2]);this.tf1.text=num.toString();for(var i=0;i<arr.length;i++){this.dices[i].texture=PIXI.Texture.fromFrame('sic_live_dice_'+arr[i]+'.png');}
if(arr[0]==arr[1]&&arr[1]==arr[2]){this.tf1.style.fill=game.TrendIconUtils.GREEN;this.tf2.style.fill=game.TrendIconUtils.GREEN;this.tf2.text=game.GameText.TRIPLE;}
else{this.tf2.text=num>10?game.GameText.BIG:game.GameText.SMALL;this.tf1.style.fill=num>10?game.TrendIconUtils.RED:game.TrendIconUtils.BLUE;this.tf2.style.fill=num>10?game.TrendIconUtils.RED:game.TrendIconUtils.BLUE;}};return SicTrendItem;}(game.MainObject));singleview.SicTrendItem=SicTrendItem;})(singleview||(singleview={}));
//_e_